[{"categories":null,"content":"ä»‹ç» åœ¨ éé˜»å¡ I/O è¶…ç®€æ˜ä»‹ç» ä¸­ï¼Œ æˆ‘ä»¬å·²ç»è®¨è®ºè¿‡ç°ä»£ Web æœåŠ¡å™¨å¯ä»¥å¤„ç†å¤§é‡å¹¶å‘è¯·æ±‚ï¼Œè¿™å¾—ç›Šäºç°ä»£æ“ä½œç³»ç»Ÿå†…æ ¸å†…ç½®çš„äº‹ä»¶é€šçŸ¥æœºåˆ¶ã€‚ å— Linux epoll [ æ–‡æ¡£ ] å¯å‘ï¼Œ FreeBSD å‘æ˜äº† kqueue [ è®ºæ–‡ , æ–‡æ¡£ ]\nè¿™ç¯‡æ–‡ç« æˆ‘ä»¬å°†ä»”ç»†ç ”ç©¶ä¸‹ kqueueï¼Œæˆ‘ä»¬ä¼šç”¨ Go å®ç°ä¸€ä¸ªåŸºäº kqueue event loop çš„ TCP serverï¼Œ ä½ å¯ä»¥åœ¨ Github ä¸Šæ‰¾åˆ° æºä»£ç  ã€‚ è¦è¿è¡Œä»£ç å¿…é¡»ä½¿ç”¨å’Œ FreeBSD å…¼å®¹çš„æ“ä½œç³»ç»Ÿï¼Œæ¯”å¦‚ macOSã€‚\næ³¨æ„ kqueue ä¸ä»…èƒ½å¤„ç† socket eventï¼Œè€Œä¸”è¿˜èƒ½å¤„ç†æ–‡ä»¶æè¿°ç¬¦ eventã€ä¿¡å·ã€å¼‚æ­¥ I/O eventã€å­è¿›ç¨‹çŠ¶æ€æ”¹å˜ eventã€ å®šæ—¶å™¨ä»¥åŠç”¨æˆ·è‡ªå®šä¹‰ eventã€‚å®ƒç¡®å®é€šç”¨å’Œå¼ºå¤§ã€‚\næˆ‘ä»¬è¿™ç¯‡æ–‡ç« ä¸»è¦åˆ†ä¸ºä¸€ä¸‹å‡ éƒ¨åˆ†è®²è§£ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬ä¼šåœ¨å…ˆä»ç†è®ºå‡ºå‘è®¾è®¡æˆ‘ä»¬çš„ TCP Serverã€‚ ç„¶åï¼Œæˆ‘ä»¬ä¼šå»å®ç°å®ƒçš„å¿…è¦çš„æ¨¡å—ã€‚ æœ€åæˆ‘ä»¬ä¼šå¯¹æ•´ä¸ªè¿‡ç¨‹è¿›è¡Œæ€»ç»“ä»¥åŠæ€è€ƒã€‚\nè®¾è®¡ æˆ‘ä»¬ TCP Server å¤§æ¦‚æœ‰ä»¥ä¸‹å‡ éƒ¨åˆ†ï¼š ä¸€ä¸ªç›‘å¬ TCP çš„ socketã€ æ¥æ”¶å®¢æˆ·ç«¯è¿æ¥çš„ socketã€ ä¸€ä¸ªå†…æ ¸äº‹ä»¶é˜Ÿåˆ—ï¼ˆkqueueï¼‰ï¼Œ è¿˜æœ‰ä¸€ä¸ªäº‹ä»¶å¾ªç¯æœºåˆ¶æ¥è½®è¯¢è¿™ä¸ªé˜Ÿåˆ—ã€‚ ä¸‹é¢è¿™ä¸ªå›¾æè¿°äº†æ¥æ”¶è¿æ¥çš„åœºæ™¯ã€‚\nå½“å®¢æˆ·ç«¯æƒ³è¦è¿æ¥æœåŠ¡ç«¯ï¼Œä¸€ä¸ªè¿æ¥è¯·æ±‚å°†ä¼šè¢«æ”¾åˆ° TCP è¿æ¥é˜Ÿåˆ—ä¸­ï¼Œ è€Œå†…æ ¸ä¼šå°†ä¸€ä¸ªæ–°çš„äº‹ä»¶æ”¾åˆ° kqueue ä¸­ã€‚ è¿™ä¸ªäº‹ä»¶å°†ä¼šåœ¨äº‹ä»¶å¾ªç¯æ—¶è¢«å¤„ç†ï¼Œäº‹ä»¶å¾ªç¯ä¼šæ¥å—è¯·æ±‚ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„å®¢æˆ·ç«¯è¿æ¥ã€‚ ä¸‹é¢è¿™ä¸ªå›¾æè¿°äº†æ–°åˆ›å»ºçš„ socket å¦‚ä½•ä»å®¢æˆ·ç«¯è¯»å–è¯·æ±‚ã€‚\nå®¢æˆ·ç«¯å†™æ•°æ®åˆ°æ–°åˆ›å»ºçš„ socketï¼Œå†…æ ¸ä¼šå°†ä¸€ä¸ªæ–° event æ”¾åˆ° kqueue ä¸­ï¼Œè¡¨ç¤ºåœ¨è¿™ä¸ª socket ä¸­æœ‰ç­‰å¾…è¯»å–çš„æ•°æ®ã€‚ äº‹ä»¶å¾ªç¯å°†è½®è¯¢åˆ°è¿™ä¸ªäº‹ä»¶ï¼Œå¹¶ä» socket è¯»å–æ•°æ®ã€‚ æ³¨æ„åªæœ‰ä¸€ä¸ª socket ç›‘å¬è¿æ¥ï¼Œè€Œæˆ‘ä»¬å°†ä¸ºæ¯ä¸€ä¸ªå®¢æˆ·ç«¯è¿æ¥åˆ›å»ºæ–°çš„ socketã€‚\nä¸‹æ–‡è¦è®¨è®ºå®ç°ç»†èŠ‚ï¼Œå¯ä»¥å¤§æ¦‚æŒ‰ç…§ä¸‹é¢çš„æ­¥éª¤å®ç°æˆ‘ä»¬çš„è®¾è®¡ã€‚\n1 åˆ›å»ºï¼Œç»‘å®šä»¥åŠç›‘å¬æ–°çš„ socket 2 åˆ›å»º kqueue 3 è®¢é˜… socket event 4 å¾ªç¯é˜Ÿåˆ—è·å– event å¹¶å¤„ç†å®ƒä»¬\nå®ç° ä¸ºäº†é¿å…å•ä¸ªæ–‡ä»¶æœ‰å¤§é‡ç³»ç»Ÿè°ƒç”¨ï¼Œæˆ‘ä»¬æ‹†åˆ†æˆå‡ ä¸ªä¸åŒæ¨¡å—ï¼š\n ä¸€ä¸ª socket æ¨¡å—æ¥å¤„ç†æ‰€æœ‰ç®¡ç† socket çš„ç›¸å…³åŠŸèƒ½ï¼Œ ä¸€ä¸ª kqueue æ¨¡å—æ¥å¤„ç†äº‹ä»¶å¾ªç¯ï¼Œ æœ€å main æ¨¡å—ç”¨æ¥æ•´åˆæ‰€æœ‰æ¨¡å—å¹¶å¯åŠ¨æˆ‘ä»¬çš„ TCP serverã€‚  æˆ‘ä»¬ä¸‹é¢ä» socket æ¨¡å—å¼€å§‹ã€‚\nå®šä¹‰ Socket é¦–å…ˆï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª socket ç»“æ„ä½“ã€‚ç±» Unix æ“ä½œç³»ç»Ÿï¼Œæ¯”å¦‚ FreeBSDï¼Œä¼šæŠŠ socket ä½œä¸ºæ–‡ä»¶ã€‚ ä¸ºäº†ç”¨ Go å®ç° socketï¼Œæˆ‘ä»¬éœ€è¦äº†è§£ æ–‡ä»¶æè¿°ç¬¦ã€‚ æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªç±»ä¼¼ä¸‹é¢å¸¦æœ‰æ–‡ä»¶æè¿°ç¬¦çš„ç»“æ„ä½“ã€‚\n1 2 3 4 5  type Socket struct { FileDescriptor int }   æˆ‘ä»¬æœŸæœ›æˆ‘ä»¬çš„ socket å¯ä»¥åº”å¯¹ä¸åŒçš„åœºæ™¯ï¼Œæ¯”å¦‚ï¼šè¯»ã€å†™ socket æ•°æ®ï¼Œä»¥åŠå…³é—­ socketã€‚ åœ¨ Go ä¸­ï¼Œè¦æ”¯æŒè¿™äº›æ“ä½œï¼Œéœ€è¦å®ç°é€šç”¨çš„ interfaceï¼Œæ¯”å¦‚ io.Readerï¼Œio.Writerï¼Œè¿˜æœ‰ io.Closer\né¦–å…ˆï¼Œå®ç° io.Reader è¿™ä¸ªæ¥å£ï¼Œä»–ä¼šè°ƒç”¨ read() ç³»ç»Ÿå‡½æ•°ã€‚ è¿™ä¸ªå‡½æ•°ä¼šè¿”å›è¯»åˆ°å­—èŠ‚çš„æ•°é‡ï¼Œä»¥åŠè¿›è¡Œè¯»æ“ä½œæ—¶å¯èƒ½å‘ç”Ÿçš„é”™è¯¯ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13  func (socket Socket) Read(bytes []byte) (int, error) { if len(bytes) == 0 { return 0, nil } numBytesRead, err := syscall.Read(socket.FileDescriptor, bytes) if err != nil { numBytesRead = 0 } return numBytesRead, err }   ç±»ä¼¼çš„ï¼Œæˆ‘ä»¬é€šè¿‡è°ƒç”¨ write() æ¥å®ç° io.Writer æ¥å£ã€‚\n1 2 3 4 5 6 7 8 9  func (socket Socket) Write(bytes []byte) (int, error) { numBytesWritten, err := syscall.Write(socket.FileDescriptor, bytes) if err != nil { numBytesWritten = 0 } return numBytesWritten, err }   æœ€åå…³é—­ socket å¯ä»¥è°ƒç”¨ close() ï¼Œå¹¶ä¼ å…¥ socket å¯¹åº”çš„æ–‡ä»¶æè¿°ç¬¦ã€‚\n1 2 3  func (socket *Socket) Close() error { return syscall.Close(socket.FileDescriptor) }   ä¸ºäº†ç¨åèƒ½æ‰“å°ä¸€äº›æœ‰ç”¨çš„é”™è¯¯å’Œæ—¥å¿—ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦å®ç° fmt.Stringer æ¥å£ã€‚ æˆ‘ä»¬é€šè¿‡ä¸åŒçš„æ–‡ä»¶æè¿°ç¬¦æ¥åŒºåˆ†ä¸åŒçš„ socketã€‚\n1 2 3  func (socket *Socket) String() string { return strconv.Itoa(socket.FileDescriptor) }   ç›‘å¬ä¸€ä¸ª Socket å®šä¹‰å¥½ Socket ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦åˆå§‹åŒ–å®ƒï¼Œå¹¶è®©å®ƒä¸€ä¸ªç›‘å¬ç‰¹å®š IP å’Œ ç«¯å£çš„ã€‚ ç›‘å¬ä¸€ä¸ª socket ä¹Ÿå¯ä»¥é€šè¿‡ä¸€äº›ç³»ç»Ÿå‡½æ•°æ¥å®ç°ã€‚ ç°åœ¨å…ˆæ•´ä½“çœ‹ä¸€ä¸‹æˆ‘ä»¬å®ç°çš„ Listen() æ–¹æ³•ï¼Œç„¶åå†ä¸€æ­¥æ­¥è¿›è¡Œåˆ†æã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23  func Listen(ip string, port int) (*Socket, error) { socket := \u0026Socket{} socketFileDescriptor, err := syscall.Socket(syscall.AF_INET, syscall.SOCK_STREAM, 0) if err != nil { return nil, fmt.Errorf(\"failed to create socket (%v)\", err) } socket.FileDescriptor = socketFileDescriptor socketAddress := \u0026syscall.SockaddrInet4{Port: port} copy(socketAddress.Addr[:], net.ParseIP(ip)) if err = syscall.Bind(socket.FileDescriptor, socketAddress); err != nil { return nil, fmt.Errorf(\"failed to bind socket (%v)\", err) } if err = syscall.Listen(socket.FileDescriptor, syscall.SOMAXCONN); err != nil { return nil, fmt.Errorf(\"failed to listen on socket (%v)\", err) } return socket, nil }   é¦–å…ˆè°ƒç”¨äº† socket() å‡½æ•°ï¼Œ è¿™å°†ä¼šåˆ›å»ºé€šä¿¡çš„æ¥å…¥ç‚¹ï¼Œå¹¶è¿”å›æè¿°ç¬¦ç¼–å·ã€‚ å®ƒéœ€è¦ 3 ä¸ªå‚æ•°ï¼š\n åœ°å€ç±»å‹ï¼šæˆ‘ä»¬ç”¨çš„æ˜¯ AF_INET (IPv4) socket ç±»å‹ï¼šæˆ‘ä»¬ç”¨ SOCKET_STREAMï¼Œä»£è¡¨åŸºäºå­—èŠ‚æµè¿ç»­ã€å¯é çš„åŒå‘è¿æ¥ã€‚ åè®®ç±»å‹ï¼š0 åœ¨ SOCKET_STREAM ç±»å‹ä¸‹ä»£è¡¨çš„æ˜¯ TCPã€‚  ç„¶åï¼Œæˆ‘ä»¬è°ƒç”¨äº† bind() æ–¹æ³•æ¥æŒ‡å®šæ–°åˆ›å»º socket çš„åè®®åœ°å€ã€‚ bind() æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ–‡ä»¶æè¿°ç¬¦ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯åŒ…å«åœ°å€ä¿¡æ¯çš„ç»“æ„ä½“æŒ‡é’ˆã€‚ æˆ‘ä»¬åœ¨è¿™é‡Œä½¿ç”¨äº† Go é¢„å®šä¹‰çš„ SockaddrInet4 ç»“æ„ä½“ï¼Œå¹¶æŒ‡å®šè¦ç»‘å®šçš„ IP åœ°å€å’Œç«¯å£ã€‚\næœ€åï¼Œæˆ‘ä»¬è°ƒç”¨äº† listen() æ–¹æ³•ï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½ç­‰å¾…æ¥æ”¶è¿æ¥äº†ã€‚ å®ƒçš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯è¿æ¥è¯·æ±‚é˜Ÿåˆ—çš„æœ€å¤§é•¿åº¦ã€‚ æˆ‘ä»¬ä½¿ç”¨äº†å†…æ ¸å‚æ•° SOMAXCONN ï¼Œåœ¨æˆ‘çš„ Mac ä¸Šé»˜è®¤æ˜¯ 128ã€‚ ä½ å¯ä»¥é€šè¿‡æ‰§è¡Œ sysctl kern.ipc.somaxconn æ¥è·å–è¿™ä¸ªå€¼ã€‚\nå®šä¹‰äº‹ä»¶å¾ªç¯ åŒæ ·çš„ï¼Œæˆ‘ä»¬å°†å®šä¹‰ä¸€ä¸ªç»“æ„ä½“æ¥è¡¨ç¤º kqueue çš„äº‹ä»¶å¾ªç¯ã€‚ æˆ‘ä»¬å¿…é¡»è¦ä¿å­˜ kqueue çš„æ–‡ä»¶æè¿°ç¬¦ä»¥åŠ socket çš„æ–‡ä»¶æè¿°ç¬¦, æˆ‘ä»¬å½“ç„¶ä¹Ÿèƒ½å°†æˆ‘ä»¬å‰é¢å®šä¹‰çš„ socket å¯¹è±¡ä½œä¸ºæŒ‡é’ˆæ¥æ›¿ä»£ SocketFileDescriptorã€‚\n1 2 3 4 5 6  type EventLoop struct { KqueueFileDescriptor int SocketFileDescriptor int }   æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå‡½æ•°æ ¹æ®æˆ‘ä»¬æä¾›çš„ socket åˆ›å»ºä¸€ä¸ªäº‹ä»¶å¾ªç¯ã€‚ å’Œä¹‹å‰ä¸€æ ·ï¼Œæˆ‘ä»¬éœ€è¦ç”¨ä¸€ç³»åˆ—ç³»ç»Ÿå‡½æ•°å»åˆ›å»º Kqueueã€‚ æˆ‘ä»¬è¿˜æ˜¯å…ˆçœ‹ä¸‹æ•´ä¸ªå‡½æ•°ï¼Œç„¶åå†ä¸€æ­¥æ­¥æ‹†è§£æ¥çœ‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34  func NewEventLoop(s *socket.Socket) (*EventLoop, error) { kQueue, err := syscall.Kqueue() if err != nil { return nil, fmt.Errorf(\"failed to create kqueue file descriptor (%v)\", err) } changeEvent := syscall.Kevent_t{ Ident: uint64(s.FileDescriptor), Filter: syscall.EVFILT_READ, Flags: syscall.EV_ADD | syscall.EV_ENABLE, Fflags: 0, Data: 0, Udata: nil, } changeEventRegistered, err := syscall.Kevent( kQueue, []syscall.Kevent_t{changeEvent}, nil, nil ) if err != nil || changeEventRegistered == -1 { return nil, fmt.Errorf(\"failed to register change event (%v)\", err) } return \u0026EventLoop{ KqueueFileDescriptor: kQueue, SocketFileDescriptor: s.FileDescriptor }, nil }   ç¬¬ä¸€ä¸ªç³»ç»Ÿå‡½æ•° kqueue() åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å†…æ ¸äº‹ä»¶é˜Ÿåˆ—ï¼Œå¹¶ä¸”è¿”å›äº†å®ƒçš„æ–‡ä»¶æè¿°ç¬¦ã€‚ æˆ‘ä»¬ç­‰ä¼šè°ƒç”¨ kevent() çš„æ—¶å€™ä¼šç”¨åˆ°è¿™ä¸ªé˜Ÿåˆ—ã€‚ kevent() æœ‰ä¸¤ä¸ªåŠŸèƒ½ï¼Œè®¢é˜…æ–°äº‹ä»¶å’Œè½®è¯¢é˜Ÿåˆ—ã€‚\næˆ‘ä»¬çš„ä¾‹å­æ˜¯è¦è®¢é˜…ä¼ å…¥è¿æ¥çš„äº‹ä»¶ï¼Œ å¯ä»¥é€šè¿‡ä¼ é€’ kevent ç»“æ„ä½“ï¼ˆåœ¨ Go ä¸­ï¼Œç”¨ Kevent_t è¡¨ç¤ºï¼‰ç»™ kevent() è¿™ä¸ªç³»ç»Ÿå‡½æ•°æ¥å®ç°è®¢é˜…ã€‚ Kevent_t éœ€è¦åŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼š\n Ident çš„æ–‡ä»¶æè¿°ç¬¦ï¼šå€¼æ˜¯æˆ‘ä»¬ socket çš„æ–‡ä»¶æè¿°ç¬¦ å¤„ç†äº‹ä»¶çš„ Filterï¼šè®¾ç½®ä¸º EVFILT_READï¼Œå½“å’Œç›‘å¬ socket ä¸€èµ·ç”¨æ—¶ï¼Œå®ƒä»£è¡¨æˆ‘ä»¬åªå…³å¿ƒä¼ å…¥è¿æ¥çš„äº‹ä»¶ã€‚ ä»£è¡¨å¯¹è¿™ä¸ªäº‹ä»¶è¦æ‰§è¡Œæ“ä½œçš„ Flagï¼šåœ¨æˆ‘ä»¬ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æƒ³è¦æ·»åŠ ï¼ˆEV_ADDï¼‰äº‹ä»¶åˆ° kqueueï¼Œæ¯”å¦‚è¯´è®¢é˜…äº‹ä»¶ï¼ŒåŒæ—¶è¦å¯ç”¨ï¼ˆEV_ENABLEï¼‰å®ƒã€‚Flag å¯ä»¥ä½¿ç”¨ æˆ– è¿™ä¸ªä½æ“ä½œè¿›è¡Œç»“åˆã€‚  å…¶ä»–çš„å‡ ä¸ªå‚æ•°æˆ‘ä»¬å°±ä¸éœ€è¦äº†ï¼Œåˆ›å»ºå¥½è¿™ä¸ªäº‹ä»¶ä¹‹åï¼Œè¦æŠŠå®ƒç”¨ä¸€ä¸ªæ•°ç»„åŒ…è£¹ï¼Œå¹¶ä¼ é€’ç»™ kevent() è¿™ä¸ªç³»ç»Ÿå‡½æ•°ã€‚ æœ€åï¼Œæˆ‘ä»¬è¿”å›è¿™ä¸ªç­‰å¾…è¢«è½®è¯¢çš„äº‹ä»¶å¾ªç¯ã€‚æ¥ä¸‹æ¥è®©æˆ‘ä»¬å®ç°è½®è¯¢çš„å‡½æ•°ã€‚\näº‹ä»¶å¾ªç¯è½®è¯¢ äº‹ä»¶å¾ªç¯æ˜¯ä¸€ä¸ªç®€å•çš„ for å¾ªç¯ï¼Œå¯ä»¥è½®è¯¢æ–°çš„å†…æ ¸äº‹ä»¶å¹¶è¿›è¡Œå¤„ç†ã€‚ ä¹‹å‰ä½¿ç”¨ç³»ç»Ÿå‡½æ•° kevent() æ—¶ï¼Œè®¢é˜…è½®è¯¢å°±å·²ç»å®Œæˆäº†ï¼Œä½†æ˜¯ç°åœ¨æˆ‘ä»¬åˆä¼ é€’ä¸€ä¸ªç©ºçš„äº‹ä»¶æ•°ç»„ç»™å®ƒï¼Œ ç›®çš„æ˜¯å½“æœ‰æ–°çš„äº‹ä»¶æ—¶ï¼Œæ–°çš„äº‹ä»¶ä¼šå¡«å……åˆ°è¿™ä¸ªæ•°ç»„ã€‚\nç„¶åæˆ‘ä»¬å°±å¯ä»¥ä¸€ä¸ªä¸ªå¾ªç¯è¿™äº›äº‹ä»¶å¹¶å¤„ç†å®ƒä»¬äº†ã€‚ æ–°çš„å®¢æˆ·ç«¯è¿æ¥ä¼šè¢«è½¬æ¢æˆå®¢æˆ·ç«¯ socketï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä»å®¢æˆ·ç«¯è¯»å–æˆ–å†™å…¥æ•°æ®ã€‚ ç°åœ¨è®©æˆ‘ä»¬çœ‹ä¸‹ä»£ç å¦‚ä½•å¾ªç¯ä¸åŒçš„äº‹ä»¶ç±»å‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56  func (eventLoop *EventLoop) Handle(handler Handler) { for { newEvents := make([]syscall.Kevent_t, 10) numNewEvents, err := syscall.Kevent( eventLoop.KqueueFileDescriptor, nil, newEvents, nil ) if err != nil { continue } for i := 0; i \u003c numNewEvents; i++ { currentEvent := newEvents[i] eventFileDescriptor := int(currentEvent.Ident) if currentEvent.Flags\u0026syscall.EV_EOF != 0 { // client closing connection  syscall.Close(eventFileDescriptor) } else if eventFileDescriptor == eventLoop.SocketFileDescriptor { // new incoming connection  socketConnection, _, err := syscall.Accept(eventFileDescriptor) if err != nil { continue } socketEvent := syscall.Kevent_t{ Ident: uint64(socketConnection), Filter: syscall.EVFILT_READ, Flags: syscall.EV_ADD, Fflags: 0, Data: 0, Udata: nil, } socketEventRegistered, err := syscall.Kevent( eventLoop.KqueueFileDescriptor, []syscall.Kevent_t{socketEvent}, nil, nil ) if err != nil || socketEventRegistered == -1 { continue } } else if currentEvent.Filter\u0026syscall.EVFILT_READ != 0 { // data available -\u003e forward to handler  handler(\u0026socket.Socket{ FileDescriptor: int(eventFileDescriptor) }) } // ignore all other events  } } }   ç¬¬ä¸€ç§æƒ…å†µï¼Œæˆ‘ä»¬è¦å¤„ç† EV_EOF äº‹ä»¶ï¼Œä»£è¡¨å®¢æˆ·ç«¯æƒ³è¦å…³é—­å®ƒçš„è¿æ¥çš„äº‹ä»¶ã€‚è¿™ç§æƒ…å†µæˆ‘ä»¬ç®€å•çš„å…³é—­äº†å¯¹åº” socket çš„æ–‡ä»¶æè¿°ç¬¦ã€‚\nç¬¬äºŒç§æƒ…å†µä»£è¡¨æˆ‘ä»¬çš„ç›‘å¬ socket æœ‰è¿æ¥è¯·æ±‚ã€‚ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç³»ç»Ÿå‡½æ•° accept() ä» TCP è¿æ¥è¯·æ±‚é˜Ÿåˆ—ä¸­è·å–è¿æ¥è¯·æ±‚ï¼Œ å®ƒä¼šä¸ºç›‘å¬ socket åˆ›å»ºä¸€ä¸ªæ–°çš„å®¢æˆ·ç«¯ socket å’Œæ–°çš„æ–‡ä»¶æè¿°ç¬¦ã€‚ æˆ‘ä»¬ä¸ºè¿™ä¸ªæ–°åˆ›å»ºçš„ socket è®¢é˜…ä¸€ä¸ªæ–°çš„ EVFILT_READ äº‹ä»¶ã€‚ åœ¨æ–°åˆ›å»ºçš„å®¢æˆ·ç«¯ socket ä¸­ï¼Œæ— è®ºä»€ä¹ˆæ—¶å€™æœ‰å¯ä»¥è¯»å–çš„æ•°æ®ï¼Œå°±ä¼šæœ‰ EVFILT_READ äº‹ä»¶å‘ç”Ÿã€‚\nç¬¬ä¸‰ç§æƒ…å†µå°±æ˜¯å¤„ç†åˆšæåˆ°çš„ EVFILT_READ äº‹ä»¶ï¼Œè¿™äº›äº‹ä»¶æœ‰å®¢æˆ·ç«¯ socket çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œ æˆ‘ä»¬å°†å…¶å°è£…åœ¨ Socket å¯¹è±¡ä¸­å¹¶ä¼ é€’ç»™è¦å¤„ç†å®ƒçš„æ–¹æ³•ã€‚\nè¦æ³¨æ„æˆ‘ä»¬çœç•¥ä¸€äº›é”™è¯¯ç„¶åä½¿ç”¨äº†ç®€å•çš„ continue ç»§ç»­æ‰§è¡Œå¾ªç¯ã€‚ç°åœ¨äº‹ä»¶å¾ªç¯å‡½æ•°ä¹Ÿå†™å¥½äº†ï¼Œè®©æˆ‘ä»¬å°†æ‰€æœ‰çš„é€»è¾‘å°è£…åœ¨ main å‡½æ•°ä¸­å¹¶æ‰§è¡Œã€‚\nmain å‡½æ•° å› ä¸ºä¹‹å‰å·²ç»å®šä¹‰å¥½äº† socket å’Œ kqueue æ¨¡å—ï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥éå¸¸å®¹æ˜“åœ°å®ç°æœåŠ¡å™¨ã€‚ æˆ‘ä»¬é¦–å…ˆåˆ›å»ºä¸€ä¸ªç›‘å¬ç‰¹å®š IP åœ°å€å’Œç«¯å£çš„ socketï¼Œç„¶ååŸºäºå®ƒåˆ›å»ºä¸€ä¸ªæ–°çš„äº‹ä»¶å¾ªç¯ï¼Œ æœ€åæˆ‘ä»¬å®šä¹‰å¤„ç†è¾“å‡ºçš„å‡½æ•°ï¼Œæ¥å¼€å¯æˆ‘ä»¬çš„äº‹ä»¶å¾ªç¯ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27  func main() { s, err := socket.Listen(\"127.0.0.1\", 8080) if err != nil { log.Println(\"Failed to create Socket:\", err) os.Exit(1) } eventLoop, err := kqueue.NewEventLoop(s) if err != nil { log.Println(\"Failed to create event loop:\", err) os.Exit(1) } log.Println(\"Server started. Waiting for incoming connections. ^C to exit.\") eventLoop.Handle(func(s *socket.Socket) { reader := bufio.NewReader(s) for { line, err := reader.ReadString('\\n') if err != nil || strings.TrimSpace(line) == \"\" { break } s.Write([]byte(line)) } s.Close() }) }   å¤„ç†å‡½æ•°ä¼šæ ¹æ®æ¢è¡Œç¬¦é€è¡Œè¯»å–æ•°æ®å†…å®¹ï¼Œç›´åˆ°å®ƒè¯»å–åˆ°ç©ºè¡Œï¼Œç„¶åä¼šå…³é—­è¿æ¥ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡ curl æ¥æµ‹è¯•ï¼Œcurl å°†ä¼šå‘é€ä¸€ä¸ª GET è¯·æ±‚ï¼Œå¹¶è¾“å‡ºå“åº”çš„å†…å®¹ï¼Œå“åº”å†…å®¹å…¶å®å°±æ˜¯å®ƒå‘é€çš„ GET è¯·æ±‚ä½“çš„å†…å®¹ã€‚\næ€è€ƒ æˆ‘ä»¬æˆåŠŸç”¨ kqueue å®ç°äº†ä¸€ä¸ªç®€å•çš„ TCP Serverï¼Œå½“ç„¶ï¼Œè¿™ä¸ªä»£ç æƒ³ç”¨äºç”Ÿäº§ç¯å¢ƒè¿˜éœ€è¦åšå¾ˆå¤šå·¥ä½œã€‚ æˆ‘ä»¬ä½¿ç”¨å•è¿›ç¨‹å’Œé˜»å¡ socket è¿è¡Œï¼Œå¦å¤–ï¼Œä¹Ÿæ²¡æœ‰å»å¤„ç†é”™è¯¯ã€‚ å…¶å®å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½¿ç”¨å·²ç»å­˜åœ¨çš„åº“è€Œä¸æ˜¯è‡ªå·±è°ƒç”¨æ“ä½œç³»ç»Ÿå†…æ ¸å‡½æ•°ä¼šæ›´å¥½ã€‚\næ²¡æƒ³åˆ°ç”¨å†…æ ¸æ“ä½œäº‹ä»¶è¿™ä¹ˆéš¾ï¼ŒAPI éå¸¸å¤æ‚ï¼Œè€Œä¸”å¿…é¡»è¦è¯»å¥½å¤šæ–‡æ¡£å»æ‰¾éœ€è¦æ€ä¹ˆåšã€‚ ç„¶è€Œï¼Œè¿™æ˜¯ä¸€ä¸ªæƒŠäººçš„å­¦ä¹ ä½“éªŒã€‚\n via: https://dev.to/frosnerd/writing-a-simple-tcp-server-using-kqueue-cah\nä½œè€…ï¼šFrank Rosner è¯‘è€…ï¼šh1z3y3 æ ¡å¯¹ï¼špolarisxu\næœ¬æ–‡ç”± GCTT åŸåˆ›ç¼–è¯‘ï¼ŒGo ä¸­æ–‡ç½‘ è£èª‰æ¨å‡º\n","description":"","tags":["Golang","GCTT"],"title":"ç”¨ kqueue å®ç°ä¸€ä¸ªç®€å•çš„ TCP Server","uri":"/posts/writing-a-tcp-server-using-kqueue/"},{"categories":null,"content":"è‹±æ–‡åŸæ–‡é“¾æ¥ï¼šhttps://www.zdnet.com/article/http-over-quic-to-be-renamed-http3/\næ® IETF å®˜æ–¹äººå‘˜é€éœ²ï¼ŒHTTP-over-QUIC å®éªŒæ–¹æ¡ˆå°†ä¼šè¢«å‘½åä¸º HTTP/3ï¼Œå¹¶å°†æˆä¸º HTTP åè®®çš„ç¬¬ä¸‰ä¸ªå®˜æ–¹ç‰ˆæœ¬ã€‚ åœ¨è°·æ­Œå°† SPDY æŠ€æœ¯å‘å±•æˆä¸º HTTP/2 åè®®ä¹‹åï¼Œè¿™æ˜¯è°·æ­Œç¬¬äºŒæ¬¡å°†å®éªŒæŠ€æœ¯å‘å±•æˆä¸º HTTP çš„å®˜æ–¹åè®®ç‰ˆæœ¬ã€‚ HTTP-over-QUIC åè®®æ˜¯ HTTP åè®®çš„å‡çº§ï¼Œè°·æ­Œä½¿ç”¨ QUIC å–ä»£ TCP (Transmission Control Protocal) ä½œä¸º HTTP çš„åŸºç¡€æŠ€æœ¯ã€‚ QUIC å…¨ç§° Quick UDP Internet Connectionsï¼Œæ˜¯è°·æ­Œå°† TCP åè®®é‡å†™ä¸ºä¸€ç§ç»“åˆäº†HTTP/2ã€TCPã€UDP å’Œ TLS çš„æ”¹è¿›æŠ€æœ¯ã€‚\nè°·æ­Œå¸Œæœ› QUIC èƒ½é€æ¸å–ä»£ TCP å’Œ UDP æˆä¸ºåœ¨å› ç‰¹ç½‘ä¼ è¾“äºŒè¿›åˆ¶æ•°æ®åè®®çš„æ–°é€‰æ‹©ï¼Œè€Œä½¿ç”¨å®ƒçš„æ›´å¥½çš„ç†ç”±ï¼Œæ˜¯ QUIC çš„åŠ å¯†æ–¹æ¡ˆå®ç°å·²ç»è¢«æµ‹è¯•è¯æ˜æ›´å¿«è€Œä¸”æ›´å®‰å…¨ (ç›®å‰ HTTP-over-QUIC åè®®è‰æ¡ˆä½¿ç”¨çš„æ˜¯ TLS1.3 åè®®)ã€‚\nQUIC è¢«æè®®ä½œä¸º2015å¹´ IETF çš„æ ‡å‡†è‰æ¡ˆï¼Œè€Œ HTTP-over-QUIC è¿™ä¸ªåŸºäº QUIC è€Œä¸æ˜¯ TCP é‡å†™ HTTP çš„åè®®åˆ™åœ¨2016å¹´7æœˆè¢«æè®®ã€‚ åœ¨é‚£ä¹‹åï¼ŒHTTP-over-QUIC åœ¨ Chrome 29ã€Opera 16 è¢«æ”¯æŒï¼Œå½“ç„¶è¿˜æœ‰ä¸€äº›ä½æ€§èƒ½çš„æµè§ˆå™¨ã€‚æœ€åˆï¼Œåªæœ‰è°·æ­Œçš„æœåŠ¡å™¨æ”¯æŒ HTTP-over-QUICï¼Œä»Šå¹´ï¼ŒFacebookä¹Ÿå¼€å§‹é‡‡ç”¨è¿™é¡¹æŠ€æœ¯ã€‚ åœ¨2018å¹´10æœˆä»½çš„é‚®ä»¶è®¨è®ºé‡Œï¼ŒIETF HTTP å’Œ QUIC å·¥ä½œç»„çš„ä¸»å¸­ Mark Nottingham æå‡ºäº†å°† HTTP-over-QUIC é‡å‘½åä¸º HTTP/3 çš„å®˜æ–¹ç”³è¯·ï¼Œå¹¶å¸Œæœ›å°† QUIC å·¥ä½œç»„çš„å¼€å‘å·¥ä½œè½¬é€’ç»™ HTTP å·¥ä½œç»„ã€‚ ç»è¿‡å‡ å¤©çš„è®¨è®ºï¼ŒNottingham çš„æè®®è¢« IETF çš„æˆå‘˜æ¥å—å¹¶ç»™å‡ºäº†å®˜æ–¹è®¤å¯ï¼Œå°† HTTP-over-QUIC ä½œä¸º HTTP åè®®çš„ä¸‹ä¸€ä¸ªç‰ˆæœ¬ â€”â€” HTTP/3ï¼Œç”¨äºå®Œå–„ä¼˜åŒ–å½“ä»Šçš„ç½‘ç»œã€‚ æ ¹æ® W3Techs çš„ç»Ÿè®¡ï¼Œæˆªæ­¢2018å¹´11æœˆï¼Œå…¨çƒè®¿é—®é‡æœ€é«˜çš„1åƒä¸‡ä¸ªç½‘ç«™ä¸­ï¼Œå·²ç»æœ‰31.2%çš„ç½‘ç«™æ”¯æŒäº† HTTP/2ï¼Œåªæœ‰1.2%çš„ç½‘ç«™æ”¯æŒäº† QUICã€‚\nä»¥ä¸‹æ˜¯è‡ªå·±çš„ä¸€ç‚¹æ€è€ƒï¼š\nå¯ä»¥çœ‹åˆ°ï¼ŒHTTP/3 åè®®å¸¦æ¥çš„æœ€å¤§æ”¹å˜æ˜¯åè®®åº•å±‚å°†é‡‡ç”¨ UDP åè®®ï¼Œè€Œä¸å†æ˜¯ TCP åè®®ï¼Œé‚£è¿™æ ·çš„å¥½å¤„å¯ä»¥è¯´æ˜¯æ›´ä½æ—¶å»¶å’Œæ›´å¥½çš„æ‹¥å¡æ§åˆ¶ï¼Œè¿˜æœ‰æ›´é«˜æ•ˆç‡çš„å¤šè·¯å¤ç”¨ï¼Œå¯ä»¥è¯´è°·æ­ŒçœŸçš„å¾ˆå‰å®³äº†ï¼Œè¦çŸ¥é“ HTTP/2 ä¹Ÿæ˜¯è°·æ­Œçš„ SPDY æ ‡å‡†åŒ–ä¹‹åçš„åè®®ã€‚è€Œä¸”è¿™æ¬¡ QUIC å‘éŸ³åŒ quick ï¼Œä¸Šæ¬¡ SPDY å‘éŸ³åŒ speedyï¼Œæ˜¯å·§åˆè¿˜æ˜¯æœ‰æ„ä¸ºä¹‹å‘¢ã€‚ï¼šï¼‰\nçœŸæ˜¯å¼ºè€…åˆ¶å®šè§„åˆ™ï¼š\n They are in control of future web protocol development.\n","description":"","tags":["HTTP"],"title":"è¯‘ï¼šHTTP/3 æ¥äº†","uri":"/posts/http3/"},{"categories":null,"content":"å·¥å‚æ–¹æ³•æ¨¡å¼æ˜¯ç®€å•å·¥å‚çš„å‡çº§ã€‚ä»–åˆ›å»ºä¸€ä¸ªç”¨äºå®ä¾‹åŒ–ç±»çš„æ¥å£ï¼Œå¹¶ç”±å·¥å‚çš„å­ç±»å†³å®šå®ä¾‹åŒ–å“ªä¸ªç±»ã€‚å·¥å‚æ–¹æ³•æ¨¡å¼ä½¿å¾—ä¸€ä¸ªç±»çš„å®ä¾‹åŒ–å»¶è¿Ÿåˆ°å­ç±»ã€‚\nä¸‹é¢ä»ç„¶ä»¥â€œä¸¤ä¸ªæ•°å­—çš„è¿ç®—â€ä½œä¸ºä¾‹å­\noperations.go // è¿ç®—ç±»\npackage factory_method // è¿ç®— type Operation interface { SetA(float64) SetB(float64) GetResult() (float64, error) } // è¿ç®—åŸºç±»ï¼Œå®ç°å…¬å…±çš„æ–¹æ³• type OperationBase struct { a float64 b float64 } func (oper *OperationBase) SetA(a float64) { oper.a = a } func (oper *OperationBase) SetB(b float64) { oper.b = b } // åŠ æ³•è¿ç®— type AddOperation struct { *OperationBase } func (oper *AddOperation) GetResult() (float64, error) { return oper.a + oper.b, nil } // å‡æ³•è¿ç®— type SubOperation struct { *OperationBase } func (oper *SubOperation) GetResult() (float64, error) { return oper.a - oper.b, nil } // ä¹˜æ³•å…ƒç®— type MulOperation struct { *OperationBase } func (oper *MulOperation) GetResult() (float64, error) { return oper.a * oper.b, nil } factory_method.go // å·¥å‚ç±»\npackage factory_method // å·¥å‚ç±» type OperationFactory interface { CreateOperation() Operation } // åŠ æ³•å·¥å‚ type AddFactory struct { } func (f *AddFactory) CreateOperation() Operation { return \u0026AddOperation{ OperationBase: \u0026OperationBase{}, } } // å‡æ³•å·¥å‚ type SubFactory struct { } func (f *SubFactory) CreateOperation() Operation { return \u0026SubOperation{ OperationBase: \u0026OperationBase{}, } } // ä¹˜æ³•å·¥å‚ type MulFactory struct { } func (f *MulFactory) CreateOperation() Operation { return \u0026MulOperation{ OperationBase: \u0026OperationBase{}, } } æºç ä»¥åŠæµ‹è¯•æºç ä¸‹è½½åœ°å€ï¼šhttps://github.com/h1z3y3/big-talk-go-design-patterns/tree/master/04_factory_method\n","description":"","tags":["è®¾è®¡æ¨¡å¼","Golang"],"title":"è®¾è®¡æ¨¡å¼ï¼šå·¥å‚æ–¹æ³•æ¨¡å¼","uri":"/posts/design-pattern-factory-method/"},{"categories":null,"content":"ä»£ç†æ¨¡å¼å³åœ¨çœŸå®ç±»çš„åŸºç¡€ä¸Šå°è£…ä¸€å±‚ä»£ç†ç±»ï¼Œç”±ä»£ç†ç±»å®Œæˆå¯¹çœŸå®ç±»çš„è°ƒç”¨ã€‚ ä»¥ä¾¿å¯ä»¥åœ¨ä»£ç†ç±»ä¸­åšä¸€äº›é¢å¤–çš„å·¥ä½œï¼Œå¦‚è¿›è¡Œè®¿é—®æƒé™æ ¡éªŒã€ä¿å­˜Cacheç¼“å­˜ç­‰æ“ä½œã€‚\nä¸‹é¢ä»¥\"è¯»å–å›¾ç‰‡èµ„æº\"ä¸ºä¾‹è¯´æ˜ä»£ç†æ¨¡å¼ï¼š\npackage proxy // æ¥å£ï¼Œä»£ç†ç±»å’ŒçœŸå®ç±»éƒ½è¦å®ç° type Image interface { Get() string } // çœŸå®çš„å›¾ç‰‡ç±» type RealImage struct {} func (r *RealImage) Get() string { return \"real_image_url\" } // ä»£ç†ç±» type ImageProxy struct { realImage RealImage } // ç”±ä»£ç†ç±»è¿›è¡ŒåŸç±»çš„è°ƒç”¨ï¼Œä»è€Œèƒ½åœ¨åŸç±»åŸºç¡€ä¸Šåšä¸€äº›æ“ä½œ func (r *ImageProxy) Get() string { var res string // pre: æƒé™æ£€æŸ¥ã€æŸ¥çœ‹æ˜¯å¦æœ‰cacheç­‰ res += \"pre:\" res += r.realImage.Get() // after: ä¿å­˜cacheã€æ ¼å¼åŒ–ç»“æœç­‰ res += \":after\" return res } æºç ä»¥åŠæµ‹è¯•æºç ä¸‹è½½åœ°å€ï¼šhttps://github.com/h1z3y3/big-talk-go-design-patterns/tree/master/03_proxy\n","description":"","tags":["è®¾è®¡æ¨¡å¼","Golang"],"title":"è®¾è®¡æ¨¡å¼ï¼šä»£ç†æ¨¡å¼","uri":"/posts/design-pattern-proxy/"},{"categories":null,"content":" å¹³å‡è´Ÿè½½æ˜¯å•ä½æ—¶é—´å†…â€œæ­£åœ¨ä½¿ç”¨CPUâ€ã€â€œç­‰å¾…CPUâ€ã€â€œç­‰å¾…IOâ€çš„è¿›ç¨‹æ•°é‡ å¹³å‡è´Ÿè½½å’ŒCPUä½¿ç”¨ç‡ä¸ä¸€æ ·ï¼Œä½†æ˜¯CPUå¯†é›†å‹ä»»åŠ¡å¯èƒ½å¯¼è‡´å¹³å‡è´Ÿè½½å‡é«˜ ç”±1ï¼Œ2å¯çŸ¥ï¼Œå¹³å‡è´Ÿè½½å‡é«˜ï¼Œä¸ä¸€å®šæ˜¯ç”±äºCPUä½¿ç”¨ç‡é«˜å¯¼è‡´ï¼Œä¹Ÿå¯èƒ½æ˜¯IOç¹å¿™ é™¤äº†topå‘½ä»¤ï¼Œè¿˜æœ‰mpstatã€pidstatç­‰å‘½ä»¤ watchå‘½ä»¤ï¼Œå¯ä»¥æ£€æµ‹ä¸€ä¸ªå‘½ä»¤çš„æ‰§è¡Œç»“æœï¼Œè€Œä¸å¿…ä¸€æ¬¡æ¬¡æ‰‹åŠ¨è¾“å…¥è¿è¡Œ uptimeå‘½ä»¤  ","description":"","tags":["Linux"],"title":"Linux:å¹³å‡è´Ÿè½½","uri":"/posts/linux-avarage-load/"},{"categories":null,"content":"è£…é¥°å™¨æ¨¡å¼ä¸»è¦è§£å†³è¦åŠ¨æ€çš„ç»™ä¸€ä¸ªç±»æ·»åŠ ä¸€äº›æ–°åŠŸèƒ½ï¼Œè€Œåˆä¸æƒ³è®©è¿™ä¸ªç±»å˜å¾—åºå¤§ã€‚ è¿™ç§æ¨¡å¼éœ€è¦åˆ›å»ºä¸€ä¸ªè£…é¥°ç±»æ¥åŒ…è£…æ‰©å±•åŸæœ‰çš„ç±»ï¼Œå¹¶ä¸”åœ¨ä¿è¯åŸæœ‰çš„ç±»ä¿æŒç»“æ„ä¸€è‡´çš„å‰æä¸‹ï¼Œæä¾›é¢å¤–çš„åŠŸèƒ½ã€‚\nä¸‹é¢æ˜¯ç»™ä¸€ä¸ªäººè£…é¥°è¡£æœçš„å®ä¾‹ï¼š\npackage decorator import \"fmt\" type Person interface { Show() } // å…·ä½“å®ç° type ConcreteComponent struct { } func (c *ConcreteComponent) Show() { fmt.Print(\"A Person wears sunglasses; \") } // ç”·äºº type Man struct{} func (m *Man) Show() { fmt.Print(\"A man wear a hat!\") } // å¥³äºº type Woman struct{} func (w *Woman) Show() { fmt.Print(\"A woman wear a skirt!\") } // TShirt type TShirtDecorator struct { Person Color string } func (t *TShirtDecorator) Show() { t.Person.Show() // è°ƒç”¨çˆ¶ç±»çš„ Show() æ–¹æ³• // \"è£…é¥°\": å¢åŠ è‡ªå·±ç‰¹æœ‰çš„å±æ€§ fmt.Print(fmt.Sprintf(\"Color: %s, TShirt; \", t.Color)) } func WearTShirt(p Person, c string) Person { return \u0026TShirtDecorator{ Person: p, Color: c, } } // Pants type PantsDecorator struct { Person Length int64 } func (p *PantsDecorator) Show() { p.Person.Show() fmt.Print(fmt.Sprintf(\"Lenght: %dcm, Pants.; \", p.Length)) } func WearPants(p Person, l int64) Person { return \u0026PantsDecorator{ Person: p, Length: l, } } // Shoes type ShoesDecorator struct { Person Size int64 } func (s *ShoesDecorator) Show() { s.Person.Show() fmt.Print(fmt.Sprintf(\"Size: %d, Shoes; \", s.Size)) } func WearShoes(p Person, s int64) Person { return \u0026ShoesDecorator{ Person: p, Size: s, } } // Examples func ExampleConcrete_Wear() { var p Person = \u0026ConcreteComponent{} p = WearTShirt(p, \"Blue\") p = WearPants(p, 100) p = WearShoes(p, 42) p.Show() // Output: A Person wears sunglasses; Color: Blue, TShirt; Lenght: 100cm, Pants.; Size: 42, Shoes; } func ExampleMan_Show() { var xiaoming Person = \u0026Man{} xiaoming = WearShoes(xiaoming, 43) xiaoming = WearTShirt(xiaoming, \"White\") xiaoming.Show() // Output:A man wear a hat!Size: 43, Shoes; Color: White, TShirt; } func ExampleWoman_Show() { var xiaohong Person = \u0026Woman{} xiaohong = WearTShirt(xiaohong, \"Red\") xiaohong = WearShoes(xiaohong, 38) xiaohong.Show() // Output: A woman wear a skirt!Color: Red, TShirt; Size: 38, Shoes; } æºç ä»¥åŠæµ‹è¯•æºç ä¸‹è½½åœ°å€ï¼šhttps://github.com/h1z3y3/big-talk-go-design-patterns/tree/master/02_decorator\n","description":"","tags":["è®¾è®¡æ¨¡å¼","Golang"],"title":"è®¾è®¡æ¨¡å¼ï¼šè£…é¥°å™¨æ¨¡å¼","uri":"/posts/design-pattern-decorator/"},{"categories":null,"content":"åœ¨ç­–ç•¥æ¨¡å¼ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ç³»åˆ—ç­–ç•¥å¯¹è±¡å’Œä¸€ä¸ªèƒ½éšç­–ç•¥å¯¹è±¡æ”¹å˜è€Œæ”¹å˜çš„Contextå¯¹è±¡ï¼Œç­–ç•¥å¯¹è±¡æ”¹å˜Contextçš„æ‰§è¡Œæ–¹æ³•ã€‚\nä»ä»¥ä¸¤ä¸ªæ•°å­—çš„åŠ å‡ä¹˜é™¤æ“ä½œä½œä¸ºç¤ºä¾‹\npackage strategy import \"fmt\" // Context ç±» type Context struct { strategy Strategy } func NewContext(strategy Strategy) *Context { return \u0026Context{ strategy: strategy, } } func (c *Context) GetResult(a float64, b float64) (float64, error) { return c.strategy.GetResult(a, b) } // ç­–ç•¥æ¥å£ type Strategy interface { GetResult(a float64, b float64) (float64, error) } // ä»¥ä¸‹ç±»å®ç°ç­–ç•¥æ¥å£ // åŠ æ³• type Add struct{} func (o *Add) GetResult(a float64, b float64) (float64, error) { return a + b, nil } // å‡æ³• type Sub struct{} func (o *Sub) GetResult(a float64, b float64) (float64, error) { return a - b, nil } // ä¹˜æ³• type Mul struct{} func (o *Mul) GetResult(a float64, b float64) (float64, error) { return a * b, nil } // é™¤æ³• type Div struct{} func (o *Div) GetResult(a float64, b float64) (float64, error) { if b == 0 { return 0, fmt.Errorf(\"é™¤æ•°ä¸èƒ½ä¸º0\") } return a / b, nil } æºç ä»¥åŠæµ‹è¯•æºç ä¸‹è½½åœ°å€ï¼šhttps://github.com/h1z3y3/big-talk-go-design-patterns/tree/master/01_strategy\n","description":"","tags":["è®¾è®¡æ¨¡å¼","Golang"],"title":"è®¾è®¡æ¨¡å¼ï¼šç­–ç•¥æ¨¡å¼","uri":"/posts/design-pattern-strategy/"},{"categories":null,"content":"è¿™ä¸ªç³»åˆ—æ˜¯ã€Šå¤§è¯è®¾è®¡æ¨¡å¼ã€‹çš„è¯»åæ„Ÿï¼Œå°†ä¹¦ä¸­çš„è®¾è®¡æ¨¡å¼ç”¨golangå®ç°ã€‚\nç¬¬ä¸€ä¸ªè®¾è®¡æ¨¡å¼æ˜¯ç®€å•å·¥å‚æ¨¡å¼ï¼Œä¸»è¦ç”¨åˆ°çš„çŸ¥è¯†ç‚¹æ˜¯ç±»çš„å¤šæ€ã€‚ å¤šæ€è¡¨ç¤ºä¸åŒçš„ç±»å¯ä»¥æ‰§è¡Œç›¸åŒçš„æ–¹æ³•ï¼Œä½†è¦é€šè¿‡å®ƒä»¬è‡ªå·±çš„å®ç°ä»£ç æ¥æ‰§è¡Œã€‚ è€Œåœ¨golangä¸­æ²¡æœ‰ç±»çš„æ¦‚å¿µï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©æ¥å£(interface)ç±»å‹å®ç°ç±»çš„å¤šæ€ã€‚\nå¦‚æœä¸€ä¸ªç±»å‹å®ç°äº†æ¥å£çš„æ‰€æœ‰æ–¹æ³•ï¼Œé‚£ä¹ˆå°±å¯ä»¥è¯´è¿™ä¸ªç±»å‹å®ç°äº†è¿™ä¸ªæ¥å£ã€‚\næˆ‘ä»¬è¦å®ç°ä¸¤ä¸ªæ•°å­—çš„åŠ å‡ä¹˜é™¤æ“ä½œä½œä¸ºç¤ºä¾‹\npackage simplefactory import \"fmt\" // 1. å®šä¹‰ä¸€ä¸ªæ¥å£ç±»å‹ï¼Œå­ç±»å¿…é¡»å®ç°GoResultæ–¹æ³•æ¥å®ç°è¯¥æ¥å£ type Operation interface { GetResult(a float64, b float64) (float64, error) } // 2. åˆå§‹åŒ–å·¥å‚ç±»æ–¹æ³•ï¼Œä¼ å…¥æ“ä½œç¬¦ï¼Œè¿”å›å¯¹åº”çš„ç±» func NewOperation(oper string) Operation { switch oper { case \"+\": return \u0026operationAdd{} case \"-\": return \u0026operationSub{} case \"*\": return \u0026operationMul{} case \"/\": return \u0026operationDiv{} default: return nil } } // åŠ æ³• type operationAdd struct{} func (o *operationAdd) GetResult(a float64, b float64) (float64, error) { return a + b, nil } // å‡æ³• type operationSub struct{} func (o *operationSub) GetResult(a float64, b float64) (float64, error) { return a - b, nil } // ä¹˜æ³• type operationMul struct{} func (o *operationMul) GetResult(a float64, b float64) (float64, error) { return a * b, nil } // é™¤æ³• type operationDiv struct{} func (o *operationDiv) GetResult(a float64, b float64) (float64, error) { if b == 0 { return 0, fmt.Errorf(\"é™¤æ•°ä¸èƒ½ä¸º0\") } return a / b, nil } æºç ä»¥åŠæµ‹è¯•æºç ä¸‹è½½åœ°å€ï¼šhttps://github.com/h1z3y3/big-talk-go-design-patterns/tree/master/00_simple_factory\n","description":"","tags":["è®¾è®¡æ¨¡å¼","Golang"],"title":"è®¾è®¡æ¨¡å¼ï¼šç®€å•å·¥å‚æ¨¡å¼","uri":"/posts/design-pattern-simple-factory/"},{"categories":null,"content":" è®¡ç®—å¯†é›†å‹ä»»åŠ¡\n è®¡ç®—å¯†é›†å‹ä»»åŠ¡ä¸»è¦æ¶ˆè€—CPUèµ„æºï¼Œéœ€è¦è¿›è¡Œå¤§é‡çš„è®¡ç®—ï¼Œå¦‚è®¡ç®—åœ†å‘¨ç‡æˆ–å¯¹è§†é¢‘è¿›è¡Œé«˜æ¸…çš„è§£ç ç­‰ï¼Œå…¨é CPUçš„è¿ç®—èƒ½åŠ›ã€‚è¿™ç§ä»»åŠ¡è™½ç„¶å¯ä»¥åˆ©ç”¨å¤šä»»åŠ¡å»å®Œæˆï¼Œä½†æ˜¯ä»»åŠ¡è¶Šå¤šï¼ŒèŠ±åœ¨ä»»åŠ¡åˆ‡æ¢ä¸Šçš„æ—¶é—´å°±ä¼šè¶Šå¤šï¼Œé‚£ä¹ˆCPUçš„æ‰§è¡Œæ•ˆç‡å°±ä¼šè¶Šä½ï¼Œæ‰€ä»¥ï¼Œè¦é«˜æ•ˆçš„åˆ©ç”¨CPUï¼Œè®¡ç®—å¯†é›†å‹ä»»åŠ¡åŒæ—¶è¿›è¡Œçš„æ•°é‡åº”å½“ç­‰äºCPUçš„æ ¸å¿ƒæ•°ï¼Œå°½é‡å‡å°‘CPUåœ¨ä»»åŠ¡é—´çš„åˆ‡æ¢æ—¶é—´ã€‚\n IOå¯†é›†å‹ä»»åŠ¡\n ä¸€èˆ¬æ¶‰åŠåˆ°ç½‘ç»œã€ç£ç›˜IOçš„ä»»åŠ¡éƒ½æ˜¯IOå¯†é›†å‹ä»»åŠ¡ï¼Œè¿™ç±»ä»»åŠ¡çš„ç‰¹ç‚¹å°±æ˜¯CPUæ¶ˆè€—å¾ˆå°‘ï¼Œä»»åŠ¡çš„å¤§éƒ¨åˆ†æ—¶é—´éƒ½èŠ±åœ¨ç­‰å¾…IOæ“ä½œçš„å®Œæˆã€‚ç”±äºIOçš„é€Ÿåº¦è¿œè¿œä½äºCPUå’Œå†…å­˜çš„é€Ÿåº¦ï¼Œæ‰€ä»¥IOå¯†é›†å‹ä»»åŠ¡çš„æ•°é‡è¶Šå¤šï¼ŒCPUçš„æ•ˆç‡å°±ä¼šè¶Šé«˜ï¼Œä½†æ˜¯ä¹Ÿä¼šæœ‰ä¸€å®šçš„é™åº¦ã€‚å¸¸è§çš„å¤§éƒ¨åˆ†ä»»åŠ¡éƒ½æ˜¯IOå¯†é›†å‹ä»»åŠ¡ï¼Œæ¯”å¦‚Webåº”ç”¨ã€‚\nIOå¯†é›†å‹ä»»åŠ¡æ‰§è¡ŒæœŸé—´ï¼Œ99%çš„æ—¶é—´éƒ½èŠ±åœ¨IOä¸Šï¼ŒèŠ±åœ¨CPUä¸Šçš„æ—¶é—´å¾ˆå°‘ï¼Œå› æ­¤ï¼Œç”¨è¿è¡Œé€Ÿåº¦æå¿«çš„Cè¯­è¨€æ›¿æ¢Pythonè¿™æ ·è¿è¡Œé€Ÿåº¦æä½çš„è„šæœ¬è¯­è¨€ï¼Œä¹Ÿå®Œå…¨æ— æ³•æå‡è¿è¡Œæ•ˆç‡ã€‚å¯¹äºIOå¯†é›†å‹ä»»åŠ¡ï¼Œæœ€åˆé€‚çš„è¯­è¨€å°±æ˜¯å¼€å‘æ•ˆç‡æœ€é«˜ï¼Œä»£ç é‡æœ€å°‘çš„è¯­è¨€ï¼Œè„šæœ¬è¯­è¨€æ˜¯é¦–é€‰ï¼ŒCè¯­è¨€æœ€å·®ã€‚\n æ€»ç»“\n è®¡ç®—å¯†é›†å‹ç¨‹åºé€‚åˆCè¯­è¨€å¤šçº¿ç¨‹\nIOå¯†é›†å‹ç¨‹åºé€‚åˆè„šæœ¬è¯­è¨€å¼€å‘çš„å¤šçº¿ç¨‹\n","description":"","tags":["åŸºç¡€"],"title":"è®¡ç®—å¯†é›†å‹ vs. IOå¯†é›†å‹","uri":"/posts/cpu-io/"},{"categories":null,"content":"æœ€è¿‘åœ¨åšæ¯•ä¸šè®¾è®¡ï¼Œä½¿ç”¨åˆ°äº†CkEditorå’ŒCkFinderæ¥åšå¯Œæ–‡æœ¬ç¼–è¾‘æ¡†ä»¥åŠæ–‡ä»¶ç®¡ç†ã€‚ å› ä¸ºCkFinderåªèƒ½ä¸‹è½½ä½¿ç”¨Demoç‰ˆæœ¬ï¼Œä¼šæœ‰ä¸€äº›ç‰ˆæƒä¿¡æ¯ã€‚ æˆ‘ä¸æ˜¯ç”¨åšå•†ä¸šç›®çš„ï¼Œä»…ä»…ä¸ºäº†å­¦ä¹ ï¼Œæ‰€ä»¥æƒ³æŠŠç‰ˆæƒä¿¡æ¯å»æ‰ã€‚ çœ‹äº†å‡ ç¯‡åšå®¢ï¼Œéƒ½æ˜¯æ•™ä½ æŠŠalertæ¡†åŠ ä¸Šdisplay:noneï¼Œæˆ‘è€ƒè™‘åˆ°è¿™æ ·å¹¶ä¸å¥½ï¼Œå› ä¸ºå¦‚æœæœ‰å…¶ä»–æ­£å¸¸çš„ä¿¡æ¯ä¹Ÿä¸èƒ½æ˜¾ç¤ºäº†ï¼Œæ‰€ä»¥èŠ±äº†äº›æ—¶é—´æ”¹äº†ä¸‹ckfinder.jsï¼Œæ—¢å»æ‰äº†ç‰ˆæƒä¿¡æ¯ï¼Œåˆä¸ä¼šå½±å“å…¶ä»–ä¿¡æ¯çš„æç¤ºã€‚\nä¸‹æ–‡æä¾›äº†ä¸¤ç§æ–¹æ³•ï¼Œå»ºè®®ä½¿ç”¨ç¬¬äºŒç§ã€‚\nå¦‚æœä½ æ˜¯ç”¨äºå•†ä¸šç›®çš„ï¼Œè¯·åˆ°å®˜ç½‘è´­ä¹°ä½¿ç”¨çš„Licenseä½¿ç”¨ã€‚\nCKFinderç‰ˆæœ¬: Version: 2.6.2.1 â€¢ Released 11 Oct 2016\nä¸æƒ³è‡ªå·±æ“ä½œè¿™ä¹ˆéº»çƒ¦çš„ï¼Œå»CSDNä¸‹è½½æˆ‘ä¸Šä¼ å¥½çš„ï¼Œ2ç§¯åˆ† å“ˆå“ˆå“ˆ\né“¾æ¥ï¼šhttp://download.csdn.net/detail/qq1255685485/9845062\nç¬¬ä¸€ç§ ç¬¬ä¸€ç§éº»çƒ¦è€Œä¸”éœ€è¦é€»è¾‘æ”¹åŠ¨è¾ƒå¤§ã€‚\nå·¦ä¸‹è§’ä¿¡æ¯ åœ¨ckfinder.jsä¸­æœç´¢:\nt=\"\\x54\\150\\151\\163\\040\\x69\\163\\x20\\164\\x68\\145\\040\\x44\\105\\x4d\\x4f\\040\\166\\x65\\x72\\x73\\x69\\157\\156\\x20\\157\\146\\040\\103\\113\\x46\\151\\x6e\\144\\145\\x72\\056\\040\\120\\154\\x65\\141\\163\\145\\040\\166\\x69\\x73\\x69\\x74\\x20\\164\\150\\145\\040\\x3c\\x61\\x20\\150\\162\\x65\\x66\\x3d\\x27\\150\\164\\x74\\x70\\x3a\\x2f\\x2f\\x63\\x6b\\163\\157\\x75\\x72\\x63\\x65\\056\\143\\x6f\\x6d\\057\\143\\153\\146\\151\\x6e\\144\\x65\\162\\x27\\x20\\164\\141\\162\\x67\\x65\\x74\\x3d\\047\\x5f\\x62\\154\\141\\x6e\\x6b\\x27\\x3e\\x43\\x4b\\106\\151\\156\\144\\x65\\x72\\040\\x77\\145\\x62\\040\\163\\151\\x74\\x65\\x3c\\x2f\\x61\\x3e\\x20\\164\\157\\040\\x6f\\x62\\x74\\141\\x69\\x6e\\x20\\141\\040\\166\\x61\\154\\151\\144\\040\\x6c\\151\\x63\\x65\\156\\163\\x65\\x2e\"  ä½ç½®åœ¨æ–‡ä»¶æ¯”è¾ƒé åçš„ä½ç½®ï¼Œæ›¿æ¢ä¸º:\nt=\"\"  è¿™ä¸€å¥çš„è§£ç åä¸º:\nThis is the DEMO version of CKFinder.Please visit the \u003ca href='http://cksource.com/ckfinder' target='_blank'\u003eCKFinder web site\u003c/a\u003e to obtain a valid license.  å¯ä»¥åœ¨ http://ddecode.com/hexdecoder è§£ç \né¡¶ç«¯ä¿¡æ¯ åœ¨ckfinder.jsä¸­æœç´¢:\nP=\"\\x50\\x6c\\x65\\141\\x73\\x65\\040\\166\\151\\x73\\x69\\x74\\x20\\164\\x68\\x65\\040\\074\\141\\040\\x68\\162\\x65\\146\\075\\x27\\x68\\164\\x74\\160\\072\\057\\057\\x63\\x6b\\x73\\x6f\\x75\\x72\\x63\\x65\\056\\x63\\157\\155\\057\\143\\x6b\\x66\\151\\x6e\\x64\\x65\\x72\\x27\\x20\\x74\\141\\162\\147\\145\\x74\\x3d\\x27\\x5f\\x62\\154\\141\\x6e\\153\\x27\\x3e\\x43\\x4b\\106\\x69\\x6e\\x64\\x65\\162\\x20\\x77\\x65\\142\\x20\\x73\\x69\\x74\\145\\x3c\\x2f\\x61\\x3e\\040\\x74\\x6f\\x20\\157\\142\\x74\\x61\\151\\156\\x20\\141\\040\\166\\141\\154\\151\\x64\\040\\154\\151\\143\\145\\x6e\\163\\145\\x2e\",Q=\"\\x54\\150\\x69\\163\\x20\\151\\x73\\040\\x74\\x68\\x65\\040\\x44\\x45\\x4d\\117\\040\\x76\\x65\\x72\\163\\x69\\157\\156\\x20\\157\\x66\\040\\x43\\x4b\\106\\x69\\156\\144\\145\\x72\\x2e\\x20\"+P,R=\"\\x50\\162\\157\\144\\x75\\x63\\164\\040\\154\\151\\143\\x65\\156\\163\\145\\x20\\150\\141\\x73\\x20\\x65\\x78\\160\\x69\\162\\145\\144\\x2e\\040\"+P;  è¿™é‡Œå®šä¹‰äº†ä¸‰ä¸ªå˜é‡P, Q, R, åˆ†åˆ«ä»£è¡¨çš„æ„æ€å¦‚ä¸‹:\nP=\"Please visit the \u003ca href='http://cksource.com/ckfinder' target='_blank'\u003eCKFinder web site\u003c/a\u003e to obtain a valid license.\"; Q=\"This is the DEMO version of CKFinder.\" + P; R=\"Product license has expired.\" + P;  å°†æœç´¢åˆ°çš„å†…å®¹æ›¿æ¢ä¸º\nP=\"\"; Q=\"\"; R=\"\";  æ›¿æ¢å®Œæˆåå‘ç°æ–‡ä»¶åº“ä¸ºç©ºç™½ï¼Œæ›´å…·ä½“å¯ä»¥è¯´ï¼Œå½“å°†Qè®¾ç½®ä¸ºç©ºç™½å­—ç¬¦ä¸²ä¹‹åæ‰ä¼šæ˜¾ç¤ºç©ºç™½ï¼Œè€Œæ›¿æ¢På’ŒRéƒ½ä¸ä¼šå‡ºç°è¿™ç§æƒ…å†µï¼Œå› ä¸ºä»£ç åé¢å¯¹Qçš„å€¼åšäº†åˆ¤æ–­.\næ‰€ä»¥æˆ‘ä»¬ç»§ç»­å‘ä¸‹çœ‹ï¼Œç»§ç»­æœç´¢ï¼š\nif(!Q)  å¯ä»¥çœ‹åˆ°è¿™ä¸ªåˆ¤æ–­if(!Q) return;,åˆ é™¤è¿™ä¸€ä¸ªåˆ¤æ–­ä½“.\nè¿˜æ²¡æœ‰ç»“æŸï¼Œç»§ç»­æœç´¢:\nQ.charAt  å¯ä»¥çœ‹åˆ°å¦å¤–ä¸€ä¸ªåˆ¤æ–­if(pw||Q.charAt(2\u003c\u003c2)!='t')return;ï¼Œä¸ºäº†ä¿è¯æ­£å¸¸ä½¿ç”¨ï¼Œå°†è¿™ä¸ªåˆ¤æ–­ä½“æ›¿æ¢ä¸º:\nif(pw) return;  å¦å¤–å¤šè¯´ä¸€å¥ï¼ŒQå˜é‡åˆ é™¤åˆ°Q=\"\\x54\\150\\x69\\163\\x20\\151\\x73\\040\\x74\"çš„æ—¶å€™è¿˜èƒ½æ­£å¸¸ä½¿ç”¨ï¼Œä¹Ÿå°±æ˜¯Q=\"This is t\"ï¼Œå¯ä»¥åšäº›å°è¯•ã€‚\nå½“ä»¥ä¸Šå·¥ä½œå…¨éƒ¨å®Œæˆä¹‹åï¼Œåˆ·æ–°é¡µé¢å³å¯ä»¥çœ‹åˆ°ç‰ˆæƒä¿¡æ¯å…¨éƒ¨å»æ‰äº†ï¼Œè€Œä¸”å¹¶æ²¡æœ‰å½±å“åˆ°å…¶ä»–ä¿¡æ¯çš„æé†’ã€‚\nå“ˆå“ˆå“ˆğŸ˜‚ã€‚çœ‹åˆ°è¿™çš„éƒ½æ˜¯çœŸçˆ±ã€‚ é‚£ä¹ˆç»™ä½ ä»¬è¯´ä¸€ä¸ªæ›´ç®€å•çš„æ–¹æ³•ï¼Œåªéœ€ä¸‰æ­¥ï¼Œæ›´å®Œç¾çš„è§£å†³é—®é¢˜ã€‚\nç¬¬äºŒç§ ç®€å•ï¼Œåªéœ€ä¸‰æ­¥\nå·¦ä¸‹è§’ä¿¡æ¯ æœç´¢: this.dV().getChild(0).appendHtmlï¼Œå¾ˆæ˜¾ç„¶æ˜¯ä¸ºå·¦ä¸‹è§’æ·»åŠ ä¿¡æ¯ï¼Œçœ‹è¿™ä¸€å¥ä¸Šé¢æœ‰ä¸ªifåˆ¤æ–­:\n if (this.app.gd == 'bootstrap') { var H = \"\\x3c\\x64\\151\\x76\\x20\\143\\x6c\\x61\\x73\\x73\\x3d\\x27\\166\\x69\\145\\167\\x20\\164\\157\\157\\154\\137\\160\\141\\x6e\\145\\x6c\\047\\040\\x73\\x74\\x79\\154\\145\\075\\047\\x64\\151\\x73\\x70\\154\\141\\x79\\x3a\\x62\\x6c\\157\\143\\153\\x20\\x21\\x69\\x6d\\160\\157\\x72\\164\\x61\\x6e\\164\\x3b\\160\\x6f\\163\\x69\\x74\\151\\x6f\\x6e\\072\\x73\\x74\\x61\\164\\151\\143\\040\\x21\\x69\\x6d\\160\\157\\x72\\164\\x61\\x6e\\x74\\x3b\\x63\\x6f\\x6c\\157\\x72\\x3a\\043\\x33\\x31\\x37\\x30\\x38\\x66\\x20\\041\\151\\155\\x70\\157\\x72\\x74\\x61\\156\\x74\\073\\x62\\x61\\x63\\x6b\\147\\162\\157\\165\\x6e\\144\\055\\143\\157\\x6c\\x6f\\x72\\x3a\\x23\\144\\x39\\145\\144\\146\\x37\\x20\\x21\\x69\\x6d\\x70\\157\\x72\\x74\\141\\156\\x74\\073\\146\\x6f\\156\\164\\x2d\\x73\\151\\172\\x65\\x3a\\x20\\061\\063\\x70\\170\\073\\040\\x70\\141\\x64\\144\\x69\\156\\147\\072\\040\\x35\\x70\\170\\073\\x20\\155\\141\\162\\147\\x69\\x6e\\072\\065\\160\\170\\x3b\\x62\\157\\162\\144\\x65\\162\\055\\x72\\141\\144\\x69\\x75\\x73\\x3a\\x34\\160\\x78\\x3b\\047\\x3e\"; v = H + t + s; w = H + u + s; }  è¿›è¡Œè§£ç å’Œå­—ç¬¦ä¸²ç»„åˆï¼Œå¯ä»¥çœ‹åˆ°å˜é‡vå°±æ˜¯ç‰ˆæƒä¿¡æ¯, wæ˜¯å·²ç»è´­ä¹°çš„ä¿¡æ¯ã€‚åœ¨æœç´¢åˆ°çš„this.dV().getChild(0).appendHtmlæ‹¬å·é‡Œé¢ï¼Œæ”¹ä¸º:\nthis.dV().getChild(0).appendHtml(C||D||A!=4?\"\":\"\");  ç®€è¨€ä¹‹å°±æ˜¯ä¸ç®¡ä¹°æ²¡ä¹°ï¼Œéƒ½ä¸æ˜¾ç¤ºè¿™ä¸ªæç¤ºï¼Œè®¾ç½®ä¸ºç©ºå­—ç¬¦ä¸²å°±å¥½äº†ã€‚\né¡¶ç«¯ä¿¡æ¯ é¡¶ç«¯çš„å»å¤„ç‰ˆæƒä¿¡æ¯çš„æ–¹æ³•å’Œå·¦ä¸‹è§’ç±»ä¼¼ã€‚\næœç´¢: aT.mj=Q æ›¿æ¢ä¸º aT.mj=Q.toLowerCase().indexOf(\"demo\") ? \"\" : Q; æœç´¢: aT.mj=R æ›¿æ¢ä¸º aT.mj=R.toLowerCase().indexOf(\"demo\") ? \"\" : R;\nå¤§åŠŸå‘Šæˆï¼Œ æ›´å®Œç¾çš„è§£å†³äº†é—®é¢˜ï½ ğŸ˜\n2017-5-17 æ›´æ–°ï¼šå¯ç”¨å‰ªåˆ‡åŠŸèƒ½ ä»Šå¤©å‘ç°è™½ç„¶ç‰ˆæƒä¿¡æ¯æ²¡æœ‰äº†ï¼Œä½†æ˜¯â€œä¸´æ—¶æ–‡ä»¶å¤¹â€åŠŸèƒ½â€œä»ä¸´æ—¶æ–‡ä»¶å¤¹å‰ªåˆ‡è‡³æ­¤â€åœ¨Demoç‰ˆæœ¬ä¸­ä¸èƒ½ä½¿ç”¨ï¼Œæç¤º:\nThis function is disabled in the demo version of CKFinder. Please visit the CKFinder web site to obtain a valid license.  å¯ç”¨æ–¹æ³•ï¼š\n  æœç´¢z.app.msgDialog, å¯ä»¥çœ‹åˆ°åŒ…å«å®ƒçš„æ˜¯ä¸€ä¸ªåˆ¤æ–­ã€‚\n if('balabalabalabalabala...') //è¿™ä¸ªåˆ¤æ–­å¾ˆé•¿ æ˜¾ç¤ºè¿™æ˜¯Demoç‰ˆæœ¬ï¼Œä¸èƒ½ç”¨è¿™ä¸ªåŠŸèƒ½; else æ‰§è¡ŒæŒ‡ä»¤;  é‚£æˆ‘ä»¬è¦åšçš„å°±æ˜¯åªç•™ä¸‹éœ€è¦æ‰§è¡Œçš„æŒ‡ä»¤å°±å¯ä»¥äº†ã€‚ è¿™ä¸€æ­¥å®Œæˆï¼Œå°±å¯ä»¥ä»ä¸´æ—¶æ–‡ä»¶ä¸­ç§»åŠ¨æ–‡ä»¶äº†ã€‚\n  å’Œç¬¬1æ­¥ç±»ä¼¼ï¼Œæœç´¢y.msgDialog,åŒæ ·åŒ…å«å®ƒçš„æ˜¯ä¸€ä¸ªåˆ¤æ–­ï¼Œä¸åŒçš„æ˜¯è¿™ä¸ªåˆ¤æ–­ä½“çš„elseéƒ¨åˆ†æ‰§è¡Œäº†å¤šæ¡æŒ‡ä»¤ã€‚åˆ é™¤åˆ¤æ–­åªç•™ä¸‹æŒ‡ä»¤å°±å¯ä»¥äº†ã€‚\nè¿™ä¸€æ­¥å®Œæˆï¼Œå°±å¯ä»¥åœ¨å„ä¸ªæ–‡ä»¶å¤¹ä¸­ç§»åŠ¨æ–‡ä»¶äº†ã€‚\n  è¿™æ ·æ–‡ä»¶çš„ç§»åŠ¨åŠŸèƒ½å°±å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ã€‚æˆ‘å¥½åƒå¤ªåäº†ã€‚\n","description":"","tags":["J2EE","CKFinder","CKEditor"],"title":"å»é™¤CKFinderç‰ˆæƒä¿¡æ¯ä»¥åŠå¯ç”¨æ–‡ä»¶ç§»åŠ¨åŠŸèƒ½","uri":"/posts/remove-ckfinder-copyright/"},{"categories":null,"content":"Apache Shiroç”¨äºæƒé™ç®¡ç†ååˆ†æ–¹ä¾¿ï¼Œä½†å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å½“ç”¨æˆ·çš„æƒé™å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œå°±éœ€è¦ç”¨æˆ·é‡æ–°ç™»å½•ï¼Œé‡æ–°ç¼“å­˜ç”¨æˆ·çš„æƒé™ä¿¡æ¯ã€‚\nç°åœ¨æƒ³è¦åœ¨æ”¹å˜ç”¨æˆ·çš„æƒé™çš„æ—¶å€™ï¼Œæ¸…ç†ç”¨æˆ·çš„æƒé™ã€‚ åœ¨å†™çš„è¿‡ç¨‹ä¸­æŸ¥æ‰¾äº†ä¸€äº›èµ„æ–™ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰æˆåŠŸå®ç°æƒé™çš„æ¸…ç†ï¼Œæ‰€ä»¥æˆ‘è¿›è¡Œäº†ä¸€äº›ä¿®æ”¹ï¼Œå¹¶å®ç°äº†Helperç±»ã€‚\næˆ‘å†™çš„å¸®åŠ©ç±»ï¼š\npackage com.zhaoyang.core.feature.security; import org.apache.shiro.SecurityUtils; import org.apache.shiro.cache.Cache; import org.apache.shiro.cache.CacheManager; import org.apache.shiro.subject.SimplePrincipalCollection; import org.apache.shiro.subject.Subject; import org.slf4j.Logger; import org.slf4j.LoggerFactory; /** * @author zhaoyang * * @since 2017-04-04 2:12 PM */ public class ShiroAuthorizationHelper { //shiro é…ç½®çš„cacheManagerï¼Œ éœ€è¦ä½¿ç”¨Spring beanè¿›è¡Œæ³¨å…¥ private static CacheManager cacheManager; private static Logger logger = LoggerFactory.getLogger(ShiroAuthorizationHelper.class); /** * æ¸…é™¤ç”¨æˆ·çš„æƒé™ * * è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ * ç½‘ä¸Šå¾ˆå¤šå®ç°éƒ½æ˜¯è¿™é‡Œåªä¼ é€’ä¸€ä¸ªStringç±»å‹çš„usernameè¿‡æ¥ï¼Œæ ¹æ®è¿™ä¸ªStringå½“keyå»æ¸…é™¤Cache * ä½†æ˜¯Shiroåœ¨ç¼“å­˜ç”¨æˆ·æƒé™çš„æ—¶å€™ä½¿ç”¨çš„keyå¹¶ä¸æ˜¯Stringç±»å‹ï¼Œæ‰€ä»¥è°ƒç”¨removeçš„æ—¶å€™å¹¶ä¸èƒ½æ¸…é™¤ç¼“å­˜çš„æƒé™ * * shiroç¼“å­˜æ—¶ä½¿ç”¨çš„keyï¼Œæ˜¯ç™»å½•æ—¶ä½¿ç”¨çš„SimplePrincipalCollectionå¯¹è±¡ï¼Œæ‰€ä»¥removeçš„æ—¶å€™éœ€è¦çš„ä¸æ˜¯ä¸€ä¸ªStringå€¼ï¼Œ * å…·ä½“å¯ä»¥å‚è€ƒä¸‹é¢æ–¹æ³•ä¸­æ‰“å°cacheçš„keyçš„è¿‡ç¨‹, å¯ä»¥çœ‹åˆ°æ‰“å°å‡ºkeyçš„ç±»æ˜¯ `class org.apache.shiro.subject.SimplePrincipalCollection` * æ‰€ä»¥ä½ cache.remove(String username)è‚¯å®šæ¸…é™¤ä¸äº† * * @param principal */ public static void clearAuthorizationInfo(SimplePrincipalCollection principal) { logger.info(\"clear the user: \" + principal.toString() + \"'s authorizationInfo\"); Cache\u003cObject, Object\u003e cache = cacheManager.getCache(\"myShiroCache\");//myShiroCacheæ˜¯æˆ‘é…ç½®ç”¨äºç¼“å­˜çš„cacheçš„Nameï¼Œåœ¨springé…ç½®æ–‡ä»¶ä¸­é…ç½®ï¼Œå¯ä»¥çœ‹æ–‡ç« æœ€å // for (Object k : cache.keys()) { // System.out.println(k.getClass()); // } cache.remove(principal); } /** * æ¸…é™¤å½“å‰ç”¨æˆ·çš„æƒé™ */ public static void clearAuthorizationInfo() { if (SecurityUtils.getSubject().isAuthenticated()) { Subject subject = SecurityUtils.getSubject(); String username = subject.getPrincipal().toString(); String realmName = subject.getPrincipals().getRealmNames().iterator().next(); SimplePrincipalCollection principalCollection = new SimplePrincipalCollection(username, realmName); // è°ƒç”¨æ¸…ç†ç”¨æˆ·æƒé™ clearAuthorizationInfo(principalCollection); } } /** * ç”±Spring beanå°†å¯¹è±¡æ³¨å…¥ * @param cacheManager */ public static void setCacheManager(CacheManager cacheManager) { ShiroAuthorizationHelper.cacheManager = cacheManager; } }  å°†cacheManageræ³¨å…¥åˆ°å¸®åŠ©ç±»ï¼š\n \u003c!-- æ³¨å…¥Shiroå¸®åŠ©ç±»çš„cacheManager --\u003e \u003cbean class=\"org.springframework.beans.factory.config.MethodInvokingFactoryBean\"\u003e \u003cproperty name=\"staticMethod\" value=\"com.damaiya.DMYSite.core.feature.security.ShiroAuthorizationHelper.setCacheManager\"/\u003e \u003cproperty name=\"arguments\" ref=\"shiroEhcacheManager\"/\u003e \u003c/bean\u003e  å½“ç„¶ref=â€œshiroEhcacheManagerâ€éœ€è¦ä½ è‡ªå·±å»å®ç°, æˆ‘è¿™é‡Œè´´ä¸‹æˆ‘çš„ï¼š\n \u003c!-- ç¼“å­˜ç®¡ç†å™¨ ä½¿ç”¨Ehcacheå®ç° --\u003e \u003cbean id=\"shiroEhcacheManager\" class=\"org.apache.shiro.cache.ehcache.EhCacheManager\"\u003e \u003cproperty name=\"cacheManagerConfigFile\" value=\"classpath:ehcache-shiro.xml\"/\u003e \u003c/bean\u003e  ä¸‹é¢æ˜¯ehcache-shiro.xmlé…ç½®, å…·ä½“çš„å‚æ•°ä½œç”¨æˆ‘å°±ä¸è¯´äº†:\n\u003cehcache updateCheck=\"false\" name=\"shiroCache\"\u003e \u003cdefaultCache maxElementsInMemory=\"10000\" eternal=\"false\" timeToIdleSeconds=\"120\" timeToLiveSeconds=\"120\" overflowToDisk=\"false\" diskPersistent=\"false\" diskExpiryThreadIntervalSeconds=\"120\" /\u003e \u003ccache name=\"myShiroCache\" maxElementsInMemory=\"10000\" eternal=\"false\" timeToIdleSeconds=\"30\" timeToLiveSeconds=\"0\" overflowToDisk=\"false\" diskPersistent=\"false\" diskExpiryThreadIntervalSeconds=\"120\"/\u003e \u003c/ehcache\u003e  ä½¿ç”¨æŒ‡å®šNameçš„Cacheè¿›è¡Œæƒé™ç¼“å­˜é…ç½®, securityRealmæ˜¯æˆ‘è‡ªå·±çš„Realmï¼š\n\u003cbean id=\"securityRealm\" class=\"com.damaiya.DMYSite.web.security.SecurityRealm\"\u003e \u003cproperty name=\"authorizationCacheName\" value=\"myShiroCache\"/\u003e \u003c/bean\u003e  è¿™æ ·æ•´ä¸ªé…ç½®å°±å®Œæˆäº†ï¼Œè€Œä¸”è°ƒç”¨clearAuthorizationInfo()æ—¶å°±å¯ä»¥æ¸…é™¤å½“å‰ç™»å½•ç”¨æˆ·çš„æƒé™ä¿¡æ¯äº†ã€‚\n","description":"","tags":["J2EE","Shiro"],"title":"Shiroæ¸…é™¤æ›´æ–°ç¼“å­˜çš„ç”¨æˆ·æƒé™","uri":"/posts/shiro-clear-update-authorization/"},{"categories":null,"content":"åœ¨J2EEé¡¹ç›®ä¸­ä½¿ç”¨Shiroè¿›è¡Œæƒé™éªŒè¯åï¼Œæ¯æ¬¡éƒ¨ç½²è·³è½¬åˆ°ç™»å½•ç•Œé¢æ€»ä¼šåœ¨é“¾æ¥åé¢å¤šå‡º;JSESSION=xxxxï¼ŒæŸ¥äº†å¾ˆå¤šï¼Œå¤§æ¦‚æœ‰ä¸‹é¢å‡ ç§æ–¹æ³•ï¼š\n  åœ¨web.xmlä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š\n \u003csession-config\u003e \u003ctracking-mode\u003eCOOKIE\u003c/tracking-mode\u003e \u003c/session-config\u003e  å…·ä½“è¯·å‚è€ƒï¼š\nhttp://stackoverflow.com/questions/11327631/remove-jsessionid-from-url\n   ä½¿ç”¨Filterå¯¹URLè¿›è¡Œrewrite\nå…·ä½“è¯·å‚è€ƒï¼š\nhttp://dr-yanglong.github.io/2015/07/07/del-jeesessionid/\n  æœ‰äº›åŒå­¦é‡å†™äº†shiroé‡å®šå‘æ—¶éœ€è¦è°ƒç”¨çš„æ–¹æ³•encodeRedirectURL()å’ŒtoEncoded()\nå…·ä½“è¯·å‚è€ƒï¼š\nhttp://dwangel.iteye.com/blog/2275899\nhttp://alex233.blog.51cto.com/8904951/1856155\n  åæ¥å»çœ‹äº†æºç ï¼Œå‘ç°äº†ä¸€ä¸ªæœ€æœ€ç®€å•çš„æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š\nshiroæºç ï¼š\nhttps://github.com/apache/shiro/pull/31/commits/7f37394c6048d8c8a214eabd312721ddb51adc9b\n  é˜…è¯»æºç ä¹‹åï¼Œå¯ä»¥å‘ç°DefaultWebSessionManager.javaæ–‡ä»¶ä¸­æ·»åŠ äº†æ–°å±æ€§private boolean sessionIdUrlRewritingEnabled;, é¡¾åæ€ä¹‰, æ˜¯ç”¨æ¥æ§åˆ¶æ˜¯å¦é‡å†™URLæ·»åŠ SESSIONIDçš„ï¼Œåªè¦ä¿®æ”¹shiroçš„sessionManageré…ç½®å¦‚ä¸‹å³å¯ï¼š\n \u003cbean id=\"sessionManager\" class=\"org.apache.shiro.web.session.mgt.DefaultWebSessionManager\"\u003e ... \u003cproperty name=\"sessionIdUrlRewritingEnabled\" value=\"true\"/\u003e ... \u003c/bean\u003e  More Sourceï¼š https://fralef.me/tomcat-disable-jsessionid-in-url.html\n","description":"","tags":["J2EE","Shiro"],"title":"æœ€ç®€å•æ–¹æ³•è§£å†³ä½¿ç”¨ShiroåURLä¸­JSESSIONIDçš„é—®é¢˜","uri":"/posts/tomcat-shiro-disable-jsessionid-in-url/"},{"categories":null,"content":"grep æ¦‚è¿° åœ¨ç»™å‡ºæ–‡ä»¶åˆ—è¡¨æˆ–æ ‡å‡†è¾“å…¥å, grepä¼šå¯¹åŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªæ­£åˆ™è¡¨è¾¾å¼çš„æ–‡æœ¬è¿›è¡Œæœç´¢, å¹¶è¾“å‡ºåŒ¹é…ï¼ˆæˆ–è€…ä¸åŒ¹é…ï¼‰çš„è¡Œæˆ–æ–‡æœ¬.\nä½¿ç”¨æ ¼å¼ grep [options] PATTERN [FILE...]  å¸¸ç”¨é€‰é¡¹  -i å¿½ç•¥å­—ç¬¦å¤§å°å†™ -v æ˜¾ç¤ºæœªè¢«æ¨¡å¼åŒ¹é…åˆ°çš„è¡Œæˆ–ä¸² -o åªæ˜¾ç¤ºåŒ¹é…åˆ°çš„ä¸²è€Œä¸æ˜¯æ•´è¡Œ -n æ˜¾ç¤ºåŒ¹é…çš„è¡ŒåŠè¡Œå· -E ä½¿ç”¨æ‰©å±•çš„æ­£åˆ™è¡¨è¾¾å¼ -A n æ˜¾ç¤ºå‡ºåŒ¹é…åˆ°çš„è¡Œå’Œånè¡Œ -B n æ˜¾ç¤ºå‡ºåŒ¹é…åˆ°çš„è¡Œå’Œå‰nè¡Œ -C n æ˜¾ç¤ºå‡ºåŒ¹é…åˆ°çš„è¡Œå’Œå‰åå„nè¡Œ  æ‰©å±•çš„æ­£åˆ™è¡¨è¾¾å¼\næ‰©å±•æ­£åˆ™è¡¨è¾¾å¼ä¸åŸºç¡€æ­£åˆ™è¡¨è¾¾å¼çš„å”¯ä¸€åŒºåˆ«åœ¨äº: () {} ? + è¿™å‡ ä¸ªå­—ç¬¦.\nåŸºç¡€æ­£åˆ™è¡¨è¾¾å¼ä¸­, () {} ? + è¡¨ç¤ºç‰¹æ®Šå«ä¹‰ï¼Œä½¿ç”¨æ—¶éœ€è¦å°†ä»–ä»¬è½¬ä¹‰\nè€Œæ‰©å±•æ­£åˆ™è¡¨è¾¾å¼ä¸­, () {} ? + ä¸è¡¨ç¤ºç‰¹æ®Šå«ä¹‰, ä½ éœ€è¦å°†ä»–ä»¬è½¬ä¹‰.\nè½¬ä¹‰ç¬¦å·, éƒ½æ˜¯ä¸€æ ·çš„: åæ–œçº¿ \\ .\næ‰€è°“ç‰¹æ®Šå«ä¹‰, å°±æ˜¯æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„å«ä¹‰. éç‰¹æ®Šå«ä¹‰, å°±æ˜¯è¿™ä¸ªç¬¦å·æœ¬èº«.\næ­£åˆ™è¡¨è¾¾å¼ å…ƒå­—ç¬¦          . åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦   [] åŒ¹é…[]æŒ‡å®šèŒƒå›´å†…çš„ä»»æ„å•ä¸ªå­—ç¬¦   [^] åŒ¹é…[]æŒ‡å®šèŒƒå›´å¤–çš„ä»»æ„å•ä¸ªå­—ç¬¦    å­—ç¬¦é›†          [:digit:] æ•°å­—   [:lower:] å°å†™å­—æ¯   [:upper:] å¤§å†™å­—æ¯   [:punct:] æ ‡ç‚¹ç¬¦å·   [:space:] ç©ºç™½å­—ç¬¦   [:alpha:] æ‰€æœ‰å­—æ¯   [:alnum:] æ‰€æœ‰å­—æ¯å’Œæ•°å­—, éæ ‡ç‚¹    ä¾‹1.1\n$ grep '[[:punct:]]' grep_example # æ‰€æœ‰æœ‰æ ‡ç‚¹çš„è¡Œ  åŒ¹é…æ¬¡æ•°          .* åŒ¹é…ä»»æ„å­—ç¬¦ä¸²   * å‰é¢çš„å­—ç¬¦é‡å¤ä»»æ„æ¬¡æ•°, 0æ¬¡1æ¬¡æˆ–å¤šæ¬¡   + å‰é¢çš„å­—ç¬¦é‡å¤1æ¬¡æˆ–å¤šæ¬¡   ? å‰é¢çš„å­—ç¬¦é‡å¤0æ¬¡æˆ–è€…å¤šæ¬¡   {m, n} åŒ¹é…å‰é¢çš„å­—ç¬¦è‡³å°‘mæ¬¡, è‡³å¤šnæ¬¡   {m, } åŒ¹é…å‰é¢çš„å­—ç¬¦è‡³å°‘mæ¬¡    ä½ç½®é”šå®š ||| | ^ | ^åé¢çš„å­—ç¬¦å¿…é¡»å‡ºç°åœ¨è¡Œé¦– | | $ | $å‰é¢çš„å­—ç¬¦å¿…é¡»å‡ºç°åœ¨è¡Œå°¾ | | ^$ | ç©ºç™½è¡Œ | | \u003c | \u003cåé¢çš„å­—ç¬¦å¿…é¡»å‡ºç°åœ¨è¯é¦– | | \u003e | \u003eå‰é¢çš„å­—ç¬¦å¿…é¡»å‡ºç°åœ¨è¯å°¾ | | () | ()ä¸­çš„å½“åšä¸€ä¸ªæ•´ä½“åŒ¹é… |\nä¾‹1.2\n$ grep -E '.*(d+)' grep_example $ grep -E '.*(d+)$' grep_example  sed æ¦‚è¿° sed (æ„ä¸ºæµç¼–è¾‘å™¨, æºè‡ªè‹±è¯­\"Stream Editor\"çš„ç¼©å†™)\nsedç”¨æ¥æŠŠæ–‡æ¡£æˆ–å­—ç¬¦ä¸²é‡Œé¢çš„æ–‡å­—ç»è¿‡ä¸€ç³»åˆ—ç¼–è¾‘å‘½ä»¤è½¬æ¢ä¸ºå¦ä¸€ç§æ ¼å¼è¾“å‡º.\nsedé€šå¸¸ç”¨æ¥åŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªæ­£åˆ™è¡¨è¾¾å¼çš„æ–‡æœ¬è¿›è¡Œå¤„ç†.\næ¨¡å¼ç©ºé—´\næ¨¡å¼ç©ºé—´: æŠŠå½“å‰å¤„ç†çš„è¡Œå­˜å‚¨åœ¨ä¸´æ—¶çš„ç¼“å†²åŒº, ç§°ä¸º\"æ¨¡å¼ç©ºé—´\"(Pattern Space)\næ¨¡å¼ç©ºé—´å°±æ˜¯è¯»å…¥è¡Œæ‰€åœ¨çš„ç¼“å­˜ï¼Œsedå¯¹æ–‡æœ¬è¡Œè¿›è¡Œçš„å¤„ç†éƒ½æ˜¯åœ¨è¿™ä¸ªç¼“å­˜ä¸­è¿›è¡Œçš„ã€‚\nä½¿ç”¨æ ¼å¼ sed 'Address Command' [FILE...]  å¸¸ç”¨é€‰é¡¹  -n ä¸æ˜¾ç¤ºæ¨¡å¼ç©ºé—´ä¸­çš„å†…å®¹ -i ç›´æ¥ä¿®æ”¹åŸæ–‡ä»¶ -r ä½¿ç”¨æ‰©å±•çš„æ­£åˆ™è¡¨è¾¾å¼  Address 1. StartLine, EndLine: # å¼€å§‹è¡Œ, ç»“æŸè¡Œ # å¦‚: 1, 100 è¡¨ç¤º 1 åˆ° 100 è¡Œ 2. /RegExp/ # æ­£åˆ™è¡¨è¾¾å¼ 3. /pattern1/, /pattern2/ # ä»åŒ¹é…åˆ°/pattern1/å¼€å§‹, ä¸€ç›´åˆ°åŒ¹é…åˆ°/pattern2/ç»“æŸä¸­é—´æ‰€æœ‰çš„è¡Œ 4. LineNumber # æŒ‡å®šçš„æŸä¸€è¡Œ 5. StartLine, +N # ä»StartLineå¼€å§‹åé¢Nè¡Œ  Command  d åˆ é™¤æ»¡è¶³æ¨¡å¼çš„è¡Œ p æ˜¾ç¤ºæ»¡è¶³æ¨¡å¼çš„è¡Œ a \\string åœ¨æ»¡è¶³æ¨¡å¼çš„è¡Œåæ·»åŠ æ–°è¡Œ, å†…å®¹ä¸ºstringä¸²çš„å†…å®¹ i \\string åœ¨æ»¡è¶³æ¨¡å¼çš„è¡Œå‰æ·»åŠ æ–°è¡Œ, å†…å®¹ä¸ºstringä¸²çš„å†…å®¹ r fileï¼šå°†æŒ‡å®šçš„æ–‡ä»¶çš„å†…å®¹æ·»åŠ è‡³ç¬¦åˆæ¡ä»¶çš„è¡Œå w fileï¼šå°†åœ°å€æŒ‡å®šèŒƒå›´å†…çš„è¡Œå¦å­˜è‡³æŒ‡å®šçš„æ–‡ä»¶ä¸­ s \\pattern\\string\\ä¿®é¥°ç¬¦ å°†æ»¡è¶³patternçš„ä¸²æ›¿æ¢ä¸ºstring ä¿®é¥°ç¬¦: \\g å…¨å±€æ›¿æ¢, å³å°†è¯¥è¡Œä¸­æ‰€æœ‰åŒ¹é…é¡¹æ›¿æ¢, é»˜è®¤åªæ›¿æ¢ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹ \\i å¿½ç•¥å¤§å°å†™ \u0026 å¼•ç”¨æ¨¡å¼åŒ¹é…çš„æ•´ä¸ªä¸² \\1 è¡¨ç¤ºåŒ¹é…åˆ°æ¨¡å¼ä¸­çš„ç¬¬ä¸€ä¸ª ( å¼€å§‹çš„ä¸² \\2 è¡¨ç¤ºåŒ¹é…åˆ°æ¨¡å¼ä¸­çš„ç¬¬äºŒä¸ª ( å¼€å§‹çš„ä¸²  ä¾‹2.1\n#ä»ä»¥hezhaoyangå¼€å¤´çš„è¡Œå¼€å§‹åŒ¹é…, ä¸€ç›´åˆ°ä»¥Iå¼€å¤´çš„è¡Œ, æ˜¾ç¤ºä¸­é—´æ‰€æœ‰è¡Œ $ sed -n '/^hezhaoyang/,/^I/p' sed_example  ä¾‹2.2\n#å°†sed_insertä¸­çš„å†…å®¹æ’å…¥åˆ°ä»¥hezhaoyangå¼€å¤´çš„è¡Œå $ sed '/hezhaoyang/r sed_insert' sed_example  awk æ¦‚è¿° AWKæ˜¯ä¸€ç§å¤„ç†æ–‡æœ¬æ–‡ä»¶çš„è¯­è¨€. å®ƒå°†æ–‡ä»¶ä½œä¸ºè®°å½•åºåˆ—å¤„ç†. åœ¨ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ–‡ä»¶å†…å®¹çš„æ¯è¡Œéƒ½æ˜¯ä¸€ä¸ªè®°å½•. æ¯è¡Œå†…å®¹éƒ½ä¼šè¢«åˆ†å‰²æˆä¸€ç³»åˆ—çš„åŸŸ, å› æ­¤, æˆ‘ä»¬å¯ä»¥è®¤ä¸ºä¸€è¡Œçš„ç¬¬ä¸€ä¸ªè¯ä¸ºç¬¬ä¸€ä¸ªåŸŸ,ç¬¬äºŒä¸ªè¯ä¸ºç¬¬äºŒä¸ª, ä»¥æ­¤ç±»æ¨. AWKç¨‹åºæ˜¯ç”±ä¸€äº›å¤„ç†ç‰¹å®šæ¨¡å¼çš„è¯­å¥å—æ„æˆçš„. AWKä¸€æ¬¡å¯ä»¥è¯»å–ä¸€ä¸ªè¾“å…¥è¡Œ. å¯¹æ¯ä¸ªè¾“å…¥è¡Œ, AWKè§£é‡Šå™¨ä¼šåˆ¤æ–­å®ƒæ˜¯å¦ç¬¦åˆç¨‹åºä¸­å‡ºç°çš„å„ä¸ªæ¨¡å¼, å¹¶æ‰§è¡Œç¬¦åˆçš„æ¨¡å¼æ‰€å¯¹åº”çš„åŠ¨ä½œã€‚\nâ€”â€”é˜¿å°”ä½›é›·å¾·Â·è‰¾ä¾¯ï¼ŒThe A-Z of Programming Languages: AWK\nä½¿ç”¨æ ¼å¼ awk [options] 'BEGIN{ } pattern{ } END{ }'  å¸¸ç”¨é€‰é¡¹  -F fs : æŒ‡å®šåˆ†éš”ç¬¦ä¸ºfs -v var=value : å®šä¹‰å¯ä¼ é€’ç»™awkçš„å˜é‡ -f scriptfile : ä»è„šæœ¬æ–‡ä»¶ä¸­è¯»å–awkå‘½ä»¤  åŸºæœ¬ç»“æ„ ä¸€ä¸ªawkè„šæœ¬é€šå¸¸ç”±: BEGINè¯­å¥å—ã€èƒ½å¤Ÿä½¿ç”¨æ¨¡å¼åŒ¹é…çš„é€šç”¨è¯­å¥å—ã€ENDè¯­å¥å—3éƒ¨åˆ†ç»„æˆ, è¿™ä¸‰ä¸ªéƒ¨åˆ†æ˜¯å¯é€‰çš„. ä»»æ„ä¸€ä¸ªéƒ¨åˆ†éƒ½å¯ä»¥ä¸å‡ºç°åœ¨è„šæœ¬ä¸­, è„šæœ¬é€šå¸¸æ˜¯è¢«å•å¼•å·æˆ–åŒå¼•å·ä¸­.\nawk çš„å·¥ä½œè¿‡ç¨‹ ç¬¬ä¸€æ­¥: æ‰§è¡ŒBEGIN{ commands }è¯­å¥å—ä¸­çš„è¯­å¥; ç¬¬äºŒæ­¥: ä»æ–‡ä»¶æˆ–æ ‡å‡†è¾“å…¥(stdin)è¯»å–ä¸€è¡Œ, ç„¶åæ‰§è¡Œpattern{ commands }è¯­å¥å—, å®ƒé€è¡Œæ‰«ææ–‡ä»¶, ä»ç¬¬ä¸€è¡Œåˆ°æœ€åä¸€è¡Œé‡å¤è¿™ä¸ªè¿‡ç¨‹, ç›´åˆ°æ–‡ä»¶å…¨éƒ¨è¢«è¯»å–å®Œæ¯•. ç¬¬ä¸‰æ­¥: å½“è¯»è‡³è¾“å…¥æµæœ«å°¾æ—¶, æ‰§è¡ŒEND{ commands }è¯­å¥å—.\nBEGINè¯­å¥å—åœ¨awkå¼€å§‹ä»è¾“å…¥æµä¸­è¯»å–è¡Œä¹‹å‰è¢«æ‰§è¡Œ, è¿™æ˜¯ä¸€ä¸ªå¯é€‰çš„è¯­å¥å—, æ¯”å¦‚å˜é‡åˆå§‹åŒ–ã€æ‰“å°è¾“å‡ºè¡¨æ ¼çš„è¡¨å¤´ç­‰è¯­å¥é€šå¸¸å¯ä»¥å†™åœ¨BEGINè¯­å¥å—ä¸­. ENDè¯­å¥å—åœ¨awkä»è¾“å…¥æµä¸­è¯»å–å®Œæ‰€æœ‰çš„è¡Œä¹‹åå³è¢«æ‰§è¡Œ, æ¯”å¦‚æ‰“å°æ‰€æœ‰è¡Œçš„åˆ†æç»“æœè¿™ç±»ä¿¡æ¯æ±‡æ€»éƒ½æ˜¯åœ¨ENDè¯­å¥å—ä¸­å®Œæˆ, å®ƒä¹Ÿæ˜¯ä¸€ä¸ªå¯é€‰è¯­å¥å—. patternè¯­å¥å—ä¸­çš„é€šç”¨å‘½ä»¤æ˜¯æœ€é‡è¦çš„éƒ¨åˆ†, å®ƒä¹Ÿæ˜¯å¯é€‰çš„. {} ç›¸å½“äºä¸€ä¸ªå¾ªç¯ä½“, å®ƒä¼šå¯¹æ–‡ä»¶ä¸­çš„æ¯ä¸€è¡Œè¿›è¡Œè¿­ä»£.\nè¾“å‡º print / printf print   å½“è¦è¾“å‡ºå¤šä¸ªå˜é‡æ—¶, åº”è¯¥ç”¨é€—å·',â€˜åˆ†éš”\n $ echo | awk '{ var1=\"v1\"; var2=\"v2\"; var3=\"v3\"; print var1,var2,var3; }'    åªå†™ print ç›¸å½“äº print $0, å¦‚æœæƒ³è¦è¾“å‡ºç©ºè¡Œ, åº”è¯¥å†™åš: print ''\n  $1, $2, $3 â€¦ åˆ†åˆ«å¯¹åº”è¯¥è¡Œçš„ç¬¬1ä¸ª, ç¬¬2ä¸ª, ç¬¬3ä¸ªå­—æ®µ, ä»¥æ­¤ç±»å¯¹\n  printf ä¸ print çš„åŒºåˆ«åœ¨äº printf éœ€è¦æ ¼å¼åŒ–è¾“å‡º.\n         %c å­—ç¬¦ç±»å‹   %d, %i åè¿›åˆ¶   %e, %E ç§‘å­¦è®¡æ•°æ³•è¾“å‡ºæ•°å€¼   %f æµ®ç‚¹æ•°ç±»å‹   %g, %G ç§‘å­¦è®¡æ•°æ³•æˆ–æµ®ç‚¹æ•°æ ¼å¼æ˜¾ç¤º   %s å­—ç¬¦ä¸²   %u æ— ç¬¦å·æ•´æ•°   %% %æœ¬èº«    ä¿®é¥°ç¬¦  N: å®½åº¦ -: å·¦å¯¹é½ +: æ˜¾ç¤ºæ•°å€¼ç¬¦å·  æ³¨æ„: printf é»˜è®¤ä¸æ¢è¡Œ, éœ€è¦ä½¿ç”¨\"\\n\"\nä¾‹3.1:\n#è¾“å‡ºç”¨æˆ·åå’Œä½¿ç”¨çš„shellç±»å‹ $ head -10 /etc/passwd | awk -F: '{printf \"%-15s%s\\n\", $1, $7}'  awkå†…ç½®å˜é‡ è®°å½•å˜é‡  FS: field separator å­—æ®µåˆ†éš”ç¬¦, é»˜è®¤ä¸ºç©ºç™½å­—ç¬¦ RS: record separator è®°å½•åˆ†éš”ç¬¦, é»˜è®¤ä¸ºæ¢è¡Œç¬¦ OFS: output field separator è¾“å‡ºå­—æ®µåˆ†éš”ç¬¦ ORS: output record separator è¾“å‡ºè®°å½•åˆ†éš”ç¬¦  æ•°æ®å˜é‡   NR: number of input rows å¤„ç†çš„è¡Œæ•°\n  NF: number of fields è¯¥è¡Œå­—æ®µçš„ä¸ªæ•°\n  ARGV: æ•°ç»„, ä¿å­˜awkå‘½ä»¤è¡Œ. å¦‚: $ awk â€˜{ print $0 }â€™ a.txt b.txtä¸­ARGV[0]=awk, ARGV[1]=a.txt\n  ARGC: awkå‘½ä»¤å‚æ•°çš„ä¸ªæ•°\n  FILENAME: æ‰€å¤„ç†æ–‡ä»¶çš„åç§°\n  IGNORECASE: IGNORECASE=1æ—¶å¿½ç•¥å¤§å°å†™\n $ echo \"TEST HHHH\" | awk '{IGNORECASE=1; if($1 == \"test\"){print \"ok\";}}'    èµ‹å€¼ $ awk -v var=\"value\" '{print var}' $ awk 'BEGIN{ var=\"value\"; print var; }'  æ“ä½œç¬¦ + - * / ^ ** %  æ¯”è¾ƒè¿ç®—ç¬¦  \u003c \u003c= \u003e= \u003e \u003e= == != x~y # True if the string x matches the regexp denoted by y # å¦‚æœå­—ç¬¦ä¸²xè¢«æ­£åˆ™è¡¨è¾¾å¼yåŒ¹é…, åˆ™ä¸ºçœŸ x!~y  æ•°ç»„ å®šä¹‰ arr[1] = 'first' arr[2] = 'second' arr['year'] = 2016 arr['month'] = 8  é•¿åº¦ length() è·å–å­—ç¬¦ä¸²ï¼Œæ•°ç»„çš„é•¿åº¦ split() åˆ†å‰²æ•°ç»„ï¼Œ è¿”å›é•¿åº¦ asort() æ’åºæ•°ç»„ï¼Œ è¿”å›é•¿åº¦  éœ€è¦æ³¨æ„ï¼š\nåˆ¤æ–­æ•°ç»„æ˜¯å¦åŒ…å«æŸé”®å€¼\n#é”™è¯¯å†™æ³• $ echo | awk 'BEGIN{a[\"a\"]=1;a[\"b\"]=2; if(a[\"c\"]!=1){print \"ok\"}; for(i in a) {print i, a[i];} }' #æ­£ç¡®åˆ¤æ–­ $ echo | awk 'BEGIN{a[\"a\"]=1;a[\"b\"]=2; if(\"c\" in a){print \"ok\"}; for(i in a) {print i, a[i];} }'  awk ä¸­çš„æ•°ç»„æ˜¯å…³è”æ•°ç»„, åªè¦æ˜¯é€šè¿‡ä»–çš„æ•°ç»„å¼•ç”¨è¿‡key, å°±ä¼šè‡ªåŠ¨åˆ›å»ºè¯¥åºåˆ—.\nå¤šç»´æ•°ç»„ awkçš„å¤šç»´æ•°ç»„æœ¬è´¨ä¸Šæ˜¯ä¸€ç»´æ•°ç»„, æ›´ç¡®åˆ‡åœ°è¯´, awkæ˜¯ä¸æ”¯æŒä»¥ä¸ºå¤šç»´æ•°ç»„çš„. ä½†æ˜¯awkæä¾›äº†é€»è¾‘ä¸Šæ¨¡æ‹Ÿå¤šç»´æ•°ç»„çš„æ–¹å¼. åœ¨awkä¸­, array[1, 2]=1 , è¿™æ ·çš„å†™æ³•æ˜¯å…è®¸çš„. ä»–æ˜¯ä½¿ç”¨äº†ä¸€ä¸ªç‰¹æ®Šå­—ç¬¦ä¸²SUBSEP(\\034)åˆ†éš”é”®, [2, 4]å®é™…ä¸Šæ˜¯[2SUBSEP4].\nè®¿é—®å¯ä»¥ä½¿ç”¨for( (i, j) in array ){}ä½†æ˜¯å¿…é¡»ç”¨åœ†æ‹¬å·. ä½†æ˜¯å•ç‹¬è®¿é—®æ—¶, å¿…é¡»ä½¿ç”¨split()å°†æ•°ç»„é”®å€¼åˆ†å¼€. å³:\narr[1,1] = 11; arr[1,2] = 12; arr[2,1] = 21; arr[2,2] = 22; for (a in arr) { split(a, tmp, SUBSEP); print tmp[1], tmp[2];z }  æ§åˆ¶è¯­å¥ 1. if-else if (condition) {} else {} 2. while while (condition) {} 3. do-while do {} while (condition) 4. for for ( ; ; ) {} for (item in array) {} 5. switch switch (expression) { case x: ; case y: ;} 6. break, continue 7. next # æå‰ç»“æŸæœ¬è¡Œ  å†…ç½®å‡½æ•° split(string, array [,fieldsep]) # ä½¿ç”¨fieldsepåˆ†éš”string, å¹¶å­˜å‚¨åœ¨åä¸ºarrayçš„æ•°ç»„ä¸­ #å®ä¾‹: $ awk '{ split( \"20:18:00\", time, \":\" ); print time[2] }' # ä¸Šä¾‹æŠŠæ—¶é—´æŒ‰å†’å·åˆ†å‰²åˆ°timeæ•°ç»„å†…ï¼Œå¹¶æ˜¾ç¤ºç¬¬äºŒä¸ªæ•°ç»„å…ƒç´ 18ã€‚ # è¿”å›å€¼ä¸ºåˆ†å‰²æ•°ç»„çš„é•¿åº¦ length(string) substr(string, start [, length]) system(command) : æ‰§è¡Œå‘½ä»¤å¹¶è¿”å›ç»™awk systime() : è¿”å›å½“å‰æ—¶é—´æ—¶é—´æˆ³ tolower(string) toupper(string) match(string, regular expression) # matchå‡½æ•°è¿”å›åœ¨å­—ç¬¦ä¸²ä¸­æ­£åˆ™è¡¨è¾¾å¼ä½ç½®çš„ç´¢å¼•, # å¦‚æœæ‰¾ä¸åˆ°æŒ‡å®šçš„æ­£åˆ™è¡¨è¾¾å¼åˆ™è¿”å›0, æ‰¾åˆ°è¿”å›1ã€‚ # matchå‡½æ•°ä¼šè®¾ç½®å†…å»ºå˜é‡RSTARTä¸ºå­—ç¬¦ä¸²ä¸­å­å­—ç¬¦ä¸²çš„å¼€å§‹ä½ç½®, RLENGTHä¸ºåˆ°å­å­—ç¬¦ä¸²æœ«å°¾çš„å­—ç¬¦ä¸ªæ•°. # substrå¯åˆ©äºè¿™äº›å˜é‡æ¥æˆªå–å­—ç¬¦ä¸². #å®ä¾‹ï¼š $ awk '{start=match(\"this is a test\",/[a-z]+$/); print start}' $ awk '{start=match(\"this is a test\",/[a-z]+$/); print start, RSTART, RLENGTH }' # ç¬¬ä¸€ä¸ªå®ä¾‹æ‰“å°ä»¥è¿ç»­å°å†™å­—ç¬¦ç»“å°¾çš„å¼€å§‹ä½ç½®, è¿™é‡Œæ˜¯11. # ç¬¬äºŒä¸ªå®ä¾‹è¿˜æ‰“å°RSTARTå’ŒRLENGTHå˜é‡, è¿™é‡Œæ˜¯11(start), 11(RSTART), 4(RLENGTH).  å†…å»ºæ•°å­¦å‡½æ•° 1. cos(x) ä½™å¼¦å‡½æ•° 2. exp(x) æ±‚å¹‚ 3. int(x) å–æ•´ 4. log(x) è‡ªç„¶å¯¹æ•°, è¿‡ç¨‹æ²¡æœ‰èˆå…¥ 5. rand() äº§ç”Ÿä¸€ä¸ªå¤§äºç­‰äº0è€Œå°äº1çš„éšæœºæ•° 6. sin(x) æ­£å¼¦ 7. sqrt(x) å¹³æ–¹æ ¹ 8. srand(x) xæ˜¯rand()å‡½æ•°çš„ç§å­  è‡ªå®šä¹‰å‡½æ•° function F_NAME([variable]) { statements } # å‡½æ•°è¿˜å¯ä»¥ä½¿ç”¨returnè¯­å¥è¿”å›å€¼ï¼Œæ ¼å¼ä¸ºâ€œreturn valueâ€ ","description":"","tags":["Linux"],"title":"Grep, Sed, Awk æ—¥å¸¸ä½¿ç”¨","uri":"/posts/grepsedawk/"},{"categories":null,"content":"å‰è¨€ æ²¡æœ‰æ¥è§¦è¿‡Vimçš„åŒå­¦, ä¸€å®šä¼šè§‰å¾—å¹³æ—¶ä½¿ç”¨çš„IDEå¾ˆå¥½ç”¨, ä½†æ˜¯å½“ä½ å¼€å§‹ä½¿ç”¨Vim, å¹¶ä¸”æ¸æ¸ç†Ÿæ‚‰, æˆ‘è§‰å¾—ä½ ä¼šçˆ±ä¸Šè¿™ä¸€æ¬¾ç¼–è¾‘å™¨. åƒä¸‡ä¸è¦å› ä¸ºä¸€å¼€å§‹Vimæœ‰å¤ªå¤šå‘½ä»¤éœ€è¦è®°å¿†è€Œæ”¾å¼ƒå®ƒ.\nè¿™ç¯‡åšå®¢æ˜¯ç¿»è¯‘è‡ªã€ŠLearn Vim Progressivelyã€‹, å¹¶åœ¨æˆ‘è§‰å¾—æœ‰å¿…è¦æ·»åŠ è¯´æ˜çš„åœ°æ–¹æ·»åŠ äº†è‡ªå·±çš„è¯´æ˜. æˆ‘è®¤ä¸ºæ˜¯æœ€é€‚åˆå…¥é—¨Vimçš„æ•™ç¨‹, æ²¡æœ‰ä¹‹ä¸€.\n æ­£æ–‡å¼€å§‹ ä½ æƒ³ä»¥æœ€å¿«çš„æ–¹å¼è‡ªå­¦Vimå—? åœ¨äººç±»æœ€ä¼˜ç§€çš„ç¼–è¾‘å™¨é¢å‰, ä½ å¿…é¡»è‡³å°‘å…ˆå­¦ä¼šå¦‚ä½•å¹¸å­˜ä¸‹æ¥, ç„¶åå†å»ä¸€ç‚¹ç‚¹æ•´åˆä½¿ç”¨å®ƒçš„æŠ€å·§.\nVim the Six Billion Dollar editor\n Better, Stronger, Faster\n å½“ä½ å­¦ä¼šä½¿ç”¨Vim, å®ƒå°†æˆä¸ºä½ æœ€åä¸€ä¸ªç¼–è¾‘å™¨. è™½ç„¶å­¦ä¹ å®ƒçš„è¿‡ç¨‹å¾ˆä¸å®¹æ˜“, ä½†æ˜¯æœ€åå®ƒä¼šéš¾ä»¥ç½®ä¿¡çš„å¥½ç”¨.\nä¸‹é¢4ä¸ªæ­¥éª¤æ˜¯ä½ è‡ªå­¦çš„æ„Ÿå—:\n å­˜æ´» ä½¿ç”¨é¡ºæ‰‹ æ›´å¥½, æ›´å¼º, æ›´å¿« ä½¿ç”¨Vimçš„è¶…èƒ½åŠ›  å½“ä½ è¯»å®Œè¿™ç¯‡æ–‡ç« , ä½ å°†ä¼šçˆ±ä¸Švim.\nä½†æ˜¯æˆ‘ä»¬å¼€å§‹ä¹‹å‰, è¦å…ˆè¯´æ˜ä¸€ç‚¹:\n å­¦ä¹ vimçš„è¿‡ç¨‹å°†æ˜¯ååˆ†ç—›è‹¦çš„ å°†èŠ±è´¹ä¸€äº›æ—¶é—´, åƒä¸‡ä¸è¦è§‰å¾—æµªè´¹æ—¶é—´å„¿æ”¾å¼ƒ å­¦ä¹ ä»–çš„è¿‡ç¨‹å°±åƒæ˜¯å­¦ä¹ ä¹å™¨, ä¸€æ—¦å…¥é—¨, å°±ä¼šå˜å¾—å¾ˆè½»æ¾ ä¸è¦å¥¢æœ›åƒå…¶ä»–ç¼–è¾‘å™¨ä¸€æ ·ä¸‰å¤©ä¹‹å†…å°±èƒ½ç†Ÿç»ƒæŒæ¡, å­¦ä¹ vimè‡³å°‘éœ€è¦ä¸¤ä¸ªæ˜ŸæœŸè€Œä¸æ˜¯ä¸‰å¤©  Level 1 - å­˜æ´» å®‰è£…vim è¿è¡Œvim ä¸è¦åšä»»ä½•äº‹æƒ…! è¯·å…ˆé˜…è¯»  åœ¨æ™®é€šç¼–è¾‘å™¨ä¸­, å½“ä½ æ•²å‡»é”®ç›˜å°±èƒ½åœ¨å±å¹•ä¸Šçœ‹åˆ°æƒ³è¦çš„å­—ç¬¦. ä½†æ˜¯å¯¹äºVimæ¥è®², ä¸æ˜¯è¿™æ ·çš„. å½“ä½ å¯åŠ¨vimçš„æ—¶å€™, vimå½“å‰æ­£åœ¨ Normal æ¨¡å¼ä¸‹, ä½ éœ€è¦å…ˆå°†æ¨¡å¼åˆ‡æ¢ä¸º Insert æ¨¡å¼, æ‰èƒ½å¤Ÿè¾“å…¥å­—ç¬¦. ä» Normal æ¨¡å¼åˆ° Insert æ¨¡å¼, éœ€è¦æ•²å‡»é”®ç›˜å­—ç¬¦ i.\nå½“ä½ è¿›å…¥*Insert*æ¨¡å¼, ä½ å¯èƒ½ä¼šæ„Ÿè§‰èˆ’æœä¸€ç‚¹, å› ä¸ºä½ å¯ä»¥åƒæ™®é€šç¼–è¾‘å™¨ä¸€æ ·è¾“å…¥å­—ç¬¦äº†. å¦‚æœä½ æƒ³ä»*Insert*æ¨¡å¼åˆ‡æ¢å›*Normal*æ¨¡å¼, åªéœ€è¦æ•²å‡»é”®ç›˜æœ€å·¦ä¸Šè§’çš„é”®ESCé”®.\nç°åœ¨ä½ çŸ¥é“å¦‚ä½•åœ¨*Insert*æ¨¡å¼å’Œ*Normal*æ¨¡å¼ä¹‹é—´åˆ‡æ¢äº†. ç°åœ¨, ä½ å¿…é¡»è¦æŒæ¡ä¸‹é¢å‡ ä¸ªå‘½ä»¤ä»¥ä¿è¯ä½ èƒ½åœ¨*Normal*æ¨¡å¼ä¸‹å­˜æ´»ä¸‹å»:\n  i : åˆ‡æ¢åˆ°*Insert*æ¨¡å¼. æŒ‰ESCè¿”å›*Normal*æ¨¡å¼ x : åˆ é™¤å½“å‰å…‰æ ‡æ‰€åœ¨çš„ä¸€ä¸ªå­—ç¬¦ :wq : ä¿å­˜å¹¶é€€å‡º (:w ä¿å­˜ç¼–è¾‘çš„æ–‡ä»¶, :q é€€å‡ºvim) dd : åˆ é™¤å…‰æ ‡æ‰€åœ¨çš„ä¸€è¡Œ p : ç²˜è´´    #####æ¨è\n   hjkl (å¼ºçƒˆæ¨èä½†ä¸å¼ºåˆ¶ä½¿ç”¨): ä½ å¯ä»¥ä½¿ç”¨é”®ç›˜çš„ â†‘ â†“ â† â†’ è¿›è¡Œå…‰æ ‡çš„ç§»åŠ¨. æç¤º: åœ¨*Normal*æ¨¡å¼ä¸‹, jä»£è¡¨æ–¹å‘ â†“ :help \u003ccommand\u003e : æ˜¾ç¤º \u003ccommand\u003e çš„å¸®åŠ©æ–‡æ¡£. ä½ å¯ä»¥ç›´æ¥è¾“å…¥ :help è€Œä¸è¾“å…¥ \u003ccommand\u003e è·å–ä¸€èˆ¬æ€§å¸®åŠ©.   æœ€å¼€å§‹, ä½ åªéœ€è¦ä¸Šé¢5ä¸ªå‘½ä»¤. å½“ä½ å¾ˆè‡ªç„¶åœ°ä½¿ç”¨ä»¥ä¸Šå‘½ä»¤, æŠ›å¼ƒä¹‹å‰æ™®é€šç¼–è¾‘å™¨çš„ä¹ æƒ¯, é‚£ä¹ˆä½ å°±å¯ä»¥åˆ°Level 2äº†.\nä½†æ˜¯, åœ¨*Normal*æ¨¡å¼ä¸‹éœ€è¦æ³¨æ„çš„æ˜¯: åœ¨æ™®é€šç¼–è¾‘å™¨ä¸‹, Ctrl-Cæ˜¯å¤åˆ¶å‘½ä»¤, è¿™æ˜¯ä¸ªç»„åˆæŒ‰é”®æ¥å®Œæˆä¸€é¡¹å¤åˆ¶çš„åŠŸèƒ½, ä½†æ˜¯åœ¨vimä¸‹, ä¸å¯ä»¥è½»æ˜“åœ°ä½¿ç”¨Ctrl. äº‹å®ä¸Š, åœ¨Vimçš„ *Normal* æ¨¡å¼ä¸‹, vimå·²ç»èµ‹äºˆæ¯ä¸€ä¸ªæŒ‰é”®åŠŸèƒ½, ä¹Ÿå°±æ˜¯è¯´, åœ¨*Normal*æ¨¡å¼ä¸‹, æ¯ä¸€ä¸ªé”®éƒ½æ˜¯åŠŸèƒ½é”®, è€Œä¸éœ€è¦ä½ æŒ‰ä¸‹Ctrlå»ç»„åˆå…¶ä»–æŒ‰é”®å®ç°æŸé¡¹åŠŸèƒ½.\næç¤º\n ä¸ºäº†ä¾¿äºä¹¦å†™å’Œé˜…è¯», ä¸‹é¢çš„æ–‡ç« ä¸­, \u003cC-Î»\u003e å°†ä»£è¡¨é”®å…¥ Ctrl-Î» å‘½ä»¤éƒ½æ˜¯ä»¥:å¼€å¤´, å¹¶ä¸”æœ€åè¦é”®å…¥\u003center\u003e. å¦‚: å½“æˆ‘å†™:q, å°†ä»£è¡¨:q\u003center\u003e  Level 2 - æ„Ÿè§‰é¡ºæ‰‹ ä½ ç°åœ¨å·²ç»å¯ä»¥åœ¨vimä¸­å­˜æ´»äº†. ç°åœ¨æ˜¯æ—¶å€™å­¦ç‚¹å…¶ä»–çš„å‘½ä»¤äº†. ä¸‹é¢æ˜¯æˆ‘çš„å»ºè®®(ä»¥ä¸‹å‘½ä»¤éƒ½æ˜¯åœ¨*Normal*æ¨¡å¼ä¸‹é”®å…¥):\n å„ç§æ’å…¥æ¨¡å¼    a : åœ¨å½“å‰å…‰æ ‡åå¼€å§‹æ’å…¥, å¹¶ä¸”è¿›å…¥*Insert*æ¨¡å¼ o : ä»å½“å‰è¡Œä¸‹é¢æ’å…¥æ–°è¡Œ, å¹¶ä¸”è¿›å…¥*Insert*æ¨¡å¼ O : ä»å½“å‰è¡Œä¸Šé¢æ’å…¥æ–°è¡Œ, å¹¶ä¸”è¿›å…¥*Insert*æ¨¡å¼ cw : åˆ é™¤å…‰æ ‡å¼€å§‹çš„å•è¯, å¹¶ä¸”è¿›å…¥*Insert*æ¨¡å¼   åŸºæœ¬çš„ç§»åŠ¨    0 : åˆ°å…‰æ ‡æ‰€åœ¨è¡Œçš„æœ€å¼€å§‹ ^ : åˆ°å…‰æ ‡æ‰€åœ¨è¡Œç¬¬ä¸€ä¸ªéç©ºå­—ç¬¦ $ : åˆ°å…‰æ ‡æ‰€åœ¨è¡Œçš„æœ«å°¾ g_ : åˆ°å…‰æ ‡æ‰€åœ¨è¡Œæœ€åä¸€ä¸ªéç©ºå­—ç¬¦ /pattern : å‘ä¸‹æœç´¢å­—ç¬¦ä¸²pattern ?pattern : å‘ä¸Šæœç´¢å­—ç¬¦ä¸²pattern  æ³¨: æœç´¢æ—¶, é”®å…¥né”®å¯ä»¥æŸ¥çœ‹ä¸‹ä¸€é¡¹, é”®å…¥Né”®å¯ä»¥æŸ¥çœ‹ä¸Šä¸€é¡¹\n å¤åˆ¶/ç²˜è´´    p : åœ¨å½“å‰å…‰æ ‡åç²˜è´´ P : åœ¨å½“å‰å…‰æ ‡å‰ç²˜è´´ yy: å¤åˆ¶å…‰æ ‡æ‰€åœ¨æ•´è¡Œ   æ’¤é”€/æ¢å¤ (Undo/Redo)    u : æ’¤é”€ \u003cC-r\u003e : æ¢å¤   è½½å…¥/ä¿å­˜/é€€å‡º/ä¿®æ”¹æ–‡ä»¶(Buffer)   :e \u003cpath/to/file\u003e : æ‰“å¼€æ–‡ä»¶ :w : ä¿å­˜æ–‡ä»¶ä¿®æ”¹ :saveas \u003cpath/to/file\u003e : å¦å­˜ä¸º\u003cpath/to/file\u003e :x, ZZ or :wq : ä¿å­˜å¹¶é€€å‡º. :wqç›¸å½“äºå…ˆ:wå†:q; :xåªåœ¨éœ€è¦æ—¶ä¿å­˜; ZZä¸éœ€è¦è¾“å…¥:å’Œå›è½¦\u003center\u003e :q! : å¼ºåˆ¶é€€å‡ºè€Œä¸ä¿å­˜ä¿®æ”¹. :qa!, å¼ºåˆ¶é€€å‡ºæ‰€æœ‰æ­£åœ¨ç¼–è¾‘çš„æ–‡ä»¶, å³ä½¿å…¶ä»–æ–‡ä»¶æœ‰åšè¿‡ä¿®æ”¹è€Œæ²¡æœ‰ä¿å­˜ :bnå’Œ:bp : åˆ‡æ¢åˆ°ä¸‹/ä¸Šä¸€ä¸ªæ–‡ä»¶\n èŠ±ä¸€ç‚¹æ—¶é—´å»ç†Ÿæ‚‰ä¸Šé¢çš„å‘½ä»¤. å½“ä½ ç†Ÿç»ƒæŒæ¡ä¹‹å, ä½ å¯ä»¥å®Œæˆä½ åœ¨æ™®é€šç¼–è¾‘å™¨å‡ ä¹æ‰€æœ‰åŠŸèƒ½. ä½ å¯èƒ½ä¼šè§‰å¾—ç”¨vimè¿˜æ˜¯æœ‰ç‚¹åˆ«æ‰­. ä½†æ˜¯è·Ÿç€æˆ‘è¿›å…¥ä¸‹ä¸€Level, æˆ–è®¸ä½ å¯ä»¥æ˜ç™½ä¸ºä»€ä¹ˆè¦èŠ±è´¹è¿™ä¹ˆå¤šåŠ›æ°”å»å­¦ä¹ å®ƒ.\nLevel 3 - æ›´å¥½. æ›´å¼º. æ›´å¿«. æ­å–œä½ å·²ç»åˆ°è¾¾äº†Level 3! æˆ‘ä»¬ç°åœ¨å¼€å§‹å­¦ä¹ ä¸€äº›æœ‰è¶£çš„ä¸œè¥¿. åœ¨Level 3, æˆ‘ä»¬åªè®¨è®ºå’Œviç¼–è¾‘å™¨å…¼å®¹çš„é‚£äº›å‘½ä»¤.\n3.1 æ›´å¥½ è®©æˆ‘ä»¬çœ‹çœ‹vimæ˜¯æ€ä¹ˆæ ·å¸®åŠ©ä½ åšé‡å¤çš„å‘½ä»¤çš„:\n .(ç‚¹) : é‡å¤ä¸Šä¸€æ¬¡çš„å‘½ä»¤ N\u003ccommand\u003e: å°†ä¼šè¿è¡Œ\u003ccommand\u003eNæ¬¡, è¿™é‡Œçš„Næ˜¯ä¸€ä¸ªæ•´æ•°  ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­. æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç„¶åè¾“å…¥ä¸‹é¢çš„å‘½ä»¤:\n  2dd : å°†ä¼šåˆ é™¤2è¡Œ 3p : å°†ä¼šæ‰§è¡Œç²˜è´´å‘½ä»¤3æ¬¡ 100idesu [ESC] : å°†ä¼šè¾“å…¥ â€œdesu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desuâ€ . : è·Ÿåœ¨ä¸Šä¸€ä¸ªå‘½ä»¤åé¢ä»£è¡¨å†æ¬¡è¾“å…¥100æ¬¡\"desu\" 3. : å°†ä¼šè¾“å…¥3æ¬¡\"desu\"(è€Œä¸æ˜¯300æ¬¡, ä½ çœ‹vimå¤šä¹ˆèªæ˜)   3.2 æ›´å¼º çŸ¥é“å¦‚ä½•é«˜æ•ˆçš„åœ¨vimä¸­ç§»åŠ¨å…‰æ ‡ååˆ†é‡è¦. ä¸è¦è·³è¿‡è¿™ä¸€éƒ¨åˆ†.\n NG : ç§»åŠ¨å…‰æ ‡åˆ°ç¬¬Nè¡Œ gg : ç›¸å½“äº 1G, åˆ°æ–‡ä»¶çš„æœ€å¼€å§‹ä¸€è¡Œ G : åˆ°æ–‡ä»¶çš„æœ€åä¸€è¡Œ æŒ‰ç…§å•è¯ç§»åŠ¨:    w : åˆ°ä¸‹ä¸€ä¸ªå•è¯çš„å¼€å§‹ e : åˆ°ä¸‹ä¸€ä¸ªå•è¯çš„ç»“å°¾ é»˜è®¤æƒ…å†µä¸‹, æˆ‘ä»¬è®¤ä¸ºå•è¯æ˜¯ç”±ä¸€ç³»åˆ—å­—ç¬¦å’Œä¸‹åˆ’çº¿ç»„æˆ. å¦‚æœä½ è®¤ä¸ºç”±ç©ºæ ¼åˆ†éš”å¼€çš„å­—ç¬¦ä¸²å³ä¸ºå•è¯, é‚£ä¹ˆä½ åªéœ€è¦ä½¿ç”¨Wå’ŒE.     ç°åœ¨ä»‹ç»æ›´é«˜æ•ˆçš„ç§»åŠ¨æ–¹å¼:\n  % : åŒ¹é…æ‹¬å·ç§»åŠ¨å…‰æ ‡, å¦‚(),[],{} *å’Œ# : åŒ¹é…å…‰æ ‡å½“å‰æ‰€åœ¨å•è¯, å¹¶ä¸”å‘ä¸‹/ä¸ŠæŸ¥æ‰¾åŒ¹é…çš„å•è¯, å¹¶æŠŠå…‰æ ‡ç§»åˆ°æŸ¥æ‰¾åˆ°çš„å•è¯   ç›¸ä¿¡æˆ‘, æœ€åçš„ä¸‰ä¸ªå‘½ä»¤æ˜¯ååˆ†é«˜æ•ˆçš„.\n3.3 æ›´å¿« è®°ä½å¦‚ä½•ç§»åŠ¨å…‰æ ‡äº†å—, å› ä¸ºå¾ˆå¤šå‘½ä»¤éƒ½æ˜¯å¯ä»¥ç»„åˆä½¿ç”¨çš„. å¹¶ä¸”å¤§å¤šæ˜¯ä»¥ä»¥ä¸‹æ ¼å¼:\n\u003cstart position\u003e\u003ccommand\u003e\u003cend position\u003e\nä¾‹å¦‚: 0y$ æ„æ€æ˜¯\n 0 : å°†å…‰æ ‡ç§»åŠ¨åˆ°è¡Œé¦– y : å¼€å§‹å¤åˆ¶ $ : å¤åˆ¶åˆ°è¡Œå°¾  æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ye, ä»å…‰æ ‡æ‰€åœ¨ä½ç½®å¤åˆ¶åˆ°å•è¯ç»“æŸ. ä¹Ÿå¯ä»¥ä½¿ç”¨y2/foo, ä»å…‰æ ‡æ‰€åœ¨ä½ç½®å¤åˆ¶åˆ°åŒ¹é…çš„ç¬¬äºŒä¸ªfoo\nå¯¹y(å¤åˆ¶)æ¥è¯´æ˜¯è¿™æ ·çš„, é‚£ä¹ˆå¯¹d(åˆ é™¤), v(å¯è§†åŒ–é€‰æ‹©), gU(è½¬å¤§å†™), gu(è½¬å°å†™)ç­‰ç­‰å‘½ä»¤æ¥è¯´ä¹Ÿæ˜¯åŒæ ·é€‚ç”¨çš„\nLevel 4 - é€‚ç”¨Vimçš„è¶…èƒ½åŠ› Â«æœªå®Œå¾…ç»­Â»\n","description":"","tags":["vim"],"title":"Vim åˆçº§å…¥é—¨","uri":"/posts/how-to-use-vim/"},{"categories":null,"content":" è°“è¯ï¼ˆNSPredicateï¼‰æä¾›åœ¨Cocoaä¸­æŒ‡å®šæŸ¥è¯¢çš„æ™®é€šè§£å†³æ–¹æ¡ˆã€‚NSPredicateç±»ç”¨äºå®šä¹‰é€»è¾‘æ¡ä»¶ä»¥é™åˆ¶æˆ–ç­›é€‰è·å–ç»“æœã€‚\n NSPredicate çš„åŸºæœ¬ä½¿ç”¨ å®šä¹‰ï¼š NSPredicate *predict = [NSPredicate predicateWithFormat: @\"SELF CONTAINS[cd] %@\", SOMESTRING];  å¸¸ç”¨æ–¹æ³•ï¼š    å…³é”®å­— æ•ˆæœ     æ¯”è¾ƒè¿ç®—ç¬¦    \u003e,\u003c,==,\u003e=,\u003c=,!= å·¦ä¾§æ»¡è¶³æ¯”è¾ƒè¿ç®—ç¬¦   å­—ç¬¦ç›¸å…³    BEGINSWITH å·¦ä¾§è¡¨è¾¾å¼ ä»¥ å³ä¾§è¡¨è¾¾å¼ å¼€å§‹   ENDSWITH å·¦ä¾§è¡¨è¾¾å¼ ä»¥ å³ä¾§è¡¨è¾¾å¼ ç»“æŸ   CONTAINS å·¦ä¾§è¡¨è¾¾å¼åŒ…å«å³ä¾§è¡¨è¾¾å¼   èŒƒå›´ç›¸å…³    BETWEEN å·¦ä¾§è¡¨è¾¾å¼åœ¨å³ä¾§è¡¨è¾¾å¼èŒƒå›´å†…   IN å·¦ä¾§è¡¨è¾¾å¼åœ¨å³ä¾§è¡¨è¾¾å¼å†…   æ­£åˆ™è¡¨è¾¾å¼    MATCHES å·¦ä¾§è¡¨è¾¾å¼æ»¡è¶³å³ä¾§è¡¨è¾¾å¼ï¼Œå³ä¾§ä¸ºæ­£åˆ™è¡¨è¾¾å¼   é€šé…ç¬¦    LIKE å·¦ä¾§è¡¨è¾¾å¼ç­‰äºå³ä¾§è¡¨è¾¾å¼: å…è®¸å°† ? å’Œ * ç”¨ä½œé€šé…ç¬¦,å…¶ä¸­ ? åŒ¹é…ä¸€ä¸ªå­—ç¬¦,è€Œ * åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªå­—ç¬¦    å­—ç¬¦ä¸² NSString *originStr = @\"I like shangha!\"; NSString *str = @\"shanghai\"; NSPredicate *predict = [NSPredicate predicateWithFormat: @\"SELF CONTAINS %@\", str]; if ([predict evaluateWithObject:originStr]) { NSLog(@\"å«æœ‰å­—ç¬¦ä¸²%@\", str); }  å…¶ä¸­ CONTAINS ä¹Ÿå¯ä»¥æ›¿æ¢ä¸º BEGINSWITH,ENDSWITHã€‚ åœ¨å®ƒä»¬åé¢ï¼Œå¯ä»¥åœ¨æ–¹æ‹¬å·ä¸­æ·»åŠ cã€d æˆ– cd, å¦‚CONTAINS[cd],å…¶ä¸­cä»£è¡¨ä¸åŒºåˆ†å¤§å°å†™, dä»£è¡¨ä¸åŒºåˆ†éŸ³è°ƒç¬¦å·ã€‚\næ•°ç»„å’Œå­—å…¸ è°“è¯å¸¸ç”¨äºæ•°ç»„çš„ç­›é€‰:\n NSArray *mArray = [NSArray arrayWithObjects:@\"beijing\", @\"shanghai\", @\"shenzhen\", @\"guangzhou\", nil]; //IN ç”¨æ³• NSPredicate *predicate1 = [NSPredicate predicateWithFormat:@\"SELF IN {'shanghai', 'guangzhou'}\"]; NSArray *filteredArray1 = [mArray filteredArrayUsingPredicate: predicate1]; NSLog(@\"ç­›é€‰åæ•°ç»„ä¸º:%@\", filteredArray1); //LIKE ç”¨æ³• NSPredicate *predicate2 = [NSPredicate predicateWithFormat:@\"SELF LIKE '*h*'\"]; NSArray *filteredArray2 = [mArray filteredArrayUsingPredicate: predicate2]; NSLog(@\"ç­›é€‰åæ•°ç»„ä¸º:%@\", filteredArray2);  è°“è¯çš„æ¡ä»¶ä¹Ÿå¯ä»¥é€šè¿‡å­—å…¸çš„å ä½ç¬¦å®ç°:\nNSPredicate *p1 = [NSPredicate predicateWithFormat:@\"name==$NAME AND price==$PRICE\"]; NSDictionary *dic = [NSDictionary dictionaryWithObjectsAndKeys:@\"name5\", @\"NAME\", @\"5000\", @\"PRICE\", nil]; NSPredicate *p2 = [p1 predicateWithSubstitutionVariables:dic]; //è¡¨ç¤ºä»carsæ•°ç»„ä¸­ç­›é€‰æ»¡è¶³ name='name5' AND price='5000' æ¡ä»¶çš„å…ƒç´  NSArray *filteredCars = [cars filteredArrayUsingPredicate:p2];  ","description":"","tags":["iOS"],"title":"NSPredicate(è°“è¯) çš„ä½¿ç”¨","uri":"/posts/predicateuse/"},{"categories":null,"content":"  ä»€ä¹ˆæ˜¯WebWorker\nweb worker æ˜¯è¿è¡Œåœ¨åå°çš„ JavaScriptï¼Œç‹¬ç«‹äºå…¶ä»–è„šæœ¬ï¼Œä¸ä¼šå½±å“é¡µé¢çš„æ€§èƒ½ã€‚æˆ‘ä»¬çŸ¥é“é¡µé¢çš„å±•ç¤ºæ”¾åœ¨ä¸»çº¿ç¨‹ï¼Œå¦‚æœè®©ä¸»çº¿ç¨‹è¿›è¡Œä¸€ç³»åˆ—å¤æ‚çš„æ“ä½œï¼Œé‚£ä¹ˆé¡µé¢å°±ä¼šå˜å¾—éå¸¸å¡ï¼Œç”¨æˆ·ä½“éªŒä¼šå¾ˆå·®ã€‚è¿™æ˜¯æˆ‘ä»¬å¯ä»¥ä½¿ç”¨web workerè¿›è¡Œå¤æ‚æ“ä½œçš„å®ç°ï¼Œç„¶åå°†å¤„ç†ç»“æœè¿”å›ç»™é¡µé¢ï¼Œé¡µé¢è¿›è¡Œæ›´æ–°å³å¯ï¼Œè¿™æ ·å°±ä¸ä¼šå½±å“ç”¨æˆ·ä¸»é¡µé¢å±•ç¤ºçš„æ‰§è¡Œã€‚\n  æ–¹æ³•ï¼š postMessage() : ç”¨äºå‘HTMLé¡µé¢è¿”å›æ¶ˆæ¯ terminate() : ç»ˆæ­¢web workerï¼Œ å¹¶ä¸”é‡Šæ”¾èµ„æº\n  å®ç°æ–¹æ³•ï¼š Demo: æ•°å­—ä»0å¼€å§‹ç´¯åŠ \nindex.html \u003c!DOCTYPE html\u003e \u003chtml lang=\"en\"\u003e \u003chead\u003e \u003cmeta charset=\"UTF-8\"\u003e \u003ctitle\u003e\u003c/title\u003e \u003cscript src=\"index.js\"\u003e\u003c/script\u003e \u003c/head\u003e \u003cbody\u003e \u003cdiv id=\"numDiv\"\u003e0\u003c/div\u003e \u003c/body\u003e \u003c/html\u003e  index.js var numDiv; window.onload = function() { numDiv = document.getElementById(\"numDiv\"); var worker = new Worker(\"webWorker.js\");//åˆ›å»ºWorkerå¯¹è±¡ worker.onmessage = function (e) { numDiv.innerHTML = e.data; } }  webWorker.js var countNum = 0; function count () { postMessage(countNum);//ç»™htmlé¡µé¢è¿”å›æ•°æ® countNum ++;//æ•°å­—ç´¯åŠ  setTimeout(count, 1000);//ä¸€ç§’æ‰§è¡Œä¸€æ¬¡ } count();//è°ƒç”¨å‡½æ•°æ‰§è¡Œ ","description":"","tags":["HTML5","WebWorker"],"title":"HTML5 WebWorker ç®€å•ä½¿ç”¨","uri":"/posts/html5webworker/"},{"categories":null,"content":"  ä»€ä¹ˆæ˜¯åº”ç”¨ç¼“å­˜ï¼Ÿ\nHTML5å¼•å…¥äº†åº”ç”¨ç¼“å­˜æ¦‚å¿µï¼Œæ„å‘³ç€åœ¨æ²¡æœ‰å› ç‰¹ç½‘è¿æ¥æ—¶ä¹Ÿå¯ä»¥è¿›è¡Œè®¿é—®ã€‚\n  ä½¿ç”¨åº”ç”¨ç¼“å­˜å¥½å¤„ï¼š\n ç¦»çº¿æµè§ˆï¼Œæ²¡æœ‰å› ç‰¹ç½‘çš„æƒ…å†µä¸‹ä¾ç„¶å¯ä»¥è¿›è¡Œè®¿é—® è®¿é—®é€Ÿåº¦æå‡ï¼Œå·²ç»ç¼“å­˜çš„èµ„æºåŠ è½½æ›´å¿« å‡å°‘æœåŠ¡å™¨è´Ÿè½½ï¼Œæµè§ˆå™¨åªéœ€è¦ä¸‹è½½æ›´æ–°è¿‡çš„é¡µé¢èµ„æº    å®ç°æ–¹æ³•ï¼š\nå¦‚æœéœ€è¦ä½¿ç”¨åº”ç”¨ç¼“å­˜ï¼Œéœ€è¦åœ¨é¡µé¢\u003chtml\u003eæ ‡ç­¾ä¸­åŒ…å« manifest å±æ€§ï¼Œè€Œmanifestæ–‡ä»¶å»ºè®®ä½¿ç”¨æ–‡ä»¶æ‰©å±•å.appcacheã€‚\n  Manifestæ–‡ä»¶åŠŸèƒ½ï¼š\n CACHE: åœ¨æ­¤æ ‡é¢˜ä¸‹åˆ—å‡ºçš„æ–‡ä»¶ä¼šåœ¨é¦–æ¬¡è®¿é—®åŠ è½½ä¹‹åè¿›è¡Œç¼“å­˜ï¼› NETWORK: åœ¨æ­¤æ ‡é¢˜ä¸‹åˆ—å‡ºçš„æ–‡ä»¶éœ€è¦ä¸æœåŠ¡å™¨è¿æ¥ã€ä¸”ä¸ä¼šè¢«ç¼“å­˜ï¼› FALLBACK: åœ¨æ­¤æ ‡é¢˜ä¸‹åˆ—å‡ºçš„æ–‡ä»¶è§„å®šå½“é¡µé¢æ— æ³•è®¿é—®æ—¶çš„é€€å›é¡µé¢ï¼ˆå¦‚404é¡µé¢ï¼‰    åŠŸèƒ½å®ç° index.html è¯·æ³¨æ„\u003chtml\u003eæ ‡ç­¾ \u003c!DOCTYPE html\u003e \u003chtml lang=\"en\" manifest=\"index.appcache\"\u003e \u003chead\u003e \u003cmeta charset=\"UTF-8\"\u003e \u003ctitle\u003e\u003c/title\u003e \u003clink rel=\"stylesheet\" href=\"style.css\"\u003e \u003cscript src=\"index.js\"\u003e\u003c/script\u003e \u003c/head\u003e \u003cbody\u003e \u003ch1 class=\"h1\"\u003eHELLO HMTL5\u003c/h1\u003e \u003c/body\u003e \u003c/html\u003e  style.css .h1 { color: red; background: blue; }  index.js /*ç©ºæ–‡ä»¶*/  index.appcache CACHE MANIFEST CACHE: index.html style.css index.js NETWORK: FALLBACK:  æµ‹è¯•   å¼€å¯æœ¬åœ°æœåŠ¡å™¨ï¼Œåœ¨Chromeè¾“å…¥localhost/webCache\n  ä½¿ç”¨Chromeå®¡æŸ¥å…ƒç´ åŠŸèƒ½ï¼Œåˆ‡æ¢åˆ°ResourcesåŠŸèƒ½æ ‡ç­¾ï¼Œç‚¹å‡»å·¦ä¾§Application CacheåŠŸèƒ½æ ‡ç­¾ï¼Œå¯ä»¥è§‚å¯Ÿåˆ°æˆ‘ä»¬è®¾ç½®ç¼“å­˜çš„ä¸‰ä¸ªæ–‡ä»¶å·²ç»ç¼“å­˜æˆåŠŸ\n  æ–­å¼€æœ¬åœ°æœåŠ¡å™¨ï¼Œé‡æ–°åˆ·æ–°é¡µé¢ï¼Œä¼šå‘ç°é¡µé¢æ ·å¼ä»ç„¶ä¿æŒï¼Œè¯´æ˜ç¼“å­˜èµ·ä½œç”¨äº†ã€‚\n ","description":"","tags":["HTML5","Cache"],"title":"HTML5åº”ç”¨ç¼“å­˜ç®€å•ä½¿ç”¨","uri":"/posts/html5webcache/"},{"categories":null,"content":"å‰æ–‡å·²ç»ä»‹ç»äº†å¦‚ä½•ç»™UITableViewæ·»åŠ æœç´¢æ ï¼Œè¿™æ¬¡è¦ç»™UITableViewè¿›ä¸€æ­¥æ·»åŠ ç´¢å¼•æ¡ã€‚ åŸºæœ¬æ€è·¯ï¼š\n è·å–æ€»ç»Ÿåå­—çš„é¦–å­—æ¯ç»„æˆä¸€ä¸ªç´¢å¼•å­—æ¯è¡¨å‚¨å­˜åœ¨æ•°ç»„ä¸­ï¼› ä¿®æ”¹TableViewçš„ä»£ç†æ–¹æ³•å®ç°sectionçš„æ˜¾ç¤ºï¼Œsectionçš„æ•°é‡åº”ä¸ºç´¢å¼•å­—æ¯è¡¨çš„å…ƒç´ çš„ä¸ªæ•°ï¼› æŠŠç´¢å¼•æ¡æ·»åŠ åˆ°TableView ä¸­ï¼Œç”¨TableViewçš„ä»£ç†æ–¹æ³•å³å¯å®ç°ã€‚  ç”±äºæ¥ç€ä¸Šæ–‡ï¼Œæ‰€ä»¥æœ¬æ–‡ä¸­ä»£ç å°†ä¸ä¼šå…¨éƒ¨å±•ç¤ºï¼Œä»£ç çš„é‡å¤éƒ¨åˆ†å°†ç”¨çœç•¥å·ä»£æ›¿ã€‚\nStep1. æ·»åŠ å±æ€§ åœ¨ViewController.hä¸­æ·»åŠ å±æ€§ï¼šNSMutableArray *alphabetArray;\n#import \u003cUIKit/UIKit.h\u003e @interface ViewController : UIViewController ...\t@property (nonatomic, strong) NSMutableArray *alphabetArray; ...\t@end  Step2. ä¿®æ”¹ViewController.m // // ViewController.m // UITableViewAdvanced01 // // Created by mungo on 19/03/16. // Copyright Â© 2016 mungo. All rights reserved. // #import \"ViewController.h\" #import \"President.h\" @interface ViewController () \u003cUITableViewDataSource, UITableViewDelegate, UISearchBarDelegate, UISearchResultsUpdating, UISearchDisplayDelegate\u003e @end @implementation ViewController - (void)viewDidLoad { [super viewDidLoad]; //åˆå§‹åŒ–æ•°æ® ... //åˆ›å»ºtableview ... //åˆ›å»ºsearchController ... //è®¾ç½®tableviewçš„æœç´¢æ  ... //è®¾ç½®å­—æ¯è¡¨ self.alphabetArray = [self getAlphetSortedArray]; } /** * æ–°æ·»åŠ æ–¹æ³•ï¼š * è·å–å­—æ¯è¡¨ * @return MSMutableArray* å·²ç»æ’åºçš„å­—æ¯è¡¨æ•°ç»„ */ - (NSMutableArray *) getAlphetSortedArray { self.alphabetArray = [[NSMutableArray alloc] init]; for (int i = 0; i \u003c [self.presidents count]; i ++) { //è·å–åå­—çš„ç¬¬ä¸€ä¸ªå­—æ¯ President *president = [self.presidents objectAtIndex:i]; char letter = [president.firstName characterAtIndex:0]; NSString *uniqueChar = [NSString stringWithFormat:@\"%c\", letter]; //å°†å­—æ¯åŠ å…¥åˆ°å­—æ¯è¡¨ä¸­ if (![self.alphabetArray containsObject:uniqueChar]) { [self.alphabetArray addObject:uniqueChar]; } } //å¯¹å­—æ¯è¡¨è¿›è¡Œæ’åº NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@\"self\" ascending:YES]; NSArray *sortDescirptors = [NSArray arrayWithObject:sortDescriptor]; NSArray *sortedArray; sortedArray = [self.alphabetArray sortedArrayUsingDescriptors:sortDescirptors]; NSMutableArray *alphabetArray = [[NSMutableArray alloc] initWithArray:sortedArray copyItems:YES]; return alphabetArray; } #pragma mark - tableView Delegate - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section { if (self.searchController.active) { ... } else { //æ ¹æ®sectionç­›é€‰ä»¥å½“å‰å­—æ¯å¼€å¤´çš„æ€»ç»Ÿæ•°ç»„ NSArray *tmpArray = [self getAlphabetArrayWithIndex:section]; return [tmpArray count]; } } #pragma mark - Indexing UITableView //ç´¢å¼•æ¡çš„å­—æ¯è¡¨ - (NSArray\u003cNSString *\u003e *)sectionIndexTitlesForTableView:(UITableView *)tableView { return self.alphabetArray; } - (NSInteger) tableView:(UITableView *)tableView sectionForSectionIndexTitle:(NSString *)title atIndex:(NSInteger)index { return index; } #pragma mark - tableView Datasource - (NSInteger) numberOfSectionsInTableView:(UITableView *)tableView { if (self.searchController.active) { self.alphabetArray = nil;//æœç´¢æ—¶ä¸æ˜¾ç¤ºsection return 1; } else { self.alphabetArray = [self getAlphetSortedArray];//åœæ­¢æœç´¢æ¢å¤sectionæ˜¾ç¤º return [self.alphabetArray count]; } } //tableView sectionçš„æ ‡é¢˜ - (NSString *) tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section { return [self.alphabetArray objectAtIndex: section]; } - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath { ... President *president; if (self.searchController.active) { ... } else { //æ ¹æ®sectionç­›é€‰ä»¥å½“å‰å­—æ¯å¼€å¤´çš„æ€»ç»Ÿæ•°ç»„ NSArray *tmpArray = [self getAlphabetArrayWithIndex:indexPath.section]; if ([tmpArray count]) { president = [tmpArray objectAtIndex:indexPath.row]; } } if (president) { cell.textLabel.text = [NSString stringWithFormat:@\"%@ %@\", president.firstName, president.lastName]; } return cell; } /* * æ–°æ·»åŠ æ–¹æ³•ï¼š * æ ¹æ®é¦–å­—æ¯å¯¹æ‰€æœ‰æ€»ç»Ÿè¿›è¡Œç­›é€‰ * @return NSArray* äºå½“å‰é¦–å­—æ¯ç›¸åŒçš„æ€»ç»Ÿæ•°ç»„ */ - (NSArray *) getAlphabetArrayWithIndex:(NSInteger)index{ NSString *alphabet = [self.alphabetArray objectAtIndex:index]; NSPredicate *president = [NSPredicate predicateWithFormat:@\"firstName BEGINSWITH [cd] %@\", alphabet]; NSArray *tmpArray = [self.presidents filteredArrayUsingPredicate:president]; return tmpArray; } #pragma mark - SearchController delegate - (void)updateSearchResultsForSearchController:(UISearchController *)searchController { ... } @end  æ³¨æ„ï¼š numberOfSectionsInTableViewä¸­ï¼Œ å¼€å§‹æœç´¢çš„æ—¶å€™è¦å°†TableViewçš„sectionæ•°é‡è®¾ç½®ä¸º1ï¼Œå¹¶ä¸”è¦æŠŠå­—æ¯è¡¨è®¾ç½®ä¸ºç©ºï¼›ä¸æœç´¢æ—¶è¦æ¢å¤sectionçš„æ•°é‡ã€‚\nå®ç°æ•ˆæœ ","description":"","tags":["iOS","UITableView"],"title":"UITableViewä½¿ç”¨ç®€å•è¿›é˜¶(äºŒ):ç´¢å¼•æ¡","uri":"/posts/uitableviewadvance02/"},{"categories":null,"content":"UITableView æ˜¯å¼€å‘ä¸­ä½¿ç”¨ååˆ†é¢‘ç¹çš„æ§ä»¶ï¼Œæœ¬ç³»åˆ—è®°å½•UITableViewçš„è¿›é˜¶ä½¿ç”¨ï¼šUITableViewçš„æœç´¢æ å’Œå­—æ¯ç´¢å¼•è¡¨ã€‚\nä¸æƒ³çœ‹æˆ‘åºŸè¯çš„å¯ä»¥ç›´æ¥åˆ°gitHubä»“åº“ä¸‹è½½æºç ğŸ˜ã€‚ UITableViewä½¿ç”¨è¿›é˜¶gitHubæºç \næœç´¢æ æœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼Œç¬¬ä¸€ç§æ˜¯é€šè¿‡UISearchBarå’ŒUISearchDisplayControllerå®ç°ï¼Œç¬¬äºŒç§æ˜¯é€šè¿‡UISearchControllerå®ç°ã€‚è€Œåœ¨iOS8.0ä¹‹åï¼Œè‹¹æœå®˜æ–¹æ¨èä½¿ç”¨ç¬¬äºŒç§æ–¹å¼ã€‚\næœ¬æ–‡ä½¿ç”¨çš„æ˜¯ç¬¬äºŒç§æ–¹å¼ï¼ˆUISearchControllerï¼‰ï¼Œä¸è¿‡æºç ä¸­ä¹Ÿå®ç°äº†ç¬¬ä¸€ç§(UISearchBar+UISearchDisplayController)ã€‚å…³äºUISearchBarå’ŒUISearchDisplayControllerçš„ä½¿ç”¨ï¼Œå¯ä»¥å‚è€ƒæˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« ï¼šUISearchBarå’ŒUISearchDisplayControllerå®ç°æœç´¢æ \næœ¬æ–‡å…ˆä»‹ç»UITableViewçš„æœç´¢æ ï¼ˆUISearchControllerï¼‰ï¼Œæ˜¯ä¸€ä¸ªæ˜¾ç¤ºç¾å›½æ€»ç»Ÿçš„TableViewã€‚\nStep1. åˆ›å»ºPresidentç±» åˆ›å»ºä¸€ä¸ªåä¸ºPresidentçš„Objective-Cç±»ï¼Œå®ƒç»§æ‰¿äºNSObjectç±»ï¼Œç”¨äºä¿å­˜æ€»ç»Ÿçš„å§“æ°å’Œåå­—ã€‚å®šä¹‰ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œç”¨æ¥åˆ›å»ºPresidentå¯¹è±¡ï¼Œå¹¶ä¸”å¯¹firstNameå’ŒlastNameèµ‹å€¼ã€‚\nPresident.h #import \u003cFoundation/Foundation.h\u003e @interface President : NSObject @property (nonatomic, retain) NSString *firstName; @property (nonatomic, retain) NSString *lastName; + (President *) presidentWithFirstName: (NSString *)firstname lastName: (NSString *)lastname; @end  President.m #import \"President.h\" @implementation President + (President *) presidentWithFirstName:(NSString *)firstname lastName:(NSString *)lastname { President *president = [[President alloc] init]; president.firstName = firstname; president.lastName = lastname; return president; } @end  Step2. ç¼–å†™ViewController viewController.h #import \u003cUIKit/UIKit.h\u003e @interface ViewController : UIViewController @property (nonatomic, strong) UITableView *mTableView; @property (nonatomic, strong) NSArray *presidents;//æ‰€æœ‰æ€»ç»Ÿ @property (nonatomic, strong) NSArray *filteredPresidents;//ä¿å­˜æœç´¢ç»“æœ @property (nonatomic, retain) UISearchController *searchController;\t@end  viewController.m #import \"ViewController.h\" #import \"President.h\" @interface ViewController () \u003cUITableViewDataSource, UITableViewDelegate, UISearchBarDelegate, UISearchResultsUpdating, UISearchDisplayDelegate\u003e @end @implementation ViewController - (void)viewDidLoad { [super viewDidLoad]; //åˆå§‹åŒ–æ•°æ® self.presidents = [[NSArray alloc] initWithObjects: [President presidentWithFirstName:@\"George\" lastName:@\"Washington\"], [President presidentWithFirstName:@\"John\" lastName:@\"Adams\"], [President presidentWithFirstName:@\"Thomas\" lastName:@\"Jeffeson\"], [President presidentWithFirstName:@\"James\" lastName:@\"Madison\"], [President presidentWithFirstName:@\"James\" lastName:@\"Monroe\"], [President presidentWithFirstName:@\"John Quincy\" lastName:@\"Adams\"], [President presidentWithFirstName:@\"Andrew\" lastName:@\"Jackson\"], [President presidentWithFirstName:@\"Martin\" lastName:@\"van Buren\"], [President presidentWithFirstName:@\"William Henry\" lastName:@\"Harrison\"], [President presidentWithFirstName:@\"John\" lastName:@\"Tyler\"], [President presidentWithFirstName:@\"James K\" lastName:@\"Polk\"], [President presidentWithFirstName:@\"Zachary\" lastName:@\"Taylor\"], [President presidentWithFirstName:@\"Millard\" lastName:@\"Fillmore\"], [President presidentWithFirstName:@\"Franklin\" lastName:@\"Pierce\"], [President presidentWithFirstName:@\"James\" lastName:@\"Buchanan\"], [President presidentWithFirstName:@\"Abraham\" lastName:@\"Lincoln\"], [President presidentWithFirstName:@\"Andrew\" lastName:@\"Johnson\"], [President presidentWithFirstName:@\"Ulysses S\" lastName:@\"Grant\"], [President presidentWithFirstName:@\"Rutherford B\" lastName:@\"Hayes\"], [President presidentWithFirstName:@\"James A\" lastName:@\"Garfield\"], [President presidentWithFirstName:@\"Chester A\" lastName:@\"Arthur\"], [President presidentWithFirstName:@\"Grover\" lastName:@\"Cleveland\"], [President presidentWithFirstName:@\"Bejamin\" lastName:@\"Harrison\"], [President presidentWithFirstName:@\"Grover\" lastName:@\"Cleveland\"], [President presidentWithFirstName:@\"William\" lastName:@\"McKinley\"], [President presidentWithFirstName:@\"Theodore\" lastName:@\"Roosevelt\"], [President presidentWithFirstName:@\"William Howard\" lastName:@\"Taft\"], [President presidentWithFirstName:@\"Woodrow\" lastName:@\"Wilson\"], [President presidentWithFirstName:@\"Warren G\" lastName:@\"Harding\"], [President presidentWithFirstName:@\"Calvin\" lastName:@\"Coolidge\"], [President presidentWithFirstName:@\"Herbert\" lastName:@\"Hoover\"], [President presidentWithFirstName:@\"Franklin D\" lastName:@\"Roosevelt\"], [President presidentWithFirstName:@\"Harry S\" lastName:@\"Truman\"], [President presidentWithFirstName:@\"Dwight D\" lastName:@\"Eisenhower\"], [President presidentWithFirstName:@\"John F\" lastName:@\"Kennedy\"], [President presidentWithFirstName:@\"Lyndon B\" lastName:@\"Johnson\"], [President presidentWithFirstName:@\"Richard\" lastName:@\"Nixon\"], [President presidentWithFirstName:@\"Gerald\" lastName:@\"Ford\"], [President presidentWithFirstName:@\"Jimmy\" lastName:@\"Carter\"], [President presidentWithFirstName:@\"Ronald\" lastName:@\"Reagan\"], [President presidentWithFirstName:@\"George H W\" lastName:@\"Bush\"], [President presidentWithFirstName:@\"Bill\" lastName:@\"Clinton\"], [President presidentWithFirstName:@\"George W\" lastName:@\"Bush\"], [President presidentWithFirstName:@\"Barack\" lastName:@\"Obama\"], nil]; CGRect appFrame = [[UIScreen mainScreen] bounds]; //åˆ›å»ºtableview self.mTableView = [[UITableView alloc] initWithFrame:CGRectMake(0, 20, appFrame.size.width, appFrame.size.height - 20) style:UITableViewStylePlain]; self.mTableView.delegate = self; self.mTableView.dataSource = self; [self.view addSubview:self.mTableView]; //åˆ›å»ºsearchController self.searchController = [[UISearchController alloc] initWithSearchResultsController:nil]; self.searchController.searchResultsUpdater = self; self.searchController.dimsBackgroundDuringPresentation = NO; self.searchController.hidesNavigationBarDuringPresentation = NO; //è®¾ç½®tableviewçš„æœç´¢æ  self.mTableView.tableHeaderView = self.searchController.searchBar; } #pragma mark - tableView Delegate - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section { if (self.searchController.active) { return [self.filteredPresidents count]; } else { return [self.presidents count]; } } #pragma mark - tableView Datasource - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath { static NSString *cellId = @\"cellId\"; UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellId]; if (!cell) { cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellId]; } President *president; if (self.searchController.active) { president = [self.filteredPresidents objectAtIndex:indexPath.row]; } else { president = [self.presidents objectAtIndex:indexPath.row]; } cell.textLabel.text = [NSString stringWithFormat:@\"%@ %@\", president.firstName, president.lastName]; return cell; } #pragma mark - SearchController delegate - (void)updateSearchResultsForSearchController:(UISearchController *)searchController { NSString *searchString = [self.searchController.searchBar text]; NSPredicate *predicate = [NSPredicate predicateWithFormat:@\"firstName CONTAINS[cd] %@ OR lastName CONTAINS[cd] %@\", searchString, searchString]; self.filteredPresidents = [self.presidents filteredArrayUsingPredicate:predicate]; //åˆ·æ–°è¡¨æ ¼ [self.mTableView reloadData]; } - (void)didReceiveMemoryWarning { [super didReceiveMemoryWarning]; // Dispose of any resources that can be recreated. } @end  å®ç°æ•ˆæœ ","description":"","tags":["iOS","UITableView","æœç´¢æ "],"title":"UITableViewä½¿ç”¨ç®€å•è¿›é˜¶(ä¸€):æœç´¢æ ","uri":"/posts/uitableviewadvanced01/"},{"categories":null,"content":"è¦å®ç°tableviewçš„æœç´¢æ ï¼Œå®ç°æ–¹æ³•æœ‰ä¸¤ç§ï¼šç¬¬ä¸€ç§æ˜¯UISearchBarå’ŒUIDisplayControllerç»“åˆèµ·æ¥å®ç°ï¼Œå¦ä¸€ç§æ˜¯é€šè¿‡UISearchControllerå®ç°ã€‚è¿™é‡Œåªä»‹ç»ç¬¬ä¸€ç§ï¼š\næ³¨æ„: UISearchBarå’ŒUISearchDisplayåªæ¨èiOS8.0ä¹‹å‰ä½¿ç”¨ã€‚ å…³äºUISearchControllerçš„ä½¿ç”¨è¯·è·³è½¬è‡³ï¼š UITableViewä½¿ç”¨è¿›é˜¶(ä¸€):æœç´¢æ \nä½¿ç”¨çš„åè®® éœ€è¦ä½¿ç”¨å››ä¸ªåè®®ï¼Œåˆ†åˆ«æ˜¯\n\u003cUITableViewDelegate, UITableViewDataSource, UISearchBarDelegate, UISearchDisplayDelegate\u003e\nå¤´æ–‡ä»¶ ViewController.h #import \u003cUIKit/UIKit.h\u003e @interface ViewController : UIViewController @property (nonatomic, strong) UITableView *mTableView; //æœç´¢ç»“æœ @property (nonatomic, strong) NSArray *filterData; //å…¨éƒ¨æ•°æ® @property (nonatomic, strong) NSMutableArray *allData; @property (nonatomic, retain) UISearchDisplayController *searchDisplayController; @end  å®ç°æ–‡ä»¶ ViewController.m #import \"ViewController.h\" @interface ViewController () \u003cUITableViewDelegate, UITableViewDataSource, UISearchBarDelegate, UISearchDisplayDelegate\u003e @end @implementation ViewController - (void)viewDidLoad { [super viewDidLoad]; //åˆå§‹åŒ–æ•°æ® int count = 100; self.allData = [NSMutableArray arrayWithCapacity:count]; for (int i = 0; i \u003c count; i ++) { [self.allData addObject:[NSString stringWithFormat:@\"ç¬¬%dè¡Œ\", i]]; } //å®šä¹‰tableview CGRect appFrame = [[UIScreen mainScreen] bounds]; self.mTableView = [[UITableView alloc] initWithFrame:CGRectMake(0, 20, appFrame.size.width, appFrame.size.height - 20) style:UITableViewStylePlain]; self.mTableView.delegate = self; self.mTableView.dataSource = self; [self.view addSubview:self.mTableView]; //å®šä¹‰UISearchBar UISearchBar *mySearchBar = [[UISearchBar alloc] init]; mySearchBar.delegate = self; [mySearchBar setAutocapitalizationType:UITextAutocapitalizationTypeNone]; [mySearchBar sizeToFit]; self.mTableView.tableHeaderView = mySearchBar; //å®šä¹‰UISearchDisplayController self.searchDisplayController = [[UISearchDisplayController alloc] initWithSearchBar:mySearchBar contentsController:self]; self.searchDisplayController.delegate = self; [self.searchDisplayController setSearchResultsDataSource:self]; [self setSearchDisplayController:self.searchDisplayController]; } #pragma mark - UITableView Delegate - (NSInteger) numberOfSectionsInTableView:(UITableView *)tableView { return 1; } - (NSInteger) tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section { if (tableView == self.searchDisplayController.searchResultsTableView) { return [self.filterData count]; } else { return [self.allData count]; } } #pragma mark - UITableView DataSource - (UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath { static NSString *cellid = @\"cellid\"; UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellid]; if (!cell) { cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellid]; } if (tableView == self.searchDisplayController.searchResultsTableView) { cell.textLabel.text = [self.filterData objectAtIndex:indexPath.row]; } else { cell.textLabel.text = [self.allData objectAtIndex:indexPath.row]; } return cell; } #pragma mark - UISearchDisplayController - (BOOL) searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchString:(NSString *)searchString { NSPredicate *predicate = [NSPredicate predicateWithFormat:@\"SELF CONTAINS[cd] %@\", searchString]; self.filterData = [self.allData filteredArrayUsingPredicate:predicate]; return YES; } - (void)didReceiveMemoryWarning { [super didReceiveMemoryWarning]; // Dispose of any resources that can be recreated. } @end  å®ç°æ•ˆæœ ","description":"","tags":["iOS","UITableView","æœç´¢æ "],"title":"UISearchBarå’ŒUISearchDisplayControllerå®ç°æœç´¢æ ","uri":"/posts/uisearchbar-uisearchdisplaycontroller/"},{"categories":null,"content":"- (UIImage *) stretchableImageWithLeftCapWidth:(NSInteger)leftCapWidth topCapHeight:(NSInteger)topCapHeight  è¿™ä¸ªå‡½æ•°æ˜¯UIImageçš„ä¸€ä¸ªç±»å‡½æ•°ï¼Œå®ƒçš„åŠŸèƒ½æ˜¯åˆ›å»ºä¸€ä¸ªå†…å®¹å¯æ‹‰ä¼¸ï¼Œè€Œè¾¹è§’ä¸æ‹‰ä¼¸çš„å›¾ç‰‡ã€‚ä¸¤ä¸ªå‚æ•°çš„å«ä¹‰åˆ†åˆ«ä¸ºï¼šä¸æ‹‰ä¼¸åŒºåŸŸçš„å®½åº¦ã€ä¸æ‹‰ä¼¸åŒºåŸŸçš„é«˜åº¦ã€‚\næ ¹æ®è®¾ç½®çš„å®½åº¦å’Œé«˜åº¦ï¼Œåœ¨åƒç´ ç‚¹((leftCapWidth+1), (topCapWidth+1))å¼€å§‹å·¦å³æ‰©å±•å’Œä¸Šä¸‹æ‹‰ä¼¸ã€‚\næ³¨æ„ï¼š   å¯æ‹‰ä¼¸èŒƒå›´æ˜¯è·ç¦»leftCapWidth+1çš„é‚£ä¸€åˆ—åƒç´ å’ŒtopCapHeight+1çš„é‚£ä¸€æ¨ªæ’åƒç´ ã€‚ å¦‚æœè®¾ç½®å‚æ•°ä¸º10å’Œ5ï¼Œé‚£ä¹ˆï¼Œå›¾ç‰‡å·¦è¾¹10ä¸ªåƒç´ å’Œä¸Šè¾¹5ä¸ªåƒç´ åŒºåŸŸå†…ä¸ä¼šè¢«æ‹‰ä¼¸ã€‚è€Œä»(11, 5)å¼€å§‹æ‰©å±•å’Œæ‹‰ä¼¸ã€‚\n  åªæ˜¯å¯¹ä¸€ä¸ªåƒç´ è¿›è¡Œå¤åˆ¶åˆ°ä¸€å®šå®½åº¦ï¼Œè€Œå›¾åƒåé¢çš„å‰©ä½™éƒ¨åˆ†ä¹Ÿä¸ä¼šè¢«æ‹‰ä¼¸ã€‚\n //åŸå§‹å›¾ç‰‡ UIImage *image = [UIImage imageNamed:@\"yoububble.png\"] ; UIImageView *imageView1 = [[UIImageView alloc] initWithImage:image]; [imageView1 setFrame:CGRectMake(10, 60, 40, 40)]; [self.view addSubview:imageView1]; //æ‹‰ä¼¸åå›¾ç‰‡ UIImage *strechImage = [image stretchableImageWithLeftCapWidth:10 topCapHeight:10]; UIImageView *imageView2 = [[UIImageView alloc] initWithImage:strechImage]; [imageView2 setFrame:CGRectMake(10, 120, 300, 100)]; [self.view addSubview:imageView2];    ","description":"","tags":["iOS"],"title":"stretchableImageWithLeftCapWith:(NSInteger)leftCapWidth topCapHeight:(NSInteger)topCapHeight","uri":"/posts/stretchableimagewithleftcapwidth/"},{"categories":null,"content":"- (UILabel *) getLabelHeightFixedWithText: (NSString *) text { UIFont *font = [UIFont boldSystemFontOfSize: 12.0f]; int width = 225, height = 10000; NSMutableDictionary *attrs = [[NSMutableDictionary alloc] init]; [attrs setObject: font forKey: NSFontAttributeName]; CGRect size = [text boundingRectWithSize:CGSizeMake(width, height) options: NSStringDrawingUsesLineFragmentOrigin attributes: attrs context: nil]; UILabel *label = [[UILabel alloc] initWithFrame: CGRectMake(0, 0, size.size.width, size.size.height)]; label.numberOfLines = 0;//ä¸€å®šè¦è®¾ç½®è¡Œæ•°ä¸º0 label.font = font; label.lineBreakMode = NSLineBreakByWordWrapping; label.text = (text ? text : @\"\"); label.backgroundColor = [UIColor clearColor]; label.textColor = [UIColor blackColor]; return label; }  ","description":"","tags":["iOS","UILabel"],"title":"æ ¹æ®å­—æ•°è‡ªé€‚åº”é«˜åº¦çš„UILabel","uri":"/posts/uilabel-with-height-fixed/"},{"categories":null,"content":"ç®€ä»‹ åœ¨ç¼–å†™Webç¨‹åºæ—¶ï¼Œè¡¨å•çš„æäº¤è‹¥å¯†ç ä½¿ç”¨æ˜æ–‡æäº¤ä¼šååˆ†ä¸å®‰å…¨ï¼Œå› æ­¤åœ¨æµè§ˆå™¨ç«¯ä¹Ÿè¦å¯¹å¯†ç è¿›è¡ŒåŠ å¯†å¤„ç†ã€‚ä½†æ˜¯è‹¥åªæ˜¯åœ¨æµè§ˆå™¨ç«¯å¤„ç†äº†ï¼Œè€ŒæœåŠ¡å™¨æ²¡æœ‰å†ä¸€æ¬¡åŠ å¯†ï¼Œä¹Ÿæ˜¯ä¸å¦¥å½“çš„ï¼Œå› ä¸º\"ä¸­é—´äºº\"åªè¦è·å–äº†æµè§ˆå™¨ç«¯åŠ å¯†çš„å¯†ç ï¼Œä¸éœ€è¦è¿›è¡Œå¤„ç†ä¹Ÿèƒ½è¿›è¡Œç™»å½•ã€‚æ‰€ä»¥æˆ‘ä¸€èˆ¬çš„åšæ³•æ˜¯åœ¨å‰ç«¯åŠ å¯†ä¸€æ¬¡ï¼Œåœ¨æœåŠ¡å™¨å†åŠ å¯†ä¸€æ¬¡ã€‚å¯†ç åŠ ç›ï¼ˆsaltï¼‰çš„é—®é¢˜ç­‰æˆ‘å…ˆç ”ç©¶ä¸‹å†å†™ä¸€ä¸‹ã€‚è€Œæµè§ˆå™¨ç«¯åŠ å¯†ä¸€èˆ¬æˆ‘éƒ½ç”¨javascriptè¿›è¡ŒåŠ å¯†åå†æäº¤ã€‚ä¸‹é¢æ˜¯ç”¨javascriptç¼–å†™çš„base64åŠ å¯†ï¼Œmd5åŠ å¯†å’Œsha1åŠ å¯†ã€‚ä½¿ç”¨æ–¹æ³•ä¹Ÿæå…¶ç®€å•ï¼Œåªè¦åœ¨é¡µé¢å†…å¼•å…¥ç›¸åº”jsæ–‡ä»¶å³å¯ã€‚\nbase64åŠ è§£å¯† \u003c!DOCTYPE HTML\u003e \u003chtml\u003e \u003chead\u003e \u003cmeta charset=\"utf-8\"\u003e \u003ctitle\u003ebase64åŠ è§£å¯†\u003c/title\u003e \u003cscript type=\"text/javascript\" src=\"base64.js\"\u003e\u003c/script\u003e \u003cscript\u003e var base64 = new Base64(); //åŠ å¯† var base64encodeStg = base64.encode(\"hello world!\"); alert(\"base64encode:\" + base64encodeStg); //è§£å¯† var base64decodeStg = base64.decode(base64encodeStg); alert(\"base64decode:\" + base64decodeStg); \u003c/script\u003e \u003c/head\u003e \u003c/html\u003e  md5åŠ å¯† \u003c!DOCTYPE HTML\u003e \u003chtml\u003e \u003chead\u003e \u003cmeta charset=\"utf-8\"\u003e \u003ctitle\u003emd5åŠ å¯†\u003c/title\u003e \u003cscript type=\"text/javascript\" src=\"md5.js\"\u003e\u003c/script\u003e \u003cscript\u003e var hash = hex_md5(\"hello world!\"); alert(hash);\t\u003c/script\u003e \u003c/head\u003e \u003c/html\u003e  sha1åŠ å¯† ç›¸å¯¹äºå‰ä¸¤ä¸ªï¼Œsha1åŠ å¯†å¯èƒ½æ›´å®‰å…¨\n\u003c!DOCTYPE HTML\u003e \u003chtml\u003e \u003chead\u003e \u003cmeta charset=\"utf-8\"\u003e \u003ctitle\u003esha1åŠ å¯†\u003c/title\u003e \u003cscript type=\"text/javascript\" src=\"sha1.js\"\u003e\u003c/script\u003e \u003cscript\u003e var sha1 = hex_sha1(\"hello world!\"); alert(sha1); \u003c/script\u003e \u003c/head\u003e \u003c/html\u003e  ç›¸å…³æ–‡ä»¶ä¸‹è½½ base64.js | md5.js | sha1.js ç™¾åº¦ç½‘ç›˜åˆ†äº«\n","description":"","tags":["md5","base64","sha1","javascript","åŠ å¯†"],"title":"JSå®ç°å¯†ç åŠ å¯†(base64, md5, sha1)","uri":"/posts/javascript-md5-base64-sha1/"},{"categories":null,"content":"ç«™é•¿ä¹‹å®¶ï¼ˆChinaZ.comï¼‰ 3æœˆ4æ—¥æ¶ˆæ¯ï¼Œæ˜¨æ—¥å¼€å§‹ï¼Œå›½å†…çŸ¥åå›¾åºŠæœåŠ¡ç½‘ç«™è´´å›¾åº“é¦–é¡µå’ŒæœåŠ¡å™¨éƒ¨åˆ†åœ°åŒºå‡ºç°äº†æ— æ³•è®¿é—®çš„æƒ…å†µã€‚æ®ç«™é•¿ä¹‹å®¶äº†è§£ï¼Œè´´å›¾åº“å› è¢«æ£€æµ‹åˆ°éæ³•å†…å®¹ï¼Œé­åˆ°ç½‘ä¿¡åŠä¸‹ä»¤è¦æ±‚åŸŸåæœåŠ¡å•†æ˜“åä¸­å›½å°†åŸŸå**clientHoldï¼ˆé”å®šï¼‰**å¤„ç†ã€‚\næˆ‘åšå®¢ä¸Šé¢çš„å›¾ç‰‡ä¹Ÿå…¨éƒ½æ”¾åœ¨è´´å›¾åº“ä¸Šé¢çš„ï¼Œä»Šå¤©åˆšå›å½’åšå®¢å°±å‘ç°å›¾ç‰‡ä¸èƒ½è®¿é—®äº†ã€‚æŸ¥è¿‡ä¹‹åæ‰è´´å›¾åº“è¢«å…³é—­äº†ï¼Œä¸è¿‡æˆ‘è§‰å¾—å®˜æ–¹åº”è¯¥èƒ½è§£å†³å¥½è¿™ä¸ªäº‹æƒ…ï¼Œæ¯•ç«Ÿæ˜¯å›½å†…çŸ¥åå›¾åºŠæœåŠ¡ç½‘ç«™ï¼Œç”¨æˆ·æ•°é‡åº”è¯¥å¾ˆå¤šã€‚æˆ‘è§‰å¾—ä¼šç»™ç”¨æˆ·ä¸€ä¸ªæ»¡æ„çš„ç­”å¤çš„ã€‚è¦ä¸ç„¶æˆ‘åšå®¢é‡Œé¢çš„å›¾ç‰‡æ€ä¹ˆåŠå•Šã€‚æ‘”ï¼\n","description":"","tags":["è´´å›¾åº“","ç½‘ä¿¡åŠ","è®°å½•"],"title":"è´´å›¾åº“è¢«ç½‘ä¿¡åŠå…³é—­ å®˜æ–¹ï¼šè§£å†³éœ€è¦æ—¶é—´","uri":"/posts/tietuku-clienthold/"},{"categories":null,"content":"ä¸ºäº†ä½¿ä¿å­˜çš„å¯†ç æ›´å®‰å…¨ï¼Œ æˆ‘ä»¬åº”è¯¥å®ç°ä¸€ä¸ªNSStringçš„åˆ†ç±»ï¼Œä¸ºå¯†ç åˆ›å»ºä¸€ä¸ªMD5çš„å“ˆå¸Œå€¼ï¼Œè€Œä¸”å¹¶æŠŠå®ƒä¿å­˜åœ¨keychainä¸­ï¼›keychainæ˜¯åœ¨è®¾å¤‡ä¸­ä¿å­˜å…³é”®æ•°æ®çš„å”¯ä¸€å®‰å…¨çš„åœ°æ–¹ã€‚\nstep1. æ–°å»ºæ–‡ä»¶ æ–°å»ºæ–‡ä»¶ï¼Œåœ¨æ¨¡æ¿åˆ—è¡¨ä¸­é€‰æ‹©Objective-C Categoryé¡¹ã€‚å•å‡»NextæŒ‰é’®ï¼Œè¾“å…¥â€œMD5â€ä½œä¸ºè¿™ä¸ªåˆ›å»ºçš„åˆ†ç±»çš„åå­—ï¼Œç„¶ååœ¨CategoryOnä¸‹æ‹‰èœå•ä¸­é€‰æ‹©NSStringï¼Œè¡¨æ˜æ˜¯NSStringçš„Categoryã€‚\nstep2. å¤´æ–‡ä»¶ #import \u003cFoundation/Foundation.h\u003e @interface NSString (MD5) - (NSString *) MD5; @end  step3. æºæ–‡ä»¶ #import \"NSString+MD5.h\" #import \u003cCommonCrypto/CommonDigest.h\u003e @implementation NSString (MD5) - (NSString *) MD5{ //è½¬åŒ–ä¸ºUTF8æ ¼å¼å­—ç¬¦ä¸² const char *ptr = [self UTF8String]; //å¼€è¾Ÿä¸€ä¸ª16å­—èŠ‚æ•°ç»„ unsigned char md5Buffer[CC_MD5_DIGEST_LENGTH]; //è°ƒç”¨å®˜æ–¹å°è£…çš„åŠ å¯†æ–¹æ³•, å°†ptrå¼€å§‹çš„å­—ç¬¦ä¸²å­˜å‚¨åˆ°md5Buffer[]ä¸­ CC_MD5(ptr, strlen(ptr), md5Buffer); //è½¬æ¢ä½NSStringå¹¶è¿”å› NSMutableString *output = [NSMutableString stringWithCapacity: CC_MD5_DIGEST_LENGTH * 2]; for (int i = 0; i \u003c CC_MD5_DIGEST_LENGTH; i ++) { [output appendFormat: @\"%02x\", md5Buffer[i]]; } /* * `x`è¡¨ç¤ºåå…­è¿›åˆ¶ï¼Œ%02 æ„æ€æ˜¯ä¸è¶³ä¸¤ä½ç”¨0è¡¥é½ï¼Œå¦‚æœå¤šäº2ä½åˆ™ä¸å½±å“ * NSLog(\"%02x\", 0x666); //è¾“å‡º `666` * NSLog(\"%02x\", 0x3);\t//è¾“å‡º `03` */ return output; } @end ","description":"","tags":["iOS","åŠ å¯†","MD5"],"title":"iOS NSStringå­—ç¬¦ä¸²MD5åŠ å¯†","uri":"/posts/ios-md5/"},{"categories":null,"content":"ä¹‹å‰ä»æ¥å£è·å–æ•°æ®åè½¬æ¢ä¸ºNSDictionaryç„¶åæ‰§è¡ŒwriteToFileå°±å¯ä»¥å†™å…¥æ–‡ä»¶æˆåŠŸï¼Œæ˜¨å¤©åœ¨ä½¿ç”¨è±†ç“£ç”µå½±Apiæ—¶ï¼Œå‡ºç°äº†å‰å‡ æ¡è¯·æ±‚çš„æ•°æ®å†™å…¥ç¼“å­˜æˆåŠŸï¼Œä»æŸä¸€æ¬¡è¯·æ±‚å¼€å§‹å°±æ€»æ˜¯å†™å…¥ä¸æˆåŠŸã€‚å› ä¸ºæˆ‘æ˜¯ç”¨gcdæ–¹å¼è¯·æ±‚æ•°æ®çš„ï¼Œæˆ‘è¿˜ä»¥ä¸ºæ˜¯å› ä¸ºçº¿ç¨‹ç«äº‰çš„é—®é¢˜ï¼Œä½†æ˜¯å†™æ–‡ä»¶çš„åŸå­æ“ä½œæˆ‘è®¾ç½®çš„YESå•Šã€‚ç„¶åå†™è¿›ç¨‹é”è¯•ä¸€ä¸‹ï¼Œç„¶è€Œä»ç„¶å†™å…¥å¤±è´¥ï¼Œåæ¥æˆ‘ä¸ç”¨gcdä»¥ä¸ºèƒ½å¥½ï¼Œç»“æœè¿˜æ˜¯å†™å…¥å¤±è´¥ã€‚åæ¥ç¿»èµ„æ–™ï¼Œè¯´å¥½åƒå¦‚æœNSDictionaryä¸­æœ‰è‡ªå®šä¹‰çš„objectç±»å‹æ˜¯ä¸èƒ½å†™å…¥æ–‡ä»¶çš„ï¼Œæ¯”å¦‚åƒnullï¼Œå‘µå‘µã€‚ä½†æ˜¯æˆ‘æ‰¾äº†åŠå¤©ä¹Ÿæ²¡æ‰¾åˆ°é”™è¯¯æ‰€åœ¨ï¼Œç„¶åä¹Ÿä¸å¤ªå½±å“æ­£å¸¸ä½¿ç”¨ï¼Œå°±æš‚æ—¶æ”¾åœ¨ä¸€è¾¹äº†ã€‚\nç»“æœä»Šå¤©å‡ºé—®é¢˜äº†ï¼Œä¹‹å‰è·å–çš„æ˜¯ç”µå½±çš„åˆ—è¡¨ä¿¡æ¯ï¼Œä»Šå¤©è¦å†™ç”µå½±çš„è¯¦æƒ…é¡µä¿¡æ¯ã€‚å†™å¥½åä¸æ–­æµ‹è¯•ï¼Œç»“æœæœ‰ä¸€æ¡ç”µå½±ï¼Œä¸€ç‚¹è¿›å…¥è¯¦æƒ…å°±ä¼šå´©æºƒã€‚å¥½äº†ï¼Œè®¾ç½®å¥½æ–­ç‚¹ï¼Œä¸€æ­¥æ­¥æ’æŸ¥ï¼Œæœ€åNSLogå¯¼æ¼”å¤´åƒçš„urlStringæ—¶ï¼Œæ‰¾åˆ°äº†é—®é¢˜æ‰€åœ¨ï¼Œå¯¼æ¼”çš„å¤´åƒå›¾ç‰‡çš„urlä¸ºnullï¼ç»ˆäºæ‰¾åˆ°äº†é—®é¢˜æ‰€åœ¨ã€‚é‚£ä¹ˆå¯ä»¥è§£å†³äº†â€¦\næˆ‘è·å–äº†è¯¥æ¡ç›®ç”µå½±çš„idå·ï¼Œç„¶ååœ¨æµè§ˆå™¨ä¸­è·å–äº†ä»–çš„jsonæ•°æ®ï¼Œæœä¸å…¶ç„¶ï¼Œå°±æ˜¯è¿™ä¸ªç”µå½±!ã€Šç«äº‘ç«¯ã€‹!\nç„¶è€Œæˆ‘å¹¶æ²¡æœ‰æƒ³åˆ°æœ‰è¿™ä¹ˆå¤šnullã€‚\nç»è¿‡ç™¾åº¦ï¼Œå¥½åƒè¦å†™æ–‡ä»¶ï¼ŒNSDictionaryé‡Œé¢çš„objectå¿…é¡»æ˜¯NSStringï¼ŒNSDataï¼ŒNSNumberï¼ŒNSDateï¼ŒNSArrayï¼ŒNSDictionaryä¸­çš„æ•°æ®ç±»å‹ã€‚ä¸è¿‡æˆ‘çŸ¥é“ï¼Œå«æœ‰nullæ˜¯ä¸‡ä¸‡ä¸èƒ½çš„ï¼Œæ··è›‹ã€‚\nè§£å†³æ–¹æ¡ˆï¼šNSDictionary -\u003e NSDate NSDictionaryå†™æ–‡ä»¶ä¹‹å‰ï¼Œå¯ä»¥æŠŠå®ƒè½¬æ¢æˆNSDataç±»å‹çš„æ•°æ®ï¼Œå†æ‰§è¡Œå†™æ–‡ä»¶æ“ä½œã€‚ ä»æ–‡ä»¶è¯»å–æ—¶æŠŠè¯»å–å‡ºçš„NSDataè½¬æ¢ä¸ºNSDictionaryå°±å¯ä»¥äº†ã€‚\nç”¨åˆ°çš„æ–¹æ³• NSDictionary -\u003e NSData:\nNSData *data = [NSKeyedArchiver archivedDataWithRootObject:dictionary];  NSData -\u003e NSDictionary:\nNSDictionary *dictionary = (NSDictionary *)[NSKeyedUnarchiver unarchiveObjectWithData:data];  æ˜¨å¤©çš„é—®é¢˜è§£å†³äº†ï¼Œè¿™æ ·å†™æ—¶å€™ï¼Œæ¯ä¸€æ¬¡éƒ½èƒ½å†™å…¥ç¼“å­˜æ–‡ä»¶æˆåŠŸã€‚\nä»Šå¤©çš„æ¶‰åŠåˆ°NSDictionaryå€¼çš„è·å–çš„éƒ¨åˆ†ï¼Œæˆ‘éƒ½åŠ äº†ä¸€ä¸ªåˆ¤æ–­ if([theValue isKindOfClass:[NSNull class]])ï¼Œç„¶åè¿›è¡Œç›¸åº”å¤„ç†å°±å¯ä»¥äº†ã€‚\nè¿™ä¸ªæ—¶iOSçš„ä¸€ä¸ªå½’æ¡£æ–¹æ³•ï¼Œä¸ä»…ä»…èƒ½å½’æ¡£nullï¼Œè‡ªå®šä¹‰çš„ç±»å‹ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚å…·ä½“å¯ä»¥å‚è§å°ç™½çŒªjianjiançš„åšå®¢-ä½¿ç”¨NSKeyedArchiverå½’æ¡£\næ„Ÿæƒ³ ç”Ÿæ´»ä¸­æˆ–è€…ç¨‹åºå¼€å‘ä¸­ï¼Œé‡åˆ°äº†é—®é¢˜ä¸ä¸€å®šéè¦ç«‹é©¬è§£å†³ï¼Œå¦‚æœæ­»é’»ç‰›è§’å°–å„¿å¯èƒ½ä¸€ç›´éƒ½è§£å†³ä¸äº†ï¼Œé‚£æ—¶åªèƒ½æµªè´¹æ—¶é—´ã€‚å¦‚æœæš‚æ—¶æ”¾æ”¾ï¼Œä¼‘æ¯ä¸€ä¼šï¼Œå†å›æ¥æƒ³è§£å†³åŠæ³•å¯èƒ½å°±èƒ½æƒ³åˆ°è§£å†³æ–¹æ¡ˆã€‚å°±åƒä»Šå¤©æˆ‘è§£å†³æˆ‘çš„é—®é¢˜ä¸€æ ·ï¼Œå®Œå…¨æ˜¯æœºç¼˜å·§åˆã€‚åŒæ—¶æˆ‘ä»¬ä¹Ÿåº”è¯¥å‘ç°ï¼Œå¦‚æœæƒ³åšå‡ºå¥½çš„è½¯ä»¶ï¼Œå‰æœŸå¼€å‘çš„æŠ•å…¥å¾ˆé‡è¦ï¼Œä½†æ˜¯åæœŸçš„æµ‹è¯•ä¹Ÿå¾ˆé‡è¦ã€‚åŠŸèƒ½åšå®Œä¹‹åæˆ‘ä¹Ÿæ˜¯ç‚¹å‡»æµ‹è¯•äº†ä¸è¯´å‡ ç™¾æ¬¡ï¼Œå‡ åæ¬¡ä¹Ÿæ˜¯æœ‰äº†æ‰å‘ç°äº†è¿™ä¸ªé—®é¢˜ã€‚\næœ€åç»™å¤§å®¶çœ‹ä¸‹æˆ‘åšçš„ç”µå½±å½±è®¯ï¼Œå˜¿å˜¿ï¼Œä½¿ç”¨äº†è±†ç“£ç”µå½±Apiã€‚\n","description":"","tags":["iOS"],"title":"NSDictionaryå«æœ‰nullå¯¼è‡´å†™æ–‡ä»¶(writeToFile)å¤±è´¥(è±†ç“£ç”µå½±Apiè¿”å›Jsonæ•°æ®ä¸­å«æœ‰null)","uri":"/posts/nsdictionarywritetofilefailedbecauseofcontainsnull/"},{"categories":null,"content":"ä¸Šä¸€ç¯‡å·²ç»å®ç°äº†é¡µé¢çš„å¸ƒå±€ï¼Œè¿™ä¸€ç¯‡æˆ‘ä»¬æ¥å®ç°ç•Œé¢çš„é€»è¾‘å˜æ¢ã€‚ä¸»è¦ç”¨åˆ°çš„æ˜¯scollViewçš„ä¸¤ä¸ªä»£ç†æ–¹æ³•ã€‚æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹æ•ˆæœã€‚\n1.å®ç°ç‚¹å‡»é¡¶éƒ¨æŒ‰é’®åˆ‡æ¢åº•éƒ¨è¯¦æƒ…é¡µé¢ ç»™é¡¶éƒ¨itemsçš„æŒ‰é’®æ·»åŠ target åœ¨- (void) addFirstScrollViewOnView æ–¹æ³•ä¸­çš„forå¾ªç¯ä¸­ï¼Œä¸ºæ¯ä¸ªbuttonæ·»åŠ ä¸€ä¸ªtargetï¼Œç”¨äºç›‘å¬ç‚¹å‡»æŒ‰é’®çš„äº‹ä»¶ã€‚\n [itemButton addTarget:self action:@selector(itemButtonClicked:) forControlEvents:UIControlEventTouchUpInside];  æ·»åŠ ç›‘å¬æ–¹æ³• æˆ‘ä»¬åº”è¯¥çŸ¥é“å½“ç‚¹å‡»é¡¶éƒ¨itemæŒ‰é’®æ—¶ï¼Œåº•éƒ¨è¯¦æƒ…é¡µåº”è¯¥åšç›¸åº”çš„åˆ‡æ¢ï¼ŒåŒæ—¶æŒ‰é’®æ ·å¼ä¹Ÿæ”¹å˜ã€‚ å¤§å®¶å¯èƒ½æ³¨æ„åˆ°äº†éœ€è¦ç”¨åˆ°æŒ‰é’®çš„tagå€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬åŒæ ·åœ¨ä¸Šä¸€æ­¥çš„æ–¹æ³•çš„forå¾ªç¯ä¸­ä¸ºæ¯ä¸ªæŒ‰é’®è®¾ç½®tagå€¼ã€‚\nitemButton.tag = 100 + i;//è®¾ç½®buttonçš„tagå€¼  åŒæ—¶ï¼Œéœ€è¦æ·»åŠ ä¸€ä¸ªå®ä¾‹å˜é‡ï¼š\n //è®°å½•å½“å‰è¢«ç‚¹å‡»çš„æŒ‰é’®tag @property (nonatomic, assign) NSInteger currentButtonTag;  **(é‡è¦)**å¹¶åœ¨ä¸Šä¸€æ­¥æ–¹æ³•çš„æœ€åä¸ºå®ƒè®¾ç½®åˆå§‹å€¼ä¸º100ï¼Œä¹Ÿå°±æ˜¯å½“å‰ç‚¹å‡»çš„æŒ‰é’®ä¸ºç¬¬ä¸€ä¸ªã€‚\ntipsï¼šä¸ä»1å¼€å§‹è®¾ç½®tagå€¼çš„åŸå› æ˜¯å› ä¸ºå‰100å¯èƒ½æœ‰ç³»ç»Ÿçš„æ§ä»¶å ç”¨ scrollViewè¯¦æƒ…é¡µåˆ‡æ¢ï¼šè·å–å½“å‰æŒ‰é’®çš„tagå€¼ï¼Œè®¡ç®—åç§»é‡\n- (void) itemButtonClicked:(UIButton *)button { //**1.åç§»åº•éƒ¨è¯¦æƒ…scrollView NSInteger buttonTag = button.tag - 100;//è·å–ç‚¹å‡»æŒ‰é’®çš„tag self.secondScrollView.contentOffset = CGPointMake(buttonTag * KSCREEN_WIDTH, 0);//è®¾ç½®åº•éƒ¨scrollviewçš„å†…å®¹åç§»é‡ //**2.æ¢å¤å‰ä¸€ä¸ªè¢«ç‚¹å‡»çš„æŒ‰é’®çš„æ ·å¼ UIButton *preClickedButton = (UIButton *)[self.view viewWithTag:self.currentButtonTag]; preClickedButton.titleLabel.font = [UIFont systemFontOfSize:14.0f]; [preClickedButton setTitleColor:[UIColor colorWithRed:0.4 green:0.4 blue:0.4 alpha:1.0] forState:UIControlStateNormal];//æ ‡é¢˜é¢œè‰² //**3.è®¾ç½®å½“å‰ç‚¹å‡»æŒ‰é’®æ ·å¼ button.titleLabel.font = [UIFont systemFontOfSize:18.0f]; [button setTitleColor:[UIColor colorWithRed:1.0 green:0.3 blue:0.3 alpha:1.0f] forState:UIControlStateNormal]; //**4.æ”¹å˜å½“å‰ç‚¹å‡»æŒ‰é’®çš„tagå€¼ self.currentButtonTag = buttonTag + 100; }  å®Œæˆè¿™ä¸€æ­¥ï¼Œå½“ä½ ç‚¹å‡»é¡¶éƒ¨æŒ‰é’®çš„æ—¶å€™ï¼Œä½ å°±å¯ä»¥çœ‹åˆ°é¡¶éƒ¨æŒ‰é’®æ ·å¼çš„æ”¹å˜å’Œåº•éƒ¨è¯¦æƒ…é¡µé¢çš„åˆ‡æ¢ã€‚\n2.å®ç°æ»šåŠ¨åº•éƒ¨è¯¦æƒ…é¡µé¡¶éƒ¨æŒ‰é’®å­—ä½“åˆ‡æ¢ æ·»åŠ scrollViewçš„ä»£ç† æ·»åŠ ä»£ç†\n@interface ViewController () \u003cUIScrollViewDelegate\u003e  åœ¨- (void) addSecondScrollViewOnView æ–¹æ³•ä¸­è®¾ç½®secondScrollViewçš„ä»£ç†ä¸ºselfã€‚è¿™æ­¥ä¸è¦å¿˜è®°äº†ã€‚\nsecondScrollView.delegate = self;  å®ç°scrollView çš„ä»£ç†æ–¹æ³• - (void) scrollViewDidScroll:(UIScrollView *)scrollViewï¼› åœ¨è¿™ä¸€æ­¥ï¼Œæˆ‘ä»¬è¦å®ç°æ»šåŠ¨æ—¶ï¼Œé¡¶éƒ¨itemsçš„æŒ‰é’®å­—ä½“å¤§å°å’Œé¢œè‰²çš„æ”¹å˜ã€‚\n //æ­£åœ¨æ»‘åŠ¨è°ƒç”¨çš„ä»£ç†æ–¹æ³• - (void) scrollViewDidScroll:(UIScrollView *)scrollView { //è·å–å½“å‰ç¬¬äºŒä¸ªscrollViewçš„åç§»é‡ CGFloat secondScrollViewContentOffsetX = scrollView.contentOffset.x; //è·å–é€‰ä¸­æŒ‰é’®çš„åºå· int buttonTag = (secondScrollViewContentOffsetX) / KSCREEN_WIDTH; //è®¡ç®—æ‰‹æŒ‡æ»‘åŠ¨äº†å¤šå°‘è·ç¦» CGFloat fingerDistance = secondScrollViewContentOffsetX - KSCREEN_WIDTH * buttonTag; //è·å–åˆ°ä¸‹ä¸€ä¸ªæŒ‰é’®ï¼Œå¹¶æ”¹å˜å…¶å­—ä½“å¤§å°å’Œé¢œè‰²ï¼Œé€æ¸æ”¾å¤§ï¼ˆæ ¹æ®æ‰‹æŒ‡æ»‘åŠ¨çš„è·ç¦»åŠ¨æ€æ”¹å˜ï¼‰ UIButton *buttonNext = (UIButton *)[self.view viewWithTag:(buttonTag + 100 + 1)]; buttonNext.titleLabel.font = [UIFont systemFontOfSize:(14.0 + fingerDistance * 4 / (KSCREEN_WIDTH))]; [buttonNext setTitleColor:[UIColor colorWithRed:(0.4f + 3 * fingerDistance / (KSCREEN_WIDTH * 5)) green:0.3 blue:0.3 alpha:1.0] forState:UIControlStateNormal]; //åŒæ ·æ–¹æ³•è·å–åˆ°å½“å‰æŒ‰é’®ï¼Œå¹¶æ”¹å˜å…¶å­—ä½“å¤§å°å’Œé¢œè‰²æ¢å¤å›åŸæ¥æ ·å¼ï¼Œé€æ¸ç¼©å°ï¼ˆæ ¹æ®æ‰‹æŒ‡æ»‘åŠ¨çš„è·ç¦»åŠ¨æ€æ”¹å˜ï¼‰ UIButton *buttonCurr = (UIButton *)[self.view viewWithTag:(buttonTag + 100)]; buttonCurr.titleLabel.font = [UIFont systemFontOfSize:(18.0 - fingerDistance * 4 / (KSCREEN_WIDTH))]; [buttonCurr setTitleColor:[UIColor colorWithRed:(1.0f - 3 * fingerDistance / (KSCREEN_WIDTH * 5)) green:0.3 blue:0.3 alpha:1.0] forState:UIControlStateNormal]; }  è¿™é‡Œå¯ä»¥çœ‹åˆ°ä¸‹ä¸€ä¸ªæŒ‰é’®çš„å­—ä½“åŠ¨æ€æ”¹å˜ï¼Œè®¡ç®—æ–¹æ³•å…¶å®éå¸¸ç®€å•ã€‚ è®¾æ‰‹æŒ‡æ»‘åŠ¨è·ç¦»ä¸ºxï¼Œå­—ä½“å¤§å°ä¸ºyã€‚é‚£ä¹ˆæˆ‘ä»¬æœ‰ä¸¤ä¸ªå€¼ (0,14), (KSCREEN_WIDTH, 18)ã€‚ ç„¶ååˆ—äºŒå…ƒä¸€æ¬¡æ–¹ç¨‹ç»„ï¼Œå°±å¯ä»¥å¾—åˆ° a å’Œ bã€‚ æˆ‘è¿™é‡Œè§£å¾— a = 4/KSCREEN_WIDTD , b = 14\nå½“å‰æŒ‰é’®çš„æ”¹å˜äº¦ç„¶ã€‚åªæ˜¯ä¸¤ä¸ªç‚¹å˜ä¸º (KSCREEN_WIDTH, 14), (0, 18) è®¡ç®—å¾—åˆ° a = ï¼(4/KSCREEN_WIDTH), b = 18\né¢œè‰²å¤§å®¶è®¡ç®—æ–¹å¼ç›¸ä¼¼ï¼Œä¸å†èµ˜è¿°ã€‚\n3.ä½¿é¡¶éƒ¨scrollViewéšåº•éƒ¨scrollViewæ»‘åŠ¨è€Œæ»šåŠ¨ æˆ‘ä»¬æ³¨æ„çœ‹ç½‘æ˜“æ–°é—»å®¢æˆ·ç«¯ï¼Œå®ƒåº•éƒ¨scrollViewæ»šåŠ¨ä¹‹åï¼Œé¡¶éƒ¨çš„scrollViewä¹Ÿä¼šéšä¹‹æ»šåŠ¨ï¼Œå¹¶ä¸”é™¤äº†å¼€å¤´æˆ–è€…æœ«å°¾çš„å‡ ä¸ªæŒ‰é’®ï¼Œå®ƒå½“å‰æ‰€åœ¨çš„æ–°é—»ç±»å‹å§‹ç»ˆåœ¨å±å¹•ä¸­é—´ã€‚å¹¶ä¸”é¡¶éƒ¨çš„æ»šåŠ¨æ€»æ˜¯åœ¨åº•éƒ¨æ»‘åŠ¨ç»“æŸä¹‹åï¼Œæ‰€ä»¥æˆ‘ä»¬å®ç°scrollViewçš„ä»£ç†æ–¹æ³•\t- (void) scrollViewDidEndDecelerating:(UIScrollView *)scrollView \n//æ»‘åŠ¨ç»“æŸè°ƒç”¨çš„ä»£ç†æ–¹æ³• - (void) scrollViewDidEndDecelerating:(UIScrollView *)scrollView { //**1.è·å–é€‰ä¸­è¯¦æƒ…é¡µå¯¹åº”çš„é¡¶éƒ¨button //ç§»åŠ¨é¡¶éƒ¨é€‰ä¸­çš„æŒ‰é’® CGFloat secondScrollViewContentOffsetX = scrollView.contentOffset.x; //è·å–é€‰ä¸­æŒ‰é’®çš„åºå· int buttonTag = (secondScrollViewContentOffsetX) / KSCREEN_WIDTH; //æ ¹æ®æŒ‰é’®å·ç è·å–åˆ°é¡¶éƒ¨çš„æŒ‰é’® UIButton *buttonCurr = (UIButton *)[self.view viewWithTag:(buttonTag + 100)]; //**2.(é‡è¦)è®¾ç½®å½“å‰é€‰ä¸­çš„æŒ‰é’®å·ã€‚å¦‚è‹¥ä¸å†™ï¼Œå°†å¯¼è‡´æ»‘åŠ¨åå†ç‚¹å‡»é¡¶éƒ¨æŒ‰é’®ï¼Œä¸Šä¸€ä¸ªæŒ‰é’®é¢œè‰²ï¼Œå­—ä½“ä¸ä¼šæ”¹å˜ self.currentButtonTag = buttonTag + 100; //**3.å§‹ç»ˆä¿æŒé¡¶éƒ¨é€‰ä¸­æŒ‰é’®åœ¨ä¸­é—´ä½ç½® //æ³¨æ„ä¸€ï¼šå¼€å§‹çš„å‡ ä¸ªæŒ‰é’®ï¼Œå’Œæœ«å°¾çš„å‡ ä¸ªæŒ‰é’®å¹¶ä¸éœ€è¦ä¸€ç›´ä¿æŒä¸­é—´ã€‚ //æ³¨æ„äºŒï¼šå¯¹äºå·²ç»æ”¾ç½®åœ¨firstScrollViewä¸­çš„æŒ‰é’®ï¼Œå®ƒçš„centeræ˜¯ç›¸å¯¹äºscrollViewçš„contentè€Œè¨€çš„ï¼Œæ³¨æ„å¹¶ä¸æ˜¯ç›¸å¯¹äºself.viewçš„boundsè€Œè¨€çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ”¾ç½®å¥½æŒ‰é’®ï¼Œå®ƒçš„centerå°±ä¸ä¼šå†æ”¹å˜ //å¦‚æœæ˜¯é¡¶éƒ¨scrollViewå³å°†åˆ°æœ«å°¾çš„å‡ ä¸ªæŒ‰é’®ï¼Œè®¾ç½®åç§»é‡ï¼Œç›´æ¥return if (buttonCurr.center.x + KSCREEN_WIDTH * 0.5 \u003e self.firstScrollView.contentSize.width) { [UIView animateWithDuration:0.3 animations:^{ self.firstScrollView.contentOffset = CGPointMake(self.firstScrollView.contentSize.width - KSCREEN_WIDTH, 0); }]; return; } //å¦‚æœæ˜¯é¡¶éƒ¨scrollViewå¼€å¤´çš„å‡ ä¸ªæŒ‰é’®ï¼Œè®¾ç½®åç§»é‡ï¼Œç›´æ¥return if (buttonCurr.center.x \u003c KSCREEN_WIDTH * 0.5) { [UIView animateWithDuration:0.3 animations:^{ self.firstScrollView.contentOffset = CGPointMake(0, 0); }]; return; } //å¦‚æœæ˜¯ä¸­é—´å‡ ä¸ªæŒ‰é’®çš„æƒ…å†µ if (buttonCurr.center.x \u003e (KSCREEN_WIDTH * 0.5)) { [UIView animateWithDuration:0.3 animations:^{ self.firstScrollView.contentOffset = CGPointMake(buttonCurr.center.x - self.view.center.x, 0); }]; } }  è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯æˆ‘æ³¨é‡Šé‡Œé¢çš„ç¬¬2æ­¥å’Œç¬¬3æ­¥ã€‚ ç¬¬2æ­¥ä¸€å®šè¦å†™ï¼Œå¦åˆ™å¯¼è‡´å…ˆæ»‘åŠ¨åº•éƒ¨scrollViewï¼Œå†ç‚¹å‡»é¡¶éƒ¨scrollViewçš„buttonï¼Œå‡ºç°ä¹‹å‰çš„é‚£ä¸ªbuttonæ ·å¼ä¸æ¢å¤çš„æƒ…å†µã€‚ ç¬¬3æ­¥ï¼Œæ³¨æ„å‰å‡ ä¸ªæŒ‰é’®å’Œåå‡ ä¸ªæŒ‰é’®ä½ç½®çš„åˆ¤æ–­ï¼Œå¦‚æœä¸€å‘³ä¿æŒæŒ‰é’®åœ¨ä¸­é—´ï¼Œå°±ä¼šå‡ºç°é¡¶éƒ¨çš„offsetè¿‡å¤šï¼Œè€Œåé¢å‡ºç°ç©ºç™½ï¼Œå¤§å®¶å¯ä»¥ç®€å•å°è¯•ä¸€ä¸‹ã€‚\næ•´ä¸ªæ•ˆæœå°±å·²ç»å®Œæˆäº†ï½â˜ºï¸\n","description":"","tags":["iOS"],"title":"çº¯ä»£ç é«˜ä»¿ç½‘æ˜“æ–°é—»å®¢æˆ·ç«¯ä¸¤ä¸ªscrollViewè”åŠ¨ï¼ˆäºŒï¼‰ï¼šå®ç°ç•Œé¢é€»è¾‘å˜æ¢","uri":"/posts/twoscrollviewlinkage-2-businesslogic/"},{"categories":null,"content":"è‡ªå·±å†å¼€å‘appè¿‡ç¨‹ä¸­é‡åˆ°äº†è¿™æ ·é‚£æ ·çš„éœ€æ±‚ï¼Œå…¶ä¸­æœ‰ä¸€é¡¹æ˜¯æ–°é—»é¡µé¢ï¼Œéœ€è¦ä¸¤ä¸ªscrollViewè”åŠ¨ï¼Œä¸Šé¢çš„scrollViewæ˜¯æ–°é—»ç±»å‹ï¼Œä¸‹é¢scrollViewæ˜¯tableViewæ–°é—»æ ‡é¢˜ã€‚å¼€å‘è¿‡ç¨‹ä¸­æˆ‘å…¨éƒ¨éƒ½æ˜¯ç”¨ä»£ç å¸ƒå±€çš„ï¼Œå› ä¸ºè‡ªå·±æ˜¯æ–°æ‰‹ï¼Œä¸çŸ¥é“åˆ°åº•æ˜¯ç”¨ä»£ç å†™æ¯”è¾ƒæ–¹ä¾¿è¿˜æ˜¯ç”¨storyBoardæ›´æ–¹ä¾¿ï¼Œä½†æ˜¯æ„Ÿè§‰æ‰‹å†™ä»£ç é€‚åº”å±å¹•ä¸Šæ›´å®¹æ˜“ä¸Šæ‰‹å§ã€‚éœ€æ±‚å®ç°ä¹‹åç°åœ¨æ‹¿å‡ºæ¥ç®€å•æ•´ç†ä¸€ä¸‹ï¼Œæ–¹ä¾¿è‡ªå·±æ—¥åæŸ¥çœ‹ï¼Œä¹Ÿç»™åæ¥è€…ä»¥å‚è€ƒã€‚å› ä¸ºåˆšåˆšå¼€å§‹å­¦ï¼Œç”¨åˆ°çš„éƒ½æ˜¯äº›ç®€å•çš„æ–¹æ³•ï¼Œä¹Ÿå¯èƒ½ä¼šå‡ºé”™ï¼Œå¦‚æœæœ‰ä»€ä¹ˆä¸è¶³ï¼Œè¯·ç•™è¨€ç»™æˆ‘æŒ‡å‡ºã€‚è°¢è°¢ï½\nç°åœ¨å¼€å§‹æ­£é¢˜ï¼š æœ¬æ–‡æ˜¯ç¬¬ä¸€ç¯‡ï¼Œå…ˆæ˜¯ç®€å•çš„é¡µé¢å¸ƒå±€ï¼Œé¦–å…ˆæˆ‘ä»¬çœ‹ä¸€ä¸‹å¸ƒå±€ä¹‹åçš„æ•ˆæœï¼š\n1.å®å®šä¹‰ //å±å¹•çš„å®½å’Œé«˜ #define KSCREEN_HEIGHT [UIScreen mainScreen].bounds.size.height #define KSCREEN_WIDTH [UIScreen mainScreen].bounds.size.width //æœ€é¡¶éƒ¨çŠ¶æ€æ çš„é«˜åº¦ #define KSTATUS_HEIGHT 20 //é¡¶éƒ¨itemsçš„scrollViewçš„é«˜åº¦ #define KFIRST_SCROLLVIEW_HEIGHT 30 //æ ¹æ®è®¡ç®—ï¼Œå¾—åˆ°åº•éƒ¨è¯¦æƒ…scrollViewçš„é«˜åº¦ #define KSECOND_SCROLLVIEW_HEIGHT (KSCREEN_HEIGHT - KSTATUS_HEIGHT - KFIRST_SCROLLVIEW_HEIGHT) //é¡¶éƒ¨scrollViewæ¯ä¸ªitemæŒ‰é’®çš„å®½åº¦ #define KFIRST_SCROLLVIEW_ITEM_WIDTH 55  2.é¦–å…ˆå®šä¹‰éœ€è¦ç”¨åˆ°çš„å˜é‡ @interface ViewController () //é¡¶éƒ¨itemsçš„scrollView @property (nonatomic, weak) UIScrollView *firstScrollView; //åº•éƒ¨è¯¦æƒ…scrollView @property (nonatomic, weak) UIScrollView *secondScrollView; //itemç±»å‹çš„æ•°ç»„ @property (nonatomic, strong) NSArray *itemsTitlesArray; //ä¸ºäº†æ–¹ä¾¿ï¼Œå®šä¹‰ä¸€ä¸ªåŒ…å«é¢œè‰²çš„NSArrayï¼ˆè‡ªè¡Œå–èˆï¼‰ @property (nonatomic, strong) NSArray *colorArray; @end  3.æ‡’åŠ è½½ #pragma mark - lazy load //å®šä¹‰itemsçš„æ ‡é¢˜ - (NSArray *) itemsTitlesArray { if (!_itemsTitlesArray) { _itemsTitlesArray = [NSArray arrayWithObjects:@\"çƒ­ç‚¹æ–°é—»\", @\"æ–°é—»å¿«è®¯\", @\"é€šçŸ¥å…¬å‘Š\", @\"é™¢ç³»é€šçŸ¥\", @\"äººç‰©é£é‡‡\", nil]; } return _itemsTitlesArray; } //é¢œè‰²æ•°ç»„ - (NSArray *) colorArray { if (!_colorArray) { _colorArray = [NSArray arrayWithObjects: [UIColor colorWithRed:240.0/255.0 green:89.0/255.0 blue:136.0/255.0 alpha:1.0], [UIColor colorWithRed:0.0/255.0 green:179.0/255.0 blue:155.0/255.0 alpha:1.0], [UIColor colorWithRed:244.0/255.0 green:131.0/255.0 blue:69.0/255.0 alpha:1.0], [UIColor colorWithRed:241.0/255.0 green:90.0/255.0 blue:102.0/255.0 alpha:1.0], [UIColor colorWithRed:0.0/255.0 green:179.0/255.0 blue:155.0/255.0 alpha:1.0], [UIColor colorWithRed:255.0/255.0 green:223.0/255.0 blue:104.0/255.0 alpha:1.0], nil]; } return _colorArray; }  4.æ·»åŠ é¡¶éƒ¨itemsçš„scrollView //æ·»åŠ ç¬¬ä¸€ä¸ªscrollview - (void) addFirstScrollViewOnView { //**1.è®¾ç½®é¡¶éƒ¨ç±»å‹scrollView UIScrollView *firstScrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, KSTATUS_HEIGHT, KSCREEN_WIDTH, KFIRST_SCROLLVIEW_HEIGHT)]; firstScrollView.bounces = NO;//ç¦æ­¢åå¼¹ firstScrollView.showsHorizontalScrollIndicator = NO;//ç¦æ­¢æ˜¾ç¤ºæ°´å¹³æ»šåŠ¨æ¡ //è®¾ç½®scrollViewçš„å†…å®¹å¤§å°ï¼Œå®½åº¦ä¸º å®å®šä¹‰é¡¶éƒ¨æŒ‰é’®çš„å®½åº¦ ï¼Š itemsæ•°ç»„çš„æ•°é‡ firstScrollView.contentSize = CGSizeMake(self.itemsTitlesArray.count * KFIRST_SCROLLVIEW_ITEM_WIDTH, KFIRST_SCROLLVIEW_HEIGHT); self.firstScrollView = firstScrollView; [self.view addSubview:firstScrollView];//æ·»åŠ åˆ°self.view //**2.ä¸ºç¬¬ä¸€ä¸ªscrollViewæ·»åŠ buttons for (int i = 0; i \u003c self.itemsTitlesArray.count; i ++) { UIButton *itemButton = [[UIButton alloc] initWithFrame:CGRectMake(i * KFIRST_SCROLLVIEW_ITEM_WIDTH, 0, KFIRST_SCROLLVIEW_ITEM_WIDTH, KFIRST_SCROLLVIEW_HEIGHT)];//æ³¨æ„å·¦è¾¹è·çš„å†™æ³• [itemButton setTitle:[self.itemsTitlesArray objectAtIndex:i] forState:UIControlStateNormal];//æ ‡é¢˜ itemButton.backgroundColor = [UIColor colorWithRed:0.97 green:0.97 blue:0.97 alpha:1.0];//èƒŒæ™¯é¢œè‰² [itemButton setTitleColor:[UIColor colorWithRed:0.4 green:0.4 blue:0.4 alpha:1.0] forState:UIControlStateNormal];//æ ‡é¢˜é¢œè‰² itemButton.titleLabel.font = [UIFont systemFontOfSize:14.0]; [firstScrollView addSubview:itemButton];//æ·»åŠ åˆ°ç¬¬ä¸€ä¸ªscrollView //å®šä¹‰ç¬¬ä¸€ä¸ªé¡¶éƒ¨itemçš„æŒ‰é’®æ ·å¼ if (i == 0) { itemButton.titleLabel.font = [UIFont systemFontOfSize:18.0f]; [itemButton setTitleColor:[UIColor colorWithRed:1.0 green:0.3 blue:0.3 alpha:1.0f] forState:UIControlStateNormal]; } } }  5.æ·»åŠ åº•éƒ¨è¯¦æƒ…scrollView //æ·»åŠ ç¬¬äºŒä¸ªscrollview - (void) addSecondScrollViewOnView { //**1.è®¾ç½®åº•éƒ¨è¯¦æƒ…scrollView UIScrollView *secondScrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, KSTATUS_HEIGHT + KFIRST_SCROLLVIEW_HEIGHT, KSCREEN_WIDTH, KSECOND_SCROLLVIEW_HEIGHT)]; secondScrollView.pagingEnabled = YES;//åˆ†é¡µ secondScrollView.bounces = NO;//ç¦æ­¢åå¼¹ secondScrollView.delegate = self; //è®¾ç½®å†…å®¹å¤§å°ï¼Œå®½åº¦ä¸º å±å¹•çš„å®½åº¦ * itemsæ•°ç»„çš„æ•°é‡ secondScrollView.contentSize = CGSizeMake(self.itemsTitlesArray.count * KSCREEN_WIDTH, KSECOND_SCROLLVIEW_HEIGHT); self.secondScrollView = secondScrollView; [self.view addSubview:secondScrollView]; //**2.æ·»åŠ Views for (int i = 0; i \u003c self.itemsTitlesArray.count; i ++) { UIView *bottomView = [[UIView alloc] initWithFrame:CGRectMake(i * KSCREEN_WIDTH, 0, KSCREEN_WIDTH, KSECOND_SCROLLVIEW_HEIGHT)]; bottomView.backgroundColor = [self.colorArray objectAtIndex:(i % 6)];//é¢œè‰²æ•°ç»„å–ä½™ //ä¸ºäº†æ–¹ä¾¿è§‚å¯Ÿï¼Œæ”¾ç½®ä¸€ä¸ªlabelï¼Œå¦‚æœéœ€è¦å…¶å®ƒæ§ä»¶è‡ªè¡Œæ›¿æ¢ï¼ˆå¦‚è‹¥æ–°é—»ï¼Œç”¨tableViewï¼‰ UILabel *flagLabel = [[UILabel alloc] initWithFrame:bottomView.bounds]; flagLabel.font = [UIFont systemFontOfSize:50.0f]; flagLabel.textColor = [UIColor whiteColor]; flagLabel.textAlignment = NSTextAlignmentCenter; flagLabel.text = [NSString stringWithFormat:@\"%@\", [self.itemsTitlesArray objectAtIndex:i]]; [bottomView addSubview:flagLabel]; [secondScrollView addSubview:bottomView]; } }  6.åœ¨-(void)viewDidLoadæ–¹æ³•ä¸­è°ƒç”¨ä¸¤ä¸ªæ·»åŠ scrollViewçš„æ–¹æ³• - (void)viewDidLoad { [super viewDidLoad]; [self addFirstScrollViewOnView];//æ·»åŠ é¡¶éƒ¨itemsçš„scrollView [self addSecondScrollViewOnView];//æ·»åŠ åº•éƒ¨è¯¦æƒ…çš„scrollView }  7.å£°æ˜ æœ¬æ–‡æ¶‰åŠçš„ä¸€åˆ‡ä»£ç ï¼Œéƒ½å°†ä¸Šä¼ åˆ°æˆ‘çš„githubä»“åº“:https://github.com/Gitzhaoyang/iOSWithOC/tree/master/twoScrollViewLinkageï¼Œè¯·è‡ªè¡ŒæŸ¥çœ‹ã€‚\n","description":"","tags":["iOS"],"title":"çº¯ä»£ç é«˜ä»¿ç½‘æ˜“æ–°é—»å®¢æˆ·ç«¯ä¸¤ä¸ªscrollViewè”åŠ¨ï¼ˆä¸€ï¼‰ï¼šè®¾ç½®åŸºæœ¬çš„ç•Œé¢å¸ƒå±€","uri":"/posts/twoscrollviewlinkage-1-baseview/"},{"categories":null,"content":"å®ç°åŸç†ååˆ†ç®€å•ï¼Œä½¿ç”¨UIImageViewçš„é€æ˜åº¦å³å¯ã€‚ç„¶ååœ¨åŠ¨ç”»ä¸­å®Œæˆã€‚ alpha = 1 ä¸ºå…¨é€æ˜ã€‚ è¿è¡Œå›¾ä¾‹ï¼š\nå®ç°ä»£ç :\n//å›¾ç‰‡æ¸éšæ¸ç° self.backgroundView.alpha = 0.7; [UIView animateWithDuration:0.5 animations:^{ self.backgroundView.alpha = 1; self.backgroundView.image = [UIImage imageNamed:@\"weather_bg_02.jpg\"]; }];   åæ¥æˆ‘çŸ¥é“äº†å¯ä»¥ç”¨æ›´å¥½çš„æ–¹æ³•å®ç°ï¼Œ åç»­ä¼šæœ‰æ›´æ–°\n","description":"","tags":["iOS"],"title":"UIImageViewæ›´æ¢å›¾ç‰‡æ—¶æ¸éšæ¸ç°","uri":"/posts/uiimageview-image-fade-out/"},{"categories":null,"content":"ä¸€å¼€å§‹è‡ªå·±å°†tabBarå…¨éƒ¨è‡ªå®šä¹‰ï¼Œå°†ç³»ç»Ÿtabbarè®¾ç½®ä¸ºself.tabBar.hidden=YESï¼Œéšè—ç³»ç»Ÿçš„tabbarã€‚ä½†æ˜¯è‡ªå®šä¹‰çš„tabbaråœ¨pushå‡ºæ–°é¡µé¢çš„æ—¶å€™ï¼Œtabbarå¹¶ä¸ä¼šè‡ªåŠ¨éšè—ã€‚ä¹‹ååœ¨æ–°é¡µé¢viewWillAppearä¸­è®¾ç½®è‡ªåŠ¨éšè—ï¼Œä½†æ˜¯popå›ä¹‹å‰é¡µé¢ï¼ˆåœ¨viewDidAppearä¸­è®¾ç½®tabbaræ˜¾ç¤ºï¼‰åˆå‡ºç°ä¸èƒ½åŠæ—¶å‡ºç°ï¼Œä¼šæœ‰æ—¶é—´å»¶è¿Ÿï¼Œçœ‹ä¸Šå»ç‰¹åˆ«ä¸èˆ’æœã€‚è€Œä¸”ï¼Œè¾¹ç¼˜è¿”å›æ—§é¡µé¢çš„æ—¶å€™ä¸èƒ½åŠæ—¶æ˜¾ç¤ºtabbarä¹Ÿï¼Œæ‰€ä»¥æ‰“ç®—ç”¨ç³»ç»Ÿé»˜è®¤çš„tabbarã€‚è®°å½•ä¸‹ç³»ç»ŸtabBaræ ·å¼çš„ç®€å•å®šä¹‰ã€‚\nç®€å•è‡ªå®šä¹‰ç³»ç»Ÿçš„tabBar - (void) initTabBarView { NSArray *titles = @[@\"å·¥å¤§å¨æµ·\", @\"æ ¡å›­åº”ç”¨\", @\"æ ¡å›­ç”Ÿæ´»\", @\"æ›´å¤šåŠŸèƒ½\"]; //tabBarItemé€‰ä¸­å›¾ç‰‡ç®€å•é¢œè‰²å˜åŒ–æ—¶ï¼Œè‡ªå®šä¹‰é€‰ä¸­åçš„é¢œè‰² [self.tabBar setTintColor:[UIColor redColor]]; int i = 0; for (UITabBarItem *item in self.tabBar.items) { //è‡ªå®šä¹‰tabBarItemçš„å›¾ç‰‡ item.image = [[UIImage imageNamed: [NSString stringWithFormat:@\"home_tab_icon_%d\", i + 1]] imageWithRenderingMode:UIImageRenderingModeAutomatic]; //å®šä¹‰é€‰ä¸­å›¾ç‰‡,ä¸Šé¢imageWithRederingModeè®¾ç½®ä¸ºAutomaticï¼Œåªæ˜¯ç®€å•é¢œè‰²å˜æ¢ï¼Œä¸éœ€è¦è®¾ç½®,ä¸å†èµ˜è¿° //item.selectedImage = .... //è®¾ç½®tabBarItemçš„æ ‡é¢˜ item.title = titles[i]; i ++; } }  è¿™æ˜¯è¿è¡Œåçš„æ ·å¼ï¼š\npushæ–°é¡µé¢tabBarè‡ªåŠ¨éšè—ï¼Œpopå›æ˜¾ç¤ºtabBar ä¸Šé¢è¯´å¦‚æœç”¨å®Œå…¨è‡ªå®šä¹‰çš„tabbarï¼Œæˆ‘åªèƒ½è®¾ç½®åˆ°ç­‰popå›çš„é¡µé¢å…¨éƒ¨å‡ºç°ä¹‹åå†è®©tabBaræ˜¾ç¤ºå‡ºæ¥ï¼Œè¿™æ ·ååˆ†ä¸å‹å¥½ï¼Œæˆ‘ä»¬å¦‚æœå®ç°æ‰‹æœºå¾®ä¿¡ç±»ä¼¼è¿™æ ·çš„æ•ˆæœæˆ‘ä»¬åº”è¯¥å¦‚ä½•è®¾ç½®å‘¢ï¼Ÿæ³¨æ„çº¢æ¡†éƒ¨åˆ†\næˆ‘ä»¬åº”è¯¥åœ¨è¦pushå‡ºæ–°é¡µé¢çš„é‚£ä¸ªé¡µé¢è®¾ç½®viewDidAppearå’ŒviewWillDisappearæ–¹æ³•ï¼š\n- (void) viewDidAppear:(BOOL)animated { [super viewWillAppear:animated]; [self setHidesBottomBarWhenPushed:YES]; } - (void) viewWillDisappear:(BOOL)animated { [self setHidesBottomBarWhenPushed:NO]; [super viewDidDisappear:animated]; }  è¾¹ç¼˜æ‹–åŠ¨è¿”å›çš„æ—¶å€™ï¼Œå³å¯å®ç°å¦‚ä¸‹æ•ˆæœï¼š\nå®Œæˆ~ ğŸ˜ğŸ˜ğŸ˜\n","description":"","tags":["iOS"],"title":"UITabBarControlleråµŒå¥—UINavigationControlleråï¼Œå…³äºtabBarçš„é—®é¢˜ä»¥åŠè§£å†³æ–¹æ³•","uri":"/posts/how-to-use-sethidebottombarwhenpushed/"},{"categories":null,"content":"UIImageViewä¸‰ç§contentModeåŒºåˆ«ï¼šUIViewContentModeScaleToFillã€UIViewContentModeScaleAspectFitã€UIViewContentModeScaleAspectFill\nåŸå›¾ç‰‡ï¼š UIViewContentModeScaleToFillï¼š UIViewContentModeScaleAspectFit UIViewContentModeScaleAspectFill ","description":"","tags":["iOS"],"title":"UIImageView ä¸­å›¾ç‰‡çš„å‡ ç§å¸¸ç”¨é€‚åº”æ–¹å¼","uri":"/posts/some-uiimageview-fit-way/"},{"categories":null,"content":"ä»Šå¤©åœ¨å­¦ä¹ iOSå¼€å‘çš„æ—¶å€™ï¼Œå¶ç„¶å‘ç°tableViewæœ‰ä¸¤ç§é‡ç”¨cellçš„æ–¹æ³•ã€‚å…ˆæ•´ç†ä¸€ä¸‹æ–¹ä¾¿æ—¥åæŸ¥é˜…ã€‚\nç¬¬ä¸€ç§ï¼š[tableView dequeueReusableCellWithIdentifier:identifier] ï¼ˆSDK 6.0ä¹‹å‰ï¼‰\nç¬¬äºŒç§ï¼š[tableView dequeueReusableCellWithIdentifier:identifier forIndexPath:indexPath]] ï¼ˆSDK 6.0ä¹‹åï¼‰\nåŒºåˆ«ï¼š ç¬¬ä¸€ç§ï¼šå¿…é¡»åˆ¤æ–­cellæ˜¯å¦å®šä¹‰ï¼Œæœªå®šä¹‰åˆ™æ‰‹åŠ¨åˆ›å»ºï¼Œä»£ç å¦‚ä¸‹ï¼š\nconst NSString *identifier = @\"cell\"; UITableView *cell = [tableView dequeueReusableCellWithIndetifier:identifier]; if(!cell) { cell = [[UITableView alloc] initWithStyle:UITableViewCellStyleDefault]; } /* è®¾ç½®cell cell.textLable.text = @\"ç¬¬...è¡Œ\"; */ return cell;  ç¬¬äºŒç§æ˜¯SDK 6.0å¼€å§‹æ–°æ·»åŠ çš„æ–¹æ³•ã€‚ç”¨äºä½ å·²ç»ç”¨Nibå®šä¹‰äº†ä¸€ä¸ªCellï¼Œç„¶åå°±å¯ä»¥çœä¸‹ä¸Šé¢é‚£äº›ä»£ç ï¼Œåªç”¨ä¸€è¡Œå°±å¯ä»¥è§£å†³ï¼š\n UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@\"cell\" forIndexPath:indexPath]; /* è®¾ç½®cell cell.textLable.text = @\"ç¬¬...è¡Œ\"; */  æ‰€ä»¥å¦‚æœæœ‰è¿™ä¸ªé”™è¯¯ï¼š\nreason: 'unable to dequeue a cell with identifier friendCell - must register a nib or a class for the identifier or connect a prototype cell in a storyboard'  åº”è¯¥æƒ³ä¸€ä¸‹è‡ªå·±æ˜¯ä¸æ˜¯ä¸ºcellåˆ›å»ºçš„Nibã€‚\n","description":"","tags":["iOS"],"title":"tableView ä¸¤ç§é‡ç”¨cellçš„æ–¹æ³•åŒºåˆ«","uri":"/posts/two-methods-to-reuse-cell/"},{"categories":null,"content":"Markdown ä»‹ç»  Markdownæ˜¯ä¸€ç§å¯ä»¥ä½¿ç”¨æ™®é€šæ–‡æœ¬ç¼–è¾‘å™¨ç¼–å†™çš„æ ‡è®°è¯­è¨€ï¼Œé€šè¿‡ç®€å•çš„æ ‡è®°è¯­æ³•ï¼Œå®ƒå¯ä»¥ä½¿æ™®é€šæ–‡æœ¬å†…å®¹å…·æœ‰ä¸€å®šçš„æ ¼å¼ã€‚Markdownçš„ä½¿ç”¨ååˆ†ç®€å•ï¼Œå¸¸ç”¨çš„æ ‡è®°å…¶å®å°±åå‡ ä¸ªï¼Œæ‰€ä»¥ç›¸å¯¹äºHTMLè¿™ç§å¤æ‚çš„æ ‡è®°è¯­è¨€æ¥è¯´ï¼ŒMarkdownæ˜¯ååˆ†è½»é‡çš„æ ‡è®°è¯­è¨€ã€‚\n Markdownçš„åŸºæœ¬ä½¿ç”¨   åŠ ç²—å’Œæ–œä½“ *æ–œä½“* _æ–œä½“_\nåªè¦ç”¨ä¸€ä¸ª_æˆ–è€…ä¸€ä¸ª#åŒ…è£¹æ–‡å­—ï¼Œå³å¯å®ç°æ–‡å­—æ–œä½“ã€‚\n**åŠ ç²—æ–‡å­—** __åŠ ç²—æ–‡å­—__\nåªè¦ç”¨ä¸¤ä¸ª_æˆ–è€…ä¸¤ä¸ª#åŒ…è£¹æ–‡å­—ï¼Œå³å¯å®ç°æ–‡å­—ç²—ä½“ã€‚\n  é“¾æ¥ä¸å›¾ç‰‡ æ’å…¥é“¾æ¥å’Œå›¾ç‰‡çš„æ ¼å¼å¾ˆç›¸ä¼¼ï¼Œåªæœ‰ä¸€ä¸ª!çš„åŒºåˆ«\né“¾æ¥æ ¼å¼ä¸ºï¼š[é“¾æ¥æ–‡å­—](é“¾æ¥åœ°å€)\nå›¾ç‰‡æ ¼å¼ä¸ºï¼š![å›¾ç‰‡åå­—](å›¾ç‰‡åœ°å€)\nåœ¨Markdownä¸­æ’å…¥å›¾ç‰‡åœ°å€è¦ç”¨åˆ°å›¾åºŠï¼Œæˆ‘ç”¨åˆ°çš„æ˜¯å›´è„–å›¾åºŠä¿®å¤è®¡åˆ’å’Œäº‘å›¾å›¾åºŠï¼Œä¸Šä¼ å›¾ç‰‡å°±å¯ä»¥ç”ŸæˆURL\n  æ ‡é¢˜ æ ‡é¢˜æ˜¯æ–‡ç« ä¸­æœ€å¸¸ç”¨çš„æ–‡æœ¬æ ¼å¼ï¼Œåœ¨Markdownä¸­åªè¦åœ¨ä¸€è¡Œæ–‡å­—å‰æ·»åŠ #ï¼Œå³å¯æ ‡è®°ä¸ºæ ‡é¢˜æ ¼å¼ã€‚\nï¼ƒ ä¸€çº§æ ‡é¢˜\n## äºŒçº§æ ‡é¢˜\n### ä¸‰çº§æ ‡é¢˜\nä»¥æ­¤ç±»æ¨ï¼ŒMarkdownä¸€å…±æœ‰å…­çº§æ ‡é¢˜ï¼Œå…­çº§æ ‡é¢˜åªéœ€è¦åŠ ä¸Šå…­ä¸ª######å³å¯ã€‚\n  åˆ—è¡¨ åˆ—è¡¨æœ‰æœ‰åºåˆ—è¡¨å’Œæ— åºåˆ—è¡¨\næœ‰åºåˆ—è¡¨æ ¼å¼ï¼š\n 1. çº¢è‰² 2. è“è‰² 3. é»‘è‰²  æ— åºåˆ—è¡¨æ ¼å¼ï¼š\n * çº¢è‰² * è“è‰² * é»‘è‰²    å¼•ç”¨ å¼•ç”¨åªéœ€è¦åœ¨æ–‡å­—å‰é¢åŠ ä¸Š \u003e å°±å¯ä»¥äº†ã€‚ä½ å¯ä»¥è”åˆå…¶å®ƒçš„æ ‡è®°ç¬¦ä¸€èµ·ä½¿ç”¨ã€‚\n \u003e * å¼•ç”¨ä¸­åˆ—è¡¨ \u003e * åˆ—è¡¨ \u003e ### å¼•ç”¨ä¸­ä¸‰çº§æ ‡é¢˜ \u003e\u003e äºŒçº§å¼•ç”¨    è¡Œå†…ä»£ç å’Œä»£ç å— è¡Œå†…ä»£ç æ ¼å¼ï¼š ï½€è¿™é‡Œå†™ä»£ç ï½€\nä»£ç å—æ ¼å¼ï¼š åªè¦æ¯”ä¸Šä¸€è¡Œè¿›è¡Œå³ç¼©è¿›å³å¯ã€‚æŒ‰é”®ç›˜tabé”®å¯ä»¥å®ç°ç¼©è¿›\n  è¡¨æ ¼ è¡¨æ ¼åº”è¯¥æ˜¯Markdownä¸­æœ€éš¾çš„æ ‡è®°äº†\næœ€ç®€å•çš„è¡¨æ ¼ï¼š\n | First Header | Second Header | Third Header | | ------------ | ------------- | ------------ | | Content Cell | Content Cell | Content Cell | | Content Cell | Content Cell | Content Cell |  ä½ ä¹Ÿå¯ä»¥è®¾ç½®æ–‡å­—çš„å¯¹é½æ–¹å¼\n First Header | Second Header | Third Header :----------- | :-----------: | -----------: Left | Center | Right Left | Center | Right    æ°´å¹³åˆ†éš”çº¿ ä½¿ç”¨ --- æˆ–è€… ***å³å¯ã€‚\n  åˆ é™¤çº¿ åˆ é™¤çº¿æ ¼å¼ï¼š\n ~~åˆ é™¤çº¿~~    æ¢è¡Œ åªè¦åœ¨æ–‡å­—æ¯è¡Œæ–‡å­—åé¢åŠ ä¸Šä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„ç©ºæ ¼å³å¯å®ç°æ¢è¡Œ\n  æ³¨æ„  æ ‡è®°ç¬¦å·åé¢ä¸€å®šåŠ ä¸Šç©ºæ ¼ æ ‡è®°è¯­è¨€å¿…é¡»ä½¿ç”¨è‹±æ–‡ç¬¦å· å¦‚æœä½¿ç”¨æ­£ç¡®è€Œä¸èµ·ä½œç”¨ï¼Œæ¢ä¸€è¡Œå†è¯•ä¸€æ¬¡  Markdownç¼–è¾‘å·¥å…· æœ¬äººä½¿ç”¨çš„å·¥å…·æ˜¯Mac OSä¸‹çš„Mou,æ”¯æŒå®æ—¶é¢„è§ˆï¼Œæ–‡ç« ä¸­çš„æˆªå›¾å³ä¸ºMouçš„æˆªå›¾ã€‚ä½ ä¹Ÿå¯ä»¥åœ¨Githubä¸Šæœç´¢å…¶å®ƒä¸»é¢˜æ ·å¼è¿›è¡Œå®‰è£…ã€‚\nMacä¸‹Markdownç¼–è¾‘å™¨ï¼šMou Â¥0ã€Byword Â¥40ã€iA Writer Â¥128ã€Ulysses Â¥283 etc.\nWindowsä¸‹Markdownç¼–è¾‘å™¨ï¼šMarkdownPadã€MarkPad etc.\nå®˜æ–¹æ–‡æ¡£ è‹±æ–‡Markdownæ–‡æ¡£\nä¸­æ–‡Markdownæ–‡æ¡£\n","description":"","tags":["Markdown","Hexo"],"title":"MarkDownåŸºæœ¬ä½¿ç”¨æ–¹æ³•","uri":"/posts/markdown-base-use/"},{"categories":null,"content":"ç½—åˆ—äº†UIscrollViewçš„ä¸€äº›åŸºæœ¬è®¾ç½®å’Œå¸¸ç”¨æ–¹æ³•\n  (void)viewDidLoad { [super viewDidLoad]; // [self initScrollView]; // [self initPageCtrl]; // [self addTimer]; self.scrollView = [[UIScrollView alloc]initWithFrame:CGRectMake(10, 20, 320, 460)]; self.scrollView.backgroundColor = [UIColor blueColor]; //æ˜¯å¦æ”¯æŒæ»‘åŠ¨åˆ°æœ€é¡¶ç«¯ self.scrollView.scrollsToTop = NO; //è®¾ç½®UIScrollViewçš„ä»£ç† self.scrollView.delegate = self; //è®¾ç½®å†…å®¹å¤§å° self.scrollView.contentSize = CGSizeMake(320 * 10, 460); //æ˜¯å¦åå¼¹ self.scrollView.bounces = NO; //æ˜¯å¦æ»šåŠ¨ self.scrollView.scrollEnabled = YES; //æ˜¯å¦åˆ†é¡µ self.scrollView.pagingEnabled = NO; //è®¾ç½®indecatoré£æ ¼ self.scrollView.indicatorStyle = UIScrollViewIndicatorStyleWhite; //è®¾ç½®å†…å®¹è¾¹ç¼˜å’ŒIndicatorè¾¹ç¼˜ self.scrollView.contentInset = UIEdgeInsetsMake(0, 50, 50, 0); self.scrollView.scrollIndicatorInsets = UIEdgeInsetsMake(0, 50, 0, 0); //æ˜¯å¦åŒæ—¶è¿åŠ¨ self.scrollView.directionalLockEnabled = NO;\n [self.view addSubview:self.scrollView];  }\n//æ˜¯å¦æ”¯æŒæ»‘åŠ¨åˆ°é¡¶éƒ¨\n (BOOL) scrollViewShouldScrollToTop:(UIScrollView *)scrollView { return YES; }  //æ»‘åŠ¨åˆ°é¡¶éƒ¨æ—¶è°ƒç”¨è¯¥æ–¹æ³•\n (void) scrollViewDidScrollToTop:(UIScrollView *)scrollView { NSLog(@â€œæ»‘åŠ¨åˆ°é¡¶éƒ¨äº†â€); }  //å·²ç»æ»‘åŠ¨(æ­£åœ¨æ»‘åŠ¨ä¹Ÿä¼šè°ƒç”¨è¯¥æ–¹æ³•)\n (void) scrollViewDidScroll:(UIScrollView *)scrollView { NSLog(@â€œå·²ç»å¼€å§‹æ»‘åŠ¨â€); }  //å¼€å§‹æ‹–åŠ¨\n (void) scrollViewWillBeginDragging:(UIScrollView *)scrollView { NSLog(@â€œå¼€å§‹æ‹–åŠ¨â€); }  //ç»“æŸæ‹–åŠ¨\n (void) scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate { NSLog(@â€œç»“æŸæ‹–åŠ¨â€); }  //å¼€å§‹å‡é€Ÿ\n (void) scrollViewWillBeginDecelerating:(UIScrollView *)scrollView { NSLog(@â€œå¼€å§‹å‡é€Ÿâ€); }  //å‡é€Ÿåœæ­¢\n (void) scrollViewDidEndDecelerating:(UIScrollView *)scrollView { NSLog(@â€œå‡é€Ÿåœæ­¢â€); }  //ç»“æŸæ»šåŠ¨åŠ¨ç”»\n  (void) scrollViewDidEndScrollingAnimation:(UIScrollView *)scrollView { NSLog(@â€œç»“æŸæ»šåŠ¨åŠ¨ç”»â€); }\n  (void)didReceiveMemoryWarning { [super didReceiveMemoryWarning]; // Dispose of any resources that can be recreated. }\n   ","description":"","tags":["iOS"],"title":"UIScrollViewçš„åŸºæœ¬å±æ€§è®¾ç½®å’Œå¸¸ç”¨ä»£ç†æ–¹æ³•","uri":"/posts/how-to-use-uiscrollviewdelegate/"},{"categories":null,"content":"-(BOOL)respondsToSelector: selector //ç”¨æ¥åˆ¤æ–­æ˜¯å¦æœ‰ä»¥æŸä¸ªåå­—å‘½åçš„æ–¹æ³•ï¼ˆè¢«å°è£…åœ¨ä¸€ä¸ªselectorçš„å¯¹è±¡é‡Œä¼ é€’ï¼‰\n @protocol appViewDelegate \u003cNSObject\u003e @optional - (void) theButtonOnClicked:(UIButton *)button; @end   if([self.delegate respondsToSelector:@selector(theButtonOnClicked:)]) { self.delegate theButtonOnClicked:sender; }   #pragma mark - appViewDelegate - (void) theButtonOnClicked:(UIButton *)button { button.enabled = NO; []button setTitle:@\"å·²ä¸‹è½½\" ForState:UIControlStateDisabled]; }  ","description":"","tags":["IOS"],"title":"å‡½æ•°respondsToSelectorçš„ä½¿ç”¨","uri":"/posts/how-to-use-founction-respondstoselector/"},{"categories":null,"content":"è¿™ä¸€ç¯‡æ˜¯æœ¬ç³»åˆ—çš„æœ€åä¸€ç¯‡ï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬æ­å»ºçš„Hexoåšå®¢å·²ç»èƒ½æ»¡è¶³æˆ‘ä»¬æ—¥å¸¸çš„éœ€æ±‚ã€‚å¯æ˜¯æœ‰æ²¡æœ‰æƒ³è¿‡æˆ‘ä»¬å…¶å®åªèƒ½åœ¨è¿™ä¸€å°ç”µè„‘ä¸Šæ›´æ–°æˆ‘ä»¬çš„åšå®¢ï¼Ÿå¦‚æœæœ‰ä¸€å¤©æˆ‘æ¢äº†ä¸€å°ç”µè„‘ï¼Œæˆ–è€…å…¬å¸å’Œå®¶é‡Œä¸åŒçš„ç”µè„‘éƒ½æƒ³æ›´æ–°åšå®¢ï¼Œåº”è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ\nè¿™é‡Œåªç»™ç±»ä¼¼æˆ‘è¿™æ ·çš„gitæ–°äººåšå‚è€ƒï¼Œgitçš„å¾ˆå¤šç”¨æ³•æˆ‘ä¹Ÿä¸å¤ªç†Ÿç»ƒã€‚å¦‚æœæœ‰é”™è¯¯è¿˜è¯·å„ä½æŒ‡æ­£ã€‚\nè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“æˆ‘ä»¬æ‰§è¡Œ$ hexo deployï¼Œéƒ¨ç½²åˆ°Githubä¸Šé¢çš„æ˜¯hexoç»™æˆ‘ä»¬ç”Ÿæˆçš„é™æ€é¡µé¢ï¼Œå¹¶ä¸æ˜¯æ•´ä¸ªhexoåšå®¢å·¥ç¨‹æ–‡ä»¶ï¼Œæ‰€ä»¥å¹¶ä¸èƒ½ç®€å•çš„åœ¨ä¸åŒPCçš„æ›´æ–°åšå®¢ã€‚\nå…¶å®æœ‰ä¸¤ç§åŠæ³•ï¼Œç¬¬ä¸€å°±æ˜¯**_æŠŠæ•´ä¸ªç›®å½•å¤‡ä»½åˆ°äº‘ç›˜_**ï¼Œç„¶åå¼€å¯äº‘ç›˜åŒæ­¥è¯¥æ–‡ä»¶å¤¹ï¼Œè™½ç„¶æ“ä½œç®€å•ï¼Œä½†æ˜¯åŒæ­¥å¾ˆéº»çƒ¦ï¼Œéœ€è¦æ‰‹åŠ¨å°†æ–‡ä»¶å¤¹è¿›è¡Œè¦†ç›–ã€‚ç¬¬äºŒç§å°±æ˜¯**_ä½¿ç”¨Gitçš„ç¬¬ä¸‰æ–¹æœåŠ¡_**ï¼Œåªè¦é…ç½®å®Œæˆï¼Œä¸ç®¡åˆ°å“ªé‡Œï¼Œç”¨å“ªå°ç”µè„‘éƒ½èƒ½ç®€å•å®ç°æ›´æ–°åšå®¢ï¼ˆå½“ç„¶éœ€è¦Node.jså’ŒGitè¿è¡Œç¯å¢ƒï¼Œåœ¨æˆ‘ä»¬æœ¬ç³»åˆ—çš„ç¬¬ä¸€ç¯‡æœ‰è®²è§£ï¼‰ã€‚\nåœ¨æœ¬æ–‡ä¸­è¯¦ç»†è®²è§£å¦‚ä½•ä½¿ç”¨ç¬¬ä¸‰æ–¹gitæœåŠ¡è¿›è¡Œåšå®¢çš„å¤‡ä»½ã€‚å¯ä»¥Githubæ”¾åœ¨å…±æœ‰ä»“åº“ï¼Œå¦‚æœä½ æ‹…å¿ƒæ³„å¯†ï¼Œå¯ä»¥ç”¨Githubçš„ç§æœ‰ä»“åº“ï¼ˆæ”¶è´¹ï¼‰ï¼Œå›½å†…é™¤äº†Githubè¿˜æœ‰è®¸å¤šçŸ¥åçš„gitæœåŠ¡å•†ï¼Œå¦‚ï¼šgitcafeï¼Œbitbucketï¼Œoschinaï¼Œcodingç­‰ï¼Œæ®æˆ‘äº†è§£ï¼Œoschinaçš„ç§æœ‰ä»“åº“æ˜¯å…è´¹çš„ï¼Œè€Œä¸”å¯ä»¥å’ŒGithubè¿›è¡ŒåŒæ­¥ã€‚å› ä¸ºæˆ‘ä»¬çš„åšå®¢æ”¾åœ¨äº†Githubï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸å¦¨å°±æŠŠæˆ‘ä»¬åšå®¢ç¨‹åºä¹ŸåŒæ­¥åˆ°Githubçš„ä»“åº“ä¸­ã€‚\nä¸‹é¢æˆ‘ä»¬å°±æ¥è®²è§£å¦‚ä½•å®ç°ä¸åŒç”µè„‘åŒæ—¶æ›´æ–°åšå®¢ã€‚\nå°†æˆ‘ä»¬çš„åšå®¢ç›®å½•å¤‡ä»½åˆ°Githubï¼Œå®ç°å¤šPCç»´æŠ¤ åœ¨Githubç½‘ç«™åˆ›å»ºä¸€ä¸ªæ–°çš„repository æˆ‘ä»¬åœ¨è¿™é‡Œç»™æ–°åˆ›å»ºçš„repositoryå‘½åä¸ºblogï¼›\nä¸ä¼šåˆ›å»ºæ–¹æ³•çš„æœ‹å‹å¯ä»¥å‚è€ƒåœ¨Githubä¸Šé¢æ­å»ºHexoåšå®¢ï¼ˆä¸€ï¼‰ä¸­çš„åˆ›å»ºæ–¹æ³•ã€‚\nåœ¨Aç”µè„‘ä¸­ä»æœ¬åœ°ä¸Šä¼ Hexoåˆ°Githubä»“åº“ Aç”µè„‘æŒ‡çš„æ˜¯å»ºç«‹Hexoåšå®¢çš„ç”µè„‘ã€‚\n  åˆå§‹åŒ–ä»“åº“ åœ¨Hexoåšå®¢çš„æ ¹ç›®å½•è¿è¡ŒGit Bashå¹¶è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š\n $ git init $ git remote add origin \u003cserver address\u003e  è¿™é‡Œ\u003cserver\u003eæŒ‡çš„æ˜¯åœ¨çº¿ä»“åº“çš„åœ°å€ï¼Œæ¯”å¦‚åœ¨è¿™é‡Œæˆ‘çš„å°±åº”è¯¥æ˜¯https://github.com/Gitzhaoyang/blog.gitï¼Œå¦‚æœä½ ç”¨å…¶å®ƒgitä»“åº“æœåŠ¡ï¼Œå¡«å†™å¯¹åº”ä»“åº“åœ°å€å³å¯ã€‚ originæ˜¯æœ¬åœ°åˆ†æ”¯,remote addä¼šå°†æœ¬åœ°ä»“åº“æ˜ å°„åˆ°Githubä»“åº“\n  æŠŠæœ¬åœ°æ–‡ä»¶åŒæ­¥åˆ°Githubä¸Šé¢ åˆ†åˆ«è¾“å…¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š\n $ git add . #æ·»åŠ æ‰€æœ‰ç›®å½•ï¼Œæ³¨æ„addåé¢æœ‰ä¸ªç‚¹`.` $ git commit -m \"add to Github\" #æ·»åŠ æäº¤è¯´æ˜ï¼Œæ¯æ¬¡æäº¤éƒ½éœ€è¦ $ git push -u origin master #æŠŠæ›´æ–°æ¨é€åˆ°äº‘ç«¯  è¿™æ—¶å¯ä»¥ç™»å½•Githubè´¦æˆ·æŸ¥çœ‹åˆšåˆ›å»ºçš„blogä»“åº“ä¸­æ˜¯å¦ä¸Šä¼ æˆåŠŸ\nwindowså¹³å°å¯èƒ½pushè¿‡ç¨‹ä¸­ä¼šæç¤ºè¾“å…¥Githubçš„ç”¨æˆ·åå’ŒGithubçš„å¯†ç ï¼Œè¾“å…¥æ­£ç¡®ä¾¿æ˜¯ã€‚\n  æ³¨æ„: ä¸ºäº†åœ¨å¦ä¸€å°ç”µè„‘ä¸Šé…ç½®æ›´åŠ æ–¹ä¾¿ï¼Œä¸¥é‡å»ºè®®æŠŠHexoåšå®¢ç›®å½•ä¸‹_config.ymlæ–‡ä»¶å¤åˆ¶ç²˜è´´ä¸€ä»½ï¼Œå¹¶é‡å‘½åä¸ºhexo_config.ymlï¼›æŠŠthemesç›®å½•ä¸‹ä½ ç”¨åˆ°ä¸»é¢˜ç›®å½•ä¸‹çš„_config.ymlæ–‡ä»¶ä¹Ÿå¤åˆ¶ä¸€ä»½ï¼Œå¹¶ç²˜è´´åˆ°åšå®¢æ ¹ç›®å½•ï¼Œæ³¨æ„ï¼Œæ˜¯â€™åšå®¢æ ¹ç›®å½•'ï¼Œå¹¶å‘½åä¸ºtheme_config.ymlã€‚åŸå› æ˜¯æˆ‘ä»¬ä¸Šä¼ çš„æ—¶å€™ï¼Œæˆ‘ä»¬è‡ªå·±å®‰è£…çš„themeså¦‚ï¼š[NexT](http://theme-next.iissnan.com)ï¼Œå®ƒçš„'next'ç›®å½•å¹¶ä¸èƒ½ä¸Šä¼ ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æŠŠè¿™ä¸¤ä¸ªé…ç½®æ–‡ä»¶éƒ½ä¿å­˜ä¸‹æ¥åœ¨è¿›è¡ŒåŒæ­¥å·¥ä½œã€‚\nåœ¨Bç”µè„‘ä¸­ä»Githubä»“åº“å–å›Hexoåˆ°æœ¬åœ° Bç”µè„‘æŒ‡çš„æ˜¯å¦ä¸€å°ç”µè„‘ï¼Œå¦‚æœæ²¡æœ‰å¦ä¸€å°ç”µè„‘ä¹Ÿå¯ä»¥æ‰¾åœ°æ–¹æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹å°è¯•ã€‚\n  å®‰è£…Gitå’ŒNode.js å€¼å¾—æ³¨æ„çš„æ˜¯æ–°ç”µè„‘ä¹Ÿéœ€è¦å®‰è£…Gitå’ŒNode.jsç¯å¢ƒï¼Œå‚è€ƒæœ¬ç³»åˆ—çš„ç¬¬ä¸€ç¯‡ä¸­å®‰è£…æ–¹æ³•ã€‚\n  æŠŠæ–‡ä»¶å–å›æœ¬åœ° å®‰è£…ç¯å¢ƒå®Œæˆåï¼Œåœ¨æ–°æ–‡ä»¶å¤¹ä¸‹è¿è¡ŒGit Bashå¹¶åˆ†åˆ«æ‰§è¡Œä»¥ä¸‹å‡ æ¡å‘½ä»¤ï¼š\n$ git init $ git remote add origin \u003cserver\u003e $ git fetch --all $ git reset --hard origin/master  è¿™é‡Œ\u003cserver\u003eä»ç„¶æ˜¯ä½ çš„Giuhubåœ°å€ã€‚fetchæ˜¯å°†ä»“åº“ä¸­çš„å†…å®¹å–å‡ºæ¥ã€‚resetåˆ™æ˜¯ä¸åšä»»ä½•åˆå¹¶ï¼ˆmergeï¼‰å¤„ç†ï¼Œç›´æ¥æŠŠå–å‡ºçš„å†…å®¹ä¿å­˜ã€‚\nè¿è¡Œå®Œresetåä½ ä¼šå‘ç°æ–‡ä»¶å¤¹ä¸­å°±ä¼šå‡ºç°åˆšåˆšä¸Šä¼ çš„å†…å®¹ã€‚ä½†æ˜¯é…ç½®å¹¶æ²¡æœ‰å®Œæˆï¼Œè¯·ç»§ç»­å¾€ä¸‹çœ‹ã€‚\n  é…ç½®æ–°çš„Hexo å¦‚æœæ˜¯æ–°PCï¼Œä¸è¦å¿˜è®°æˆ‘ä»¬æœ¬æœºå¹¶æ²¡æœ‰å®‰è£…Hexoåšå®¢\n  é¦–å…ˆï¼Œåœ¨åˆšæ‰çš„ç›®å½•ä¸‹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ä»¥åœ¨æ–°æœºå™¨ä¸­å®‰è£…Hexo\n $ npm install hexo --save    åˆå§‹åŒ–Hexoå¹¶å®‰è£…ç›¸åº”ä¾èµ–åŒ…\n $ hexo init $ npm intall    è®°å¾—åœ¨ç¬¬ä¸€ç¯‡ä¸­è®²è¿‡ï¼Œæ–°å®‰è£…çš„Hexoæ˜¯æ²¡æœ‰hexo-deployer-gitä¾èµ–åŒ…çš„ï¼Œéœ€è¦æ‰‹åŠ¨å®‰è£…\n $ npm install hexo-deployer-git --save    å¦‚æœä½ åœ¨Aæœºå™¨ä¸Šè®¾ç½®äº†è®¢é˜…ï¼ˆfeedï¼‰ï¼Œé‚£ä¹ˆä½ éœ€è¦é‡æ–°çƒ§åˆ¶feedï¼Œéœ€è¦é‡æ–°å®‰è£…ä¾èµ–åŒ…ï¼Œæ²¡æœ‰è®¾ç½®feedçš„å¯ä»¥ç•¥è¿‡\n $ npm install hexo-generation-feed --save    å®‰è£…ä¸»é¢˜ï¼Œæˆ‘åœ¨ä¸Šæ–‡ä¸­æåˆ°æ–°å®‰è£…çš„ä¸»é¢˜å¹¶ä¸èƒ½è¢«ä¸Šä¼ ï¼Œæ‰€ä»¥ä¹Ÿéœ€è¦é‡æ–°æ‰‹åŠ¨å®‰è£…(ä»¥NexTä¸»é¢˜ä¸ºä¾‹)\n $ git clone https://github.com/iissnan/hexo-theme-next themes/next  è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ï¼šthemes/nextæ˜¯ä¸»é¢˜ä¿å­˜ç›®å½•ã€‚\n  æˆ‘ä»¬ä¹‹å‰å¤‡ä»½çš„ä¸¤ä¸ªé…ç½®æ–‡ä»¶hexo_config.ymlå’Œtheme_config.ymlæœ‰ç”¨äº†,hexo_config.ymlé‡å‘½åä¸º_config.ymlè¦†ç›–æ ¹ç›®å½•ä¸‹çš„åŒåæ–‡ä»¶ï¼Œè€Œtheme_config.ymlä¹Ÿé‡å‘½åä¸º_config.ymlè¦†ç›–ä¸»é¢˜ç›®å½•ä¸‹çš„config.ymlæ–‡ä»¶ã€‚æ³¨æ„æ–‡ä»¶åå‰é¢çš„ä¸‹åˆ’çº¿'_'ã€‚\n  è¾“å…¥å‘½ä»¤$ hexo generateå’Œå‘½ä»¤$ hexo serverï¼Œç„¶ååœ¨æµè§ˆå™¨è¾“å…¥localhost:4000ä¸­è¿›è¡Œé¢„è§ˆã€‚å¦‚æœæ²¡æœ‰é—®é¢˜é‚£ä¹ˆæˆ‘ä»¬åœ¨Bç”µè„‘ä¸Šå°±é…ç½®æˆåŠŸäº†ã€‚\n    åœ¨Bç”µè„‘ä¸Šæ›´æ–°åšå®¢ ç°åœ¨åœ¨Bç”µè„‘ä¸Šä¹Ÿå¯ä»¥åƒåœ¨Aç”µè„‘ä¸Šä¸€æ ·æ›´æ–°åšå®¢äº†ï¼ŒåŒæ ·æ˜¯$ hexo new post \"my_new_post\" ç¼–è¾‘å®Œæ–‡ç« ï¼Œç„¶åæ‰§è¡Œ$ hexo generateå’Œ$ hexo deployå°±å¯ä»¥æˆåŠŸå‘è¡¨äº†ã€‚ è¿™é‡Œ$ hexo deployå‘½ä»¤æ˜¯å°†æˆ‘ä»¬çš„åšå®¢æ–‡ç« å‘è¡¨åˆ°æˆ‘ä»¬çš„Githubä¸Šçš„Hexoåšå®¢ï¼Œå¹¶ä¸æ˜¯å‰æ–‡æ–°å»ºçš„blogä»“åº“ï¼Œæ–°å»ºçš„blogä»“åº“ç”¨æ¥ä¿å­˜æˆ‘ä»¬çš„Hexoç¨‹åºã€‚\næŠŠBç”µè„‘ä¸Šçš„Hexoä»æœ¬åœ°åŒæ­¥åˆ°Githubä»“åº“ å½“å‘è¡¨å®Œæ–‡ç« ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æŠŠHexoç¨‹åºåŒæ­¥åˆ°æˆ‘ä»¬Githubçš„blogä»“åº“ã€‚æ‰§è¡Œä¸‹é¢æŒ‡ä»¤ï¼š\n$ git add .  è¿™æ˜¯å¯ä»¥è¾“å…¥å‘½ä»¤$ git statusæŸ¥çœ‹çŠ¶æ€ï¼Œå›æ˜¾ç¤ºåˆšæ‰ç¼–è¾‘è¿‡çš„æ–‡ä»¶çš„ä¿¡æ¯ã€‚\nä¹‹ååˆ†åˆ«è¾“å…¥ä¸‹é¢æŒ‡ä»¤å®Œæˆä¸Šä¼ ï¼š\n$ git commit -m \"commit from PC_B\" $ git push -u origin master  æˆåŠŸåï¼Œæˆ‘ä»¬å†æ¬¡æŠŠç¨‹åºåŒæ­¥æ›´æ–°åˆ°äº†æˆ‘ä»¬çš„Githubä»“åº“blogã€‚ å¦‚æœå†æƒ³ç”¨Aç”µè„‘æ›´æ–°æˆ‘ä»¬çš„åšå®¢ï¼Œåªéœ€è¦åœ¨æ‰§è¡Œæ·»åŠ æ–‡ç« ä¹‹å‰å…ˆæŠŠç¨‹åºä»blogä»“åº“æ‹‰å–ä¸‹æ¥ä¾¿å¯ã€‚è¾“å…¥å‘½ä»¤ï¼š\n $ git pull https://github.com/Gitzhaoyang/blog.git  å³å¯å®Œæˆã€‚\næ³¨æ„: æˆ‘ä»¬æ¯æ¬¡æ›´æ–°åšå®¢æ—¶ï¼Œä¸ºäº†ä¿æŒæˆ‘ä»¬æ¯æ¬¡ç”¨åˆ°çš„ç¨‹åºéƒ½æ˜¯æœ€æ–°çš„ã€‚\næ¯æ¬¡æ›´æ–°åšå®¢ä¹‹å‰éƒ½éœ€è¦æ‰§è¡Œ$ git pull https://github.com/xxxx/xxx.gitä¿æŒæœ¬åœ°æœ€æ–°ï¼›\næ¯æ¬¡æ›´æ–°åšå®¢ä¹‹åéƒ½éœ€è¦æ‰§è¡Œ$ git add . ,$ git commit -m \"message\",$ git push -u origin masterä»¥ä¿æŒGithubä»“åº“ç¨‹åºæœ€æ–°ã€‚\nå¥½äº†ï¼Œç°åœ¨æˆ‘ä»¬å°±èƒ½å®ç°åœ¨ä¸åŒç”µè„‘éƒ½èƒ½å¯¹æˆ‘ä»¬çš„Hexoåšå®¢è¿›è¡Œç»´æŠ¤äº†ã€‚ğŸ˜ğŸ˜˜\n","description":"","tags":["Hexo","Github"],"title":"åœ¨Githubä¸Šé¢æ­å»ºHexoåšå®¢ï¼ˆå››ï¼‰:ä½¿ç”¨ä¸åŒç”µè„‘ç»´æŠ¤","uri":"/posts/create-hexo-on-github-4/"},{"categories":null,"content":"æ›´æ¢ä¸»é¢˜å¾ˆç®€å•ï¼Œé¦–å…ˆæ„Ÿè°¢@iissnanï¼Œå› ä¸ºåšä¸»ç”¨çš„æ˜¯@iissnançš„NexTä¸»é¢˜ï¼Œæ‰€ä»¥æœ¬æ–‡å°±ä»¥NexTä¸»é¢˜ä¸ºä¾‹è®²è§£å¦‚ä½•æ›´æ¢åšå®¢ä¸»é¢˜ã€‚åœ¨æ–‡æœ«æˆ‘ä¼šç»™å‡ºæ›´å¤šä¼˜ç§€ä¸»é¢˜çš„Githubåœ°å€ã€‚\nä¸ºè‡ªå·±çš„Hexoåšå®¢æ›´æ¢ä¸»é¢˜ æˆ‘è¿™é‡Œè®²åˆ°çš„ä¹Ÿæ˜¯å‚è€ƒäº†NexTä¸»é¢˜ä½œè€…çš„ä½¿ç”¨æ–‡æ¡£ï¼Œæ›´è¯¦ç»†çš„è®¾ç½®è¯»è€…ä»¬å¯ä»¥ç›´æ¥å»å‚è€ƒè¯¥ä½¿ç”¨æ–‡æ¡£ã€‚\n  ä¸‹è½½NexTä¸»é¢˜åŒ… ä»ç„¶åœ¨åšå®¢æ ¹ç›®å½•ä¸‹è¿è¡ŒGit bashå‘½ä»¤è¡Œå·¥å…·ï¼Œè¾“å…¥ä¸‹é¢ä¸€æ¡æŒ‡ä»¤ç”¨ä»¥å…‹éš†æœ€æ–°ç‰ˆæœ¬ï¼š\n $ git clone https://github.com/iissnan/hexo-theme-next theme/next    å¯ç”¨ä¸»é¢˜ ä¸‹è½½å®Œæˆåï¼Œæ‰“å¼€åšå®¢é…ç½®æ–‡ä»¶_config.themeï¼Œä¿®æ”¹é‡Œé¢çš„themeå­—æ®µï¼Œå°†å…¶å€¼è®¾ç½®ä¸ºnext\n  éªŒè¯ä¸»é¢˜æ˜¯å¦å¯ç”¨æˆåŠŸ åœ¨Git Bashä¸­è¾“å…¥$ npm serverå¯ç”¨æœ¬åœ°æœåŠ¡ï¼Œç„¶ååœ¨æµè§ˆå™¨ä¸­è¾“å…¥localhost:4000è¿›è¡Œé¢„è§ˆå³å¯\n  æ›´å¤šè¯¦ç»†çš„è®¾ç½®ï¼Œä¸å†èµ˜è¿°ï¼Œå¯ä»¥å‚è€ƒNexTçš„ä½¿ç”¨æ–‡æ¡£ å…¶ä»–ä¼˜ç§€çš„ä¸»é¢˜æ¨èï¼š  iissnan/hexo-theme-next TryGhost/Casper daleanthony/uno orderedlist/modernist litten/hexo-theme-yilia A-limon/pacman AlxMedia/hueman kathyqian/crisp-ghost-theme  æ›´å¤šä¼˜ç§€çš„ä¸»é¢˜å¯ä»¥å‚è€ƒçŸ¥ä¹å›ç­”ï¼šæœ‰å“ªäº›å¥½çœ‹çš„hexoä¸»é¢˜?ï¼å®¶é¡ºå¼ çš„å›ç­”\n","description":"","tags":["Hexo","Github"],"title":"åœ¨Githubä¸Šé¢æ­å»ºHexoåšå®¢ï¼ˆä¸‰ï¼‰ï¼šæ›´æ¢Hexoä¸»é¢˜","uri":"/posts/create-hexo-on-github-3/"},{"categories":null,"content":"å¦‚ä½•é…ç½®Hexo ä¸Šä¸€èŠ‚ä¸­æˆ‘ä»¬å·²ç»åœ¨æœ¬åœ°å’ŒGithubä¸Šæ­å»ºèµ·äº†è‡ªå·±çš„åšå®¢ï¼Œä½†æ˜¯åšå®¢çš„é…ç½®éƒ½æ˜¯é»˜è®¤å€¼ï¼Œå¦‚æœæˆ‘ä»¬æƒ³ä¸ªæ€§åŒ–è‡ªå·±çš„åšå®¢ï¼Œæˆ‘ä»¬åº”è¯¥åšä»€ä¹ˆå‘¢ã€‚è¿™ä¸€èŠ‚ä¸­æˆ‘ä»¬ä¸€èµ·æ¥é…ç½®è‡ªå·±çš„åšå®¢çš„åŸºæœ¬ä¿¡æ¯å’Œä»‹ç»å¦‚ä½•å†™åšå®¢å’Œå‘è¡¨åšå®¢ã€‚ä¸‹ä¸€èŠ‚æˆ‘ä»¬å°†ä¸€èµ·ä¸ºè‡ªå·±çš„åšå®¢å®‰è£…æ–°çš„ä¸»é¢˜ã€‚\nåšå®¢çš„ä¸»è¦é…ç½®ç”¨åˆ°æ ¹ç›®å½•ä¸‹çš„_config.ymlæ–‡ä»¶ï¼Œæˆ‘åœ¨ä¸‹é¢ç»™å‡ºæ–‡ä»¶å’Œè§£é‡Šï¼Œä½ åªéœ€è¦æ ¹æ®è‡ªå·±éœ€æ±‚ä½œå‡ºç®€å•æ›´æ”¹å³å¯ï¼š\n# Hexo Configuration ## Docs: http://hexo.io/docs/configuration.html ## Source: https://github.com/hexojs/hexo/ # Site title: Mungo's Note\t##ç«™ç‚¹çš„åå­— subtitle:\t##ç«™ç‚¹çš„å‰¯æ ‡é¢˜ description: æ—¥å¸¸æŠ€æœ¯åˆ†äº« ##ç«™ç‚¹ä»‹ç»ï¼Œå¯¹ç«™ç‚¹è¿›è¡Œæè¿° author: Mungo\t##ç«™ç‚¹æ–‡ç« çš„ä½œè€… email: gmzhaoyang@gmail.com\t##ä½ çš„é‚®ç®±åœ°å€ language:\t##è¯­è¨€ï¼Œé»˜è®¤ä¸­æ–‡ï¼Œä¸å¡«å†™å³å¯ timezone:\t##æ—¶åŒºï¼Œé»˜è®¤å³å¯ # URL ## If your site is put in a subdirectory, set url as 'http://yoursite.com/child' and root as '/child/' url: http://mungo.space\t##ç«™ç‚¹çš„åŸŸåï¼Œå¦‚æœå¥‡æ€ªæˆ‘ä¸ºä»€ä¹ˆå¯ä»¥ç”¨è‡ªå·±çš„åŸŸåï¼Œå¯ä»¥çœ‹åç»­æ›´æ–° root: /\tpermalink: :year/:month/:day/:title/ permalink_defaults: ## å¯¹èµ„æºæ–‡ä»¶å¤¹çš„é…ç½®ï¼Œå¦‚èµ„æºæ–‡ä»¶å¤¹åç§°ï¼Œæ ‡ç­¾äº‘åç§°ï¼Œåˆ†ç±»é¡µé¢åç§° # Directory source_dir: source\t##èµ„æºæ–‡ä»¶å¤¹,å½“æ‰§è¡Œ`$ hexo deloy`å‘½ä»¤ï¼Œä¸Šä¼ çš„å³æ˜¯è¯¥æ–‡ä»¶å¤¹é‡Œé¢çš„å†…å®¹ public_dir: public\t##å…¬å…±æ–‡ä»¶å¤¹ï¼Œå½“æ‰§è¡Œ`$ hexo generate`å‘½ä»¤ï¼Œç”Ÿæˆçš„æ–‡ä»¶éƒ½åœ¨é‡Œé¢ tag_dir: tags\t##æ ‡ç­¾äº‘æ–‡ä»¶å¤¹ï¼Œéœ€è¦è‡ªå·±ç”Ÿæˆï¼Œè¯¦æƒ…è§ä¸‹ä¸€èŠ‚å¦‚ä½•é…ç½®ä¸»é¢˜ archive_dir: archives\t##å½’æ¡£æ–‡ä»¶å¤¹ï¼Œéœ€è¦è‡ªå·±ç”Ÿæˆ category_dir: categories\t##åˆ†ç±»æ–‡ä»¶å¤¹ï¼Œéœ€è¦è‡ªå·±ç”Ÿæˆ code_dir: downloads/code\t##ä»£ç å­˜æ”¾åŒº i18n_dir: :lang skip_render: ##æ­¤å¤„æ—¶é…ç½®åšå®¢æ–‡ç« å†…å®¹æ ¼å¼çš„ï¼Œå¯ä»¥ä¿æŒé»˜è®¤ï¼Œä¸åšä¿®æ”¹ # Writing new_post_name: :title.md # File name of new posts default_layout: post titlecase: false # Transform title into titlecase external_link: true # Open external links in new tab filename_case: 0 render_drafts: false post_asset_folder: false relative_link: false future: true highlight: enable: true line_number: true auto_detect: true tab_replace: #åˆ†ç±»å’Œæ ‡ç­¾äº‘çš„é…ç½®ï¼Œå¯ä»¥ä¸åšä¿®æ”¹ï¼Œé»˜è®¤å³å¯ # Category \u0026 Tag default_category: uncategorized category_map: tag_map: #æ—¥æœŸå’Œæ—¶é—´æ ¼å¼çš„é…ç½®ï¼Œå¯ä»¥ä¸åšä¿®æ”¹ï¼Œé»˜è®¤å³å¯ # Date / Time format ## Hexo uses Moment.js to parse and display date ## You can customize the date format as defined in ## http://momentjs.com/docs/#/displaying/format/ date_format: YYYY-MM-DD time_format: HH:mm:ss #ç”¨æ¥é…ç½®æ¯é¡µæ˜¾ç¤ºçš„æ–‡ç« æ•°ç›®ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±éœ€æ±‚è‡ªè¡Œä¿®æ”¹ # Pagination ## Set per_page to 0 to disable pagination per_page: 10 pagination_dir: page #æ’ä»¶å’Œä¸»é¢˜é…ç½®ï¼Œåœ¨è¿™é‡Œå¯ä»¥ä¿®æ”¹è‡ªå·±çš„ä¸»é¢˜ # Extensions ## Plugins: http://hexo.io/plugins/ ## Themes: http://hexo.io/themes/ theme: next #ä¸Šä¼ é…ç½®ï¼Œä¸Šä¸€èŠ‚ä¸­æˆ‘ä»¬å·²ç»é…ç½®å®Œæˆäº†ï¼Œåœ¨è¿™é‡Œä¸éœ€è¦å†æ¬¡ä¿®æ”¹ # Deployment ## Docs: http://hexo.io/docs/deployment.html deploy: type: git repository: https://github.com/Gitzhaoyang/gitzhaoyang.github.io.git branch: master  å½“é…ç½®å®Œæˆå¹¶ä¿å­˜åï¼Œå°±å¯ä»¥æ‰§è¡Œ$ hexo generateç”Ÿæˆé™æ€æ–‡ä»¶ï¼Œç„¶åæ‰§è¡Œ$ hexo serveråå°±å¯ä»¥æ‰“å¼€æµè§ˆå™¨è¾“å…¥localhost:4000è¿›è¡Œæœ¬åœ°é¢„è§ˆäº†\ntipsï¼š å¦‚æœ_config.ymlæ–‡ä»¶æ‰“å¼€æœ‰ä¹±ç åº”è¯¥æ˜¯ç”¨åˆ°çš„ç¼–è¾‘å™¨çš„åŸå› ï¼Œæˆ‘ç”¨çš„æ˜¯Sublime2ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¸ä¼šå‡ºç°ä¹±ç ã€‚å¦‚æœä¹±ç ï¼Œé‚£ä¹ˆéœ€è¦æŠŠæ–‡ä»¶æ ¼å¼è½¬æ¢ä¸ºUTF-8ï¼Œè½¬åŒ–æ–¹æ³•æˆ‘åœ¨è¿™é‡Œå°±ä¸å†èµ˜è¿°äº†ã€‚\nå¦‚ä½•æ·»åŠ å’Œå‘è¡¨æ–‡ç«    æ–°å»ºæ–‡ç«  åœ¨Git Bashä¸­è¾“å…¥\n $ hexo new post \"my_first_post\"    ç¼–è¾‘æ–‡ç«  ç¬¬ä¸€æ­¥çš„å‘½ä»¤ä¼šåœ¨\\Hexo\\source\\_postsæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ªåç¼€.mdæ–‡ä»¶ï¼Œä½ å¯ä»¥åœ¨é‡Œé¢æ·»åŠ ä»»ä½•å­—ç¬¦ä¸²ã€‚\nè¿™å…¶å®æ˜¯ä¸€ä¸ªmarkdownç±»å‹çš„æ–‡ä»¶ï¼Œä½¿ç”¨markdownè¯­è¨€ç¼–å†™ï¼Œæˆ‘è¿™ç¯‡åšæ–‡å°±æ˜¯ç”¨markdownç¼–å†™çš„ï¼Œå¦‚æœä¸äº†è§£çš„ï¼Œå¯ä»¥çœ‹æˆ‘çš„åç»­æ›´æ–°ï¼Œæˆ‘ä¼šæŠŠmarkdownçš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•è¿›è¡Œæ•´ç†ã€‚\n  ç”Ÿæˆå’Œä¸Šä¼    åœ¨GitBashä¸­è¾“å…¥$ hexo generateå¯¹æ–‡ä»¶è¿›è¡Œç”Ÿæˆï¼›\n  ç”Ÿæˆå®Œæˆåï¼Œå¯ä»¥è¾“å…¥$ hexo serverï¼Œç„¶ååœ¨æµè§ˆå™¨è¾“å…¥localhost:4000è¿›è¡Œé¢„è§ˆï¼›\n  é¢„è§ˆæ²¡æœ‰é—®é¢˜åï¼Œæ¥ç€è¾“å…¥$ hexo deployï¼Œwindowså¹³å°ä¸‹ä¼šæç¤ºè¾“å…¥Githubçš„ç”¨æˆ·åï¼Œç„¶åæç¤ºè¾“å…¥Githubçš„ç™»å½•å¯†ç ã€‚å¦‚æœè¾“å…¥æ­£ç¡®ï¼Œç­‰å¾…å‡ ç§’ä¾¿èƒ½ä¸Šä¼ æˆåŠŸï¼›\n  ç°åœ¨å¯ä»¥åœ¨æµè§ˆå™¨ä¸­è¾“å…¥xxxx.github.ioè¿›è¡Œè®¿é—®äº†ã€‚\n    æ³¨æ„:   å¯èƒ½ä¸ä¼šç«‹å³ç”Ÿæ•ˆï¼Œåªè¦ç­‰å¾…å‡ åˆ†é’Ÿæˆ–è€…æ¸…ç©ºä¸€ä¸‹æµè§ˆå™¨ç¼“å­˜åŸºæœ¬å°±èƒ½è§£å†³ã€‚å¦‚æœä»ç„¶çœ‹ä¸åˆ°ï¼Œè¯´æ˜å‰é¢æ­¥éª¤æ“ä½œæœ‰é”™è¯¯ï¼Œé‡æ–°ç”Ÿæˆå’Œä¸Šä¼ å°±å¯ä»¥äº†ã€‚\nå¦‚æœå®åœ¨ä¸è¡Œï¼Œå¯ä»¥åœ¨Git Bashä¸­è¾“å…¥$ hexo cleanæˆ–è€…æ‰‹åŠ¨åˆ é™¤.deploy_gitæ–‡ä»¶å¤¹å’Œdb.jsonæ–‡ä»¶å†é‡æ–°ç”Ÿæˆå’Œä¸Šä¼ ã€‚\nåˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»æ­å»ºèµ·è‡ªå·±çš„åšå®¢ï¼Œå¯ä»¥è¿›è¡ŒåŸºæœ¬çš„é…ç½®ï¼Œä¹Ÿå¯ä»¥å‘è¡¨æ–‡ç« ï¼Œåé¢ä¼šæœ‰æ›´é«˜é˜¶çš„è®¾ç½®ï¼Œå¦‚ï¼šå¦‚ä½•é…ç½®ä¸»é¢˜ï¼Œå¦‚ä½•åœ¨ä¸åŒç”µè„‘ä¸Šéƒ½å¯ä»¥æ›´æ–°è‡ªå·±çš„åšå®¢ etc.æ„Ÿå…´è¶£çš„äººå¯ä»¥å…³æ³¨ã€‚ğŸ˜˜\n","description":"","tags":["Hexo","Github"],"title":"åœ¨Githubä¸Šé¢æ­å»ºHexoåšå®¢ï¼ˆäºŒï¼‰ï¼šé…ç½®å’Œå‘è¡¨æ–‡ç« ","uri":"/posts/create-hexo-on-github-2/"},{"categories":null,"content":"ä»€ä¹ˆæ˜¯SSH SSHä¸ºSecure Shellçš„ç¼©å†™ï¼Œæ˜¯å»ºç«‹åœ¨åº”ç”¨å±‚å’Œä¼ è¾“å±‚åŸºç¡€ä¸Šçš„åè®®ã€‚SSHæ˜¯ç›®å‰è¾ƒå¯é ï¼Œä¸“ä¸ºè¿œç¨‹ç™»å½•ä¼šè¯å’Œå…¶ä»–ç½‘ç»œæœåŠ¡æä¾›å®‰å…¨æ€§çš„åè®®ã€‚åˆ©ç”¨SSHåè®®å¯ä»¥æœ‰æ•ˆé˜²æ­¢è¿œç¨‹ç®¡ç†ä¸­é¢ä¿¡æ¯æ³„æ¼é—®é¢˜ã€‚æˆ‘ç†è§£çš„å°±æ˜¯ç»™æ•°æ®è¿›è¡ŒåŠ å¯†ï¼Œç„¶åé˜²æ­¢ä¸­é—´äººè¿›è¡Œç›—å–ï¼Œèƒ½ä½¿ä½ çš„æ•°æ®å®‰å…¨å¯é çš„ä¼ è¾“åˆ°ç›®çš„æ–¹ã€‚åœ¨è¿™é‡Œå°±æ˜¯ä¸ºäº†ä¿è¯ä½ ç”µè„‘å’ŒGithubä»“åº“ä¹‹é—´é€šä¿¡çš„å®‰å…¨ã€‚\nå¦‚ä½•é…ç½®Githubçš„SSH é¢˜ä¸»è¿™é‡Œç”¨çš„ä¾ç„¶æ˜¯windowså¹³å°ã€‚\nStep 1: æ£€æŸ¥SSH keys é¦–å…ˆï¼Œæˆ‘ä»¬è¦æŸ¥çœ‹åœ¨ä½ ç”µè„‘ä¸Šå·²ç»å­˜åœ¨çš„SSH keysã€‚è¿è¡ŒGit Bash ç„¶åè¾“å…¥ï¼š\n$ ls -al ~/.ssh  å¦‚æœä½ å·²ç»æœ‰SSHå…¬é’¥äº†ã€‚é‚£ä¹ˆä½ å°†ä¼šçœ‹åˆ°ä¸‹é¢æ ¼å¼çš„æ–‡ä»¶åå­—ï¼š\nid_dsa.pub id_esdsa.pub id_ed25519.pub id_rsa.pub  å¦‚æœä½ å·²ç»å­˜åœ¨å…¬é’¥äº†ï¼Œé‚£ä¹ˆå¯ä»¥è·³è¿‡Step 2ç›´æ¥å»Step 3äº†ã€‚å¦‚æœæ²¡æœ‰ä¹Ÿä¸è¦æ‹…å¿ƒï¼Œæˆ‘ä»¬å°†åœ¨Step 2 ä¼šåˆ›å»ºå…¬é’¥ã€‚\nStep 2: ç”ŸæˆSSH key   åœ¨Git Bashä¸­è¾“å…¥ä¸‹é¢å‘½ä»¤ï¼Œå¼•å·å†…ä¸€å®šæ˜¯ä½ çš„Githubæ³¨å†Œé‚®ç®±åœ°å€  $ ssh-keygen -t rsa -b 4096 -C \"your_github_email@example.com\" #è¿™å¥ä½œç”¨æ˜¯ç”Ÿæˆä¸€ä¸ªæ–°çš„SSH key    ç­‰å¾…å‡ ç§’ï¼Œå½“æç¤ºè®©ä½ è¾“å…¥ä¿å­˜åœ°å€æ—¶ï¼Œå®˜æ–¹ç‰¹åˆ«æ¨èæ”¾åœ¨é»˜è®¤ä½ç½®å°±å¯ä»¥äº†ã€‚æ‰€ä»¥è¿™é‡Œç›´æ¥è¾“å…¥å›è½¦ï¼Œæç¤ºå¦‚ä¸‹ï¼š  Enter file in which to save the key (/Users/you/.ssh/id_rsa):[ç›´æ¥è¾“å…¥å›è½¦]    å°†ä¼šæç¤ºä½ è¾“å…¥ä¸€ä¸ªå¯†ç ä¸²**(è¿™é‡Œè¾“å…¥å¯†ç æ—¶ä¸ä¼šæ˜¾ç¤ºåœ¨å±å¹•ä¸Šçš„ï¼Œåªè¦è¾“å…¥æ­£ç¡®æŒ‰å›è½¦å°±å¥½)**:  Enter passphrase ï¼ˆempty for no passphraseï¼‰: [è¾“å…¥ä½ æƒ³è®¾ç½®çš„å¯†ç ] Enter same passphrase againï¼š[åœ¨è¾“å…¥ä¸€éå¯†ç ] ï¼ƒè™½ç„¶è¯´è¿™é‡Œå¯ä»¥è®¾ç½®ä¸ºç©ºï¼Œä½†æ˜¯æ¨èç”¨ä¸€ä¸ªæ›´åŠ å®‰å…¨çš„å¯†ç     è¾“å®Œå¯†ç ä¹‹åï¼Œä½ å°†ä¼šå¾—åˆ°ä½ çš„SSHçš„æŒ‡çº¹(fingerprint)æˆ–è€…idã€‚ä»–çœ‹èµ·æ¥å¦‚ä¸‹å›¾ï¼š   Step 3: æŠŠä½ çš„SSH keyæ·»åŠ åˆ°ssh-agent   è¾“å…¥å¦‚ä¸‹å‘½ä»¤  $ ssh-agent -s  ä¼šå“åº”ï¼š\n echo Agent pid [ç«¯å£å·]    åŠ ä¸‹æ¥è¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼ŒæŠŠä½ çš„SSH keyæ·»åŠ åˆ°ssh-agent  $ ssh-add ~/.ssh/id_rsa  å¦‚æœä»–æç¤ºå¦‚ä¸‹ï¼Œè¯´æ˜ä¸èƒ½æ‰“å¼€æ‚¨èº«ä»½éªŒè¯çš„ä»£ç†\n Could not open a connection to your authentication agent.  åªéœ€è¦è¾“å…¥å¦‚ä¸‹å‘½ä»¤å³å¯è§£å†³ï¼š\n ssh-agnet bash  æ›´å¤šå…³äºssh-agentçš„ç»†èŠ‚ï¼Œå¯ä»¥ç”¨man ssh-agent æ¥æŸ¥çœ‹\n  Step 4: æŠŠä½ çš„SSH keyæ·»åŠ åˆ°ä½ çš„Githubè´¦æˆ· é¦–å…ˆä½ åº”è¯¥æŠŠä½ çš„ SSH key å¤åˆ¶åˆ°ä½ çš„å‰ªè´´æ¿ï¼Œè¾“å…¥å‘½ä»¤å³å¯å®ŒæˆæŠŠ SSH key å¤åˆ¶åˆ°ä½ çš„å‰ªè´´æ¿ï¼š\n$ clip \u003c ~/.ssh/id_ras.pub  æ·»åŠ åˆ°ä½ çš„Githubè´¦æˆ·ï¼š\n  æµè§ˆå™¨ç™»é™†ä½ çš„Githubè´¦æˆ·ï¼Œç‚¹å‡»å³ä¸Šè§’ä½ çš„å¤´åƒï¼Œç„¶åç‚¹å‡»Settings   è¿›å…¥Settingsï¼Œç‚¹å‡»ä¾§æ é€‰é¡¹SSH key   å•å‡»å³è¾¹ Add SSH key æŒ‰é’®   åœ¨ä¸‹é¢è¾“å…¥æ ‡é¢˜ï¼ˆTitleï¼Œè¿™ä¸ªå¯ä»¥è‡ªå®šä¹‰ï¼‰å’ŒSHH Keyï¼ˆç›´æ¥ Ctrlï¼‹V ç²˜è´´å°±å¯ä»¥ï¼‰   ç‚¹å‡»ä¸‹é¢çš„Add keyæŒ‰é’®ä¾¿å¯ä»¥æ·»åŠ æˆåŠŸäº†   Step 5: æµ‹è¯•æ˜¯å¦è¿æ¥æˆåŠŸ   åœ¨Git Bashä¸­è¾“å…¥ï¼š  $ ssh -T git@github.com # sshå°è¯•è¿æ¥åˆ°GitHub    ä½ å¯èƒ½çœ‹åˆ°ä¸‹é¢çš„è­¦å‘Šï¼š  The authenticity of host 'github.com(207.97.227.239)' can't be established. RSA key fingerprint is SHA256:nJKJFKDnDLFJDndndnfkdfldjfldldfjld. Are you sure you want to continue connecting (yes/no)?  ç¡®å®šæç¤ºä¿¡æ¯é‡Œçš„æŒ‡çº¹ï¼ˆfingerprintï¼‰æ˜¯å¦åŒ¹é…ï¼Œå¦‚æœåŒ¹é…å°±é”®å…¥ï½€yesï½€ï¼Œå°†å¾—åˆ°ï¼š\n Hi [ä½ çš„ç”¨æˆ·å]! You've successfully authenticated, but GitHub does not provide shell access.    å¦‚æœæç¤ºä¿¡æ¯ä¸­ä½ çš„ç”¨æˆ·åæ˜¯ä½ çš„ï¼Œé‚£ä¹ˆä½ å°±æˆåŠŸå»ºç«‹äº†SSH keyï¼ğŸ˜ğŸ˜   TIPSï¼šå¦‚æœé‡åˆ°å…¶ä»–é—®é¢˜ï¼Œå¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼Œä¹Ÿå¯ä»¥ç»™æˆ‘ç•™è¨€ ","description":"","tags":["Github","SSH"],"title":"å¦‚ä½•é…ç½®Githubçš„SSH key","uri":"/posts/how-to-config-ssh-on-github/"},{"categories":null,"content":"ä»€ä¹ˆæ˜¯Hexo Hexoæ˜¯ä¸€ä¸ªåŸºäºNode.jsçš„é™æ€åšå®¢ç¨‹åºï¼Œå¯ä»¥æ–¹ä¾¿çš„ç”Ÿæˆé™æ€ç½‘é¡µæ‰˜ç®¡åœ¨Githubå’ŒHerokuä¸Šã€‚å¹¶ä¸”æœ‰å¾ˆå¤šäººä¸ºå…¶åˆ¶ä½œäº†å¾ˆå¤šä¼˜ç§€çš„ä¸»é¢˜ï¼ˆthemeï¼‰ï¼Œä½ å¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½è¿›è¡Œè®¾ç½®ã€‚ä¸»é¢˜çš„è®¾ç½®å°†åœ¨åé¢çš„ç« èŠ‚ä¸­ä»‹ç»ã€‚\nè¿™ä¸ªæ˜¯Hexoå®˜æ–¹ç½‘ç«™ä»‹ç»ï¼š\n Hexo is a fast, simple and powerful blog framework. You write posts in Markdown (or other languages) and Hexo generates static files with a beautiful theme in seconds.\n ç¿»è¯‘è¿‡æ¥å°±æ˜¯ï¼š\n Hexo æ˜¯ä¸€ä¸ªå¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æ¶ã€‚Hexo ä½¿ç”¨ Markdownï¼ˆæˆ–å…¶ä»–æ¸²æŸ“å¼•æ“ï¼‰è§£ææ–‡ç« ï¼Œåœ¨å‡ ç§’å†…ï¼Œå³å¯åˆ©ç”¨é“ä¸½çš„ä¸»é¢˜ç”Ÿæˆé™æ€ç½‘é¡µã€‚\n æ€ä¹ˆåœ¨Githubä¸Šæ­å»ºä¸€ä¸ªhexoåšå®¢ æˆ‘ç”¨äº†ä¸€å¤©æ—¶é—´ç ”ç©¶å’Œæ­å»ºäº†ä¸€ä¸ªGithubåšå®¢(GitHub Pages site)ï¼Œè¿‡ç¨‹ä¸­é‡åˆ°ä¸€äº›å°é—®é¢˜ï¼Œç°åœ¨å†™ä¸€ç¯‡æ•™ç¨‹ï¼Œæ–¹ä¾¿å’Œæˆ‘ä¸€æ ·çˆ±æŠ˜è…¾ä½†æ˜¯æ˜¯æ–°æ‰‹çš„äººã€‚\næ³¨æ„ï¼š å› ä¸ºé¢˜ä¸»åœ¨æ­å»ºæ—¶åœ¨Windowså¹³å°ï¼Œæ‰€ä»¥è®²è§£ä¸ºWindowsç‰ˆæœ¬ï¼Œä½†æ˜¯å„ä¸ªå¹³å°å¤§åŒå°å¼‚ï¼Œæ‰€ä»¥å®è·µèµ·æ¥å¹¶æ²¡æœ‰å¾ˆå¤§çš„å·®åˆ«ã€‚\nä»¥ä¸‹ä¸ºæ•™ç¨‹æ­£æ–‡ï¼š\nå®‰è£…Git å‰å¾€Gitå®˜ç½‘ä¸‹è½½Windowsç‰ˆæœ¬å‹ç¼©åŒ…ï¼Œä¸‹è½½å®Œæˆåè§£å‹å®‰è£…ã€‚\nå®‰è£…Node.js å‰å¾€Node.jså®˜æ–¹ä¸‹è½½ç½‘ç«™ï¼Œä¸‹è½½Node.jså®˜æ–¹å®‰è£…åŒ…ï¼Œä¸‹è½½å®ŒæˆååŒæ ·è§£å‹å®‰è£…ã€‚\nå®‰è£…Hexo åˆ°ç›®å‰ä¸ºæ­¢ï¼Œå®‰è£…Hexoæ‰€éœ€è¦çš„ç¯å¢ƒå·²å°†å®‰è£…å®Œæˆï¼Œä¸‹ä¸€æ­¥åªéœ€è¦å®‰è£…Hexoä¾¿å¯ä»¥äº†ã€‚ ç‚¹å‡»é¼ æ ‡å³é”®ï¼Œçœ‹æ˜¯å¦æœ‰Git bash Hereé€‰é¡¹ã€‚å¦‚æœæ²¡æœ‰å¯ä»¥å‰å¾€Gitå®‰è£…æ ¹ç›®å½•ï¼Œå¯åŠ¨git-base.exeä¹Ÿå¯ä»¥ã€‚ åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ï¼š\n$ npm install -g hexo-cli  Hexo ä¾¿å®‰è£…å®Œæˆäº†\nåˆ›å»ºHexoæ–‡ä»¶å¤¹ æ‰¾åˆ°æƒ³è¦æ”¾ç½®åšå®¢çš„æ–‡ä»¶å¤¹ï¼Œæ¯”å¦‚ï¼ˆF:\\Hexoï¼‰ï¼Œåœ¨è¯¥ç›®å½•ä¸‹é¼ æ ‡å³å‡»æ‰“å¼€Gitbashå·¥å…·ï¼Œï¼ˆå³é”®èœå•ä¸­æ²¡æœ‰è¯¥é€‰é¡¹çš„å¯ä»¥ç”¨cmdå‘½ä»¤cdç­‰è¿›å…¥è¯¥æ–‡ä»¶å¤¹ï¼‰ã€‚æ‰§è¡Œä¸‹é¢çš„è¯­å¥ï¼Œä¼šåœ¨F:\\Hexoæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºnode_modulesæ–‡ä»¶å¤¹ï¼š\n$ hexo init  è¿™é‡Œinitåé¢å¯ä»¥è·Ÿæ–‡ä»¶ç›®å½•ï¼Œæ¯”å¦‚æˆ‘æƒ³åœ¨F:\\Hexoä¸‹åˆ›å»ºåšå®¢æ–‡ä»¶å¤¹ï¼Œé‚£ä¹ˆå¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤ï¼š\n$ hexo init F:\\Hexo  å®‰è£…ä¾èµ–åŒ… åœ¨Hexoç›®å½•ä¸‹ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œä½ ä¼šå‘ç°F:\\Hexo\\node_modulesç›®å½•ä¸‹å¤šäº†å¥½å¤šæ–‡ä»¶å¤¹\n$ npm install  æœ¬åœ°è°ƒè¯• ç›®å‰ä¸ºæ­¢ï¼Œå·²ç»æ­å»ºå¥½è‡ªå·±çš„Hexoåšå®¢äº†ï¼Œä½†æ˜¯åªèƒ½åœ¨æœ¬æœºä¸ŠæŸ¥çœ‹ã€‚æ‰§è¡Œä»¥ä¸‹ä¸¤ä¸ªå‘½ä»¤ï¼ˆåœ¨F:\\Hexoç›®å½•ä¸‹ï¼‰ï¼Œç„¶ååœ¨æµè§ˆå™¨ä¸­è¾“å…¥ localhost:4000 å°±å¯ä»¥çœ‹åˆ°è‡ªå·±çš„åšå®¢äº†\n$ hexo generate $ hexo serrver  ä½†æ˜¯åªèƒ½åœ¨æœ¬åœ°æŸ¥çœ‹ï¼Œå¦‚æœæƒ³è®©åˆ«äººä¹Ÿèƒ½è®¿é—®ï¼Œé‚£ä¹ˆå°±éœ€è¦éƒ¨ç½²åˆ°Github ä¸Šé¢ï¼Œä¸‹é¢ï¼Œæˆ‘ä»¬å°±éƒ¨ç½²ä¸Šå»ã€‚\næ³¨å†ŒGithubè´¦æˆ· å‰å¾€Githubç½‘ç«™ï¼Œæ³¨å†Œä¸€ä¸ªæ–°ç”¨æˆ·ã€‚ç”¨é‚®ç®±æ³¨å†Œçš„ä¸€å®šå‰å¾€é‚®ç®±å»éªŒè¯é‚®ä»¶ã€‚è¦ä¸ç„¶ä¹‹åå¯èƒ½ä¼šæœ‰å°é—®é¢˜ã€‚\nåˆ›å»ºä¸€ä¸ªæ–°çš„repository åœ¨è‡ªå·±çš„Githubä¸»é¡µå³ä¸‹è§’,åˆ›å»ºä¸€ä¸ªæ–°çš„repositoryã€‚æ¯”å¦‚æˆ‘çš„Githubç”¨æˆ·åä¸ºGitzhaoyangï¼Œé‚£ä¹ˆæˆ‘åˆ›å»ºçš„repositoryçš„åå­—åº”è¯¥æ˜¯ gitzhaoyang.github.io ã€‚\nè¿™é‡Œä¸¥é‡æ³¨æ„: ä¸€å®šè¦ä»¥ä½ çš„Githubç”¨æˆ·å.github.ioåˆ›å»ºã€‚å‡å¦‚æˆ‘æ²¡æœ‰ç”¨gitzhaoyang.github.ioè€Œæ˜¯ç”¨äº†mungo.github.ioï¼Œé‚£ä¹ˆå½“æˆ‘æµè§ˆå™¨è®¿é—®åšå®¢çš„æ—¶å€™ä¼šå‡ºç°404é”™è¯¯ã€‚è¿™é‡Œå¹¶ä¸æ˜¯æ²¡æœ‰éƒ¨ç½²æˆåŠŸï¼Œè€Œæ˜¯æŠŠå®ƒéƒ¨ç½²åœ¨äº†è¿™é‡Œ:http://gitzhaoyang.github.io/mungo.github.ioã€‚æ‰€ä»¥ï¼Œå¦‚æœæƒ³ç›´æ¥gitzhaoyang.github.ioè®¿é—®ï¼Œé‚£ä¹ˆå°±éœ€è¦å’Œç”¨æˆ·åä¿æŒä¸€è‡´ã€‚é¢˜ä¸»åœ¨è¿™é‡Œåƒäº†ä¸å°çš„è‹¦å¤´ï¼Œæœ€åç»™Githubå®¢æœå‘é‚®ä»¶æ‰çŸ¥é“åŸå› ã€‚\nåˆ›å»ºå¥½å¦‚ä¸‹å›¾ï¼š\nå°†æœ¬åœ°çš„æ–‡ä»¶éƒ¨ç½²ï¼ˆä¸Šä¼ ï¼‰åˆ°Githubè´¦æˆ·ä¸­ ç¼–è¾‘æœ¬åœ°Hexoç›®å½•ä¸‹æ–‡ä»¶_comfig.ymlï¼Œåœ¨æœ€åæ·»åŠ å¦‚ä¸‹ä»£ç ï¼ˆåœ¨ä½ ä¿®æ”¹æ—¶ï¼ŒæŠŠ gitzhaoyang è¦æ›¿æ¢æˆä½ è‡ªå·±çš„ç”¨æˆ·åï¼‰\ndeploy: type: git repository: http://github.com/Gitzhaoyang/gitzhaoyang.github.io.git branch: master  .ymlæ–‡ä»¶å¯¹æ ¼å¼è§„èŒƒè¦æ±‚å¾ˆä¸¥æ ¼ï¼Œtype: repository: branch: å‰é¢æœ‰ä¸¤ä¸ªç©ºæ ¼ï¼Œå†’å·åé¢éƒ½æœ‰ä¸€ä¸ªç©ºæ ¼ã€‚\næ‰§è¡Œä»¥ä¸‹æŒ‡ä»¤å³å¯å®Œæˆéƒ¨ç½²ï¼ˆå¦‚æœæç¤ºé”™è¯¯ï¼Œå¯ä»¥çœ‹ä¸‹é¢æ³¨æ„ï¼‰ï¼š\n$ hexo generate $ hexo deploy  æ³¨æ„ï¼š   æœ‰äº›ç”¨æˆ·æ²¡æœ‰è®¾ç½®Githubçš„SSHï¼Œä¼šå¯¼è‡´ä¸Šé¢ä¸¤å¥å¤±è´¥ã€‚SSHçš„ä»‹ç»å’Œè®¾ç½®æ–¹æ³•å¯ä»¥æŸ¥çœ‹å®˜æ–¹æ•™ç¨‹,é…ç½®èµ·æ¥å¾ˆç®€å•ã€‚å¦‚æœè‹±æ–‡çœ‹ä¸æ˜ç™½æˆ–è€…è¿‡ç¨‹ä¸­å‡ºç°å°é—®é¢˜ï¼Œå¯ä»¥æŸ¥çœ‹æˆ‘å†™çš„SSHè®¾ç½®æ•™ç¨‹ï¼Œæ˜¯å¯¹å®˜æ–¹æ•™ç¨‹çš„è§£é‡Šå’Œæ‰©å±•ï¼Œé’ˆå¯¹é…ç½®è¿‡ç¨‹ä¸­çš„å°é—®é¢˜éƒ½æœ‰è§£å†³åŠæ³•ã€‚\n  æ¯æ¬¡ä¿®æ”¹æœ¬åœ°æ–‡ä»¶ï¼Œéƒ½éœ€è¦å‘½ä»¤$ hexo generateæ‰èƒ½ä¿å­˜ã€‚è€Œä¸”æ¯æ¬¡ä½¿ç”¨å‘½ä»¤éƒ½å¿…é¡»åœ¨Hexoæ ¹ç›®å½•ä¸‹ä½¿ç”¨ã€‚\n  å¦‚æœä½ åœ¨æ‰§è¡Œ$ hexo deloy,å¦‚æœæç¤º ERROR Deployer not found: gitï¼Œé‚£è¯´æ˜ä½ æ²¡æœ‰å®‰è£…hexo-deployer-gitä¾èµ–åŒ…ï¼Œè¿›å…¥F:\\Hexo\\node_moduleså‘ç°çœŸçš„æ²¡æœ‰hexo-deployer-gitï¼Œä¸ç”¨æ‹…å¿ƒï¼Œåªéœ€è¦è¾“å…¥ä¸‹é¢å‘½ä»¤åˆ›å»ºhexo-deployer-gitä¾èµ–åŒ…ï¼Œç„¶åå†æ‰§è¡Œhexo deployå°±èƒ½ä¸Šä¼ æˆåŠŸäº†\n $ npm install hexo-deployer-git --save    å¦‚æœä½ æ˜¯windowsç”¨æˆ·ï¼Œé‚£ä¹ˆå½“ä½ æ‰§è¡Œ$ hexo deployå‘½ä»¤çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šå…ˆåå‡ºç°æç¤ºæ¡†è®©ä½ è¾“å…¥ä½ çš„Githubç”¨æˆ·åå’ŒGithubå¯†ç ï¼Œåªè¦è¾“å…¥æ­£ç¡®ï¼Œä¸Šä¼ å°±æ²¡æœ‰é—®é¢˜ã€‚\n  å¥½äº†ï¼Œç°åœ¨æˆ‘ä»¬çš„åšå®¢å·²ç»åœ¨Githubä¸Šé¢éƒ¨ç½²æˆåŠŸäº†ï¼Œå¯ä»¥åœ¨æµè§ˆå™¨è®¿é—®gitzhaoyang.github.ioè¯•è¯•äº†ã€‚\næç¤ºï¼š ç°åœ¨Hexoæ”¯æŒæ›´åŠ ç®€å•çš„å‘½ä»¤æ ¼å¼äº†ï¼Œæ¯”å¦‚ï¼š\nhexo s == hexo server hexo g == hexo generate hexo d == hexo deploy hexo n == hexo new  åç»­æˆ‘ä¼šæŠŠå¦‚ä½•é…ç½®åšå®¢ä¿¡æ¯ï¼Œå‘è¡¨æ–‡ç« ï¼Œè®¾ç½®åšå®¢ä¸»é¢˜ï¼Œä¸åŒç”µè„‘é—´è¿›è¡ŒåŒæ—¶æ›´æ–°è‡ªå·±çš„Blogçš„æ–¹æ³•ç­‰æ›´æ–°ä¸Šæ¥,æ„Ÿå…´è¶£çš„äººå¯ä»¥å…³æ³¨\n","description":"","tags":["Hexo","Github"],"title":"åœ¨Githubä¸Šé¢æ­å»ºHexoåšå®¢ï¼ˆä¸€ï¼‰ï¼šéƒ¨ç½²åˆ°Github","uri":"/posts/create-hexo-on-github-1/"},{"categories":null,"content":"æ·±å…¥å‰–æ Golang Pprof æ ‡ç­¾ Polar Signal æä¾›çš„æŒç»­åˆ†æå·¥å…·å¯ä»¥å’Œä»»ä½•æ ¼å¼çš„ pprof é…ç½®é€‚é…ï¼ŒGo æ·±åº¦é›†æˆäº† pprof ç”šè‡³æ”¯æŒäº†å®ƒçš„æ ‡ç­¾ç‰¹æ€§ã€‚ç„¶è€Œï¼Œè‡ªä»æˆ‘ä»¬å‘å¸ƒäº†æˆ‘ä»¬æŒç»­åˆ†æçš„äº§å“ä¹‹åï¼Œæˆ‘ä»¬æ”¶åˆ°äº†å¾ˆå¤šå·¥ç¨‹å¸ˆçš„åé¦ˆï¼Œå‘ç°è®¸å¤šå·¥ç¨‹å¸ˆä¸çŸ¥é“å¦‚ä½•å»åˆ†æï¼Œæˆ–è€…ä¸çŸ¥é“åˆ†æèƒ½ç»™ä»–ä»¬å¸¦æ¥ä»€ä¹ˆå¥½å¤„ã€‚è¿™ç¯‡æ–‡ç« ä¸»è¦å‰–æ pprof æ ‡ç­¾ï¼Œå¹¶ä¼šç»“åˆä¸€äº› Go çš„ç¤ºä¾‹ä»£ç å»åˆ†æã€‚\nåŸºç¡€ pprof æ ‡ç­¾åªæ”¯æŒ Go çš„ CPU åˆ†æå™¨ã€‚Go çš„åˆ†æå™¨æ˜¯æŠ½æ ·åˆ†æï¼Œè¿™æ„å‘³ç€å®ƒåªä¼šæ ¹æ®ç‰¹å®šçš„é¢‘ç‡ï¼ˆé»˜è®¤æ˜¯ 1 ç§’é’Ÿ 100 æ¬¡ï¼‰å»è·å–æ‰§è¡Œä¸­å‡½æ•°çš„è°ƒç”¨æ ˆå¹¶è®°å½•ã€‚ç®€å•æ¥è¯´ï¼Œå¼€å‘è€…å¦‚æœä½¿ç”¨æ ‡ç­¾ï¼Œåœ¨åˆ†æå™¨å–æ ·æ—¶å°±å¯ä»¥å°†å‡½æ•°çš„è°ƒç”¨æ ˆè¿›è¡ŒåŒºåˆ†ï¼Œç„¶ååªèšåˆæœ‰ç›¸åŒæ ‡ç­¾çš„å‡½æ•°è°ƒç”¨æ ˆã€‚\nGo åœ¨ runtime/pprof åŒ…ä¸­å·²ç»æ”¯æŒäº†æ ‡ç­¾æ£€æµ‹ï¼Œå¯ä»¥ä½¿ç”¨ pprof.Do å‡½æ•°éå¸¸æ–¹ä¾¿çš„ä½¿ç”¨ã€‚\n1 2 3  pprof.Do(ctx, pprof.Labels(\"label-key\", \"label-value\"), func(ctx context.Context) { // execute labeled code })   è¿›é˜¶ ä¸ºäº†è¿›è¡Œæ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ pprof æ ‡ç­¾ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåŒ…å«è®¸å¤šç¤ºä¾‹çš„ä»“åº“ï¼Œç¤ºä¾‹ä»“åº“ä¼šä½œä¸ºè¿™ç¯‡æ–‡ç« å†…å®¹çš„è¯´æ˜ã€‚ä»“åº“åœ°å€ï¼šhttps://github.com/polarsignals/pprof-labels-example\nç¤ºä¾‹ä»£ç çš„ main.go é€šè¿‡å°† tanant ä¼ é€’ç»™ iterate å‡½æ•°å®ç°äº†å¤§é‡çš„ for å¾ªç¯ï¼Œå…¶ä¸­tanant1 åšäº† 10 äº¿æ¬¡å¾ªç¯ï¼Œè€Œ tanant2 åšäº† 1 äº¿æ¬¡å¾ªç¯ï¼ŒåŒæ—¶ä¼šè®°å½• CPU çš„åˆ†ææ—¥å¿—å¹¶å°†å…¶å†™å…¥ ./cpuprofile.pb.gzã€‚\nä¸ºäº†æ¼”ç¤ºå¦‚ä½•åœ¨ pprof çš„åˆ†ææ—¥å¿—ä¸­å±•ç¤º pprof æ ‡ç­¾ï¼Œç”¨ printprofile.go æ¥æ‰“å°æ¯æ¬¡æŠ½æ ·å‡½æ•°è°ƒç”¨æ ˆä»¥åŠæ ·æœ¬å€¼ï¼Œè¿˜æœ‰æ”¶é›†åˆ°æ ·æœ¬çš„æ ‡ç­¾ã€‚\nå¦‚æœæˆ‘ä»¬æ³¨é‡Šæ‰ pprof.Do çš„è¿™éƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†æ— æ³•è¿›è¡Œæ ‡ç­¾æ£€æµ‹ï¼Œè¿è¡Œ printprofile.go ä»£ç ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹æ²¡æœ‰æ ‡ç­¾çš„æŠ½æ ·åˆ†ææ—¥å¿—ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13  runtime.main main.main main.iteratePerTenant main.iterate 2540000000 --- runtime.main main.main main.iteratePerTenant main.iterate 250000000 --- Total: 2.79s   CPU åˆ†ææ•°æ®çš„å•ä½æ˜¯ çº³ç§’ï¼Œæ‰€ä»¥è¿™äº›æŠ½æ ·æ€»å…±èŠ±è´¹æ—¶é—´æ˜¯ 2.79 ç§’ï¼ˆ2540000000ns + 250000000ns = 2790000000ns = 2.79sï¼‰ã€‚\nåŒæ ·çš„ï¼Œç°åœ¨å½“æ¯æ¬¡è°ƒç”¨ iterate æ—¶æ·»åŠ æ ‡ç­¾ï¼Œç”¨ pprof åˆ†æï¼Œè¿™äº›æ•°æ®çœ‹èµ·æ¥å°±ä¸å¤ªä¸€æ ·ï¼Œæ‰“å°å‡ºå¸¦æœ‰æ ‡ç­¾çš„æŠ½æ ·åˆ†ææ—¥å¿—ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36  runtime.main main.main main.iteratePerTenant runtime/pprof.Do main.iteratePerTenant.func1 main.iterate 10000000 --- runtime.main main.main main.iteratePerTenant runtime/pprof.Do main.iteratePerTenant.func1 main.iterate 2540000000 map[tenant:[tenant1]] --- runtime.main main.main main.iteratePerTenant runtime/pprof.Do main.iteratePerTenant.func1 main.iterate 10000000 map[tenant:[tenant1]] --- runtime.main main.main main.iteratePerTenant runtime/pprof.Do main.iteratePerTenant.func1 main.iterate 260000000 map[tenant:[tenant2]] --- Total: 2.82s   å°†æ‰€æœ‰æŠ½æ ·åŠ èµ·æ¥æ€»å…±èŠ±è´¹äº† 2.82 ç§’ï¼Œç„¶è€Œï¼Œå› ä¸ºè°ƒç”¨ iterate æ—¶ï¼Œæˆ‘ä»¬æ·»åŠ äº†æ ‡ç­¾ï¼Œæ‰€ä»¥æˆ‘ä»¬èƒ½åœ¨ç»“æœä¸­åŒºåˆ†å“ªä¸ª tanant å¯¼è‡´äº†æ›´å¤šçš„ CPU å ç”¨ã€‚ç°åœ¨æˆ‘ä»¬å¯ä»¥è¯´ tenant1 èŠ±è´¹äº†æ€»æ—¶é—´ 2.82 ç§’ä¸­çš„ 2.55 ç§’ï¼ˆ2540000000ns + 10000000ns = 2550000000ns = 2.55sï¼‰ã€‚\nè®©æˆ‘ä»¬çœ‹çœ‹æŠ½æ ·çš„åŸå§‹æ—¥å¿—ï¼ˆè¿˜æœ‰å®ƒä»¬çš„å…ƒæ•°æ®ï¼‰ï¼Œå»æ›´æ·±å…¥ç†è§£ä¸€ä¸‹å®ƒä»¬çš„æ ¼å¼ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49  $ protoc --decode perftools.profiles.Profile --proto_path ~/src/github.com/google/pprof/proto profile.proto \u003c cpuprofile.pb | grep -A12 \"sample {\" sample { location_id: 1 location_id: 2 location_id: 3 location_id: 4 location_id: 5 value: 1 value: 10000000 } sample { location_id: 1 location_id: 2 location_id: 3 location_id: 4 location_id: 5 value: 254 value: 2540000000 label { key: 14 str: 15 } } sample { location_id: 6 location_id: 2 location_id: 3 location_id: 4 location_id: 5 value: 1 value: 10000000 label { key: 14 str: 15 } } sample { location_id: 1 location_id: 2 location_id: 3 location_id: 7 location_id: 5 value: 26 value: 260000000 label { key: 14 str: 16 } }   æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ¯ä¸ªæŠ½æ ·éƒ½ç”±è®¸å¤š ID ç»„æˆï¼Œè¿™äº› ID æŒ‡å‘å®ƒä»¬åœ¨åˆ†ææ—¥å¿— location æ•°ç»„ä¸­çš„ä½ç½®ï¼Œé™¤äº†è¿™äº› ID è¿˜æœ‰å‡ ä¸ªå€¼ã€‚ä»”ç»†çœ‹ä¸‹ printprofile.go ç¨‹åºï¼Œä½ ä¼šå‘ç°å®ƒä½¿ç”¨äº†æ¯ä¸ªæŠ½æ ·çš„æœ€åä¸€ä¸ªæŠ½æ · valueã€‚ å®é™…ä¸Šï¼ŒGo çš„ CPU åˆ†æå™¨ä¼šè®°å½•ä¸¤ä¸ª valueï¼Œç¬¬ä¸€ä¸ªä»£è¡¨è¿™ä¸ªè°ƒç”¨æ ˆåœ¨ä¸€æ¬¡åˆ†æåŒºé—´è¢«è®°å½•æ ·æœ¬çš„æ•°é‡ï¼Œç¬¬äºŒä¸ªä»£è¡¨å®ƒèŠ±è´¹äº†å¤šå°‘çº³ç§’ã€‚pprof çš„å®šä¹‰æè¿°å½“æ²¡è®¾ç½® default_sample_type æ—¶ï¼ˆåœ¨ Go çš„ CPU é…ç½®ä¸­è®¾ç½®ï¼‰ï¼Œå°±ä½¿ç”¨æ‰€æœ‰ value ä¸­çš„æœ€åä¸€ä¸ªï¼Œå› æ­¤æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ä»£è¡¨çº³ç§’çš„ value è€Œä¸æ˜¯æ ·æœ¬æ•°çš„ valueã€‚æœ€åï¼Œæˆ‘ä»¬å¯ä»¥æ‰“å°å‡ºæ ‡ç­¾ï¼Œå®ƒæ˜¯ pprof å®šä¹‰çš„ä¸€ä¸ªä»¥å­—ç¬¦ä¸²ç»„æˆçš„å­—å…¸ã€‚\næœ€åï¼Œå› ä¸ºç”¨æ ‡ç­¾å»åŒºåˆ†æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥è®©å¯è§†åŒ–ç•Œé¢æ›´ç›´è§‚ã€‚\nä½ å¯ä»¥åœ¨ Polar Signals ç½‘ç«™è¿™é‡Œå»æ›´è¯¦ç»†çš„äº†è§£ä¸Šé¢çš„è¿™æ¬¡åˆ†æï¼šhttps://share.polarsignals.com/2063c5c/\nç»“è®º pprof æ ‡ç­¾æ˜¯å¸®åŠ©æˆ‘ä»¬ç†è§£ä¸åŒæ‰§è¡Œè·¯å¾„éå¸¸æœ‰ç”¨çš„æ–¹æ³•ï¼Œè®¸å¤šäººå–œæ¬¢åœ¨å¤šç§Ÿæˆ·ç³»ç»Ÿä¸­ä½¿ç”¨å®ƒä»¬ï¼Œç›®çš„å°±æ˜¯ä¸ºäº†èƒ½å¤Ÿå®šä½åœ¨ä»–ä»¬ç³»ç»Ÿä¸­å‡ºç°çš„ç”±æŸä¸€ä¸ªç§Ÿæˆ·å¯¼è‡´çš„æ€§èƒ½é—®é¢˜ã€‚å°±åƒå¼€å¤´è¯´çš„ï¼Œåªéœ€è¦è°ƒç”¨ pprof.Do å°±å¯ä»¥äº†ã€‚\nPolar Signals æä¾›çš„æŒç»­åˆ†æå·¥å…·ä¹Ÿæ”¯æŒäº† pprof æ ‡ç­¾çš„å¯è§†åŒ–ç•Œé¢å’ŒæŠ¥å‘Šï¼Œå¦‚æœä½ æƒ³å‚ä¸ä¸ªäººä½“éªŒç‰ˆè¯·ç‚¹å‡»ï¼šç”³è¯·èµ„æ ¼\n via: https://www.polarsignals.com/blog/posts/2021/04/13/demystifying-pprof-labels-with-go/\nä½œè€…ï¼šFrederic Branczyk è¯‘è€…ï¼šh1z3y3 æ ¡å¯¹ï¼šæ ¡å¯¹è€…ID\næœ¬æ–‡ç”± GCTT åŸåˆ›ç¼–è¯‘ï¼ŒGo ä¸­æ–‡ç½‘ è£èª‰æ¨å‡º\n","description":"","tags":null,"title":"ä¸œéš…å·²é€/æ¡‘æ¦†éæ™š","uri":"/posts/demysitifying-pprof-labels-with-go/"}]