[{"categories":null,"content":"æ‰˜ å›¢é˜Ÿ leader çš„ç¦ï¼Œç™½å«–äº†ä»Šå¹´ GopherCon China çš„ç¥¨ï¼Œå’Œå†å±Šå¤§ä¼šç›¸æ¯”ï¼Œç¬¬äºŒå¤©åˆ†äº†ä¸¤ä¸ªåˆ†ä¼šåœºï¼Œ åˆ†äº«ä¸åŒçš„å†…å®¹ï¼Œå‚ä¼šè€…å¯ä»¥æ ¹æ®ä¸ªäººå…´è¶£è‡ªè¡Œé€‰æ‹©å‚åŠ ã€‚\nç„¶è€Œä¸å¾—ä¸è¯´ï¼Œæœ¬æ¬¡å’Œä¹‹å‰å‡ æ¬¡çš„åˆ†äº«å®‰æ’ç›¸æ¯”ï¼Œå¤šäº†ä¸€äº›é’ˆå¯¹è‡ªå·±å…¬å¸äº§å“çš„æ¨å¹¿ã€‚ ä½†ä¸ç®¡æ€ä¹ˆè¯´ï¼Œæ”¶è·è¿˜æ˜¯æœ‰çš„ï¼Œå°è±¡æ¯”è¾ƒæ·±çš„ talk æœ‰ PingCAP CEO é»„ä¸œæ—­åˆ†äº«çš„ã€Šå…¨é“¾è·¯å¯è§‚æµ‹æ€§ï¼šä»åº”ç”¨åˆ° Go Runtimeã€‹ï¼Œæ¯”è¾ƒæœ‰è¶£ï¼›è¿˜æœ‰æ›¹å¤§æ›¹æ˜¥æ™–åˆ†äº«çš„ã€ŠGo è¯­è¨€çš„æŠ¢å¼è°ƒåº¦ã€‹ï¼Œå†…å®¹ç¡®å®å¾ˆå·å¾ˆæ·±å…¥ã€‚\nå¤§ä¼šæåˆ°çš„å¾ˆå¤šæŠ€æœ¯å…¶å®æˆ‘ä»¬å›¢é˜Ÿä¹Ÿæ—©å·²ç»å®è·µä½¿ç”¨ï¼Œæ¯”å¦‚é¸Ÿçªåœ¨ã€Šæ·±å…¥æ¢ç©¶ Go Moduleã€‹ä¸­åˆ†äº«å¦‚ä½•ä½¿ç”¨ GOPRIVATE ä»è€Œä½¿ç”¨è‡ªå·±çš„ç§æœ‰ä»“åº“ï¼› Grab å…¬å¸åœ¨åˆ†äº«ã€ŠImproving Go Backend Developer Experience In Grabã€‹ä¸­æåˆ°çš„ CI/CD æˆ‘ä»¬ä¹Ÿå·²ç»åœ¨æˆ‘ä»¬å¤§å¤šæ•°é¡¹ç›®ä¸­ä½¿ç”¨ã€‚\næˆ‘æ€»ç»“äº†è®²å¸ˆæåˆ°æœ€å¤šçš„å…³é”®è¯ï¼Œä¸€æ–¹é¢ä¹Ÿèƒ½ä½“ç°ä¸šå†…ç›®å‰åœ¨æµè¡Œä»€ä¹ˆï¼š\n K8Sï¼šæ¯‹åº¸ç½®ç–‘ï¼Œäº‘åŸç”Ÿæ—¶ä»£çš„ç‹è€… API Gatewayã€L7 Banlancerï¼šå¤„ç†å—åŒ—å‘æµé‡ï¼Œä¸¤è€…å®šä½ä¸åŒåˆæœ‰ä¸€éƒ¨åˆ†åŠŸèƒ½é‡åˆï¼ŒAPISIXã€BFE æœ€è¿‘ä¸¤å¹´å¤§å®¶è®¨è®ºæ¯”è¾ƒå¤šçš„å¼€æºé¡¹ç›® Service Meshï¼šå¤„ç†ä¸œè¥¿å‘æµé‡ï¼ŒEnvoyã€xDSåè®® å¾®æœåŠ¡ï¼šä¸å†èµ˜è¿° Tracingã€Metricsã€Loggingï¼šåŠæ—¶å‘ç°æœåŠ¡é—®é¢˜ CI/CDï¼šåŠ å¿«åº”ç”¨çš„éƒ¨ç½²é€Ÿåº¦ï¼Œè§£æ”¾å¼€å‘è€…åŒæ‰‹ä¸å¯æˆ–ç¼ºçš„æ­¥éª¤ Rustï¼šæ²¡é”™ï¼ŒGopher å¤§ä¼šç¡®å®å¤šæ¬¡æåˆ°äº† Rust è¯­è¨€  æˆ‘é’ˆå¯¹æˆ‘è‡ªå·±å‚åŠ çš„å‡ ä¸ªåˆ†äº«è°ˆä¸€è°ˆæˆ‘è‡ªå·±çš„ä¸€äº›æ„Ÿå—å’Œæ€è€ƒã€‚\nå¤§ä¼šçš„ PPTï¼Œå¯ä»¥åœ¨è¿™é‡Œè·å–ï¼šhttps://mp.weixin.qq.com/s/734ac0JeQtSrzcmZ1-so8w\nã€ŠGeneric in goã€‹ å¤§ä¼šç¬¬ä¸€åœºæ˜¯è·Ÿè€å¤–è¿çº¿ï¼Œä½†æ˜¯ç›´æ’­æ–­æ–­ç»­ç»­ï¼Œæˆ‘è¿™è¹©è„šå¬åŠ›æ›´å¬ä¸æ‡‚äº†ï¼Œä½“éªŒä¸å¤ªå¥½ã€‚ä½†æ˜¯é’ˆå¯¹æ³›å‹è¿™ä¸ªä¸»é¢˜ï¼Œåœ¨ç¤¾åŒºä¸­æœ‰å¾ˆå¤šè®¨è®ºï¼Œ ä¹Ÿæœ‰ä¸€äº›äº‰è®®ï¼Œä¸»è¦æ˜¯æ³›å‹çš„æ”¯æŒè€…ï¼Œå’Œè®¤ä¸ºåŠ å…¥æ³›å‹ç ´å golang ç®€å•ç‰¹æ€§çš„åå¯¹è€…ï¼Œ ä¸è¿‡ä»Šå¹´å®˜æ–¹æ­£å¼æå‡ºå°†æ³›å‹ç‰¹æ€§åŠ å…¥ Go çš„ proposal https://blog.golang.org/generics-proposal https://github.com/golang/go/issues/43651 ã€‚ è€Œä¸”ï¼Œgolang å®˜æ–¹å·²ç»åœ¨ master åˆ†æ”¯å®ç°äº†æ³›å‹ï¼Œé¸Ÿçªä¹Ÿåœ¨æ—©äº›æ—¶é—´ç»™å‡ºäº† Go æ³›å‹å°é²œçš„æ–¹æ³•ï¼šhttps://colobu.com/2021/03/22/try-go-generic/\nã€ŠMOSNåœ¨äº‘åŸç”Ÿçš„æ¢ç´¢å’Œå®è·µã€‹ MOSN æ˜¯ä¸€æ¬¾ç½‘ç»œä»£ç†è½¯ä»¶ï¼Œå¯ä»¥ä¸ä»»ä½•æ”¯æŒ xDS API çš„ Service Mesh é›†æˆï¼Œä¹Ÿå…·å¤‡å—åŒ—å‘æµé‡ä»£ç†çš„åŠŸèƒ½ã€‚ ä¸å¾—ä¸ä½©æœ MOSN å¯¹ CGO çš„è°ƒç ”å’Œä½¿ç”¨æ·±åº¦ï¼Œå…¶ä¸­ä»‹ç»çš„ MOEï¼ˆMosn on Envoyï¼‰ä½¿å¾— MOSN åº•å±‚ç½‘ç»œå…·å¤‡ C åŒç­‰å¤„ç†èƒ½åŠ›çš„åŒæ—¶ï¼Œ åˆèƒ½ä½¿ä¸Šå±‚ä¸šåŠ¡å¯é«˜æ•ˆå¤ç”¨ MOSN çš„å¤„ç†èƒ½åŠ›åŠ Golang é«˜æ•ˆçš„å¼€å‘æ•ˆç‡ã€‚\nã€Šæµ…è°ˆå…¨é“¾è·¯å¯è§‚æµ‹æ€§ï¼šä»åº”ç”¨åˆ°Go Runtimeã€‹ æˆ‘ä¸ªäººè®¤ä¸ºå¾ˆä¸é”™çš„åˆ†äº«ï¼Œç”±æµ…å…¥æ·±å¸¦é¢†å¤§å®¶å¦‚ä½• Trace In Go Runtimeï¼ŒPPT é£æ ¼è¿˜æœ‰è®²è§£é£æ ¼éƒ½å¾ˆæœ‰è¶£ã€‚ æœ€ç»ˆçš„å®ç°æ–¹å¼æˆ‘ä¹Ÿæ²¡æƒ³åˆ°å’Œæˆ‘æœ€è¿‘ç¿»è¯‘çš„è¿™ç¯‡æ–‡ç« ç›¸å…³ ï¼ˆ æ·±å…¥å‰–æ Golang Pprof æ ‡ç­¾ ï¼‰ï¼Œ ç¿»è¯‘æ—¶ä¹Ÿæ²¡æƒ³åˆ°è¿˜èƒ½è¿™ä¹ˆç©ï¼Œå½“æ—¶å¬äº†ç¡®å®ä¹Ÿä»¤äººçœ¼å‰ä¸€äº®ã€‚\nã€ŠImproving Go Backend Developer Experience in Grabã€‹ ç®—æ˜¯ Grab å…¬å¸çš„ç»éªŒåˆ†äº«ï¼Œå…³äºæ•´ä¸ªè½¯ä»¶çš„è®¾è®¡ã€å¼€å‘å’Œäº¤ä»˜æµç¨‹ã€‚å’Œ Go çš„å…³ç³»å¹¶ä¸æ˜¯å¾ˆå¤§ï¼Œå¾ˆå¤šç»éªŒç»éªŒä¹Ÿå¾ˆéš¾è¿›è¡Œå¤åˆ¶ã€‚\nã€Šåˆ©ç”¨å¤œèºæ‰©å±•èƒ½åŠ›æ‰“é€ å…¨æ–¹ä½ç›‘æ§ä½“ç³»ã€‹ å¤œèºä¹Ÿæ˜¯å›½å†…åº”ç”¨å¾ˆç«çš„ç›‘æ§ç³»ç»Ÿï¼Œå’Œ Prometheus ç›¸æ¯”ï¼Œæœ‰ä¸€äº›ä¼˜åŠ¿å§ï¼Œæ¯”å¦‚æœ‰è‡ªèº«çš„å‘Šè­¦å¹³å°ï¼Œ æˆ‘ä»¬å›¢é˜Ÿå†…éƒ¨ä½¿ç”¨çš„åŸºäº Prometheus åˆå¦å¤–å¼€å‘çš„ä¸€å¥—æŠ¥è­¦ç³»ç»Ÿï¼Œç›®å‰ä¹Ÿæ˜¯å¼€æºï¼Œåœ°å€æ˜¯ https://github.com/Qihoo360/doraemon ã€‚ æ›´å¤šå¤œèºå’ŒPrometheusçš„å¯¹æ¯”å¯ä»¥çœ‹è¿™ç¯‡åˆ†ææ–‡ç« ï¼Œã€Šå¤œèºä¸Prometheusçš„å¯¹æ¯”ã€‹ ã€‚ ä½†æ˜¯å¹²è´§å¤ªå°‘ï¼Œå…¨ç¨‹ä»‹ç»äº§å“åŠŸèƒ½ã€‚\nã€Šå¦‚ä½•æ„å»ºæ˜“äºæ‹†åˆ†çš„å•ä½“åº”ç”¨ã€‹ ç”±äºé¡¹ç›®çš„ç‰¹æ®Šæ€§ï¼Œæˆ‘ä»¬ç»„å†…å¤§å¤šæ•°åº”ç”¨éƒ½æ˜¯å•ä½“åº”ç”¨ï¼Œä¹Ÿåœ¨å°è¯•åšä¸€äº›å¾®æœåŠ¡çš„æ‹†åˆ†å·¥ä½œã€‚è¿™ä¸ªåˆ†äº«è™½ç„¶æ²¡è®² DDDï¼Œ ä½†ä»ç°å®ä¾‹å­å‡ºå‘ï¼Œåˆ†æä¸€ä¸ªåº”ç”¨å¦‚ä½•è®¾è®¡ã€å¼€å‘ï¼ŒåŒæ—¶å®æˆ˜è®²è§£äº†å¦‚ä½•ä½¿ç”¨ go-kit æ„å»ºä¸€ä¸ªç®€å•çš„åº”ç”¨ï¼Œè¿˜æ˜¯æœ‰äº›æ”¶è·ã€‚\nã€Šæ·±å…¥æ¢ç´¢Go Module: å®è·µã€æŠ€å·§å’Œé™·é˜±ã€‹ å†…å®¹å……å®è¿˜ä¸é”™ï¼Œä¸€äº›æ¯”è¾ƒå¸¸è§çš„ç”¨æ³•æˆ‘ä»¬å›¢é˜Ÿä¹Ÿä¸€ç›´åœ¨ç”¨ï¼Œæˆ‘ä»¬çš„ä¹Ÿæ˜¯å»å¹´å¼€å§‹ä» dep å…¨éƒ¨æ¢åˆ°äº† go moduleï¼Œ æ‰€ä»¥ç§¯ç´¯äº†ä¸€äº› go module çš„ä½¿ç”¨ç»éªŒï¼Œæ‰€ä»¥æ•´ä¸ªåˆ†äº«å¬ä¸‹æ¥ä¹Ÿæ¯”è¾ƒè½»æ¾ã€‚æˆ‘ä¹‹å‰ä¹Ÿå†™äº†ä¸€ç¯‡æ–‡ç« ä»‹ç»å¦‚ä½•è®© go module ä½¿ç”¨ gitlab ç§æœ‰ä»“åº“ï¼šhttps://h1z3y3.me/posts/go-private-git-repository/ ã€‚ é¸Ÿçªè¿˜ä»‹ç»äº†ä¸€äº›ä¹‹å‰åŸºæœ¬æ²¡ç”¨è¿‡çš„å­å‘½ä»¤ï¼Œæ¯”å¦‚ go mod graphã€go mod whyï¼Œæ”¶è·æœ€å¤§çš„æ˜¯ç»ˆäºå¼„æ˜ç™½äº† go module æ‹‰å–ä¾èµ–åŒ…çš„ç­–ç•¥ã€‚\nã€Šæ·±å…¥ç†è§£ BFEã€‹ ä¹Ÿç®—æ˜¯æ¨å¹¿åˆ†äº«ï¼Œä»‹ç» BFE äº§å“ï¼Œæ²¡ä»€ä¹ˆå¹²è´§ã€‚\næˆ‘ä»¬ 19 å¹´ä¹Ÿå¼€æºäº†ä¸€ä¸ªä¸ƒå±‚è½¬å‘çš„ä»£ç† ã€ŒHTTPS Layerã€ ï¼Œ å’Œ BEF ç›¸æ¯”ï¼ŒåŠŸèƒ½åŸºæœ¬ç±»ä¼¼ï¼Œç”šè‡³å¯ä»¥è¯´ 80% ç›¸åŒã€‚æœ€å¤§çš„åŒºåˆ«å°±æ˜¯ BFE åŸºäº Go ç”Ÿæ€ï¼Œæˆ‘ä»¬åŸºäº Openresty ç”Ÿæ€ã€‚ æˆ–è®¸ç¼ºå°‘äº†ç»´æŠ¤å’Œå®£ä¼ ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰è·å¾—å¾ˆé«˜çš„å…³æ³¨ï¼Œæ¯”è¾ƒå¯æƒœã€‚å…¶å® HTTPS Layer åœ¨æˆ‘ä»¬å…¬å¸å†…éƒ¨ä¹Ÿå¾—åˆ°äº†ç”Ÿäº§ç¯å¢ƒçš„éªŒè¯ï¼Œ åšäº†ä¸€äº›åˆ†å¸ƒå¼éƒ¨ç½²ä¹‹åï¼Œç›®å‰æˆ‘ä»¬å•æœºæˆ¿å³°å€¼ QPS ä¹Ÿèƒ½è¾¾åˆ° 10w QPSï¼Œå½“ç„¶è¿˜é¢„ç•™äº†ä¸€äº› buffer çš„æƒ…å†µä¸‹ã€‚\nã€ŠGo è¯­è¨€çš„æŠ¢å å¼è°ƒåº¦ã€‹ æ›¹å¤§æ›¹æ˜¥æ™–çš„åˆ†äº«ï¼Œå¾ˆå·ï¼Œè®²è§£äº† GMP æ¨¡å‹ä»¥åŠ Golang çš„æŠ¢å å¼è°ƒåº¦ï¼Œå¹²è´§åˆå¤ªå¹²äº†ï¼Œæœ‰ç‚¹å¸æ”¶ä¸äº†ã€‚ ä¸»è¦å†…å®¹æ˜¯ golang 1.14 ç‰ˆæœ¬å‰åä¸¤ç§ä¸åŒçš„æŠ¢å å¼è°ƒåº¦æ¨¡å‹ï¼Œæ·±å…¥æºç ï¼Œé€šè¿‡ç¼–è¯‘åçš„æ±‡ç¼–è¿›è¡Œè®²è§£ï¼ŒæŒºæœ‰æ·±åº¦çš„ï¼Œä¹‹åä¼šå†ä»”ç»†ç ”ç©¶è¿™æ–¹é¢çš„çŸ¥è¯†ã€‚\nã€ŠK8Sç§æœ‰äº‘å»ºè®¾å®è·µã€‹ å…¬å¸çš„ç»éªŒåˆ†äº«ï¼Œä¸å¯å¤åˆ¶ï¼Œå› ä¸ºå¤ªå®¢åˆ¶åŒ–äº†ã€‚ä¸ºäº†è¿åˆå…¬å¸ç°æœ‰å¹³å°ï¼ŒæŠ›å¼ƒäº†å¾ˆå¤š k8s çš„åŸç”Ÿç”¨æ³•ï¼Œæˆ‘ä¸ªäººè§‰å¾—å¾ˆé¸¡è‚‹ã€‚ é’ˆå¯¹ç§æœ‰äº‘å»ºè®¾ï¼Œ360 å…¶å®èµ°åœ¨æ¯”è¾ƒå‰é¢ï¼Œä¹‹å‰è¿˜å¼€æºäº† k8s çš„å¤šé›†ç¾¤ç®¡ç†å¹³å° Wayne ï¼Œå¼€æºåˆæœŸè·å¾—å¾ˆå¤šå…³æ³¨ï¼Œä½†æ˜¯åç»­ä¹Ÿä¸æ²¡æœ‰æŒç»­æ›´æ–°ï¼Œä¹Ÿæ¯”è¾ƒå¯æƒœã€‚\nã€ŠGo å¦‚ä½•åŠ©åŠ›ä¼ä¸šè¿›è¡Œå¾®æœåŠ¡è½¬å‹ã€‹ go-zero çš„ç»´æŠ¤è€…ä¸‡ä¿Šå³°åˆ†äº«ï¼Œè™½ç„¶ç»éªŒä¹‹è°ˆå¤šä¸€äº›ï¼Œå…³äº Go çš„è®¨è®ºå°‘ï¼Œä½†æ˜¯æ•´ä½“åˆ†äº«æ˜¯å¥½åˆ†äº«ï¼Œæ”¶è·å¾ˆå¤šï¼Œ ä¹Ÿæœ‰äº›ä¹‹åå¯å€Ÿé‰´çš„ç‚¹ã€‚ä¸å¤šèµ˜è¿°ï¼ŒPPT å¯ä»¥ä¸‹è½½ä¸‹æ¥çœ‹ï¼Œé‡Œé¢æŒºè¯¦ç»†ã€‚\næ€»ç»“ ä»æ•´ä½“æ¥çœ‹ï¼Œæœ¬æ¬¡ Gopher å¤§ä¼šè¿˜ç®—æˆåŠŸï¼Œæœ‰äº›å°æ’æ›²ï¼Œä½†æ˜¯ç‘•ä¸æ©ç‘œã€‚åªæ˜¯å¸Œæœ›ä¹‹åèƒ½å°‘ä¸€äº›å¯¹äºäº§å“çš„æ¨å¹¿å’Œä»‹ç»ï¼Œ å¯¹äºäº§å“åŠŸèƒ½å®Œå…¨å¯ä»¥å»çœ‹å„è‡ªäº§å“çš„æ–‡æ¡£ï¼Œæˆ‘èƒ½æƒ³åˆ°ä»–ä»¬å’Œ Go å”¯ä¸€ç›¸å…³çš„å°±æ˜¯è¿™ä¸ªäº§å“æ˜¯ Go å†™çš„ã€‚ ä½œä¸ºæŠ€æœ¯äººèŠ±äº†é’±åˆ°è¿™é‡Œæƒ³çœ‹åˆ°çš„è¿˜æ˜¯å¯¹äº Go çš„ä¸€äº›å¯å€Ÿé‰´å’Œå¯å¤åˆ¶çš„å®è·µç»éªŒï¼Œè¿™ä¸ªå…¶å®çœ‹ä¸‹å›½å¤–çš„ gopher å¤§ä¼šå°±èƒ½ä½“ä¼šåˆ°äº†ã€‚\nä¸ç®¡æ€ä¹ˆè¯´ï¼Œè™½ç„¶å‘¨æœ«ä¸¤å¤©éƒ½æ²¡ç¡æ‡’è§‰ï¼Œ7ç‚¹æ—©èµ·å°±å¾€ä¼šåœºèµ¶ï¼Œä½†æ˜¯æœ€åè¿˜æ˜¯å¿ƒæ»¡æ„è¶³ã€‚æˆ‘çœ‹å¤§ä¼šå…¨ç¨‹æœ‰å½•åƒï¼Œ å¤§å®¶å¯ä»¥å‚è€ƒæˆ‘çš„æ€è€ƒï¼Œå»ç¿»ç¿»å¯¹åº”çš„ PPT æˆ–è€…è§†é¢‘ï¼Œç›¸ä¿¡ä¹Ÿèƒ½æœ‰æ‰€æ”¶è·ï¼\n","description":"","tags":["Golang"],"title":"2021 åŒ—äº¬ Gopher å¤§ä¼š","uri":"/posts/gophercon-china-2021/"},{"categories":null,"content":"åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†äº†è§£åå‘ä»£ç†ï¼Œå®ƒçš„åº”ç”¨åœºæ™¯ä»¥åŠå¦‚ä½•åœ¨ Golang ä¸­å®ç°å®ƒã€‚\nåå‘ä»£ç†æ˜¯ä½äº Web æœåŠ¡å™¨å‰é¢å¹¶å°†å®¢æˆ·ç«¯ï¼ˆä¾‹å¦‚ Web æµè§ˆå™¨ï¼‰çš„è¯·æ±‚è½¬å‘åˆ° Web æœåŠ¡å™¨çš„æœåŠ¡å™¨ã€‚ å®ƒä»¬è®©ä½ å¯ä»¥æ§åˆ¶æ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚å’Œæ¥è‡ªæœåŠ¡å™¨çš„å“åº”ï¼Œç„¶åæˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªç‰¹ç‚¹ï¼Œ å¯ä»¥å¢åŠ ç¼“å­˜ã€åšä¸€äº›æé«˜ç½‘ç«™çš„å®‰å…¨æ€§æªæ–½ç­‰ã€‚\nåœ¨æˆ‘ä»¬æ·±å…¥äº†è§£æœ‰å…³åå‘ä»£ç†ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å¿«é€Ÿçœ‹æ™®é€šä»£ç†ï¼ˆä¹Ÿç§°ä¸ºæ­£å‘ä»£ç†ï¼‰å’Œåå‘ä»£ç†ä¹‹é—´çš„åŒºåˆ«ã€‚\nåœ¨æ­£å‘ä»£ç†ä¸­ï¼Œä»£ç†ä»£è¡¨åŸå§‹å®¢æˆ·ç«¯ä»å¦ä¸€ä¸ªç½‘ç«™æ£€ç´¢æ•°æ®ã€‚ å®ƒä½äºå®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰å‰é¢ï¼Œå¹¶ç¡®ä¿æ²¡æœ‰åç«¯æœåŠ¡å™¨ç›´æ¥ä¸å®¢æˆ·ç«¯é€šä¿¡ã€‚ æ‰€æœ‰å®¢æˆ·ç«¯çš„è¯·æ±‚éƒ½é€šè¿‡ä»£ç†è¢«è½¬å‘ï¼Œå› æ­¤æœåŠ¡å™¨åªä¸è¿™ä¸ªä»£ç†é€šä¿¡ï¼ˆæœåŠ¡å™¨ä¼šè®¤ä¸ºä»£ç†æ˜¯å®ƒçš„å®¢æˆ·ç«¯ï¼‰ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä»£ç†å¯ä»¥éšè—çœŸæ­£çš„å®¢æˆ·ç«¯ã€‚\nå¦ä¸€æ–¹é¢ï¼Œåå‘ä»£ç†ä½äºåç«¯æœåŠ¡å™¨çš„å‰é¢ï¼Œç¡®ä¿æ²¡æœ‰å®¢æˆ·ç«¯ç›´æ¥ä¸æœåŠ¡å™¨é€šä¿¡ã€‚ æ‰€æœ‰å®¢æˆ·ç«¯è¯·æ±‚éƒ½ä¼šé€šè¿‡åå‘ä»£ç†å‘é€åˆ°æœåŠ¡å™¨ï¼Œå› æ­¤å®¢æˆ·ç«¯å§‹ç»ˆåªä¸åå‘ä»£ç†é€šä¿¡ï¼Œ è€Œä»ä¸ä¼šç›´æ¥ä¸å®é™…æœåŠ¡å™¨é€šä¿¡ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä»£ç†å¯ä»¥éšè—åç«¯æœåŠ¡å™¨ã€‚ å‡ ä¸ªå¸¸è§çš„åå‘ä»£ç†æœ‰ Nginxï¼Œ HAProxyã€‚\nåå‘ä»£ç†ä½¿ç”¨åœºæ™¯ è´Ÿè½½å‡è¡¡ï¼ˆLoad balancingï¼‰ï¼š åå‘ä»£ç†å¯ä»¥æä¾›è´Ÿè½½å‡è¡¡è§£å†³æ–¹æ¡ˆï¼Œå°†ä¼ å…¥çš„æµé‡å‡åŒ€åœ°åˆ†å¸ƒåœ¨ä¸åŒçš„æœåŠ¡å™¨ä¹‹é—´ï¼Œä»¥é˜²æ­¢å•ä¸ªæœåŠ¡å™¨è¿‡è½½ã€‚\né˜²æ­¢å®‰å…¨æ”»å‡»ï¼š ç”±äºçœŸæ­£çš„åç«¯æœåŠ¡å™¨æ°¸è¿œä¸éœ€è¦æš´éœ²å…¬å…± IPï¼Œæ‰€ä»¥ DDoS ç­‰æ”»å‡»åªèƒ½é’ˆå¯¹åå‘ä»£ç†è¿›è¡Œï¼Œ è¿™èƒ½ç¡®ä¿åœ¨ç½‘ç»œæ”»å‡»ä¸­å°½é‡å¤šçš„ä¿æŠ¤ä½ çš„èµ„æºï¼ŒçœŸæ­£çš„åç«¯æœåŠ¡å™¨å§‹ç»ˆæ˜¯å®‰å…¨çš„ã€‚\nç¼“å­˜ï¼š å‡è®¾ä½ çš„å®é™…æœåŠ¡å™¨ä¸ç”¨æˆ·æ‰€åœ¨çš„åœ°åŒºè·ç¦»æ¯”è¾ƒè¿œï¼Œé‚£ä¹ˆä½ å¯ä»¥åœ¨å½“åœ°éƒ¨ç½²åå‘ä»£ç†ï¼Œå®ƒå¯ä»¥ç¼“å­˜ç½‘ç«™å†…å®¹å¹¶ä¸ºå½“åœ°ç”¨æˆ·æä¾›æœåŠ¡ã€‚\nSSL åŠ å¯†ï¼š ç”±äºä¸æ¯ä¸ªå®¢æˆ·ç«¯çš„ SSL é€šä¿¡ä¼šè€—è´¹å¤§é‡çš„è®¡ç®—èµ„æºï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨åå‘ä»£ç†å¤„ç†æ‰€æœ‰ä¸ SSL ç›¸å…³çš„å†…å®¹ï¼Œ ç„¶åé‡Šæ”¾ä½ çœŸæ­£æœåŠ¡å™¨ä¸Šçš„å®è´µèµ„æºã€‚\nGolang å®ç° 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39  import ( \"log\" \"net/http\" \"net/http/httputil\" \"net/url\" ) // NewProxy takes target host and creates a reverse proxy // NewProxy æ‹¿åˆ° targetHost åï¼Œåˆ›å»ºä¸€ä¸ªåå‘ä»£ç† func NewProxy(targetHost string) (*httputil.ReverseProxy, error) { url, err := url.Parse(targetHost) if err != nil { return nil, err } return httputil.NewSingleHostReverseProxy(url), nil } // ProxyRequestHandler handles the http request using proxy // ProxyRequestHandler ä½¿ç”¨ proxy å¤„ç†è¯·æ±‚ func ProxyRequestHandler(proxy *httputil.ReverseProxy) func(http.ResponseWriter, *http.Request) { return func(w http.ResponseWriter, r *http.Request) { proxy.ServeHTTP(w, r) } } func main() { // initialize a reverse proxy and pass the actual backend server url here  // åˆå§‹åŒ–åå‘ä»£ç†å¹¶ä¼ å…¥çœŸæ­£åç«¯æœåŠ¡çš„åœ°å€  proxy, err := NewProxy(\"http://my-api-server.com\") if err != nil { panic(err) } // handle all requests to your server using the proxy  // ä½¿ç”¨ proxy å¤„ç†æ‰€æœ‰è¯·æ±‚åˆ°ä½ çš„æœåŠ¡  http.HandleFunc(\"/\", ProxyRequestHandler(proxy)) log.Fatal(http.ListenAndServe(\":8080\", nil)) }   æ˜¯çš„æ²¡é”™ï¼è¿™å°±æ˜¯åœ¨ Go ä¸­åˆ›å»ºä¸€ä¸ªç®€å•çš„åå‘ä»£ç†æ‰€éœ€çš„å…¨éƒ¨å†…å®¹ã€‚ æˆ‘ä»¬ä½¿ç”¨æ ‡å‡†åº“ net/http/httputil åˆ›å»ºäº†ä¸€ä¸ªå•ä¸»æœºçš„åå‘ä»£ç†ã€‚ åˆ°è¾¾æˆ‘ä»¬ä»£ç†æœåŠ¡å™¨çš„ä»»ä½•è¯·æ±‚éƒ½ä¼šè¢«ä»£ç†åˆ°ä½äº http://my-api-server.comã€‚ å¦‚æœä½ å¯¹ Go æ¯”è¾ƒç†Ÿæ‚‰ï¼Œè¿™ä¸ªä»£ç çš„å®ç°ä¸€ç›®äº†ç„¶ã€‚\nä¿®æ”¹å“åº” HttpUtil åå‘ä»£ç†ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ç§éå¸¸ç®€å•çš„æœºåˆ¶æ¥ä¿®æ”¹æˆ‘ä»¬ä»æœåŠ¡å™¨è·å¾—çš„å“åº”ï¼Œ å¯ä»¥æ ¹æ®ä½ çš„åº”ç”¨åœºæ™¯æ¥ç¼“å­˜æˆ–æ›´æ”¹æ­¤å“åº”ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹åº”è¯¥å¦‚ä½•å®ç°ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18  // NewProxy takes target host and creates a reverse proxy func NewProxy(targetHost string) (*httputil.ReverseProxy, error) { url, err := url.Parse(targetHost) if err != nil { return nil, err } proxy := httputil.NewSingleHostReverseProxy(url) proxy.ModifyResponse = modifyResponse() return proxy, nil } func modifyResponse() func(*http.Response) error { return func(resp *http.Response) error { resp.Header.Set(\"X-Proxy\", \"Magical\") return nil } }   å¯ä»¥åœ¨ modifyResponse æ–¹æ³•ä¸­çœ‹åˆ° ï¼Œæˆ‘ä»¬è®¾ç½®äº†è‡ªå®šä¹‰ Header å¤´ã€‚ åŒæ ·ï¼Œä½ ä¹Ÿå¯ä»¥è¯»å–å“åº”ä½“æ­£æ–‡ï¼Œå¹¶å¯¹å…¶è¿›è¡Œæ›´æ”¹æˆ–ç¼“å­˜ï¼Œç„¶åå°†å…¶è®¾ç½®å›å®¢æˆ·ç«¯ã€‚\nåœ¨ modifyResponse ä¸­ï¼Œå¯ä»¥è¿”å›ä¸€ä¸ªé”™è¯¯ï¼ˆå¦‚æœä½ åœ¨å¤„ç†å“åº”å‘ç”Ÿäº†é”™è¯¯ï¼‰ï¼Œ å¦‚æœä½ è®¾ç½®äº† proxy.ErrorHandler, modifyResponse è¿”å›é”™è¯¯æ—¶ä¼šè‡ªåŠ¨è°ƒç”¨ ErrorHandler è¿›è¡Œé”™è¯¯å¤„ç†ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25  // NewProxy takes target host and creates a reverse proxy func NewProxy(targetHost string) (*httputil.ReverseProxy, error) { url, err := url.Parse(targetHost) if err != nil { return nil, err } proxy := httputil.NewSingleHostReverseProxy(url) proxy.ModifyResponse = modifyResponse() proxy.ErrorHandler = errorHandler() return proxy, nil } func errorHandler() func(http.ResponseWriter, *http.Request, error) { return func(w http.ResponseWriter, req *http.Request, err error) { fmt.Printf(\"Got error while modifying response: %v \\n\", err) return } } func modifyResponse() func(*http.Response) error { return func(resp *http.Response) error { return errors.New(\"response body is invalid\") } }   ä¿®æ”¹è¯·æ±‚ ä½ ä¹Ÿå¯ä»¥åœ¨å°†è¯·æ±‚å‘é€åˆ°æœåŠ¡å™¨ä¹‹å‰å¯¹å…¶è¿›è¡Œä¿®æ”¹ã€‚ åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†ä¼šåœ¨è¯·æ±‚å‘é€åˆ°æœåŠ¡å™¨ä¹‹å‰æ·»åŠ äº†ä¸€ä¸ª Header å¤´ã€‚ åŒæ ·çš„ï¼Œä½ å¯ä»¥åœ¨è¯·æ±‚å‘é€ä¹‹å‰å¯¹å…¶è¿›è¡Œä»»ä½•æ›´æ”¹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23  // NewProxy takes target host and creates a reverse proxy func NewProxy(targetHost string) (*httputil.ReverseProxy, error) { url, err := url.Parse(targetHost) if err != nil { return nil, err } proxy := httputil.NewSingleHostReverseProxy(url) originalDirector := proxy.Director proxy.Director = func(req *http.Request) { originalDirector(req) modifyRequest(req) } proxy.ModifyResponse = modifyResponse() proxy.ErrorHandler = errorHandler() return proxy, nil } func modifyRequest(req *http.Request) { req.Header.Set(\"X-Proxy\", \"Simple-Reverse-Proxy\") }   å®Œæ•´ä»£ç  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66  package main import ( \"errors\" \"fmt\" \"log\" \"net/http\" \"net/http/httputil\" \"net/url\" ) // NewProxy takes target host and creates a reverse proxy func NewProxy(targetHost string) (*httputil.ReverseProxy, error) { url, err := url.Parse(targetHost) if err != nil { return nil, err } proxy := httputil.NewSingleHostReverseProxy(url) originalDirector := proxy.Director proxy.Director = func(req *http.Request) { originalDirector(req) modifyRequest(req) } proxy.ModifyResponse = modifyResponse() proxy.ErrorHandler = errorHandler() return proxy, nil } func modifyRequest(req *http.Request) { req.Header.Set(\"X-Proxy\", \"Simple-Reverse-Proxy\") } func errorHandler() func(http.ResponseWriter, *http.Request, error) { return func(w http.ResponseWriter, req *http.Request, err error) { fmt.Printf(\"Got error while modifying response: %v \\n\", err) return } } func modifyResponse() func(*http.Response) error { return func(resp *http.Response) error { return errors.New(\"response body is invalid\") } } // ProxyRequestHandler handles the http request using proxy func ProxyRequestHandler(proxy *httputil.ReverseProxy) func(http.ResponseWriter, *http.Request) { return func(w http.ResponseWriter, r *http.Request) { proxy.ServeHTTP(w, r) } } func main() { // initialize a reverse proxy and pass the actual backend server url here  proxy, err := NewProxy(\"http://my-api-server.com\") if err != nil { panic(err) } // handle all requests to your server using the proxy  http.HandleFunc(\"/\", ProxyRequestHandler(proxy)) log.Fatal(http.ListenAndServe(\":8080\", nil)) }   åå‘ä»£ç†éå¸¸å¼ºå¤§ï¼Œå¦‚æ–‡ç« ä¹‹å‰æ‰€è¯´ï¼Œå®ƒæœ‰å¾ˆå¤šåº”ç”¨åœºæ™¯ã€‚ä½ å¯ä»¥æ ¹æ®ä½ çš„æƒ…å†µå¯¹å…¶è¿›è¡Œè‡ªå®šä¹‰ã€‚ å¦‚æœé‡åˆ°ä»»ä½•é—®é¢˜ï¼Œæˆ‘éå¸¸ä¹æ„ä¸ºä½ æä¾›å¸®åŠ©ã€‚ å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰è¶£ï¼Œè¯·åˆ†äº«ä¸€ä¸‹ï¼Œè®©æ›´å¤š gopher å¯ä»¥é˜…è¯»ï¼ éå¸¸æ„Ÿè°¢ä½ çš„é˜…è¯»ã€‚\n via: https://blog.joshsoftware.com/2021/05/25/simple-and-powerful-reverseproxy-in-go/\nä½œè€…ï¼šAnuj Verma è¯‘è€…ï¼šh1z3y3 æ ¡å¯¹ï¼šæ ¡å¯¹è€…ID\næœ¬æ–‡ç”± GCTT åŸåˆ›ç¼–è¯‘ï¼ŒGo ä¸­æ–‡ç½‘ è£èª‰æ¨å‡º\n","description":"","tags":["golang"],"title":"Go ç®€å•è€Œå¼ºå¤§çš„åå‘ä»£ç†ï¼ˆReverse Proxyï¼‰","uri":"/posts/simple-and-powerful-reverse-proxy-in-golang/"},{"categories":null,"content":"While using values in a html template, my colleague faced a problem that the values in \u003cscript\u003e tags were all escaped. So the template developer can not use the values in javascript. It just looks like this:\n// ... \u003cscript type=\"text/json\" id=\"channel\" ch=\"recommend\" tk=\"\"\u003e [\u0026#34;news\u0026#34;,\u0026#34;comedy\u0026#34;,\u0026#34;cartoon\u0026#34;,\u0026#34;tech\u0026#34;,\u0026#34;travelling\u0026#34;,\u0026#34;fashion\u0026#34;,\u0026#34;photograph\u0026#34;,\u0026#34;household\u0026#34;,\u0026#34;movies\u0026#34;,\u0026#34;foods\u0026#34;,\u0026#34;military\u0026#34;,\u0026#34;health\u0026#34;,\u0026#34;test\u0026#34;] \u003c/script\u003e // ... I tried to find out the reason. So I copied the template values in other HTML tags, like \u003cdiv\u003e, rather than in \u003cscript\u003e. It rendered correctly, and was not escaped:\n// ... \u003cdiv\u003e [\"news\",\"comedy\",\"cartoon\",\"tech\",\"travelling\",\"fashion\",\"photograph\",\"household\",\"movies\",\"foods\",\"military\",\"health\",\"test\"] \u003cdiv\u003e // ... I start google the reason. At first, I thought it was because the values given template is wrong, it had already been escaped before the page rendering. I found some reasons in google, they said using json.NewEncoder() instead of using json.Marshal(). So it can SetEscapeHTML(false) before encode the data. This is the example code:\n1 2 3 4 5 6 7 8 9 10  func toRawJson(v interface{}) (string, error) { buf := new(bytes.Buffer) enc := json.NewEncoder(buf) enc.SetEscapeHTML(false) err := enc.Encode(\u0026v) if err != nil { return \"\", err } return strings.TrimSuffix(buf.String(), \"\\n\"), nil }   I tried it, but didnâ€™t work either.\nNow, letâ€™s think about for a moment. Only \u003cscript\u003e has the problem, but other html tags did not. So if I could say the value is actually correct, but the template rendered in wrong ?\nI started google the problems about template render but not the wrong value.\nThen I found the html/template official document:\nLetâ€™s see its introduction: html/template introduction:\n This package wraps package text/template so you can share its template API to parse and execute HTML templates safely.\ntmpl, err := template.New(\"name\").Parse(...) // Error checking elided err = tmpl.Execute(out, data) If successful, tmpl will now be injection-safe. Otherwise, err is an error defined in the docs for ErrorCode.\nHTML templates treat data values as plain text which should be encoded so they can be safely embedded in an HTML document. The escaping is contextual, so actions can appear within JavaScript, CSS, and URI contexts. The security model used by this package assumes that template authors are trusted, while Executeâ€™s data parameter is not. More details are provided below.\nExample\nimport \"text/template\" ... t, err := template.New(\"foo\").Parse(`{{define \"T\"}}Hello, {{.}}!{{end}}`) err = t.ExecuteTemplate(out, \"T\", \"\u003cscript\u003ealert('you have been pwned')\u003c/script\u003e\") produces\nHello, \u003cscript\u003ealert('you have been pwned')\u003c/script\u003e! but the contextual autoescaping in html/template\nimport \"html/template\" ... t, err := template.New(\"foo\").Parse(`{{define \"T\"}}Hello, {{.}}!{{end}}`) err = t.ExecuteTemplate(out, \"T\", \"\u003cscript\u003ealert('you have been pwned')\u003c/script\u003e\") produces safe, escaped HTML output\nHello, \u0026lt;script\u0026gt;alert(\u0026#39;you have been pwned\u0026#39;)\u0026lt;/script\u0026gt;!  ğŸ¥³ğŸ¥³ğŸ¥³ Now we find out the reason, but how we solve this problem?\nMaybe I could provide a function to unescape the value in templates.\n1 2 3 4 5 6 7  r := gin.Default() funcMap[\"unescapeHTML\"] = func(s string) template.HTML { return template.HTML(s) } r.SetFuncMap(funcMap)   Then you can use it in templates as below:\n// ... \u003cscript type=\"text/json\" id=\"channel\" ch=\"recommend\" tk=\"\"\u003e {{ .channel_data | unescapeHTML }} \u003c/script\u003e // ... Finally, it works. When the template is loaded, the value wonâ€™t be escaped!\n// ... \u003cscript type=\"text/json\" id=\"channel\" ch=\"recommend\" tk=\"\"\u003e [\"news\",\"comedy\",\"cartoon\",\"tech\",\"travelling\",\"fashion\",\"photograph\",\"household\",\"movies\",\"foods\",\"military\",\"health\",\"test\"] \u003c/script\u003e // ... Hope this helps you!! Thanks for reading :)\n","description":"","tags":["Golang"],"title":"Unescape values in html templates using golang","uri":"/posts/go-html-template-script-unescape/"},{"categories":null,"content":"Go Module ä½¿ç”¨ gitlab ç§æœ‰ä»“åº“ åŒ…ç®¡ç†æ˜¯ Go ä¸€ç›´è¢«è¯Ÿç—…åšçš„ä¸å¥½çš„åŠŸèƒ½ã€‚åœ¨ 1.11 ä¹‹å‰ï¼Œgo get ç¼ºä¹å¯¹ä¾èµ–åŒ…ç‰ˆæœ¬ç®¡ç†å’Œ reproducible build çš„æ”¯æŒã€‚ å½“æ—¶åœ¨ Go ç¤¾åŒºå½“æ—¶è¯ç”Ÿäº†è®¸å¤šå¥½ç”¨çš„å·¥å…·ï¼Œæ¯”å¦‚ glideï¼Œdep ç­‰ã€‚ åœ¨ 1.11 ç‰ˆæœ¬ä¹‹åï¼Œ Go å¼•å…¥äº† Go Moduleï¼Œå†ä¹Ÿæ²¡æœ‰ GOPATH çš„é™åˆ¶ï¼Œä½ å¯ä»¥éšæ„åœ¨ä»»ä½•è·¯å¾„å†™é¡¹ç›®ï¼Œä½†æ˜¯æ­¤æ—¶å¯¹ç§æœ‰ä»“åº“çš„æ”¯æŒè¿˜ä¸æ˜¯å¾ˆå¥½ã€‚ è€Œåœ¨ 1.13 ç‰ˆæœ¬ä¹‹åï¼Œ Go å¯¹ Go Module åˆè¿›è¡Œäº†ä¼˜åŒ–ï¼Œæ”¯æŒäº† GOPRIVATE ç¯å¢ƒå˜é‡ï¼Œå¯ä»¥æŒ‡å®šç§æœ‰ä»“åº“çš„åœ°å€ï¼Œä½¿ç”¨ååˆ†ä¾¿æ·ã€‚ å¤§å®¶åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œæˆ–å¤šæˆ–å°‘åœ°ä¼šé‡åˆ°ä¸€äº›é—®é¢˜ï¼Œä¸‹é¢æˆ‘é’ˆå¯¹è‡ªå·±é‡åˆ°çš„é—®é¢˜è¿›è¡Œæ€»ç»“ã€‚\ngo get å¦‚æœåœ¨æ²¡æœ‰è¿›è¡Œä»»ä½•è®¾ç½®çš„æƒ…å†µä¸‹ç›´æ¥æ‰§è¡Œ go get your.gitlab.com/pkg/exampleï¼Œä½ å¾ˆå¯èƒ½ä¼šé‡åˆ°ä»¥ä¸‹é”™è¯¯ï¼š\ngo get: module your.gitlab.com/pkg/example: git ls-remote -q origin in /go/pkg/mod/cache/vcs/a39fc2dbfb0a9645950d24df5d7e922bb7a6a877aecfe2b20f74b96385a83109: exit status 128: fatal: could not read Username for 'https://your.gitlab.com': terminal prompts disabled Confirm the import path was entered correctly. If this is a private repository, see https://golang.org/doc/faq#git_https for additional information. å…¶å®é”™è¯¯æç¤ºå·²ç»æŠŠè§£å†³æ–¹æ¡ˆç»™åˆ°æˆ‘ä»¬äº†ï¼Œæˆ‘ä»¬åªéœ€è¦ç‚¹å‡» https://golang.org/doc/faq#git_https æŸ¥çœ‹å³å¯ã€‚\nä¸‹é¢æ˜¯åŸæ–‡ï¼š\n Why does â€œgo getâ€ use HTTPS when cloning a repository? Companies often permit outgoing traffic only on the standard TCP ports 80 (HTTP) and 443 (HTTPS), blocking outgoing traffic on other ports, including TCP port 9418 (git) and TCP port 22 (SSH). When using HTTPS instead of HTTP, git enforces certificate validation by default, providing protection against man-in-the-middle, eavesdropping and tampering attacks. The go get command therefore uses HTTPS for safety.\nGit can be configured to authenticate over HTTPS or to use SSH in place of HTTPS. To authenticate over HTTPS, you can add a line to the $HOME/.netrc file that git consults:\nmachine github.com login USERNAME password APIKEY For GitHub accounts, the password can be a personal access token. Git can also be configured to use SSH in place of HTTPS for URLs matching a given prefix. For example, to use SSH for all GitHub access, add these lines to your ~/.gitconfig:\n[url \"ssh://git@github.com/\"] insteadOf = https://github.com/  å¤§æ¦‚æ„æ€æ˜¯ï¼ŒHTTPS æ›´å®‰å…¨ï¼Œæ‰€ä»¥ go get å‘½ä»¤ä½¿ç”¨ HTTPSã€‚\nå¦‚æœä½ è¦ç”¨ HTTPSï¼Œé‚£ä½ å°±éœ€è¦é…ç½® HTTPS çš„ç”¨æˆ·åå’Œå¯†ç ï¼š\nmachine github.com login USERNAME password APIKEY å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ sshï¼Œéœ€è¦ä¿®æ”¹ä½ çš„ git é…ç½®ï¼Œ\nä¿®æ”¹å½“å‰ç”¨æˆ·çš„ ~/.gitconfigï¼Œæ·»åŠ ï¼š\n[url \"ssh://git@your.gitlab.com/\"] insteadOf = https://your.gitlab.com/ å¦å¤–æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ä¹Ÿèƒ½è¾¾åˆ°åŒæ ·çš„æ•ˆæœï¼š\n1  git config --global url.\"git@your.gitlab.com/\".insteadof \"https://your.gitlab.com/\"   æ“ä½œå®Œä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ go get äº†ï¼Œä½¿ç”¨ go get -v å¯ä»¥å±•ç¤ºæ‰§è¡Œæ—¥å¿—ã€‚\nGONOPROXY ä¼—æ‰€å‘¨çŸ¥ï¼Œå›½å†…ç”¨æˆ·å¤§å¤šè®¾ç½®ä»£ç†ï¼Œæˆ‘ä»¬åœ¨ Go 1.12 ä¹‹å‰å¦‚æœä½¿ç”¨ GOPROXY è¿™ä¸ªç¯å¢ƒå˜é‡è®¾ç½®ä»£ç†ï¼Œå¹¶ä½¿ç”¨ç§æœ‰ä»“åº“ï¼Œå¾ˆæœ‰å¯èƒ½ä¼šé‡åˆ°ä¸‹é¢çš„é”™è¯¯ï¼š\ngo get your.gitlab.com/pkg/example: module your.gitlab.com/pkg/example: reading https://goproxy.cn/your.gitlab.com/pkg/example/@v/list: 404 Not Found è¿™æ˜¯å› ä¸ºä»£ç†æœåŠ¡ä¸å¯èƒ½è®¿é—®åˆ°æˆ‘ä»¬çš„ç§æœ‰ä»£ç ä»“åº“ï¼Œæ‰€ä»¥æŠ¥é”™ 404ã€‚è€Œä¸”ï¼Œå°±ç®—ä½¿ç”¨ä¸Šæ–‡æåˆ°çš„ ssh é‰´æƒä¹Ÿä¸è¡Œã€‚\nGo 1.13 åå¯ä»¥è®¾ç½® GONOPROXY è¿™ä¸ªç¯å¢ƒå˜é‡æ¥æŒ‡å®šä¸ä½¿ç”¨ä»£ç†çš„åŸŸåï¼Œæ”¯æŒé€—å·åˆ†éš”å¤šä¸ªå€¼ã€‚\nGONOSUMDB go mod éœ€è¦å¯¹ä¸‹è½½åçš„ä¾èµ–åŒ…è¿›è¡Œ checksum æ ¡éªŒï¼Œå½“ä½ çš„ git ä»“åº“æ˜¯å¼€æ”¾çš„è¯æ²¡é—®é¢˜ï¼Œä½†æ˜¯å¦‚æœæ˜¯ä¸å¯è®¿é—®çš„ç§æœ‰ä»“åº“ï¼Œç”šè‡³åœ¨å…¬å¸å†…ç½‘ã€‚ å¾ˆå¯èƒ½å‡ºç°æ ¡éªŒå¤±è´¥çš„é”™è¯¯ï¼š\n1 2  get \"your.gitlab.com/pkg/example\": found meta tag get.metaImport{Prefix:\"your.gitlab.com/pkg/example\", VCS:\"git\", RepoRoot:\"https://your.gitlab.com/pkg/example.git\"} at //your.gitlab.com/pkg/example?go-get=1 verifying your.gitlab.com/pkg/example@v0.0.0: your.gitlab.com/pkg/example@v0.0.0: reading https://sum.golang.org/lookup/your.gitlab.com/pkg/example@v0.0.0: 410 Gone   å’Œä»£ç†ä¸€æ ·ï¼Œæˆ‘ä»¬çš„ç§æœ‰ä»“åº“å¯¹ sum.golang.org æ˜¯ä¸å¯è§çš„ï¼Œæ‰€ä»¥è‚¯å®šæ²¡åŠæ³•æ‰§è¡Œå®‰å…¨æ ¡éªŒã€‚\nåŒæ ·çš„åœ¨ Go 1.13 åå¯ä»¥è®¾ç½® GONOSUMDB ç¯å¢ƒå˜é‡æŒ‡å®šè·³è¿‡æ ¡éªŒçš„çš„åŸŸåï¼Œæ”¯æŒé€—å·åˆ†å‰²å¤šä¸ªå€¼ã€‚\nGOPRIVATE æœ€å Go 1.13 è¿˜å¼•å…¥çš„ GOPRIVATE ç¯å¢ƒå˜é‡ï¼Œå¯ä»¥è¯´è®¾ç½®åä¸€åŠ³æ°¸é€¸ï¼Œèƒ½è‡ªåŠ¨è·³è¿‡ proxy server å’Œ æ ¡éªŒæ£€æŸ¥ï¼Œ è¿™ä¸ªå˜é‡å€¼ä¹Ÿæ”¯æŒé€—å·åˆ†å‰²ï¼Œå¯ä»¥å¡«å†™å¤šä¸ªå€¼ï¼Œå¦‚ï¼š\n1  GOPRIVATE=*.corp.example.com,your.gitlab.com   å½“ç„¶ï¼Œè®¾ç½® GOPRIVATE ä¹‹åï¼Œè¿˜å¯ä»¥åœ¨é€šè¿‡ GONOPROXY å’Œ GONOSUMDB æ¥å•ç‹¬è¿›è¡Œæ§åˆ¶ï¼Œ\nä¸è¿‡éœ€è¦æ³¨æ„ä¸‹ GOPRIVATE å¤±æ•ˆçš„é—®é¢˜ï¼Œ\nä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœå…¬å¸å†…éƒ¨æœ‰ç§æœ‰ä»“åº“ï¼šyour.corp.comï¼Œå¦‚æœè¿™æ ·è®¾ç½®ï¼š\n1 2 3  GOPRIVATE=your.corp.com GOPROXY=https://goproxy.cn GONOPROXY=none   å› ä¸º GONOPROXY çš„å€¼æ˜¯ noneï¼Œé‚£ä¹ˆç”¨æˆ·è¿˜æ˜¯ä¼šä» GOPROXY çš„åœ°å€ä¸‹è½½æ‰€æœ‰ç§æœ‰å’Œå…±æœ‰çš„ä»“åº“ï¼Œ æ­¤æ—¶å¯èƒ½è¿˜æ˜¯ä¼šæŠ¥é”™ï¼ŒGONOSUMDB åŒç†ï¼Œå¤§å®¶æ³¨æ„ä¸€ä¸‹è¿™ä¸ªé—®é¢˜ã€‚\n","description":"","tags":["Golang"],"title":"go module ä½¿ç”¨ gitlab ç§æœ‰ä»“åº“","uri":"/posts/go-private-git-repository/"},{"categories":null,"content":"è¯‘è€…æ³¨ï¼šåœ¨ç¿»è¯‘è¿™ç¯‡æ–‡ç« ä¹‹å‰ï¼Œæˆ‘è‡ªå·±å…¶å®å¯¹ Bob å¤§å”çš„ Clean Architecture ä¹Ÿåšè¿‡ä¸€äº›ç ”ç©¶ï¼Œåœ¨é¡¹ç›®ä¸­å®è·µä¹‹åï¼Œ ä¹Ÿç¡®ç¡®å®å®ä½“éªŒåˆ°äº†åˆ†å±‚çš„é­…åŠ›ã€‚åœ¨å±‚ä¸å±‚ä¹‹é—´å°†ä¾èµ–è¿›è¡Œéš”ç¦»ï¼Œå„ä¸ªå±‚åªå…³æ³¨è‡ªå·±æœ¬èº«çš„é€»è¾‘ï¼Œ æ‰€ä»¥èƒ½è®©å¼€å‘è€…åªå…³æ³¨æœ¬å±‚çš„ä¸šåŠ¡é€»è¾‘ï¼Œ ä¹Ÿæ›´å®¹æ˜“è¿›è¡Œå•å…ƒæµ‹è¯•ï¼Œæ— å½¢ä¸­å°±æé«˜äº†ä½ ä»£ç çš„è´¨é‡å’Œå¯é˜…è¯»æ€§ã€‚ æˆ‘è§‰å¾—å¦‚æœä½ å¯¹è‡ªå·±çš„ä»£ç æœ‰è¿½æ±‚ï¼Œå°±ä¸€å®šè¦å»å­¦ä¹ ä¸€ä¸‹ Clean Architectureã€‚ å½“ç„¶å¦ä¸€æ–¹é¢ï¼ŒClean Architecture ä¹Ÿä¸æ˜¯é“¶å¼¹ï¼Œåœ¨å¤æ‚çš„é¡¹ç›®ä¸­ç¡®å®èƒ½å¸®åŠ©æˆ‘ä»¬è§£è—•ï¼Œä½†æ˜¯å¦‚æœä½ çš„é¡¹ç›®éå¸¸ç®€å•ï¼Œ é‚£ä¼ ç»Ÿçš„ MVC å°±è¶³å¤Ÿäº†ï¼Œå°±åƒæœ¬æ–‡ä½œè€…æœ€åè¯´çš„ï¼Œåƒä¸‡ä¸è¦è®©ç®€å•çš„äº‹æƒ…å˜å¤æ‚ã€‚ å¦å¤–ï¼Œå…¶å®å¯¹äº Golang çš„é¡¹ç›®ç»„ç»‡æ–¹å¼ï¼Œgithub ä¸Šé¢ç«è®¸å¤š star éå¸¸å¤šçš„é¡¹ç›®ï¼Œå¤§å¤šå¼€ç®±å³ç”¨ï¼Œ æ¯”å¦‚ï¼š go-gin-api ï¼ˆå›½äººå¼€æºçš„ï¼‰ã€ go-clean-arch ï¼Œè¿™é‡Œåˆ†äº«ç»™å¤§å®¶ï¼Œä¹Ÿæ˜¯ç»™å¤§å®¶æä¾›æ›´å¤šçš„é€‰æ‹©ã€‚\nä»¥ä¸‹æ˜¯åŸæ–‡ï¼š\nä¸€ä¸ª main.go æ–‡ä»¶ï¼Œå‡ ä¸ª HTTP handler å°±å¯ä»¥æ„å»ºä¸€ä¸ªæ–°çš„ HTTP æœåŠ¡ã€‚ç„¶è€Œï¼Œå½“ä½ å¼€å§‹æ·»åŠ æ›´å¤šçš„è·¯ç”±è§„åˆ™ï¼Œ å¼€å§‹å°†ä¸åŒçš„åŠŸèƒ½æ‹†åˆ†åˆ°ä¸åŒçš„æ–‡ä»¶ä¸­ï¼Œå¯èƒ½ä¼šéšå¤„åˆ›å»ºå¥½å¤š packages ï¼Œä½†æ˜¯ä½ ä¸ç¡®å®šé•¿è¿œæ¥çœ‹å°†ä¼šå®ƒä»¬æ€æ ·å‘å±•ï¼Œ åŒæ—¶ä½ ä¹Ÿå¸Œæœ›å®ƒä»¬èƒ½å¤Ÿéšç€æœåŠ¡å¢é•¿è€Œæœ‰æ„ä¹‰ã€‚\nè¿™å‡ å¹´æˆ‘ç»å†è¿‡å‡ æ¬¡è¿™æ ·çš„åœºæ™¯ï¼Œåæ¥è¯»äº†ä¸€äº›æ–‡ç« ã€åšå®¢è¿˜æœ‰ Robert Martin çš„ Clean Architecture (å¹²å‡€æ¶æ„)ï¼Œ æˆ‘æ‰¾åˆ°äº†ä¸€ç§é€‚åˆæˆ‘çš„é€šç”¨çš„ä»£ç ç»“æ„ï¼Œæ‰€ä»¥æˆ‘æƒ³æˆ‘åº”è¯¥åˆ†äº«å‡ºæ¥ã€‚éœ€è¦æ³¨æ„çš„æ˜¯å®ƒå¯èƒ½å¹¶ä¸èƒ½åˆšå¥½é€‚åˆä½ çš„åº”ç”¨åœºæ™¯ï¼Œç‰¹åˆ«æ˜¯ä¸€äº›ç‰¹åˆ«ç®€å•çš„æœåŠ¡ï¼Œ æ¯”å¦‚è¯´ä¸€ä¸ª main.go æ–‡ä»¶ï¼Œå‡ ä¸ª packages å°±å·²ç»è¶³å¤Ÿçš„æœåŠ¡ã€‚\nè®©æˆ‘ä»¬ç›´æ¥å¼€å§‹ï¼\næ¦‚è§ˆ Go-Service - cmd/ - api/ - pkg/ - api/ - db/ - services/ - serviceA/ - serviceB/ - ... - utils/ - docker-compose.yml - Dockerfile - Makefile - go.mod - go.sum - \u003cenvironment\u003e.env - README.md - ... æ•´ä¸ªç»“æ„æœ‰ 3 ä¸ªé‡è¦çš„éƒ¨åˆ†ï¼šrootï¼ˆè¯‘è€…æ³¨ï¼šæ ¹ç›®å½•ï¼‰ã€cmd å’Œ pkgã€‚æˆ‘å°†é€ä¸ªè§£é‡Šå„ä¸ªæ–‡ä»¶å¤¹çš„èŒè´£ï¼Œ ç„¶åæˆ‘ä»¬å†æ¥ä»”ç»†çœ‹çœ‹æ¯ä¸ª service (pkg/service/...) å¦‚ä½•ç»„ç»‡ã€‚\nRootï¼ˆæ ¹ç›®å½•ï¼‰ æˆ‘å–œæ¬¢å°†ä¸€äº›å¯åŠ¨å’Œè¿è¡Œçš„ä»£ç æ”¾åˆ°æ ¹ç›®å½•ï¼Œæ¯”å¦‚ï¼šæ„å»ºå·¥å…·ã€é…ç½®æ–‡ä»¶ã€ä¾èµ–ç®¡ç†ç­‰ç­‰ã€‚ å®ƒä¹Ÿæä¾›ç»™é˜…è¯»ä»£ç çš„äººæˆ–å¼€å‘ä»£ç çš„äººä¸€ä¸ªå¾ˆå¥½çš„åˆ‡å…¥ç‚¹ï¼Œä»–ä»¬å¯åŠ¨æœåŠ¡æ‰€éœ€çš„æ‰€æœ‰é…ç½®éƒ½åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ã€‚\nCmd è¿™é‡Œä¼šè¢«åˆ†æˆå‡ ä¸ªç›®å½•ï¼Œæ¯ä¸ªç›®å½•éƒ½æ˜¯æˆ‘ä»¬æ•´ä¸ªæœåŠ¡ä¸€éƒ¨åˆ†ï¼Œæ¯”å¦‚ API æœåŠ¡ï¼Œå®šæ—¶è„šæœ¬ä»»åŠ¡ç­‰ç­‰ã€‚ å®é™…ä¸Šè¿™é‡Œä¼šæœ‰å„å­æœåŠ¡çš„ main packageï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨è¿™é‡Œåˆå§‹åŒ–é…ç½®å’Œæˆ‘ä»¬éœ€è¦çš„ä¾èµ–åŒ…ï¼Œæœ€åå­æœåŠ¡ä¼šè¢«ç¼–è¯‘æˆå¯¹åº”çš„äºŒè¿›åˆ¶æ¥æä¾›æœåŠ¡ã€‚\nPkg è¿™é‡ŒåŒ…å«äº†æˆ‘ä»¬é¡¹ç›®çš„ä¸»è¦éƒ¨åˆ†ï¼šå®šä¹‰æˆ‘ä»¬æœåŠ¡ä¸šåŠ¡é€»è¾‘çš„ä¸€äº› packageã€‚\n  api/\nåœ¨è¿™é‡Œï¼Œæˆ‘å®šä¹‰äº†å¦‚ä½•é€šè¿‡åˆå§‹åŒ–æ•°æ®åº“ï¼ŒæœåŠ¡ï¼ŒHTTPè·¯ç”±å™¨+ä¸­é—´ä»¶æ¥è¿æ¥APIï¼Œå¹¶å®šä¹‰äº†è¿è¡ŒAPIæ‰€éœ€çš„é…ç½®ã€‚ æˆ‘ä¸€èˆ¬ä¼šåŠ ä¸€ä¸ª Start(cfg *Config) å‡½æ•°ï¼Œæä¾›ç»™ cmd/api/main.go è°ƒç”¨ã€‚\n  db/\né¡¾åæ€ä¹‰ï¼Œè¿™é‡Œæ˜¯è¿æ¥ã€è¿ç§»æ•°æ®åº“é€»è¾‘ï¼Œæˆ‘ä¹Ÿå€¾å‘äºå°†ä»»ä½•å…³äºè¿ç§»çš„æ–‡ä»¶å¤¹æˆ–æ–‡ä»¶éƒ½æ”¾åœ¨è¿™é‡Œã€‚\n  utils/\næˆ‘ä¼šå°†ä»»ä½•å¯¹è¯·æ±‚ã€æ—¥å¿—ã€è‡ªå®šä¹‰ä¸­é—´ä»¶ç­‰æä¾›è¾…åŠ©åŠŸèƒ½çš„ pakcage æ”¾åœ¨è¿™é‡Œã€‚æˆ‘è™½ç„¶ä¸å¤ªå–œæ¬¢è¿™ä¸ªåå­—ï¼Œä½†æ˜¯æˆ‘ä¹Ÿæ²¡æ‰¾åˆ°æ›´é€‚åˆå®ƒçš„åå­—äº†ã€‚\n  services/\nè¿™ä¸ªéœ€è¦è¯¦ç»†è§£é‡Šä¸€ä¸‹ï¼Œå› ä¸ºæˆ‘ç”¨ç‰¹å®šçš„æ–¹å¼å»ç»„ç»‡æ‰€æœ‰çš„ serviceã€‚é€šå¸¸æ¥è¯´ï¼Œæ¯ä¸ª package éƒ½å®šä¹‰äº†å„è‡ªæœåŠ¡çš„åŠŸèƒ½ï¼ˆåŸºäºåŠŸèƒ½è€Œä¸æ˜¯å‡½æ•°è¿›è¡Œç»„ç»‡ç»“æ„ï¼‰ã€‚\n  Services è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥çœ‹çœ‹ä»–ä»¬æ˜¯å¦‚ä½•ç»„ç»‡çš„ã€‚æˆ‘ä»¬è¦åˆ›å»ºä¸€ä¸ªæœåŠ¡ï¼Œå¯ä»¥è®©æˆ‘ä»¬ä¿å­˜å¹¶åˆ›å»ºæ–‡ç« ï¼Œä»–çœ‹èµ·æ¥æ˜¯ä¸‹é¢è¿™æ ·ï¼š\n... - Services/ - Article/ - store/ - repo.go - transport/ - http.go - article.go - errors.go - models.go æˆ‘ä»¬å°†æ•°æ®çš„å­˜å‚¨å’Œä¼ è¾“é€»è¾‘åˆ†åˆ°äº†ä¸åŒçš„ packageï¼Œè¿™å¸®åŠ©æˆ‘ä»¬ä¸“æ³¨äºæˆ‘ä»¬çš„ä¸šåŠ¡é€»è¾‘è€Œä¸éœ€è¦å…³å¿ƒæˆ‘ä»¬åº”è¯¥å¦‚ä½•ä¿å­˜æ•°æ®æˆ–è€…å…¶å¦‚ä½•ä¼ é€’ç»™è°ƒç”¨æ–¹ã€‚ æ­¤å¤–ï¼Œå½“æˆ‘ä»¬æƒ³è¦æ”¹å˜æˆ‘ä»¬çš„åº•å±‚å­˜å‚¨æ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦å®šä¹‰å¥½å­˜å‚¨çš„ interfaceï¼Œå°±å¯ä»¥è½»æ¾åœ°æ›´æ¢åº•å±‚å­˜å‚¨ï¼Œ è€Œä¸éœ€è¦ä¿®æ”¹å…¶ä½™çš„é€»è¾‘ï¼ˆ ä¸€ä¸ªç®€å•çš„ ä¾èµ–åè½¬åŸåˆ™ çš„ä¾‹å­ ï¼‰ã€‚\nerror.go å’Œ models.go æ¯”è¾ƒç®€å•ï¼Œå°±ä¸èµ˜è¿°äº†ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ article.go éƒ½æœ‰ä»€ä¹ˆåŠŸèƒ½ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41  package articles import ( \"context\" ) // Repo defines the DB level interaction of articles type Repo interface { Get(ctx context.Context, id string) (Article, error) Create(ctx context.Context, ar ArticleCreateUpdate) (string, error) } // Service defines the service level contract that other services // outside this package can use to interact with Article resources type Service interface { Get(ctx context.Context, id string) (Article, error) Create(ctx context.Context, ar ArticleCreateUpdate) (Article, error) } type article struct { repo Repo } // New Service instance func New(repo Repo) Service { return \u0026article{repo} } // Get sends the request straight to the repo func (s *article) Get(ctx context.Context, id string) (Article, error) { return s.repo.Get(ctx, id) } // Create passes of the created to the repo and retrieves the newly created record func (s *article) Create(ctx context.Context, ar ArticleCreateUpdate) (Article, error) { id, err := s.repo.Create(ctx, ar) if err != nil { return Article{}, err } return s.repo.Get(ctx, id) }   è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨è°ƒç”¨ New() åˆ›å»ºæˆ‘ä»¬ Article æœåŠ¡å®ä¾‹çš„æ—¶å€™ï¼Œä¼ é€’äº†ä¸€ä¸ª Repo interfaceã€‚ è¿™ä¸ªæ˜¯æˆ‘ä»¬åˆšåˆšè¯´çš„è§£è€¦çš„å¥½å¤„ï¼Œè€Œä¸”ä¹Ÿèƒ½å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°å»åšå•å…ƒæµ‹è¯•ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ›å»ºä¸€ä¸ªå®ç°äº† Repo interface çš„ mock å®ä¾‹ï¼Œç„¶åä½œä¸º New() çš„å‚æ•°ä¼ é€’ç»™ Articleï¼Œ è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç»•è¿‡æˆ‘ä»¬çš„æ•°æ®åº“å»å¯¹æˆ‘ä»¬çš„é€»è¾‘è¿›è¡Œå•å…ƒæµ‹è¯•ã€‚\nå¦‚ä½•æš´éœ²æœåŠ¡ è®¾ç½®æ–¹æ³•ä¸éœ€è¦çŸ¥é“æ¯ä¸ªæœåŠ¡çš„æ¥å…¥ç‚¹ã€å¦‚ä½•åˆå§‹åŒ–å­˜å‚¨å±‚æˆ–è€…å…¶ä»–çš„ä¸€äº›äº‹é¡¹ã€‚ åªéœ€è¦å°†æ•°æ®åº“è¿æ¥å’Œè·¯ç”±å®ä¾‹ä¼ é€’ç»™ Activate() æ–¹æ³•ï¼Œ ç„¶å transport package ä¸­çš„è·¯ç”±æ³¨å†Œç¨‹åºå°†å…¶è·¯ç”±è¿›è¡Œæ³¨å†Œï¼Œå°±å¯ä»¥å¯¹å¤–æä¾›æœåŠ¡äº†ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33  package transport import ( \"database/sql\" \"net/http\" \"github.com/gin-gonic/gin\" \"github.com/kott/go-service-example/pkg/services/articles\" \"github.com/kott/go-service-example/pkg/services/articles/store\" ) type handler struct { ArticleService articles.Service } // Activate sets all the services required for articles and registers all the endpoints with the engine. func Activate(router *gin.Engine, db *sql.DB) { articleService := articles.New(store.New(db)) newHandler(router, articleService) } func newHandler(router *gin.Engine, as articles.Service) { h := handler{ ArticleService: as, } router.GET(\"/articles/:id\", h.Get) router.POST(\"/articles/\", h.Create) } func (h *handler) Get(c *gin.Context) {...} func (h *handler) Create(c *gin.Context) {...}   è¿˜è®°å¾—æˆ‘ä¹‹å‰è¯´çš„ Start() æ–¹æ³•ï¼ˆåœ¨ pkg/api ä¸­ï¼‰å—ï¼Ÿ å®ƒæ˜¯æˆ‘ä»¬å¯åŠ¨æˆ‘ä»¬æœåŠ¡å’Œé…ç½®çš„å…¥å£ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50  package api import ( \"context\" \"fmt\" \"github.com/gin-gonic/gin\" \"github.com/kott/go-service-example/pkg/db\" articles \"github.com/kott/go-service-example/pkg/services/articles/transport\" \"github.com/kott/go-service-example/pkg/utils/log\" \"github.com/kott/go-service-example/pkg/utils/middleware\" ) // Config defines what the API requires to run type Config struct { DBHost string DBPort int DBUser string DBPassword string DBName string AppHost string AppPort int } // Start initializes the API server, adding the required middleware and dependent services func Start(cfg *Config) { conn, err := db.GetConnection( cfg.DBHost, cfg.DBPort, cfg.DBUser, cfg.DBPassword, cfg.DBName) if err != nil { log.Error(ctx, \"unable to establish a database connection: %s\", err.Error()) } defer func() { if conn != nil { conn.Close() } }() router := gin.New() router.Use(/* some middleware */) articles.Activate(router, conn) if err := router.Run(fmt.Sprintf(\"%s:%d\", cfg.AppHost, cfg.AppPort)); err != nil { log.Fatal(context.Background(), err.Error()) } }   ä»¥ä¸Šå°±æ˜¯å…¨éƒ¨å†…å®¹ï¼Œå®é™…ä¸Šåªæ˜¯è¯•å›¾å»æ‰¾åˆ°ä¸€ç§æŠ½è±¡çš„æ–¹æ³•ï¼Œä»¥ä¾¿äºè®©ä½ çš„ç¨‹åºæ›´æ˜“è¯»ï¼Œè€Œä¸éœ€è¦å¢åŠ ä½ é¡¹ç›®çš„å¤æ‚åº¦ã€‚\næ€»ç»“ æœ‰è®¸è®¸å¤šå¤šå¯ä»¥ç»„ç»‡é¡¹ç›®çš„æ–¹å¼ï¼Œè¿™ä¸ªæ–¹å¼æ˜¯æˆ‘è®¤ä¸ºæœ€å¥½çš„ã€‚ æ ¹æ®åŠŸèƒ½å°† service åˆ†å¼€æœ‰åŠ©äºä¹‹åè¿›è¡Œä¿®æ”¹æ—¶å®šä¹‰ä¸Šä¸‹æ–‡è¾¹ç•Œå’Œä»£ç å¯¼èˆªã€‚ å°†è·¯ç”±æ³¨å†Œã€ä¸šåŠ¡é€»è¾‘ã€å­˜å‚¨ç­‰æ”¾åˆ°åŒä¸€ä¸ª service å±‚ä¸­ï¼Œä¹Ÿè®©æˆ‘ä»¬æ›´å…³æ³¨ä¸šåŠ¡é€»è¾‘æœ¬èº«å’Œæ›´å®¹æ˜“åœ°è¿›è¡Œæµ‹è¯•ã€‚ ä¸è¦è®©ç®€å•çš„äº‹æƒ…å˜å¤æ‚ï¼å¦‚æœæ‚¨æƒ³èŠ‚çº¦æ—¶é—´ï¼Œé‚£å°±ä¸€å®šè¦è¿™æ ·åšã€‚\næˆ‘å¸Œæœ›èƒ½å¸®åŠ©åˆ°ä½ ï¼Œå¦‚æœä½ æƒ³é˜…è¯»æ‰€æœ‰æºç ï¼Œä½ å¯ä»¥åœ¨ Github ä¸‹è½½ã€‚\n via: https://medium.com/@ott.kristian/how-i-structure-services-in-go-19147ad0e6bd\nä½œè€…ï¼šKristian Ott è¯‘è€…ï¼šh1z3y3\næœ¬æ–‡ç”± GCTT åŸåˆ›ç¼–è¯‘ï¼ŒGo ä¸­æ–‡ç½‘ è£èª‰æ¨å‡º\n","description":"","tags":["golang","clean-arch"],"title":"å¦‚ä½•åœ¨ Go ä¸­ç»„ç»‡é¡¹ç›®ç»“æ„","uri":"/posts/how-i-structure-services-in-go/"},{"categories":null,"content":"ä» 2018 å¹´åº•åˆ° 2021 å¹´åˆï¼Œåšå®¢ä¸€ç›´æç½®ï¼Œè™½ç„¶ä¹Ÿå¶å°”å†™å‡ ç¯‡æ–‡ç« ï¼Œä½†æ˜¯éƒ½å‘å¸ƒåœ¨å›¢é˜Ÿçš„å…¬ä¼—å·ä¸­äº†ï¼Œ ç°åœ¨é‡æ–°å¼€å§‹ç»´æŠ¤è‡ªå·±çš„åšå®¢ï¼Œä¹Ÿä» hexo è½¬ç§»åˆ°äº† hugo ï¼Œ è¿™ä¸¤ä¸ªéƒ½æ˜¯éå¸¸ä¼˜ç§€çš„é™æ€ç½‘ç«™ç”Ÿæˆå·¥å…·ã€‚\nä½†æ˜¯ä¸å¾—ä¸è¯´ï¼Œä½¿ç”¨ hugo ä¹‹åæ„Ÿè§‰æ˜“ç”¨æ€§ä»¥åŠæ–‡ä»¶çš„ç”Ÿæˆé€Ÿåº¦éƒ½ä¼˜äºæˆ‘ä¹‹å‰ä½¿ç”¨çš„ hexo çš„ç‰ˆæœ¬ï¼ˆè¯´çš„ä¸¥è°¨ä¸€äº›ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“ç°åœ¨å¦‚ä½•ï¼‰ã€‚\nåŒæ—¶æˆ‘è¿˜ç»™è‡ªå·±é‡æ–°æŒ‘é€‰äº†ä¸»é¢˜ï¼Œä½¿ç”¨çš„æ˜¯ hugo-theme-meme ï¼Œ å¹¶ä¸”æˆ‘è¿˜åšäº†ä¸€éƒ¨åˆ†è‡ªå®šä¹‰ï¼Œ æ¯”å¦‚ æ–‡ç« åˆ—è¡¨é¡µ çš„æ ·å¼ã€å­—ä½“ã€è¿˜ä¿®æ”¹äº†ç§»åŠ¨ç«¯æ ‡é¢˜è¿‡é•¿æ ·å¼é”™ä¹±çš„ bugï¼Œ å¦å¤–è¿˜æ¥å…¥äº† Gitalkï¼ˆå·²ç»æ pr å¹¶åˆå¹¶ï¼‰å’Œé¡µé¢å³ä¸‹è§’çš„ Webpusher (æ²¡æœ‰æäº¤ PR), ä¸å¾—ä¸è¯´ï¼ŒæŠŠè‡ªå·±çš„åšå®¢è¯„è®ºç”¨ Github Issue æ¥ç»´æŠ¤çš„æƒ³æ³•ä¹Ÿå¤ªèµäº†ï¼\nä½¿ç”¨ Github Action è‡ªåŠ¨å‘å¸ƒ hugo ç«™ç‚¹ å¦‚ä½•ä½¿ç”¨ hugo ä»¥åŠ Github Pages çš„åŸºæœ¬çŸ¥è¯†æˆ‘å°±ä¸å†èµ˜è¿°ï¼Œæœ¬æ–‡ä¸»è¦ç»™å¤§å®¶è®²è§£å¦‚ä½•ä½¿ç”¨ Github Actions è‡ªåŠ¨ç¼–è¯‘ä½ çš„ç«™ç‚¹å®æ—¶å‘å¸ƒï¼Œ æœ¬æ–‡å¯ä»¥å¸®ä½ è§£å†³çš„é—®é¢˜æ˜¯ï¼šå¦‚ä½•ä½¿ç”¨ä½ çš„ *.github.io çš„ä»“åº“ç»´æŠ¤ç«™ç‚¹çš„é…ç½® ï¼ˆconfig.tomlï¼‰ã€ ä½¿ç”¨çš„ä¸»é¢˜ã€æˆ–è€…è‡ªå·± markdown æ ¼å¼çš„åŸæ–‡ï¼Œè€Œä¸éœ€è¦åˆ›å»ºæ–°ä»“åº“ã€‚\nå› ä¸ºæˆ‘è‡ªå·±ä¸€å¼€å§‹ä¹Ÿæƒ³åˆ›å»ºæ–°ä»“åº“ç»´æŠ¤ï¼Œä½†æ˜¯åæ¥æŸ¥é˜…äº†ä¸€äº›ç›¸å…³æ–‡æ¡£åï¼Œå‘ç°å®Œå…¨æ²¡å¿…è¦ï¼Œä¸‹é¢ä»‹ç»ç»™å¤§å®¶ã€‚\nå®šä¹‰ Github Actions ä¸‹é¢æ˜¯æˆ‘ç«™ç‚¹çš„ Hugo Actions çš„é…ç½®æ–‡ä»¶ï¼Œå’ŒåŸå§‹é…ç½®æœ‰äº›å°æ”¹åŠ¨ï¼Œ åŸå§‹é…ç½®æ–‡ä»¶å¯ä»¥åœ¨ è¿™é‡Œ æ‰¾åˆ°\nåœ¨ hugo ç«™ç‚¹çš„æ ¹ç›®å½•åˆ›å»º .github/workflows/gh-pages.yml ï¼Œå¹¶å°†ä¸‹é¢çš„å†…å®¹æ‹·è´è¿›å»ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43  name:github pages# on æ˜¯ Actions çš„è§¦å‘æ¡ä»¶ï¼Œè¿™é‡Œçš„é…ç½®è¯´æ˜å½“ master åˆ†æ”¯æœ‰æäº¤çš„æ—¶å€™ï¼Œæ ¹æ®è¿™ä¸ªé…ç½®æ–‡ä»¶æ‰§è¡Œon:push:branches:- master# Set a branch to deploy# jobs æ˜¯è¦æ‰§è¡Œçš„ä»»åŠ¡ï¼Œæˆ‘ä»¬çœ‹åˆ°ä»–è¦æ‰§è¡Œ deployjobs:deploy:runs-on:ubuntu-18.04# è¿è¡Œç¯å¢ƒsteps:# æ‰§è¡Œæ­¥éª¤# checkout åˆ†æ”¯- uses:actions/checkout@v2with:submodules:true# Fetch Hugo themes (true OR recursive)fetch-depth:0# Fetch all history for .GitInfo and .Lastmod# å®‰è£… hugo- name:Setup Hugouses:peaceiris/actions-hugo@v2with:hugo-version:'latest'# extended: true# ç¼–è¯‘ç«™ç‚¹- name:Buildrun:hugo --minify# åˆ›å»º CNAMEï¼Œè¿™ä¸ªæ˜¯åŸå§‹é…ç½®ä¸­æ²¡æœ‰çš„- uses:\"finnp/create-file-action@master\"env:FILE_NAME:\"./public/CNAME\"FILE_DATA:\"h1z3y3.me\"# å°†ç«™ç‚¹å‘å¸ƒåˆ°å¯¹åº”åˆ†æ”¯- name:Deployuses:peaceiris/actions-gh-pages@v3with:github_token:${{ secrets.GITHUB_TOKEN }}publish_dir:./public  Github Actions æ›´è¯¦ç»†çš„ä½¿ç”¨å¯ä»¥ä» è¿™é‡Œ è·å–ã€‚\nè®¾ç½® hugo ç›®å½•çš„æäº¤ä»“åº“ä¸º *.github.io å¦‚æœä½ çš„ hugo æ²¡åœ¨ github ç»´æŠ¤ï¼Œæ‰§è¡Œ:\n\u003e git remote add origin git@github.com:your/your.github.io.git å¦‚æœå·²ç»åœ¨ github ç»´æŠ¤äº†ï¼Œæ‰§è¡Œï¼š\n\u003e git remote set-url origin git@github.com:your/your.github.io.git å¦‚æœä»“åº“æœ‰æ–‡ä»¶ï¼Œå¾ˆå¯èƒ½ä½ éœ€è¦ä½¿ç”¨ git push -f origin master æ¥å¼ºåˆ¶è¦†ç›–ã€‚\næ¨é€åˆ° Github ä¹‹åï¼Œç°åœ¨ Github çš„ä»£ç å°±æ˜¯ä½  hugo çš„æ ¹ç›®å½•ï¼Œè¿™æ—¶å€™æˆ‘ä»¬çš„ *.github.io çš„ç«™ç‚¹è‚¯å®šä¸å·¥ä½œäº†ï¼Œæ¥ä¸‹æ¥å¾€ä¸‹çœ‹ã€‚\nActions æ‰§è¡Œ æˆ‘ä»¬åˆ‡æ¢åˆ° Actions é€‰é¡¹å¡ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬åˆšæ‰æäº¤çš„å·¥ä½œæµå·²ç»æ‰§è¡Œäº†ï¼Œ åŒæ—¶åœ¨ Code é€‰é¡¹å¡ï¼Œä¹Ÿå¸®æˆ‘ä»¬åˆ›å»ºå¥½äº†ä¸€ä¸ª gh-pages çš„åˆ†æ”¯ï¼Œ åˆ‡æ¢ä¹‹åå‘ç°è¿™ä¸ª hugo å·²ç»ç¼–è¯‘å¥½çš„é™æ€ç«™ç‚¹ã€‚\nä¿®æ”¹ Github Page ç«™ç‚¹çš„é»˜è®¤åˆ†æ”¯ æ²¡é”™ï¼Œ*.github.io çš„ä»“åº“ï¼Œå…è®¸ä½ è‡ªå®šä¹‰ä½ è¦æä¾›é™æ€ç«™ç‚¹çš„åˆ†æ”¯ï¼Œé»˜è®¤æ˜¯ masterï¼Œå¯ä»¥è‡ªå®šä¹‰ä¸ºå…¶ä»–çš„\næ“ä½œæ–¹æ³•ï¼š\nè¿›å…¥ä½ çš„ *.github.io çš„ä»“åº“ï¼Œç‚¹å‡»é¡¹ç›®çš„ Settings ï¼Œå¹¶ç‚¹å‡»å·¦ä¾§çš„ Pagesï¼Œåœ¨è¿™é‡Œä½ å¯ä»¥è‡ªå®šä¹‰ä¸€äº›ä½ ç«™ç‚¹çš„é…ç½®ï¼Œ åœ¨è¿™é‡Œä½ å¯ä»¥è‡ªå·±é€‰æ‹©è‡ªå·±ç«™ç‚¹è¦ä½¿ç”¨çš„åˆ†æ”¯ä»¥åŠç›®å½•ï¼Œæˆ‘ä»¬è¿™é‡Œåˆ‡æ¢ä¸º gh-pages è¿™ä¸ªåˆ†æ”¯ï¼Œå¹¶ç‚¹å‡»ä¿å­˜ã€‚\næ£€æŸ¥ å…¨éƒ¨è®¾ç½®å¥½ä¹‹åï¼Œç¨ç­‰å‡ åˆ†é’Ÿç”Ÿæ•ˆåï¼Œé€šè¿‡æµè§ˆå™¨è®¿é—® your.github.ioï¼Œå°±å¯ä»¥æ­£å¸¸è®¿é—®äº†ï¼Œä¹‹åæ¯æ¬¡æˆ‘ä»¬æ–‡ç« æœ‰æ›´æ–°ï¼Œ ä» master åˆ†æ”¯æäº¤ä¹‹åï¼ŒGithub å°±ä¼šé€šè¿‡ Actions å¸®æˆ‘ä»¬å»ç¼–è¯‘ç„¶åå‘å¸ƒåœ¨ gh-pages åˆ†æ”¯ï¼Œååˆ†æ–¹ä¾¿ã€‚\nå¦‚æœä½ è®¾ç½®äº† CNAMEï¼Œé‚£ä¹ˆè¯·å‚ç…§æˆ‘ Actions é…ç½®ï¼Œé‡Œé¢æœ‰åˆ›å»º CNAME æ–‡ä»¶çš„æ­¥éª¤ï¼Œæ·»åŠ åˆ°ä½ è‡ªå·±çš„é…ç½®å³å¯ã€‚\n","description":"","tags":["hugo"],"title":"ä½¿ç”¨ Github Actions è‡ªåŠ¨å‘å¸ƒ hugo ç«™ç‚¹","uri":"/posts/hugo-auto-deploy-github-with-actions/"},{"categories":null,"content":"Web åçˆ¬æŒ‡å—ï¼ˆæˆ–è‡³å°‘è®©å…¶æ›´éš¾æŠ“å–ï¼‰  æç¤ºï¼šè¿™ç¯‡æ–‡ç« æ˜¯æˆ‘ Stack Overflow è¿™ä¸ªé—®é¢˜ å›ç­”çš„æ‰©å±•ï¼Œ æˆ‘æŠŠå®ƒæ•´ç†åœ¨ Github å› ä¸ºå®ƒå®åœ¨æ˜¯å¤ªé•¿äº†ï¼Œè¶…è¿‡äº† Stack Overflow çš„å­—æ•°é™åˆ¶ï¼ˆæœ€å¤š 3 ä¸‡ä¸ªå­—ï¼Œè¿™æ–‡ç« å·²ç»è¶…è¿‡ 4 ä¸‡å­—ï¼‰\næ¬¢è¿å¤§å®¶ä¿®æ”¹ã€å®Œå–„è¿˜æœ‰åˆ†äº«ï¼Œæœ¬æ–‡ä½¿ç”¨ CC-BY-SA 3.0 è®¸å¯ã€‚\n æœ¬è´¨ä¸Šè¯´ï¼Œé˜²æŠ“çš„ç›®çš„åœ¨äºå¢åŠ è„šæœ¬æˆ–æœºå™¨è·å–ä½ ç½‘ç«™å†…å®¹çš„éš¾åº¦ï¼Œè€Œä¸è¦å½±å“çœŸå®ç”¨æˆ·çš„ä½¿ç”¨æˆ–æœç´¢å¼•æ“çš„æ”¶å½•\nä¸å¹¸çš„æ˜¯è¿™æŒºéš¾çš„ï¼Œä½ éœ€è¦åœ¨é˜²æŠ“å’Œé™ä½çœŸå®ç”¨æˆ·ä»¥åŠæœç´¢å¼•æ“çš„å¯è®¿é—®æ€§ä¹‹é—´åšä¸€ä¸‹æƒè¡¡ã€‚\nä¸ºäº†é˜²çˆ¬ï¼ˆä¹Ÿç§°ä¸ºç½‘é¡µæŠ“å–ã€å±å¹•æŠ“å–ã€ç½‘ç«™æ•°æ®æŒ–æ˜ã€ç½‘ç«™æ”¶å‰²æˆ–è€…ç½‘ç«™æ•°æ®è·å–ï¼‰ï¼Œ äº†è§£ä»–ä»¬çš„å·¥ä½œåŸç†å¾ˆé‡è¦ï¼Œè¿™èƒ½é˜²æ­¢ä»–ä»¬èƒ½é«˜æ•ˆçˆ¬å–ï¼Œè¿™ä¸ªå°±æ˜¯è¿™ç¯‡æ–‡ç« çš„ä¸»è¦å†…å®¹ã€‚\né€šå¸¸æƒ…å†µä¸‹ï¼ŒæŠ“å–ç¨‹åºçš„ç›®çš„æ˜¯ä¸ºäº†è·å–ä½ ç½‘ç«™ç‰¹å®šçš„ä¿¡æ¯ï¼Œæ¯”å¦‚æ–‡ç« å†…å®¹ã€æœç´¢ç»“æœã€äº§å“è¯¦æƒ…è¿˜æœ‰ç½‘ç«™ä¸Šè‰ºæœ¯å®¶æˆ–è€…ç›¸å†Œä¿¡æ¯ã€‚ ä»–ä»¬çˆ¬å–è¿™äº›å†…å®¹ç”¨äºç»´æŠ¤ä»–ä»¬è‡ªå·±çš„ç½‘ç«™ï¼ˆç”šè‡³é€šè¿‡ä½ çš„å†…å®¹èµšé’±ï¼ï¼‰ï¼Œæˆ–è€…åˆ¶ä½œå’Œä½ ç½‘ç«™ä¸ä¸€æ ·çš„å‰ç«¯ç•Œé¢ï¼ˆæ¯”å¦‚å»åšç§»åŠ¨ APPï¼‰ï¼Œ è¿˜æœ‰ä¸€äº›å¯èƒ½ä½œä¸ºä¸ªäººç ”ç©¶æˆ–åˆ†æä½¿ç”¨ã€‚\nå®é™…ä¸Šï¼Œæœ‰ç‰¹åˆ«å¤šçš„çˆ¬è™«ç±»å‹ï¼Œè€Œä¸”ä»–ä»¬çš„çˆ¬å–æ–¹å¼éƒ½ä¸å¤ªç›¸åŒï¼š\n  èœ˜è››ï¼Œæ¯”å¦‚ Googleâ€™s bot æˆ–è€…ç½‘ç«™å¤åˆ¶å·¥å…· HTtrackï¼Œä»–ä»¬è®¿é—®ä½ çš„ç½‘ç«™ï¼Œ è€Œä¸”åœ¨é¡µé¢ä¸­å¯»æ‰¾é“¾æ¥åé€’å½’çš„å»çˆ¬å–ä»¥è·å–é¡µé¢çš„æ•°æ®ã€‚æœ‰æ—¶å€™ä»–ä»¬åªç”¨äºè·å–ç‰¹å®šæ•°æ®ï¼Œ è€Œä¸ä¼šå…¨éƒ¨çˆ¬å–ï¼Œé€šå¸¸ç»“åˆ HTML åˆ†æå™¨åœ¨é¡µé¢ä¸­è·å–æƒ³è¦çš„æ•°æ®ã€‚\n  Shell è„šæœ¬ï¼Œæœ‰æ—¶å€™ï¼Œé€šç”¨çš„ Unix å·¥å…·ä¹Ÿè¢«ç”¨æ¥çˆ¬å–ï¼šwget æˆ–è€… curl ç”¨äºä¸‹è½½é¡µé¢ï¼Œ ç”¨ Grep ï¼ˆRegexï¼‰ å»åˆ†æè·å–æƒ³è¦çš„æ•°æ®ï¼Œä¸€èˆ¬éƒ½ä¼šå†™ä¸€ä¸ª Shell è„šæœ¬ã€‚ è¿™äº›éƒ½æ˜¯æœ€ç®€å•çš„çˆ¬è™«ï¼Œä¹Ÿæ˜¯æœ€è„†å¼±çš„ä¸€ç±»çˆ¬è™« (Donâ€™t ever try parse HTML with regex !ï¼‰ï¼Œ æ‰€ä»¥æ˜¯æœ€æ—©å‘ç°å’Œé˜²èŒƒçš„çˆ¬è™«ã€‚\n  HTML çˆ¬å–å™¨å’Œåˆ†æå™¨ï¼Œä¼šåŸºäº Jsoupã€Scrapy è¿˜æœ‰å…¶ä»–ä¸€äº›å·¥å…·ã€‚ å’Œ shell è„šæœ¬åŸºäºæ­£åˆ™ç±»ä¼¼ï¼Œä»–ä»¬èƒ½åŸºäºç‰¹å®šæ¨¡å¼ï¼ˆpatternï¼‰åˆ†æä½ çš„ HTML ç»“æ„ä»è€Œè·å–æƒ³è¦çš„æ•°æ®ã€‚\nä¸¾ä¸ªä¾‹å­ï¼šå¦‚æœä½ çš„ç½‘ç«™æœ‰æœç´¢åŠŸèƒ½ï¼Œé‚£è¿™ä¸ªçˆ¬è™«å¯èƒ½ä¼šæ¨¡æ‹Ÿæäº¤ä¸€ä¸ªæœç´¢çš„ HTTP è¯·æ±‚ï¼Œç„¶åä»æœç´¢ç»“æœé¡µä¸­è·å–æ‰€æœ‰çš„é“¾æ¥å’Œæ ‡é¢˜ï¼Œæœ‰æ—¶å€™ä¼šæ„é€ æœ‰æˆåƒä¸Šç™¾ä¸åŒçš„è¯·æ±‚ï¼Œåªæ˜¯ä¸ºäº†è·å–æ ‡é¢˜å’Œé“¾æ¥è€Œå·²ã€‚è¿™æ˜¯æœ€å¸¸è§çš„ä¸€ç±»çˆ¬è™«ã€‚\n  å±å¹•çˆ¬å–ï¼Œæ¯”å¦‚ä¼šåŸºäº Selenium æˆ–è€… PhantomJSï¼Œ ä»–ä»¬å®é™…ä¸Šä¼šé€šè¿‡çœŸå®æµè§ˆå™¨æ‰“å¼€ä½ çš„ç½‘ç«™ï¼Œå› æ­¤ä¹Ÿä¼šè¿è¡Œä½ ç½‘ç«™çš„ JavaScriptã€AJAX æˆ–è€…å…¶ä»–çš„ï¼Œ ç„¶åä»–ä»¬ä»ä½ çš„é¡µé¢è·å–è‡ªå·±æƒ³è¦çš„æ–‡æœ¬å†…å®¹ï¼Œé€šå¸¸ï¼š\n ç­‰é¡µé¢åŠ è½½å®Œæ¯•ï¼Œ JavaScript ä¹Ÿæ‰§è¡Œä¹‹åï¼Œä»æµè§ˆå™¨è·å– HTML ç»“æ„ï¼Œç„¶åç”¨ HTML åˆ†æå™¨å»è·å–æƒ³è¦çš„æ•°æ®æˆ–è€…æ–‡æœ¬ã€‚è¿™æ˜¯å¸¸è§åšæ³•ï¼Œæ‰€ä»¥æœ‰å¾ˆå¤šæ–¹æ³•å¯ä»¥é˜²æ­¢è¿™ç±» HTML åˆ†æå™¨æˆ–çˆ¬è™«ã€‚ è·å–åŠ è½½å®Œé¡µé¢çš„å±å¹•æˆªå›¾ï¼Œç„¶åä½¿ç”¨ OCR åˆ†æä»æˆªå±ä¸­è·å–æƒ³è¦çš„æ•°æ®ã€‚è¿™ç±»ä¸å¸¸è§ï¼Œè€Œä¸”åªæœ‰éå¸¸æƒ³è¦ä½ ç½‘ç«™å†…å®¹çš„çˆ¬è™«æ‰ä¼šä½¿ç”¨ã€‚  åŸºäºæµè§ˆå™¨çš„çˆ¬å»å¾ˆéš¾å¤„ç†ï¼Œä»–ä»¬è¿è¡Œè„šæœ¬ï¼Œæ¸²æŸ“ HTMLï¼Œå°±åƒçœŸå®ç”¨æˆ·ä¸€æ ·è®¿é—®ä½ çš„ç½‘ç«™ã€‚\n  Webçˆ¬å–æœåŠ¡ï¼Œæ¯”å¦‚ ScrapingHubæˆ–è€… Kimonoã€‚ å®é™…ä¸Šï¼Œå¾ˆå¤šäººçš„å·¥ä½œå°±æ˜¯æ‰¾å‡ºå¦‚ä½•çˆ¬å–ä½ çš„é¡µé¢è·å–å…¶ä¸­å†…å®¹å¹¶ç»™å…¶ä»–äººä½¿ç”¨ã€‚ ä»–ä»¬æœ‰æ—¶ä¼šç”¨å¤§é‡çš„ä»£ç†ç”šè‡³ä¿®æ”¹ IP åœ°å€æ¥ç»•è¿‡é¢‘ç‡é™åˆ¶å’Œå°ç¦ï¼Œæ‰€ä»¥ä»–ä»¬æ˜¯åçˆ¬çš„å…³é”®å¯¹è±¡ã€‚\næ¯«æ— ç–‘é—®ï¼Œé˜²æ­¢ä¸“ä¸šçš„çˆ¬å–æœåŠ¡æ˜¯éå¸¸å›°éš¾çš„ï¼Œä½†æ˜¯å¦‚æœä½ å¢åŠ çˆ¬å–çš„éš¾åº¦ï¼Œæˆ–è€…å¢åŠ ä»–ä»¬æ‰¾å‡ºçˆ¬å–æ–¹æ³•çš„æ—¶é—´ï¼Œé‚£è¿™äº›äººï¼ˆæˆ–è€…ä»˜é’±è®©ä»–ä»¬è¿™æ ·åšçš„äººï¼‰å¯èƒ½ä¼šæ”¾å¼ƒçˆ¬å–ä½ çš„ç½‘ç«™ã€‚\n  æŠŠä½ çš„ç½‘ç«™é¡µé¢é€šè¿‡ frames åµŒå…¥å…¶ä»–ç«™ç‚¹ï¼Œ æˆ–è€…æŠŠä½ çš„é¡µé¢åµŒå…¥ç§»åŠ¨ APPã€‚\nè™½ç„¶æ²¡æœ‰ä»€ä¹ˆæŠ€æœ¯å«é‡ï¼Œä½†æ˜¯ç¡®å®ä¹Ÿæ˜¯ä¸ªé—®é¢˜ï¼Œæ¯”å¦‚ç§»åŠ¨ APPï¼ˆAndroid å’Œ iOSï¼‰å¯ä»¥åµŒå…¥ä½ çš„ç½‘ç«™ï¼Œç”šè‡³å¯ä»¥æ³¨å…¥ä¸€äº›è‡ªå®šä¹‰çš„ CSS å’Œ JavaScriptï¼Œæ‰€ä»¥å¯ä»¥å®Œå…¨æ”¹å˜ä½ ç½‘ç«™çš„å¤–è§‚ï¼Œç„¶ååªå±•ç¤ºæƒ³è¦çš„ä¿¡æ¯ï¼Œæ¯”å¦‚åªå±•ç¤ºæ–‡ç« å†…å®¹æˆ–è€…æœç´¢ç»“æœï¼Œç„¶åéšè—ä½ ç½‘ç«™çš„ headersã€footers è¿˜æœ‰å¹¿å‘Šã€‚\n  äººè‚‰å¤åˆ¶ç²˜è´´ï¼šäººè‚‰å¤åˆ¶å’Œç²˜è´´ä½ ç½‘ç«™çš„å†…å®¹åˆ°å…¶ä»–åœ°æ–¹ã€‚å¾ˆé—æ†¾ï¼Œè¿™ä¸ªæ²¡æœ‰å¥½çš„æ–¹æ³•åŠ ä»¥é˜²èŒƒã€‚\n  ä»¥ä¸Šä¸åŒçš„çˆ¬è™«ç±»å‹æœ‰å¾ˆå¤šç›¸åŒç‚¹ï¼Œå¾ˆå¤šçˆ¬è™«çš„è¡Œä¸ºä¹Ÿå¾ˆç›¸ä¼¼ï¼Œå³ä½¿ä»–ä»¬ä½¿ç”¨äº†ä¸åŒçš„æŠ€æœ¯æˆ–è€…æ–¹æ¡ˆå»çˆ¬å–ä½ çš„å†…å®¹ã€‚\nè¿™äº›å¤§å¤šæ•°éƒ½æ˜¯æˆ‘è‡ªå·±çš„æƒ³æ³•ï¼Œæˆ‘åœ¨å†™çˆ¬è™«æ—¶ä¹Ÿé‡åˆ°è®¸å¤šå›°éš¾ï¼Œè¿˜æœ‰ä¸€äº›æ˜¯æ¥æºäºç½‘ç»œã€‚\nå¦‚ä½•åçˆ¬ ä¸€äº›å¸¸è§çš„æ£€æµ‹å’Œé˜²æ­¢çˆ¬è™«çš„æ–¹æ³•ï¼š\nç›‘æ§ä½ çš„æ—¥å¿—å’Œè¯·æ±‚ï¼›å½“å‘ç°å¼‚å¸¸è¡Œä¸ºæ—¶é™åˆ¶è®¿é—® å‘¨æœŸæ€§çš„æ£€æŸ¥ä½ çš„æ—¥å¿—ï¼Œå¦‚æœå‘ç°æœ‰å¼‚å¸¸æ´»åŠ¨è¡¨æ˜æ˜¯è‡ªåŠ¨çˆ¬å–ï¼ˆçˆ¬è™«ï¼‰ï¼Œç±»ä¼¼æŸä¸€ä¸ªç›¸åŒçš„ IP å¾ˆå¤šç›¸åŒçš„è¡Œä¸ºï¼Œ é‚£ä½ å°±å¯ä»¥é˜»æ­¢æˆ–é™åˆ¶è®¿é—®ã€‚\nä¸€äº›å¸¸ç”¨çš„æ–¹æ³•ï¼š\n  é¢‘ç‡é™åˆ¶\nåªå…è®¸ç”¨æˆ·ï¼ˆæˆ–çˆ¬è™«ï¼‰åœ¨ä¸€æ®µæ—¶é—´å†…è®¿é—®ç‰¹å®šçš„æ¬¡æ•°ï¼Œä¸¾ä¸ªä¾‹å­ï¼ŒæŸä¸ª IP æˆ–ç”¨æˆ·åªå…è®¸ä¸€åˆ†é’Ÿæœç´¢å¾ˆå°‘çš„æ¬¡æ•°ã€‚ è¿™ä¸ªä¼šå‡æ…¢çˆ¬è™«çš„çˆ¬å–é€Ÿåº¦ï¼Œè®©ä»–ä»¬å˜å¾—ä½æ•ˆã€‚å¦‚æœæ¬¡æ•°ç‰¹åˆ«å¤šæˆ–è€…æ¯”çœŸå®ç”¨æˆ·å¤šå¾ˆå¤šï¼Œé‚£ä½ ä¹Ÿå¯ä»¥æ˜¾ç¤ºéªŒè¯ç é¡µé¢ã€‚\n  æ£€æµ‹å¼‚å¸¸è¡Œä¸º\nå¦‚æœä½ èƒ½çœ‹åˆ°å¼‚å¸¸è¡Œä¸ºï¼Œæ¯”å¦‚åŒä¸€ä¸ª IP æœ‰å¾ˆå¤šç›¸åŒçš„è¯·æ±‚ï¼Œæœ‰äº›ä¼šç¿»å¾ˆå¤šé¡µæˆ–è€…è®¿é—®ä¸€äº›å¼‚å¸¸çš„é¡µç ï¼Œä½ å¯ä»¥æ‹’ç»è®¿é—®æˆ–è€…åœ¨åç»­çš„è¯·æ±‚ä¸­å±•ç¤ºéªŒè¯ç ã€‚\n  ä¸è¦åªé€šè¿‡ IP æ£€æµ‹å’Œé™åˆ¶ï¼Œä¹Ÿè¦ç”¨å…¶ä»–çš„ç”¨æˆ·æ ‡è¯†\nå¦‚æœä½ åšäº†è®¿é—®é™åˆ¶æˆ–é¢‘ç‡é™åˆ¶ï¼Œä¸è¦åªç®€å•çš„æ ¹æ®å•ä¸ª IP åœ°å€å»åšï¼›ä½ å¯ä»¥é€šè¿‡å…¶ä»–çš„æ ‡è¯†å’Œæ–¹æ³•å»è¯†åˆ«ä¸€ä¸ªç”¨æˆ·æˆ–çˆ¬è™«ã€‚ ä¸€äº›å¯ä»¥å¸®ä½ è¯†åˆ«ç”¨æˆ·/çˆ¬è™«çš„æ ‡è¯†ï¼š\n ç”¨æˆ·å¡«å†™è¡¨å•çš„é€Ÿåº¦ï¼Œè¿˜æœ‰ä»–ä»¬ç‚¹å‡»æŒ‰é’®çš„ä½ç½® ä½ å¯ä»¥é€šè¿‡ JavaScript è·å–å¾ˆå¤šä¿¡æ¯ï¼Œæ¯”å¦‚å±å¹•çš„å¤§å° / åˆ†è¾¨ç‡ï¼Œæ—¶åŒºï¼Œå®‰è£…çš„å­—ä½“ç­‰ç­‰ï¼Œä½ å¯ä»¥ç”¨è¿™äº›å»è¯†åˆ«ç”¨æˆ· æºå¸¦çš„ HTTP å¤´ï¼Œç‰¹åˆ«æ˜¯ User-Agent  ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœæŸä¸ª IP è¯·æ±‚äº†ä½ ç½‘ç«™å¾ˆå¤šæ¬¡ï¼Œæ‰€æœ‰çš„è®¿é—®éƒ½æœ‰ç›¸åŒçš„ UserAgent ã€å±å¹•å°ºå¯¸ï¼ˆJavaScript æ£€æµ‹ï¼‰ï¼Œè¿˜æœ‰å…¨éƒ½ä½¿ç”¨åŒæ ·çš„æ–¹å¼å’Œå›ºå®šçš„æ—¶é—´é—´éš”ç‚¹å‡»åŒä¸€ä¸ªæŒ‰é’®ï¼Œé‚£å®ƒå¤§æ¦‚æ˜¯ä¸€ä¸ªå±å¹•çˆ¬è™«ï¼› ä½ å¯ä»¥ä¸´æ—¶é™åˆ¶ç›¸ä¼¼çš„è¯·æ±‚ï¼ˆæ¯”å¦‚ åªé™åˆ¶æ¥è‡ªé‚£ä¸ª IP ç‰¹å®š User-Agent å’Œ å±å¹•å°ºå¯¸çš„è¯·æ±‚ï¼‰ï¼Œè¿™æ ·ä½ ä¸ä¼šè¯¯ä¼¤åŒæ ·ä½¿ç”¨è¿™ä¸ª IP çš„çœŸå®ç”¨æˆ·ï¼Œæ¯”å¦‚å…±äº«ç½‘ç»œé“¾æ¥çš„ç”¨æˆ·ã€‚\n  æ›´è¿›ä¸€æ­¥ï¼Œå½“ä½ å‘ç°ç›¸ä¼¼çš„è¯·æ±‚ï¼Œä½†æ˜¯æ¥è‡ªä¸åŒçš„ IP åœ°å€ï¼Œè¡¨æ˜æ˜¯åˆ†å¸ƒå¼çˆ¬è™«ï¼ˆä½¿ç”¨åƒµå°¸ç½‘ç»œæˆ–ç½‘ç»œä»£ç†çš„çˆ¬è™«ï¼‰ã€‚ å¦‚æœä½ æ”¶åˆ°ç±»ä¼¼å¤§é‡çš„è¯·æ±‚ï¼Œä½†æ˜¯ä»–ä»¬æ¥è‡ªä¸åŒçš„ IP åœ°å€ï¼Œä½ å¯ä»¥æ‹’ç»è®¿é—®ã€‚å†å¼ºè°ƒä¸€ä¸‹ï¼Œå°å¿ƒä¸ç»æ„é™åˆ¶äº†çœŸå®ç”¨æˆ·ã€‚\nè¿™ç§æ–¹æ³•å¯¹é‚£ç§è¿è¡Œ JavaScript çš„å±å¹•çˆ¬è™«æ¯”è¾ƒæœ‰æ•ˆï¼Œå› ä¸ºä½ å¯ä»¥è·å¾—ä»–ä»¬å¤§é‡çš„ä¿¡æ¯ã€‚\nStack Exchange ä¸Šå…³äº Secruity çš„ç›¸å…³é—®é¢˜ï¼š\n  How to uniquely identify users with the same external IP address? \n  Why do people use IP address bans when IP addresses often change?  å…³äºä»…ä½¿ç”¨ IP çš„å…¶ä»–é™åˆ¶\n  ä½¿ç”¨éªŒè¯ç ï¼Œè€Œä¸æ˜¯ä¸´æ—¶é™åˆ¶è®¿é—®\nå¯¹äºé¢‘ç‡é™åˆ¶ï¼Œæœ€ç®€å•çš„æ–¹å¼å°±æ˜¯ä¸´æ—¶é™åˆ¶è®¿é—®ï¼Œç„¶è€Œä½¿ç”¨éªŒè¯ç ä¼šæ›´å¥½ï¼Œå¯ä»¥çœ‹ä¸‹é¢å…³äºéªŒè¯ç çš„éƒ¨åˆ†ã€‚\n  è¦æ±‚æ³¨å†Œå’Œç™»å½• å¦‚æœå¯è¡Œï¼Œè¦æ±‚åˆ›å»ºç”¨æˆ·æ‰å¯ä»¥æŸ¥çœ‹å†…å®¹ã€‚è¿™ä¸ªå¯ä»¥å¾ˆå¥½çš„éåˆ¶çˆ¬è™«ï¼Œä½†å¾ˆå®¹æ˜“éåˆ¶çœŸå®ç”¨æˆ·ï¼š\n å¦‚æœä½ è¦æ±‚å¿…é¡»åˆ›å»ºè´¦æˆ·å’Œç™»å½•ï¼Œä½ å¯ä»¥ç²¾å‡†çš„è·Ÿè¸ªç”¨æˆ·å’Œçˆ¬è™«çš„è¡Œä¸ºã€‚è¿™æ ·çš„è¯ï¼Œä½ å¯ä»¥å¾ˆç®€å•å°±èƒ½æ£€æµ‹åˆ°æœ‰çˆ¬å–è¡Œä¸ºçš„è´¦æˆ·ï¼Œç„¶åå°ç¦å®ƒã€‚ åƒé¢‘ç‡é™åˆ¶æˆ–æ£€æµ‹æ»¥ç”¨ï¼ˆæ¯”å¦‚ä¸€æ®µæ—¶é—´æœ‰å¤§é‡æœç´¢ï¼‰å°±å˜å¾—ç®€å•ï¼Œä½ ä¹Ÿå¯ä»¥ä¸ä»…ä»…é€šè¿‡ IP å»è¯†åˆ«çˆ¬è™«ã€‚  ä¸ºäº†é˜²æ­¢çˆ¬è™«åˆ›å»ºå¤§é‡çš„ç”¨æˆ·ï¼Œä½ åº”è¯¥ï¼š\n æ³¨å†Œæ—¶éœ€è¦æä¾› email åœ°å€ï¼Œå‘é€ä¸€ä¸ªéªŒè¯é“¾æ¥åˆ°é‚®ç®±ï¼Œè€Œä¸”è¿™ä¸ªé“¾æ¥å¿…é¡»è¢«æ‰“å¼€æ‰å¯ä»¥æ¿€æ´»è¿™ä¸ªè´¦æˆ·ã€‚ä¸€ä¸ªé‚®ç®±åªå…è®¸ä¸€ä¸ªè´¦æˆ·ä½¿ç”¨ã€‚ åœ¨æ³¨å†Œæˆ–åˆ›å»ºç”¨æˆ·æ—¶ï¼Œå¿…é¡»é€šè¿‡éªŒè¯ç éªŒè¯ï¼Œä¸ºäº†é˜²æ­¢åˆ›å»ºç”¨æˆ·çš„è‡ªåŠ¨è„šæœ¬ã€‚  è¦æ±‚æ³¨å†Œç”¨æˆ·å¯¹ç”¨æˆ·å’Œæœç´¢å¼•æ“æ¥è¯´ä¸å‹å¥½ï¼›å¦‚æœä½ è¦æ±‚å¿…é¡»æ³¨å†Œæ‰å¯ä»¥çœ‹æ–‡ç« ï¼Œé‚£ç”¨æˆ·ä¹Ÿå¯èƒ½ç›´æ¥ç¦»å¼€ã€‚\né˜»æ­¢æ¥è‡ªäº‘æœåŠ¡å•†å’ŒæŠ“å–æœåŠ¡çš„ IP æœ‰æ—¶ï¼Œçˆ¬è™«ä¼šè¢«è¿è¡Œåœ¨äº‘æœåŠ¡å•†ï¼Œæ¯”å¦‚ Amazon Web Services æˆ– Google App Engineï¼Œæˆ–è€…å…¶ä»– VPSã€‚ é™åˆ¶è¿™äº›æ¥è‡ªäº‘æœåŠ¡å•†çš„ IP åœ°å€è®¿é—®ä½ çš„ç½‘ç«™ï¼ˆæˆ–å‡ºéªŒè¯ç ï¼‰ã€‚ ä½ å¯ä»¥å¯ä»¥ç›´æ¥å¯¹æ¥è‡ªçˆ¬å–æœåŠ¡çš„ IP åœ°å€é™åˆ¶è®¿é—®ã€‚\nç±»ä¼¼çš„ï¼Œä½ ä¹Ÿå¯ä»¥é™åˆ¶æ¥è‡ªä»£ç†æˆ– VPN çš„ IP åœ°å€ï¼Œå› ä¸ºå¾ˆå¤šçˆ¬è™«ä¼šä½¿ç”¨å®ƒä»¬æ¥é˜²æ­¢è¢«æ£€æµ‹åˆ°ã€‚\nä½†æ˜¯è¦çŸ¥é“é™åˆ¶æ¥è‡ªä»£ç†æœåŠ¡å™¨æˆ– VPN çš„ IPï¼Œä¹Ÿå¾ˆå®¹æ˜“å½±å“åˆ°çœŸå®ç”¨æˆ·ã€‚\nå½“ä½ å°ç¦æ—¶ä¸è¦å±•ç¤ºå…·ä½“é”™è¯¯ä¿¡æ¯ å¦‚æœä½ è¦å°ç¦æˆ–é™åˆ¶è®¿é—®ï¼Œä½ åº”è¯¥ç¡®ä¿ä¸è¦æŠŠå¯¼è‡´å°ç¦çš„åŸå› å‘Šè¯‰çˆ¬è™«ï¼Œä»–ä»¬ä¼šæ ¹æ®æç¤ºä¿®æ”¹è‡ªå·±çš„çˆ¬è™«ç¨‹åºã€‚æ‰€ä»¥ä¸‹é¢çš„è¿™äº›é”™è¯¯æœ€å¥½ä¸è¦å‡ºç°ï¼š\n ä½ çš„ IP è®¿é—®å¤ªå¤šæ¬¡äº†ï¼Œè¯·é‡è¯• å‡ºé”™äº†ï¼Œæ²¡æœ‰ User Agent  ç›¸åçš„ï¼Œå±•ç¤ºä¸€äº›ä¸åŒ…å«åŸå› å¹¶å¯¹ç”¨æˆ·å‹å¥½ä¿¡æ¯ä¼šæ›´å¥½ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä¿¡æ¯ä¼šæ›´å¥½ï¼š\n å¯¹ä¸èµ·ï¼Œæœ‰äº›ä¸å¯¹åŠ²ã€‚å¦‚æœé—®é¢˜æŒç»­å‡ºç°ï¼Œä½ å¯ä»¥è”ç³» helpdesk@example.com ä»¥è·å–æ”¯æŒã€‚  å¦‚æœçœŸå®ç”¨æˆ·çœ‹åˆ°è¿™ä¸ªé”™è¯¯é¡µé¢ï¼Œè¿™ä¸ªå¯¹çœŸå®ç”¨æˆ·æ¥è¯´ä¹Ÿååˆ†å‹å¥½ã€‚åœ¨åç»­è®¿é—®ä¸­ï¼Œä½ ä¹Ÿå¯ä»¥è€ƒè™‘å±•ç¤ºéªŒè¯ç è€Œä¸æ˜¯ç›´æ¥å°ç¦ï¼Œ å¦‚æœçœŸå®ç”¨æˆ·çœ‹åˆ°è¿™ä¸ªé”™è¯¯ä¿¡æ¯ï¼Œå¯¹äºåˆæ³•ç”¨æˆ·ä¹Ÿä¼šè”ç³»ä½ ã€‚\nå¦‚æœæœ‰çˆ¬è™«è®¿é—®ï¼Œè¯·ä½¿ç”¨éªŒè¯ç  éªŒè¯ç ï¼ˆCaptchaï¼Œâ€œCompletely Automated Test to Tell Computers and Humans Apartâ€)å¯¹äºé˜²çˆ¬ååˆ†æœ‰æ•ˆã€‚ä¸å¹¸çš„æ˜¯ï¼Œå®ƒä¹Ÿå¾ˆå®¹æ˜“æƒ¹æ¼ç”¨æˆ·ã€‚\nå› æ­¤ï¼Œå¦‚æœä½ å‘ç°ç–‘ä¼¼çˆ¬è™«ï¼Œè€Œä¸”æƒ³è¦é˜»æ­¢å®ƒçš„çˆ¬å–è¡Œä¸ºï¼Œè€Œä¸æ˜¯å°ç¦å®ƒä»¥å…å®ƒæ˜¯çœŸå®ç”¨æˆ·ã€‚ä½ å¯ä»¥è€ƒè™‘æ˜¾ç¤ºéªŒè¯ç åœ¨å®ƒå†æ¬¡å…è®¸è®¿é—®ä¹‹å‰ã€‚\nä½¿ç”¨éªŒè¯ç çš„æ³¨æ„äº‹é¡¹ï¼š\n ä¸è¦é€ è½®å­ï¼Œä½¿ç”¨ç±»ä¼¼ Google çš„ reCaptchaçš„ä¸€äº›æœåŠ¡ï¼š æ¯”ä½ è‡ªå·±å®ç°ä¸€å¥—éªŒè¯ç æœåŠ¡è¦ç®€å•å¤ªå¤šï¼Œå¯¹äºç”¨æˆ·æ¥è¯´ï¼Œä¹Ÿæ¯”è¯†åˆ«æ¨¡ç³Šæˆ–æ‰­æ›²çš„æ–‡å­—æ›´å‹å¥½ï¼ˆç”¨æˆ·ä¸€èˆ¬åªéœ€è¦ç‚¹å‡»ä¸€ä¸‹ï¼‰ï¼Œ è€Œä¸”ç›¸å¯¹äºä½ è‡ªå·±æä¾›çš„ç®€å•éªŒè¯ç å›¾ç‰‡ï¼Œçˆ¬è™«ä¹Ÿæ›´éš¾å»ç ´è§£ ä¸è¦åœ¨ HTML ç»“æ„ä¸­åŒ…å«éªŒè¯ç ç­”æ¡ˆï¼šæˆ‘æ›¾ç»çœ‹åˆ°è¿‡ä¸€ä¸ªç½‘ç«™åœ¨å®ƒè‡ªå·±é¡µé¢ä¸Šæœ‰éªŒè¯ç çš„ç­”æ¡ˆï¼Œï¼ˆè™½ç„¶éšè—çš„å¾ˆå¥½ï¼‰æ‰€ä»¥è®©éªŒè¯ç æ ¹æœ¬å°±æ²¡æœ‰ç”¨ã€‚ ä¸è¦åšç±»ä¼¼çš„äº‹æƒ…ã€‚å†å¼ºè°ƒä¸€æ¬¡ï¼Œç”¨åƒ reCaptcha çš„æœåŠ¡ï¼Œä½ å°†ä¸ä¼šæœ‰ç±»ä¼¼çš„é—®é¢˜ï¼ˆå¦‚æœä½ æ­£ç¡®åœ°ä½¿ç”¨å®ƒï¼‰  å°†ä½ çš„æ–‡å­—è½¬ä½å›¾ç‰‡ ä½ å¯ä»¥åœ¨æœåŠ¡ç«¯å°†æ–‡å­—æ¸²æŸ“æˆå›¾ç‰‡æ˜¾ç¤ºï¼Œä»–å°†é˜²æ­¢ç®€å•çš„çˆ¬è™«å»è·å–æ–‡å­—å†…å®¹ã€‚\nç„¶è€Œï¼Œè¿™ä¸ªå¯¹äºå±å¹•é˜…è¯»å™¨ã€æœç´¢å¼•æ“ã€æ€§èƒ½è¿˜æœ‰ä¸€äº›å…¶ä»–ä¸€äº›äº‹æƒ…éƒ½ä¸å¤ªå¥½ã€‚ è¿™ä¸ªåœ¨æŸäº›æ–¹é¢ä¹Ÿæ˜¯ä¸è¿æ³•çš„ï¼ˆæºäºè®¿é—®æ€§é—®é¢˜ï¼Œeg. the Americans with Disabilities Actï¼‰ï¼Œè€Œä¸”å¯¹äºä¸€äº› OCR çˆ¬è™«ä¹Ÿèƒ½éå¸¸ç®€å•çš„è§„é¿ï¼Œæ‰€ä»¥ä¸è¦é‡‡ç”¨è¿™ç§æ–¹å¼ã€‚\nä½ ä¹Ÿå¯ä»¥ç”¨ CSS sprites åšç±»ä¼¼çš„äº‹æƒ…ï¼Œä½†æ˜¯ä¹Ÿæœ‰ç›¸åŒçš„é—®é¢˜ã€‚\nä¸è¦æš´éœ²ä½ å®Œæ•´çš„æ•°æ® å¦‚æœå¯ä»¥çš„è¯ï¼Œä¸è¦è®©è„šæœ¬/çˆ¬è™«èƒ½è·å–ä½ æ‰€æœ‰çš„æ•°æ®ã€‚ä¸¾ä¸ªä¾‹å­ï¼šä½ æœ‰ä¸€ä¸ªæ–°é—»ç«™ï¼Œæœ‰å¤§é‡çš„ä¸ªäººæ–‡ç« ã€‚ ä½ åº”è¯¥ç¡®ä¿æ–‡ç« åªèƒ½é€šè¿‡ä½ è‡ªå·±ç½‘ç«™çš„æœç´¢åˆ°ï¼Œå¦‚æœä½ ç½‘ç«™ä¸æ˜¯åˆ°å¤„éƒ½æœ‰ä½ çš„æ–‡ç« è¿˜æœ‰é“¾æ¥ï¼Œé‚£ä¹ˆç¡®ä¿å®ƒä»¬åªèƒ½è¢«æœç´¢åŠŸèƒ½è®¿é—®åˆ°ã€‚ è¿™æ„å‘³ç€å¦‚æœä¸€ä¸ªè„šæœ¬æƒ³è¦è·å–ä½ ç½‘ç«™çš„æ‰€æœ‰æ–‡ç« ï¼Œå°±å¿…é¡»é€šè¿‡ä½ ç«™ç‚¹æ–‡ç« ä¸­æ‰€æœ‰å¯èƒ½çš„çŸ­è¯­å»è¿›è¡Œæœç´¢ï¼Œä»è€Œè·å–æ‰€æœ‰çš„æ–‡ç« åˆ—è¡¨ï¼Œä½†æ˜¯è¿™ä¸ªä¼šéå¸¸è€—æ—¶ï¼Œè€Œä¸”ä½æ•ˆï¼Œä»è€Œè®©çˆ¬è™«æ”¾å¼ƒã€‚\nä»¥ä¸‹æ“ä½œä¼šè®©ä½ å®Œå…¨æš´éœ²ï¼š\n çˆ¬è™«/è„šæœ¬å¹¶ä¸æƒ³/éœ€è¦è·å–æ‰€æœ‰çš„æ•°æ® ä½ ç«™ç‚¹æ–‡ç« çš„é“¾æ¥çœ‹èµ·æ¥æ˜¯è¿™ç§æ–¹å¼ example.com/article.php?articleId=12345ï¼Œè¿™æ ·åšï¼ˆæˆ–ç±»ä¼¼çš„å…¶ä»–åšæ³•ï¼‰ä¼šè®©çˆ¬è™«å¾ˆç®€å•çš„è¿­ä»£ articleID å°±èƒ½è·å–ä½ æ‰€æœ‰çš„æ–‡ç«  è¿˜æœ‰ä¸€äº›å…¶ä»–æ–¹å¼è·å–æ‰€æœ‰çš„æ–‡ç« ï¼Œæ¯”å¦‚å†™ä¸€ä¸ªè„šæœ¬å»é€’å½’çš„çˆ¬å–ä½ æ–‡ç« ä¸­å…¶ä»–æ–‡ç« çš„é“¾æ¥ æœç´¢ä¸€äº›å¸¸ç”¨çš„è¯æ¯”å¦‚ â€œä¸€â€ æˆ–è€… â€œçš„â€ å°†ä¼šæš´éœ²å‡ ä¹æ‰€æœ‰çš„å†…å®¹ã€‚æ‰€ä»¥è¿™ç‚¹æ˜¯è¦æ³¨æ„çš„ï¼ˆä½ å¯ä»¥é€šè¿‡åªè¿”å› top 10 æˆ– top 20 æ¥é¿å…è¿™ä¸ªé—®é¢˜ï¼‰ ä½ çš„æ–‡ç« éœ€è¦è¢«æœç´¢å¼•æ“æ”¶å½•  ä¸è¦æš´éœ²ä½ çš„ APIã€èŠ‚ç‚¹æˆ–å…¶ä»–ç±»ä¼¼çš„ä¸œè¥¿ ç¡®ä¿ä½ ä¸ä¼šæš´éœ²ä½ çš„ä»»ä½• APIï¼Œå¾ˆå¤šæ—¶å€™éƒ½æ˜¯æ— æ„é—´æš´éœ²ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœä½ æ­£åœ¨ä½¿ç”¨ AJAX æˆ– Adobe Flash çš„ç½‘ç»œè¯·æ±‚ æˆ– Java Appletï¼ˆåƒä¸‡ä¸è¦ç”¨ï¼ï¼‰æ¥åŠ è½½ä½ çš„æ•°æ®ï¼Œ ä»è¿™äº›ç½‘ç»œè¯·æ±‚ä¸­æ‰¾åˆ°è¦è¯·æ±‚çš„ API ååˆ†ç®€å•ï¼Œæ¯”å¦‚å¯ä»¥è¿›è¡Œåç¼–è¯‘ç„¶ååœ¨çˆ¬è™«ç¨‹åºä¸­ä½¿ç”¨è¿™äº›æ¥å£ã€‚ç¡®ä¿ä½ æ··æ·†äº†ä½ çš„ API å¹¶ä¸”å…¶ä»–äººè¦ç”¨å®ƒä¼šéå¸¸éš¾ç ´è§£ã€‚\né˜»æ­¢ HTML è§£æå™¨å’Œçˆ¬å–å™¨ ç”±äº HTML è§£æå™¨æ˜¯é€šè¿‡åˆ†æé¡µé¢ç‰¹å®šç»“æ„å»è·å–å†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥æ•…æ„ä¿®æ”¹è¿™äº›ç»“æ„æ¥é˜»æ­¢è¿™ç±»çˆ¬è™«ï¼Œç”šè‡³ä»æ ¹æœ¬ä¸Šä»–ä»¬è·å–å†…å®¹ã€‚ ä¸‹é¢å¤§å¤šæ•°åšæ³•å¯¹å…¶ä»–ç±»å‹çˆ¬è™«å¦‚æœç´¢å¼•æ“èœ˜è››ã€å±å¹•çˆ¬è™«ä¹Ÿæœ‰æ•ˆã€‚\nç»å¸¸ä¿®æ”¹ä½ çš„ HTML ç»“æ„ å¤„ç† HTML çš„çˆ¬è™«é€šè¿‡åˆ†æç‰¹å®šå¯è¯†åˆ«çš„éƒ¨åˆ†æ¥å¤„ç† HTMLã€‚ä¸¾ä¸ªä¾‹å­ï¼šå¦‚æœä½ æ‰€æœ‰çš„é¡µé¢éƒ½æœ‰ id ä¸º article-content çš„ divç»“æ„ï¼Œç„¶åé‡Œé¢æœ‰ä½ çš„æ–‡ç« å†…å®¹ï¼Œ é‚£è¦è·å–ä½ ç«™ç‚¹æ‰€æœ‰æ–‡ç« å†…å®¹æ˜¯ååˆ†ç®€å•çš„ï¼Œåªè¦è§£æé‚£ä¸ª article-content é‚£ä¸ª div å°±å¯ä»¥äº†ï¼Œç„¶åæœ‰è¿™ä¸ªç»“æ„çš„çˆ¬è™«å°±å¯ä»¥æŠŠä½ çš„æ–‡ç« éšä¾¿ç”¨åœ¨ä»€ä¹ˆåœ°æ–¹ã€‚\nå¦‚æœä½ å¸¸å¸¸ä¿®æ”¹ HTML è¿˜æœ‰ä½ é¡µé¢çš„ç»“æ„ï¼Œ é‚£è¿™ç±»çˆ¬è™«å°±ä¸èƒ½ä¸€ç›´ä½¿ç”¨ã€‚\n ä½ å¯ä»¥ç»å¸¸ä¿®æ”¹ä½  HTML çš„ id å’Œ classï¼Œç”šè‡³è®©ä»–èƒ½è‡ªåŠ¨æ”¹å˜ã€‚æ‰€ä»¥ï¼Œå¦‚æœä½ çš„ div.article-content å˜æˆ div.a4c36dda13eaf0ï¼Œè€Œä¸”æ¯å‘¨éƒ½ä¼šå˜åŒ–ï¼Œ é‚£ä¹ˆçˆ¬è™«ä¸€å¼€å§‹å¯èƒ½èƒ½æ­£å¸¸å·¥ä½œï¼Œä½†æ˜¯ä¸€å‘¨ä¹‹åå°±ä¸èƒ½ä½¿ç”¨äº†ã€‚åŒæ—¶ä¹Ÿç¡®ä¿ä¿®æ”¹ä½  id/classçš„é•¿åº¦ï¼Œè¿™æ ·ä¹Ÿå¯ä»¥é¿å…çˆ¬è™«ä½¿ç”¨ç±»ä¼¼ div.[any-14-characters] æ¥æ‰¾åˆ°æƒ³è¦çš„ divã€‚ å¦‚æœæ— æ³•ä»æ ‡è®°ä¸­æ‰¾åˆ°æ‰€éœ€çš„å†…å®¹ï¼Œåˆ™æŠ“å–å·¥å…·å°†é€šè¿‡HTMLçš„ç»“æ„æ–¹å¼è¿›è¡ŒæŸ¥æ‰¾ã€‚æ‰€ä»¥ï¼Œå¦‚æœä½ çš„æ‰€æœ‰æ–‡ç« éƒ½æœ‰ç±»ä¼¼çš„ç»“æ„ï¼Œæ¯”å¦‚æ¯ä¸ª divï¼Œå¹¶ä¸”é‡Œé¢é€šè¿‡ h1 æ”¾æ–‡ç« çš„æ ‡é¢˜ï¼Œçˆ¬è™«å°†åŸºäºè¿™ä¸ªç»“æ„è·å–æ–‡ç« å†…å®¹ã€‚åŒæ ·çš„ï¼Œä¸ºäº†é˜²æ­¢è¿™ä¸ªï¼Œä½ å¯ä»¥åœ¨ä½ çš„ HTML æ·»åŠ /åˆ é™¤ é¢å¤–çš„æ ‡è®°ï¼Œå‘¨æœŸå¹¶ä¸”éšæœºçš„åšï¼Œeg. æ·»åŠ é¢å¤–çš„ div æˆ– spanã€‚å¯¹äºæœåŠ¡ç«¯æ¸²æŸ“çš„ç¨‹åºï¼Œè¿™åº”è¯¥ä¸ä¼šå¾ˆéš¾ã€‚  æ³¨æ„äº‹é¡¹  å®ƒçš„å®ç°ã€ç»´æŠ¤å’Œè°ƒè¯•éƒ½æ˜¯å¾ˆå¤æ‚å›°éš¾çš„ ä½ è¦æ³¨æ„ç¼“å­˜ã€‚ç‰¹åˆ«æ˜¯ä½ ä¿®æ”¹ä½  HTML å…ƒç´ çš„ id æˆ– class æ—¶ï¼Œä¹Ÿè¦å»ä¿®æ”¹ç›¸åº”çš„ CSS å’Œ JavaScript æ–‡ä»¶ï¼Œè¿™æ„å‘³ç€æ¯æ¬¡ä¿®æ”¹éƒ½è¦ä¿®æ”¹è¿™äº›ï¼Œè€Œæµè§ˆå™¨æ¯æ¬¡éƒ½è¦é‡æ–°ä¸‹è½½ä»–ä»¬ã€‚è¿™å°†å¯¼è‡´é¡µé¢æ‰“å¼€æ…¢ä¹Ÿä¼šå¯¼è‡´æœåŠ¡ç«¯è´Ÿè½½å‡é«˜ã€‚ä¸è¿‡è¿™ä¹Ÿä¸æ˜¯ä¸€ä¸ªå¤§é—®é¢˜ï¼Œå¦‚æœä½ åªæ˜¯ä¸€ä¸ªæ˜ŸæœŸæ”¹å˜ä¸€æ¬¡ã€‚ èªæ˜çš„çˆ¬è™«ä»ç„¶èƒ½æ¨æ–­å‡ºä½ æ–‡ç« çš„ä½ç½®ï¼Œæ¯”å¦‚ï¼Œé¡µé¢ä¸Šå¤§å—çš„æ–‡æœ¬å¤§æ¦‚ç‡æ˜¯æ–‡ç« å†…å®¹ã€‚è¿™ä¸ªè®©çˆ¬è™«ä»é¡µé¢æ‰¾åˆ°ã€è·å–æƒ³è¦çš„æ•°æ®ã€‚ Boilerpipe å°±æ˜¯è¿™æ ·åšçš„ã€‚  æœ¬è´¨ä¸Šæ¥è¯´ï¼Œå°±æ˜¯ç¡®ä¿çˆ¬è™«ä»ç›¸ä¼¼é¡µé¢è·å–æƒ³è¦çš„å†…å®¹å˜å¾—ä¸é‚£ä¹ˆå®¹æ˜“ã€‚\nå¯ä»¥å‚è€ƒè¿™ä¸ª PHP çš„å®ç°ï¼šHow to prevent crawlers depending on XPath from getting page contents\nåŸºäºç”¨æˆ·åœ°ç†ä½ç½®ä¿®æ”¹ HTML è¿™ä¸ªå’Œå‰ä¸€ä¸ªç±»ä¼¼ã€‚å¦‚æœä½ æ ¹æ®ä¸åŒç”¨æˆ·çš„ä½ç½®/å›½å®¶ï¼ˆæ ¹æ® IP è·å–ï¼‰æ¥æä¾›ä¸åŒçš„ HTMLï¼Œè¿™ä¸ªå¯èƒ½ä¼šç ´åå°†ç«™ç‚¹ HTML ç»™ç”¨æˆ·çš„çˆ¬è™«ã€‚æ¯”å¦‚ï¼Œå¦‚æœæœ‰äººå†™äº†ä¸€ä¸ªç§»åŠ¨ APP æ¥æŠ“å–ä½ çš„ç«™ç‚¹ï¼Œä¸€å¼€å§‹å¯ä»¥ç”¨ï¼Œä½†æ˜¯å¯¹äºä¸åŒåœ°åŒºçš„ç”¨æˆ·å°±ä¸èµ·ä½œç”¨äº†ï¼Œå› ä¸ºä»–ä»¬ä¼šè·å–åˆ°ä¸åŒçš„ HTML ç»“æ„ï¼ŒåµŒå…¥å¼çš„ HTML å°†ä¸ä¸èƒ½æ­£å¸¸ä½¿ç”¨ã€‚\nç»å¸¸æ”¹å˜ HTMLï¼Œå¹¶ä¸çˆ¬è™«æ–—æ™ºæ–—å‹‡ï¼ ä¸¾ä¸ªä¾‹å­ï¼šä½ æœ‰ä¸€ä¸ªåŒ…å«æœç´¢åŠŸèƒ½çš„ç½‘ç«™ï¼Œexample.com/search?query=somesearchquery çš„æœç´¢ç»“æœæ˜¯ä¸‹é¢çš„ HTML ç»“æ„ï¼š\n1 2 3 4 5 6 7 8  \u003cdiv class=\"search-result\"\u003e \u003ch3 class=\"search-result-title\"\u003eStack Overflow has become the world's most popular programming Q \u0026 A website\u003c/h3\u003e \u003cp class=\"search-result-excerpt\"\u003eThe website Stack Overflow has now become the most popular programming Q \u0026 A website, with 10 million questions and many users, which...\u003c/p\u003e \u003ca class\"search-result-link\" href=\"/stories/stack-overflow-has-become-the-most-popular\"\u003eRead more\u003c/a\u003e \u003c/div\u003e (And so on, lots more identically structured divs with search results)   ä½ å¯ä»¥çŒœåˆ°è¿™ä¸ªéå¸¸å®¹æ˜“çˆ¬å–ï¼šä¸€ä¸ªçˆ¬è™«éœ€è¦åšçš„å°±åªæ˜¯è®¿é—®æœç´¢é“¾æ¥ï¼Œç„¶åä»è¿”å›çš„ HTML åˆ†ææƒ³è¦çš„æ•°æ®ã€‚é™¤äº†å®šæœŸä¿®æ”¹ä¸Šé¢ HTML çš„å†…å®¹ï¼Œ ä½ ä¹Ÿå¯ä»¥ä¿ç•™æ—§ç»“æ„çš„ id å’Œ classï¼Œç„¶åä½¿ç”¨ CSS è¿›è¡Œéšè—ï¼Œå¹¶ä½¿ç”¨å‡æ•°æ®è¿›è¡Œå¡«å……ï¼Œä»è€Œç»™çˆ¬è™«æŠ•æ¯’ã€‚æ¯”å¦‚åƒä¸‹é¢è¿™æ ·ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16  \u003cdiv class=\"the-real-search-result\"\u003e \u003ch3 class=\"the-real-search-result-title\"\u003eStack Overflow has become the world's most popular programming Q \u0026 A website\u003c/h3\u003e \u003cp class=\"the-real-search-result-excerpt\"\u003eThe website Stack Overflow has now become the most popular programming Q \u0026 A website, with 10 million questions and many users, which...\u003c/p\u003e \u003ca class\"the-real-search-result-link\" href=\"/stories/stack-overflow-has-become-the-most-popular\"\u003eRead more\u003c/a\u003e \u003c/div\u003e \u003cdiv class=\"search-result\" style=\"display:none\"\u003e \u003ch3 class=\"search-result-title\"\u003eVisit example.com now, for all the latest Stack Overflow related news !\u003c/h3\u003e \u003cp class=\"search-result-excerpt\"\u003eEXAMPLE.COM IS SO AWESOME, VISIT NOW! (Real users of your site will never see this, only the scrapers will.)\u003c/p\u003e \u003ca class\"search-result-link\" href=\"http://example.com/\"\u003eVisit Now !\u003c/a\u003e \u003c/div\u003e (More real search results follow)   è¿™æ„å‘³ç€åŸºäº id æˆ– class è·å–ç‰¹å®šæ•°æ®çš„çˆ¬è™«ä»ç„¶èƒ½ç»§ç»­å·¥ä½œï¼Œä½†æ˜¯ä»–ä»¬å°†ä¼šè·å–å‡æ•°æ®ç”šè‡³å¹¿å‘Šï¼Œè€Œè¿™äº›æ•°æ®çœŸå®ç”¨æˆ·æ˜¯çœ‹ä¸åˆ°çš„ï¼Œå› ä¸ºä»–ä»¬è¢« CSS éšè—äº†ã€‚\nä¸çˆ¬è™«æ–—æ™ºæ–—å‹‡ï¼šåœ¨é¡µé¢æ’å…¥å‡çš„ã€ä¸å¯è§çš„èœœç½æ•°æ® å¯¹ä¸Šä¸ªä¾‹å­è¿›è¡Œè¡¥å……ï¼Œä½ å¯ä»¥åœ¨ä½ çš„ HTML é‡Œé¢å¢åŠ ä¸å¯è§çš„èœœç½æ•°æ®æ¥æŠ“ä½çˆ¬è™«ã€‚ä¸‹é¢çš„ä¾‹å­æ¥è¡¥å……ä¹‹å‰è¯´çš„æœç´¢ç»“æœï¼š\n1 2 3 4 5 6 7 8 9  \u003cdiv class=\"search-result\" style=\"display:none\"\u003e \u003ch3 class=\"search-result-title\"\u003eThis search result is here to prevent scraping\u003c/h3\u003e \u003cp class=\"search-result-excerpt\"\u003eIf you're a human and see this, please ignore it. If you're a scraper, please click the link below :-) Note that clicking the link below will block access to this site for 24 hours.\u003c/p\u003e \u003ca class\"search-result-link\" href=\"/scrapertrap/scrapertrap.php\"\u003eI'm a scraper !\u003c/a\u003e \u003c/div\u003e (The actual, real, search results follow.)   ä¸€ä¸ªæ¥è·å–æ‰€æœ‰å†…å®¹çš„çˆ¬è™«å°†ä¼šè¢«æ‰¾åˆ°ï¼Œå°±åƒè·å–å…¶ä»–ç»“æœä¸€æ ·ï¼Œè®¿é—®é“¾æ¥ï¼ŒæŸ¥æ‰¾æƒ³è¦çš„å†…å®¹ã€‚ä¸€ä¸ªçœŸäººå°†ä¸ä¼šçœ‹åˆ°ï¼ˆå› ä¸ºä½¿ç”¨ CSS éšè—ï¼‰ï¼Œè€Œä¸”æ›´ä¸ä¼šè®¿é—®è¿™ä¸ªé“¾æ¥ã€‚è€Œæ­£è§„æˆ–è€…æœŸæœ›çš„èœ˜è››æ¯”å¦‚è°·æ­Œçš„èœ˜è››å°†ä¸ä¼šè®¿é—®è¿™ä¸ªé“¾æ¥ï¼Œå› ä¸ºä½ å¯ä»¥å°† /scrapertrap/ åŠ å…¥ä½ çš„ robots.txt ä¸­ï¼ˆä¸è¦å¿˜è®°å¢åŠ ï¼‰\nä½ å¯ä»¥è®©ä½ çš„ scrapertrap.php åšä¸€äº›æ¯”å¦‚é™åˆ¶è¿™ä¸ª IP è®¿é—®çš„äº‹æƒ…ï¼Œæˆ–è€…å¼ºåˆ¶è¿™ä¸ª IP ä¹‹åçš„è¯·æ±‚å‡ºéªŒè¯ç ã€‚\n ä¸è¦å¿˜è®°åœ¨ä½ çš„ robots.txt ä¸­æ·»åŠ ç¦æ­¢è®¿é—® /scrapertrap/ çš„è§„åˆ™é¿å…æ‰€æœ‰çš„æœç´¢å¼•æ“ä¸ä¼šä¸­æ‹› ä½ å¯ä»¥/åº”è¯¥å’Œä¸Šä¸ªç»å¸¸æ›´æ¢ HTML ç»“æ„çš„ä¾‹å­ä¸€èµ·ä½¿ç”¨ ä¹Ÿè¦ç»å¸¸ä¿®æ”¹å®ƒï¼Œå› ä¸ºçˆ¬è™«å¯èƒ½ä¼šå‘¨æœŸæ€§çš„äº†è§£å¹¶ä¸å»è®¿é—®å®ƒã€‚ä¿®æ”¹èœœç½ URL å’Œæ–‡æœ¬ã€‚ åŒæ—¶è¦è€ƒè™‘ä½¿ç”¨ id å±æ€§æˆ–å¤–éƒ¨çš„ CSS æ¥å–ä»£å†…è”çš„ CSSï¼Œè¦ä¸ç„¶çˆ¬è™«å°†ä¼šå­¦ä¼šé˜²æ­¢çˆ¬å–æ‰€æœ‰åŒ…å«éšè—å±æ€§ style çš„èŠ‚ç‚¹ã€‚ å¹¶ä¸”åªæ˜¯å¶å°”å¯ç”¨å®ƒï¼Œ è¿™æ ·çˆ¬è™«ä¸€å¼€å§‹æ­£å¸¸å·¥ä½œï¼Œä½†æ˜¯è¿‡æ®µæ—¶é—´å°±ä¸èµ·ä½œç”¨ã€‚è¿™ä¸ªåŒæ ·ä¹Ÿé€‚ç”¨äºä¸Šä¸ªä¾‹å­ã€‚ è¦æ³¨æ„å¯èƒ½ä¼šæœ‰æ¶æ„çš„äººåœ¨è®ºå›å‘å¸ƒåƒ [img]http://yoursite.com/scrapertrap/scrapertrap.php[img]ï¼Œ ç„¶åå½“æ­£å¸¸ç”¨æˆ·è®¿é—®è½®ç„¶ç„¶åç‚¹å‡»åˆ°ä½ çš„èœœç½é“¾æ¥ã€‚æ‰€ä»¥ä¸Šä¸ªæ³¨æ„äº‹é¡¹ä¸­ç»å¸¸æ›´æ¢ä½ çš„èœœç½é“¾æ¥æ˜¯éå¸¸é‡è¦çš„ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥æ£€æŸ¥ Refererã€‚  å½“è¯†åˆ«ä¸ºçˆ¬è™«æ—¶ï¼Œæä¾›å‡çš„æˆ–æ— ç”¨çš„æ•°æ® å¦‚æœä½ ç¡®å®šæŸä¸ªè®¿é—®æ˜¯çˆ¬è™«ï¼Œä½ å¯ä»¥æä¾›å‡çš„æˆ–è€…æ— ç”¨çš„æ•°æ®ï¼›è¿™å°†ç ´åçˆ¬è™«ä»ä½ ç½‘ç«™è·å–çš„æ•°æ®ã€‚ ä½ è¿˜åº”è¯¥æŠŠå®ƒå’ŒçœŸå®æ•°æ®è¿›è¡Œæ··æ·†ï¼Œè¿™æ ·çˆ¬è™«å°±ä¸çŸ¥é“ä»–ä»¬è·å–çš„åˆ°åº•æ˜¯çœŸçš„è¿˜æ˜¯å‡çš„æ•°æ®ã€‚\nä¸¾ä¸ªä¾‹å­ï¼šå¦‚æœä½ æœ‰ä¸€ä¸ªæ–°é—»ç«™ï¼Œä½ æ£€æµ‹åˆ°äº†ä¸€ä¸ªçˆ¬è™«ï¼Œä¸è¦å»ç›´æ¥å°ç¦å®ƒï¼Œ è€Œæ˜¯æä¾›å‡çš„æˆ–è€… éšæœºç”Ÿæˆ çš„æ–‡ç« ï¼Œé‚£çˆ¬è™«è·å–çš„æ•°æ®å°†ä¼šè¢«ç ´åã€‚å¦‚æœä½ å°†å‡æ•°æ®å’ŒçœŸå®çš„æ•°æ®è¿›è¡Œæ··æ·†ï¼Œé‚£çˆ¬è™«å¾ˆéš¾è·å–åˆ°ä»–ä»¬æƒ³è¦çš„çœŸå®æ–‡ç« ã€‚\nä¸è¦æ¥å—æ²¡æœ‰ UserAgent çš„è¯·æ±‚ å¾ˆå¤šæ‡’æƒ°çš„ç¨‹åºå‘˜ä¸ä¼šåœ¨ä»–ä»¬çš„çˆ¬è™«å‘è¯·æ±‚æ—¶å¸¦ä¸Š UserAgentï¼Œè€Œæ‰€æœ‰çš„æµè§ˆå™¨åŒ…æ‹¬æœç´¢å¼•æ“èœ˜è››éƒ½ä¼šæºå¸¦ã€‚\nå¦‚æœè¯·æ±‚ä½ æ—¶æ²¡æœ‰æºå¸¦ UserAgent header å¤´ï¼Œä½ å¯ä»¥å±•ç¤ºéªŒè¯ç ï¼Œæˆ–è€…ç›´æ¥å°ç¦æˆ–è€…é™åˆ¶è®¿é—®ï¼ˆæˆ–è€…åƒä¸Šé¢è¯´çš„æä¾›å‡æ•°æ®æˆ–è€…å…¶ä»–çš„ï¼‰\nè¿™ä¸ªéå¸¸ç®€å•å»é¿å…ï¼Œä½†æ˜¯ä½œä¸ºä¸€ç§é’ˆå¯¹ä¹¦å†™ä¸å½“çš„çˆ¬è™«ï¼Œæ˜¯å€¼å¾—å»åšçš„ã€‚\nä¸è¦æ¥å— UserAgent æ˜¯é€šç”¨çˆ¬è™«æˆ–åœ¨çˆ¬è™«é»‘åå•çš„è¯·æ±‚ å¾ˆå¤šæƒ…å†µä¸‹ï¼Œçˆ¬è™«å°†ä¼šä½¿ç”¨çœŸå®æµè§ˆå™¨æˆ–æœç´¢å¼•æ“çˆ¬è™«ç»å¯¹ä¸ä¼šä½¿ç”¨çš„ UserAgentï¼Œæ¯”å¦‚ï¼š\n â€œMozillaâ€ ï¼ˆå°±åªæœ‰è¿™ä¸ªï¼Œæˆ‘æ›¾ç»çœ‹åˆ°è¿‡ä¸€äº›çˆ¬è™«çš„é—®é¢˜ç”¨è¿™ä¸ªï¼Œä½†çœŸå®æµè§ˆå™¨ç»å¯¹ä¸ä¼šç”¨ï¼‰ â€œJava 1.7.43_u43â€ ï¼ˆJava çš„ HttpUrlConnection çš„é»˜è®¤ UserAgentï¼‰ â€œBIZCO EasyScraping Studio 2.0â€ â€œwgetâ€, â€œcurlâ€, â€œlibcurlâ€,.. ï¼ˆåŸºç¡€çˆ¬è™«æœ‰æ—¶å€™ä¼šç”¨ Wget å’Œ cURLï¼‰  å¦‚æœä½ å‘ç°ä¸€äº›çˆ¬è™«ä½¿ç”¨çœŸå®æµè§ˆå™¨æˆ–åˆæ³•èœ˜è››ç»å¯¹ä¸ä¼šä½¿ç”¨çš„ UserAgentï¼Œä½ å¯ä»¥å°†å…¶æ·»åŠ åˆ°ä½ çš„é»‘åå•ä¸­ã€‚\næ£€æŸ¥ Referer header å¤´ å¯¹ä¸Šä¸€ç« èŠ‚çš„è¡¥å……ï¼Œä½ ä¹Ÿå¯ä»¥æ£€æŸ¥ Referer ï¼ˆæ˜¯çš„ï¼Œå®ƒæ˜¯ Refererï¼Œè€Œä¸æ˜¯ Referrerï¼‰ï¼Œ ä¸€äº›æ‡’æƒ°çš„çˆ¬è™«å¯èƒ½ä¸ä¼šæºå¸¦çš„è¿™ä¸ªï¼Œæˆ–è€…åªæ˜¯æ¯æ¬¡éƒ½æºå¸¦ä¸€æ ·çš„ï¼ˆæœ‰æ—¶å€™æ˜¯ â€œgoogle.comâ€ï¼‰ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœç”¨æˆ·æ˜¯ä»ç«™å†…æœç´¢ç»“æœé¡µç‚¹å‡»è¿›å…¥æ–‡ç« è¯¦æƒ…çš„ï¼Œé‚£è¦æ£€æŸ¥ Referer è¿™ä¸ª header å¤´æ˜¯å¦å­˜åœ¨è¿˜è¦çœ‹æœç´¢ç»“æœé¡µçš„æ‰“ç‚¹ã€‚\næ³¨æ„ï¼š\n çœŸå®æµè§ˆå™¨å¹¶ä¸æ€»æ˜¯æºå¸¦ Refererï¼› å¾ˆå®¹æ˜“è¢«é¿å…  è¿˜æ˜¯ï¼Œä½œä¸ºä¸€ç§é˜²æ­¢ç®€å•çˆ¬è™«çš„æ–¹æ³•ï¼Œä¹Ÿå€¼å¾—å»å®ç°ã€‚\nå¦‚æœä¸è¯·æ±‚èµ„æºï¼ˆCSSï¼Œimagesï¼‰ï¼Œå®ƒå¯èƒ½ä¸æ˜¯çœŸå®æµè§ˆå™¨ ä¸€ä¸ªçœŸå®æµè§ˆå™¨ï¼ˆé€šå¸¸ï¼‰ä¼šè¯·æ±‚å’Œä¸‹è½½èµ„æºæ¯”å¦‚ CSS å’Œ å›¾ç‰‡ã€‚HTML è§£æå™¨å’Œçˆ¬å–å™¨å¯èƒ½åªå…³å¿ƒç‰¹å®šçš„é¡µé¢å’Œå†…å®¹ã€‚\nä½ å¯ä»¥åŸºäºè®¿é—®ä½ èµ„æºçš„æ—¥å¿—ï¼Œå¦‚æœä½ çœ‹åˆ°å¾ˆå¤šè¯·æ±‚åªè¯·æ±‚ HTMLï¼Œé‚£å®ƒå¯èƒ½å°±æ˜¯çˆ¬è™«ã€‚\næ³¨æ„æœç´¢å¼•æ“èœ˜è››ã€æ—§çš„ç§»åŠ¨è®¾å¤‡ã€å±å¹•é˜…è¯»å™¨å’Œè®¾ç½®é”™è¯¯çš„è®¾å¤‡å¯èƒ½ä¹Ÿä¸ä¼šè¯·æ±‚èµ„æºã€‚\nè¦æ±‚ä½¿ç”¨ Cookieï¼›ä½¿ç”¨å®ƒä»¬æ¥è·Ÿè¸ªç”¨æˆ·å’Œçˆ¬è™«è¡Œä¸º è®¿é—®ä½ ç½‘ç«™æ—¶ï¼Œä½ å¯ä»¥è¦æ±‚ cookie å¿…é¡»å¼€å¯ã€‚è¿™ä¸ªèƒ½è¯†åˆ«æ²¡æœ‰ç»éªŒå’Œçˆ¬è™«æ–°æ‰‹ï¼Œç„¶è€Œçˆ¬è™«è¦æºå¸¦ Cookie ä¹Ÿååˆ†ç®€å•ã€‚å¦‚æœä½ è¦æ±‚å¼€å¯ Cookieï¼Œä½ èƒ½ä½¿ç”¨å®ƒä»¬æ¥è¿½è¸ªç”¨æˆ·å’Œçˆ¬è™«çš„è¡Œä¸ºï¼Œç„¶ååŸºäºæ­¤æ¥å®ç°é¢‘ç‡é™åˆ¶ã€å°ç¦ã€æˆ–è€…æ˜¾ç¤ºéªŒè¯ç è€Œä¸ä»…ä»…ä¾èµ– IP åœ°å€ã€‚\nä¸¾ä¸ªä¾‹å­ï¼š å½“ç”¨æˆ·è¿›è¡Œæœç´¢æ—¶ï¼Œè®¾ç½®ä¸€ä¸ªå”¯ä¸€çš„ Cookieã€‚å½“æœç´¢ç»“æœåŠ è½½å‡ºæ¥ä¹‹åï¼ŒéªŒè¯è¿™ä¸ª Cookieã€‚ å¦‚æœä¸€ä¸ªç”¨æˆ·æ‰“å¼€äº†æ‰€æœ‰çš„æœç´¢ç»“æœï¼ˆå¯ä»¥ä» Cookie ä¸­å¾—çŸ¥ï¼‰ï¼Œé‚£å¾ˆå¯èƒ½å°±æ˜¯çˆ¬è™«\nä½¿ç”¨ Cookie å¯èƒ½æ˜¯ä½æ•ˆçš„ï¼Œå› ä¸ºçˆ¬è™«ä¹Ÿå¯ä»¥æºå¸¦ Cookie å‘é€è¯·æ±‚ï¼Œä¹Ÿå¯ä»¥æ ¹æ®éœ€è¦ä¸¢å¼ƒã€‚ å¦‚æœä½ çš„ç½‘ç«™åªèƒ½åœ¨å¼€å¯ Cookie æ—¶ä½¿ç”¨ï¼Œä½ ä¹Ÿä¸èƒ½ç»™å…³é—­ Cookie çš„ç”¨æˆ·æä¾›æœåŠ¡ã€‚\nè¦æ³¨æ„å¦‚æœä½ ä½¿ç”¨ JavaScript å»è®¾ç½®å’Œæ£€æµ‹ Cookieï¼Œä½ èƒ½å°ç¦é‚£äº›æ²¡æœ‰è¿è¡Œ JavaScript çš„çˆ¬è™«ï¼Œå› ä¸ºå®ƒä»¬æ²¡åŠæ³•è·å–å’Œå‘é€ Cookieã€‚\nä½¿ç”¨ JavaScript å’Œ AJAX åŠ è½½å†…å®¹ ä½ å¯ä»¥åœ¨é¡µé¢åŠ è½½å®Œæˆä¹‹åï¼Œä½¿ç”¨ JavaScript + AJAX æ¥åŠ è½½ä½ çš„å†…å®¹ã€‚è¿™ä¸ªå¯¹äºé‚£äº›æ²¡æœ‰è¿è¡Œ JavaScript çš„ HTML åˆ†æå™¨æ¥è¯´å°†æ— æ³•å–å¾—æ•°æ®ã€‚ è¿™ä¸ªå¯¹äºæ²¡æœ‰ç»éªŒæˆ–è€…æ–°æ‰‹ç¨‹åºå‘˜å†™çš„çˆ¬è™«éå¸¸æœ‰æ•ˆã€‚\næ³¨æ„ï¼š\n ä½¿ç”¨ JavaScript åŠ è½½å†…å®¹å°†ä¼šé™ä½ç”¨æˆ·ä½“éªŒå’Œæ€§èƒ½ï¼› æœç´¢å¼•æ“ä¹Ÿä¸ä¼šè¿è¡Œ JavaScriptï¼Œå› æ­¤ä¸ä¼šå¯¹ä½ çš„å†…å®¹è¿›è¡Œæ”¶å½•ã€‚è¿™å¯¹äºæœç´¢ç»“æœæ¥è¯´å¯èƒ½ä¸æ˜¯é—®é¢˜ï¼Œä½†æ˜¯è¦æ³¨æ„å…¶ä»–é¡µé¢ï¼Œæ¯”å¦‚æ–‡ç« é¡µé¢ï¼› å†™çˆ¬è™«çš„ç¨‹åºå‘˜è·å–åˆ°åŠ è½½å†…å®¹çš„ API åå¯ä»¥ç›´æ¥ä½¿ç”¨å®ƒ  æ··æ·†ä½ çš„æ•°æ®å’Œç½‘ç»œè¯·æ±‚ï¼Œä¸è¦è®©å…¶ç›´æ¥é€šè¿‡è„šæœ¬å°±èƒ½è·å– å¦‚æœä½ ç”¨ Ajax å’Œ JavaScript åŠ è½½ä½ çš„æ•°æ®ï¼Œåœ¨ä¼ è¾“çš„æ—¶å€™è¦æ··æ·†ä¸€ä¸‹ã€‚æ¯”å¦‚ï¼Œä½ å¯ä»¥åœ¨æœåŠ¡å™¨ç«¯ encode ä½ çš„æ•°æ®ï¼ˆæ¯”å¦‚ç®€å•çš„ä½¿ç”¨ base64 æˆ– è´Ÿè½½ä¸€äº›çš„å¤šæ¬¡æ··æ·†ã€ä½åç§»æˆ–è€…æ˜¯è¿›è¡ŒåŠ å¯†ï¼‰ï¼Œ ç„¶ååœ¨å®¢æˆ·ç«¯åœ¨ Ajax è·å–æ•°æ®ä¹‹åå†è¿›è¡Œ decodeã€‚è¿™æ„å‘³ç€å¦‚æœæœ‰äººè¦æŠ“åŒ…è·å–ä½ çš„è¯·æ±‚å°±ä¸èƒ½ç›´æ¥çœ‹åˆ°ä½ é¡µé¢å¦‚ä½•åŠ è½½æ•°æ®ï¼Œè€Œä¸”é‚£äº›äººä¹Ÿä¸èƒ½ç›´æ¥é€šè¿‡ API è·å¾—ä½ çš„æ•°æ®ï¼Œå¦‚æœæƒ³è¦è·å–æ•°æ®ï¼Œå°±å¿…é¡»è¦å»è§£å¯†ä½ çš„ç®—æ³•ã€‚\n  å¦‚æœä½ ç”¨ Ajax åŠ è½½æ•°æ®ï¼Œé‚£ä½ åº”è¯¥å¼ºåˆ¶åœ¨é¡µé¢åŠ è½½ä¹‹åæ‰å¯ä»¥è·å–ï¼Œæ¯”å¦‚è¦æ±‚è·å–æ•°æ®å¿…é¡»åŒ…å« session ä¿¡æ¯ï¼Œè¿™äº›ä½ å¯ä»¥åœ¨é¡µé¢åŠ è½½çš„æ—¶å€™åµŒå…¥åˆ° JavaScript æˆ– HTML ä¸­\n  ä½ ä¹Ÿå¯ä»¥ç›´æ¥å§æ··æ·†çš„æ•°æ®åµŒå…¥åˆ° HTML ä¸­ï¼Œç„¶åç”¨ JavaScript å»è§£å¯†ç„¶åå†æ˜¾ç¤ºå®ƒä»¬ï¼Œè¿™æ ·çš„è¯ï¼Œä½ å°±ä¸éœ€è¦å†ä½¿ç”¨ Ajax å»åšé¢å¤–çš„è¯·æ±‚ã€‚ è¿™æ ·åšå¯ä»¥è®©é‚£äº›ä¸è¿è¡Œ JavaScript çš„ HTML è§£æå™¨æ›´éš¾è·å–ä½ çš„æ•°æ®ï¼Œä»–ä»¬å¿…é¡»è¦åè§£ä½ çš„ JavaScriptï¼ˆæ²¡é”™ï¼ŒJavaScript ä¹Ÿè¦åšæ··æ·†ï¼‰\n  ä½ åº”è¯¥ç»å¸¸æ›´æ¢æ··æ·†æ–¹æ³•ä»¥å…çˆ¬è™«æ‰¾å‡ºæ–¹æ³•æ­ç§˜å®ƒ\n  ä¸‹é¢æ˜¯ä¸€äº›è¿™ä¸ªæ–¹å¼çš„ç¼ºç‚¹ï¼š\n å®ç°ã€ç»´æŠ¤å’Œè°ƒè¯•éƒ½éå¸¸éº»çƒ¦ è™½ç„¶è®©çˆ¬è™«å˜å¾—ä¸å®¹æ˜“æŠ“å–ï¼Œä½†æ˜¯å¯¹äºæˆªå±ç±»çš„çˆ¬è™«æ¥è¯´ï¼Œå®ƒä»¬å®é™…ä¸Šä¼šè¿è¡Œ JavaScriptï¼Œæ‰€ä»¥èƒ½è·å–åˆ°æ•°æ® ï¼ˆä¸è¿‡å¾ˆå¤šç®€å•çš„ HTML è§£é‡Šå™¨ä¸ä¼šè¿è¡Œ JavaScriptï¼‰ å¦‚æœçœŸå®ç”¨æˆ·ç¦ç”¨äº† JavaScriptï¼Œé‚£ä½ çš„ç½‘ç«™å°†ä¸èƒ½æ­£å¸¸æ˜¾ç¤º æ€§èƒ½å’Œé¡µé¢åŠ è½½é€Ÿåº¦ä¼šå—åˆ°å½±å“  å…¶ä»–éæŠ€æœ¯åšæ³• ä½ çš„æœåŠ¡å™¨ä¾›åº”å•†å¯èƒ½æä¾›æœç´¢å¼•æ“èœ˜è››æˆ–çˆ¬è™«çš„é˜²å¾¡ï¼š æ¯”å¦‚ï¼ŒCloudFlare æä¾›åèœ˜è››å’Œåçˆ¬è™«çš„é˜²å¾¡ï¼Œä½ åªéœ€è¦ç›´æ¥å¯ç”¨å®ƒå°±å¯ä»¥äº†ï¼Œå¦å¤– AWS ä¹Ÿæä¾›ç±»ä¼¼æœåŠ¡ã€‚è€Œä¸” Apache çš„ mod_evasive æ¨¡å—ä¹Ÿèƒ½è®©ä½ å¾ˆè½»æ¾åœ°å®ç°é¢‘ç‡é™åˆ¶ã€‚\nç›´æ¥å‘Šè¯‰åˆ«äººä¸è¦æŠ“å–ï¼Œä¼šæœ‰äººå°Šé‡è€Œä¸”åœæ­¢æŠ“å– ä½ åº”è¯¥ç›´æ¥å‘Šè¯‰äººä»¬ä¸è¦æŠ“å–ä½ çš„ç½‘ç«™ï¼Œæ¯”å¦‚ï¼Œåœ¨ä½ çš„æœåŠ¡æ¡æ¬¾ä¸­è¡¨æ˜ã€‚æœ‰äº›äººç¡®å®ä¼šå°Šé‡å®ƒï¼Œè€Œä¸”ä¸åœ¨ä½ å…è®¸çš„æƒ…å†µä¸‹ä¸ä¼šå†å»æŠ“å–æ•°æ®ã€‚\nå¯»æ±‚å¾‹å¸ˆçš„æ´åŠ© å¾‹å¸ˆä»¬çŸ¥é“å¦‚ä½•å¤„ç†ä¾µçŠ¯ç‰ˆæƒçš„äº‹æƒ…ï¼Œè€Œä¸”ä»–ä»¬å¯ä»¥å‘é€å¾‹å¸ˆå‡½ã€‚ DMCAï¼ˆè¯‘è€…æ³¨ï¼šDigital Millennium Copyright Actï¼Œæ•°å­—åƒå¹´ç‰ˆæƒæ³•æ¡ˆï¼Œæ˜¯ä¸€ä¸ªç¾å›½ç‰ˆæƒæ³•å¾‹ï¼‰ ä¹Ÿèƒ½æä¾›æ´åŠ©ã€‚\nç›´æ¥æä¾› API è·å–ä½ çš„æ•°æ® è¿™çœ‹èµ·æ¥é€‚å¾—å…¶åï¼Œä½†æ˜¯ä½ å¯ä»¥è¦æ±‚æ ‡æ˜æ¥æºå¹¶åŒ…å«è¿”å›ä½ ç«™ç‚¹çš„é“¾æ¥ã€‚ç”šè‡³ä¹Ÿå¯ä»¥å”®å–ä½ çš„ API è€Œèµšå–è´¹ç”¨ã€‚\nè¿˜æœ‰å°±æ˜¯ï¼ŒStack Exchange æä¾›äº† APIï¼Œä½†æ˜¯å¿…é¡»è¦æ ‡æ˜æ¥æºã€‚\nå…¶ä»–è¡¥å……   è¦åœ¨ç”¨æˆ·ä½“éªŒå’Œåçˆ¬ä¹‹é—´åšæƒè¡¡ï¼šä½ åšçš„æ¯ä¸ªä¸¾æªéƒ½æœ‰å¯èƒ½åœ¨æŸç§ç¨‹åº¦ä¸Šå½±å“ç”¨æˆ·ä½“éªŒï¼Œæ‰€ä»¥ä½ å¿…é¡»è¦æƒè¡¡å’Œå¦¥åï¼›\n  ä¸è¦å¿˜ä½ çš„ç§»åŠ¨ç«™ç‚¹å’Œ APPï¼šå¦‚æœä½ çš„ç«™ç‚¹æœ‰ç§»åŠ¨ç‰ˆï¼Œè¦å°å¿ƒçˆ¬è™«ä¹Ÿå¯ä»¥é€šè¿‡å®ƒçˆ¬å–ä½ çš„æ•°æ®ã€‚æˆ–è€…è¯´ä½ æœ‰ç§»åŠ¨ APPï¼Œä»–ä»¬ä¹Ÿå¯ä»¥æˆªå±åˆ†æï¼Œ æˆ–è€…å¯ä»¥æŠ“å–ä½ çš„ç½‘ç»œè¯·æ±‚å»ç›´æ¥æ‰¾åˆ°ä½ çš„ RESTful çš„ API ç›´æ¥ä½¿ç”¨ï¼›\n  å¦‚æœä½ å¯¹ä¸€äº›ç‰¹å®šæµè§ˆå™¨æä¾›äº†ç‰¹å®šçš„ç‰ˆæœ¬ï¼Œæ¯”å¦‚å¯¹å¾ˆè€çš„ IE ç‰ˆæœ¬æä¾›ç½‘ç«™çš„é˜‰å‰²ç‰ˆï¼Œä¸è¦å¿˜è®°çˆ¬è™«ä¹Ÿå¯ä»¥ç›´æ¥çˆ¬å–å®ƒï¼›\n  é€‰å‡ºé›†ä¸­æœ€é€‚åˆä½ çš„ç­–ç•¥ç»“åˆèµ·æ¥ä½¿ç”¨ï¼Œè€Œä¸æ˜¯åªç”¨ä¸€ç§ï¼›\n  çˆ¬è™«å¯ä»¥æŠ“å–å…¶ä»–çˆ¬è™«ï¼šå¦‚æœæœ‰ä¸ªç½‘ç«™æ˜¾ç¤ºçš„å†…å®¹éƒ½æ˜¯ä»ä½ ç½‘ç«™çˆ¬å–çš„ï¼Œé‚£å¦å¤–ä¸€ä¸ªçˆ¬è™«ä¹Ÿå¯ä»¥ç›´æ¥çˆ¬å–é‚£ä¸ªç½‘ç«™ã€‚\n  æœ‰å“ªäº›æœ€æœ‰æ•ˆçš„æ–¹æ³• ï¼Ÿ ä»¥æˆ‘è‡ªå·±å†™å’Œå¸®å¿™åˆ«äººå†™çˆ¬è™«çš„ç»éªŒï¼Œæˆ‘è®¤ä¸ºæœ€æœ‰æ•ˆçš„æ–¹æ³•æ˜¯ï¼š\n  ç»å¸¸ä¿®æ”¹ HTML çš„ç»“æ„\n  èœœç½å’Œå‡æ•°æ®\n  ä½¿ç”¨æ··æ·†çš„ JavaScriptã€Ajax è¿˜æœ‰ Cookie\n  é¢‘ç‡é™åˆ¶ã€çˆ¬è™«æ£€æµ‹å’Œè¯·æ±‚å°ç¦\n  æ‰©å±•é˜…è¯»ï¼š\n ç»´åŸºç™¾ç§‘å…³äº Web çˆ¬è™«çš„æ–‡ç«  ï¼Œ å…¶ä¸­æåˆ°äº†å¾ˆå¤š Web çˆ¬è™«çš„ç›¸å…³æŠ€æœ¯å’Œçˆ¬è™«ç±»å‹ï¼Œçœ‹å®Œå¦‚ä½•è¿›è¡Œ web çˆ¬å–çš„ä¸€äº›ä¿¡æ¯ï¼Œä¹Ÿä¸è¦å¿˜è®°çœ‹ä¸€çœ‹çˆ¬å–çš„åˆæ³•æ€§ã€‚  æœ€åç¥ä½ åœ¨ä¿æŠ¤ä½ ç½‘ç«™çš„å†…å®¹åå·è·¯ä¸Šä¸€è·¯é¡ºé£â€¦\nvia: https://github.com/JonasCz/How-To-Prevent-Scraping\nä½œè€…ï¼šJonasCz è¯‘è€…ï¼šh1z3y3\n","description":"","tags":["åçˆ¬"],"title":"Web åçˆ¬æŒ‡å—ï¼ˆæˆ–è‡³å°‘è®©å…¶æ›´éš¾æŠ“å–ï¼‰","uri":"/posts/how-to-prevent-scraping/"},{"categories":null,"content":"Golang é€ƒé€¸åˆ†æ Golang çš„åƒåœ¾å›æ”¶æœºåˆ¶å¯ä»¥è¿›è¡Œè‡ªåŠ¨å†…å­˜ç®¡ç†è®©æˆ‘ä»¬çš„ä»£ç æ›´ç®€æ´ï¼ŒåŒæ—¶å‘ç”Ÿå†…å­˜æ³„æ¼çš„å¯èƒ½æ€§æ›´å°ã€‚ ç„¶è€Œï¼ŒGC ä¼šå®šæœŸåœæ­¢å¹¶æ”¶é›†æœªä½¿ç”¨çš„å¯¹è±¡ï¼Œå› æ­¤è¿˜æ˜¯ä¼šå¢åŠ ç¨‹åºçš„å¼€é”€ã€‚ Go çš„ç¼–è¯‘å™¨ååˆ†èªæ˜ï¼Œæ¯”å¦‚å†³å®šå˜é‡éœ€è¦åˆ†é…åœ¨å †ä¸Šè¿˜æ˜¯æ ˆä¸Šï¼Œå’Œåˆ†é…åœ¨å †ä¸Šä¸åŒçš„æ˜¯åœ¨æ ˆä¸Šçš„å˜é‡åœ¨å£°æ˜å®ƒçš„å‡½æ•°ç»“æŸä¹‹åå°±ä¼šè¢«å›æ”¶ã€‚ é‚£å¯¹äº GC æ¥è¯´ï¼Œåˆ†é…åœ¨æ ˆä¸Šçš„å˜é‡ä¸ä¼šå¸¦æ¥é¢å¤–çš„å¼€é”€ï¼Œåœ¨å‡½æ•° return ä¹‹åï¼Œå‡½æ•°çš„æ•´ä¸ªè°ƒç”¨æ ˆéƒ½ä¼šè¢«é”€æ¯ã€‚\né‚£åˆ°åº•å˜é‡åº”è¯¥åˆ†é…åœ¨å †ä¸Šè¿˜æ˜¯æ ˆä¸Šï¼ŒGolang å¦‚ä½•å†³å®šå‘¢ï¼Œè¿™å°±è¦è¯´åˆ° Golang çš„é€ƒé€¸åˆ†æã€‚\nåˆ¤æ–­é€ƒé€¸çš„åŸºæœ¬è§„åˆ™æ˜¯å¦‚æœä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼æ˜¯æœ¬å‡½æ•°å†…å£°æ˜çš„æŸä¸ªå˜é‡çš„å¼•ç”¨ï¼Œé‚£ä¹ˆå°±ç§°è¿™ä¸ªå˜é‡ä»è¿™ä¸ªå‡½æ•°ä¸­é€ƒé€¸äº†ã€‚ ä½œä¸ºæœ¬å‡½æ•°çš„è¿”å›å€¼ï¼Œå®ƒè¿˜èƒ½è¢«å‡½æ•°å¤–çš„å…¶ä»–ç¨‹åºä¿®æ”¹ï¼Œæ‰€ä»¥å®ƒå¿…é¡»åˆ†é…åœ¨å †ä¸Šï¼Œè€Œä¸èƒ½åˆ†é…åœ¨é‚£ä¸ªå‡½æ•°çš„æ ˆä¸Šã€‚\nå› æ­¤ï¼Œå¦‚æœåœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œèƒ½å¯¹å˜é‡çš„é€ƒé€¸æƒ…å†µä½œåˆ†æï¼Œå¯ä»¥æé«˜æˆ‘ä»¬ç¨‹åºçš„æ€§èƒ½ã€‚ é¦–å…ˆæœ€å¤§çš„å¥½å¤„å°±æ˜¯èƒ½å¤Ÿå‡å°‘åƒåœ¾å›æ”¶çš„å‹åŠ›ï¼Œæ²¡æœ‰é€ƒé€¸çš„å˜é‡åˆ†é…åœ¨æ ˆä¸Šï¼Œå‡½æ•°è¿”å›å°±èƒ½ç›´æ¥å›æ”¶èµ„æºï¼› å…¶æ¬¡é€ƒé€¸åˆ†æå®Œä¹‹åï¼Œæˆ‘ä»¬èƒ½ç¡®å®šå“ªäº›å˜é‡å…¶å®å¯ä»¥åˆ†é…åœ¨æ ˆä¸Šï¼Œæ ˆçš„åˆ†é…æ¯”å †å¿«ï¼Œæ€§èƒ½æ›´å¥½ï¼› è¿˜æœ‰å¯ä»¥è¿›è¡ŒåŒæ­¥æ¶ˆé™¤ï¼Œå¦‚æœå®šä¹‰å˜é‡çš„å‡½æ•°æœ‰åŒæ­¥é”ï¼Œä½†æ˜¯è¿è¡Œæ—¶å´åªæœ‰ä¸€ä¸ªçº¿ç¨‹è®¿é—®ï¼Œé‚£æ­¤æ—¶é€ƒé€¸åˆ†æåçš„æœºå™¨ç ï¼Œä¼šå»æ‰åŒæ­¥é”è¿è¡Œã€‚\nå¼€å¯ Go ç¼–è¯‘æ—¶çš„é€ƒé€¸åˆ†ææ—¥å¿— åœ¨ç¼–è¯‘æ—¶ï¼Œæ·»åŠ  -gcflags '-m' å‚æ•°å³å¯æŸ¥çœ‹goç¼–è¯‘è¿‡ç¨‹ä¸­è¯¦ç»†çš„é€ƒé€¸åˆ†ææ—¥å¿—ã€‚ ä½†ä¸ºäº†ä¸è®© Go ç¼–è¯‘æ—¶è‡ªåŠ¨å†…è”å‡½æ•°ï¼Œä¼šåŠ ä¸Š -l å‚æ•°ï¼Œæœ€ç»ˆä¸º -gcflags '-m -l'ã€‚\nExample 0:\npackage main type S struct {} func main() { var x S _ = identity(x) } func identity(x S) S { return x } Output:\n$ go run -gcflags '-m -l' escape.go $ $ å¯ä»¥çœ‹åˆ°æ²¡æœ‰ä»»ä½•è¾“å‡ºï¼Œæˆ‘ä»¬çŸ¥é“ Go åœ¨è°ƒç”¨å‡½æ•°çš„æ—¶å€™ï¼Œä¼šé‡‡ç”¨æŒ‰å€¼ä¼ é€’ï¼Œé‚£ä¹ˆåœ¨ main å‡½æ•°ä¸­å£°æ˜çš„ xï¼Œ ä¼šè¢«æ‹·è´åˆ° identity() å‡½æ•°çš„æ ˆä¸­ã€‚é€šå¸¸ï¼Œæ²¡æœ‰å¼•ç”¨çš„ä»£ç æ€»æ˜¯ä½¿ç”¨æ ˆåˆ†é…ï¼Œå› æ­¤æ²¡æœ‰é€ƒé€¸åˆ†ææ—¥å¿—çš„è¾“å‡ºã€‚\né‚£å¦‚æœç¨å¾®æ”¹ä¸€ä¸‹ä»£ç ï¼š\nExample 1:\npackage main type S struct {} func main() { var x S y := \u0026x _ = *identity(y) } func identity(z *S) *S { return z } Output:\n$ go run -gcflags '-m -l' escape.go # command-line-arguments ./escape.go:11:22: leaking param: z to result ~r1 level=0 ./escape.go:7:8: main \u0026x does not escape ç¬¬ä¸€è¡Œæ˜¯ z å˜é‡æ˜¯æµç»æŸä¸ªå‡½æ•°çš„æ„æ€ï¼Œä»…ä½œä¸ºå‡½æ•°çš„è¾“å…¥ï¼Œå¹¶ä¸”ç›´æ¥è¿”å›ï¼Œ åœ¨ identity() ä¸­ä¹Ÿæ²¡æœ‰ä½¿ç”¨åˆ° z çš„å¼•ç”¨ï¼Œæ‰€ä»¥å˜é‡æ²¡æœ‰é€ƒé€¸ã€‚\nç¬¬äºŒè¡Œï¼Œx åœ¨ main() å‡½æ•°ä¸­å£°æ˜ï¼Œæ‰€ä»¥æ˜¯åœ¨ main() å‡½æ•°ä¸­çš„æ ˆä¸­çš„ï¼Œä¹Ÿæ²¡æœ‰é€ƒé€¸ã€‚\nExample 2:\npackage main type S struct {} func main() { var x S _ = *ref(x) } func ref(z S) *S { return \u0026z } Output:\n$ go run -gcflags '-m -l' escape.go # command-line-arguments ./escape.go:11:10: \u0026z escapes to heap ./escape.go:10:16: moved to heap: z å¯ä»¥çœ‹åˆ°å‘ç”Ÿäº†é€ƒé€¸ã€‚ ref() çš„å‚æ•° z æ˜¯é€šè¿‡å€¼ä¼ é€’çš„ï¼Œæ‰€ä»¥ z æ˜¯ main() å‡½æ•°ä¸­ x çš„ä¸€ä¸ªå€¼æ‹·è´ï¼Œ è€Œ ref() è¿”å›äº† z çš„å¼•ç”¨ï¼Œæ‰€ä»¥ z ä¸èƒ½æ”¾åœ¨ref()çš„æ ˆä¸­ï¼Œ å®é™…ä¸Šè¢«åˆ†é…åˆ°äº†å †ä¸Šã€‚\nå®é™…ä¸Šï¼Œæˆ‘ä»¬å‘ç° main() å‡½æ•°ä¸­æ²¡æœ‰ç›´æ¥ä½¿ç”¨ ref() è¿”å›çš„å¼•ç”¨ï¼Œè¿™ç§æƒ…å†µå…¶å® z å¯ä»¥åˆ†é…åˆ°ref()çš„æ ˆä¸Šï¼Œ ä½†æ˜¯Goçš„é€ƒé€¸åˆ†æå¹¶æ²¡æœ‰å¤æ‚åˆ°æ¥è¯†åˆ«å‡ºè¿™ç§æƒ…å†µï¼Œå®ƒåªçœ‹è¾“å…¥è¿˜æœ‰è¿”å›çš„å˜é‡çš„æµç¨‹ã€‚ å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬æ²¡æœ‰åŠ  -l å‚æ•°ï¼Œå…¶å® ref() ä¼šè¢«ç¼–è¯‘å™¨å†…è”åˆ° main() ä½¿ç”¨ã€‚\nå¦‚æœå¼•ç”¨è¢«èµ‹å€¼åˆ°ç»“æ„ä½“çš„æˆå‘˜å‘¢ï¼Ÿ\nExample 3:\npackage main type S struct { M *int } func main() { var i int refStruct(i) } func refStruct(y int) (z S) { z.M = \u0026y return z } Output:\n$ go run -gcflags '-m -l' escape.go # command-line-arguments ./escape.go:13:9: \u0026y escapes to heap ./escape.go:12:26: moved to heap: y å¯ä»¥å‘ç°ï¼Œå³ä½¿è¿™ä¸ªå¼•ç”¨æ˜¯ç»“æ„ä½“çš„ä¸€ä¸ªæˆå‘˜ï¼ŒGoçš„é€ƒé€¸åˆ†æå¯ä»¥è·Ÿè¸ªå¼•ç”¨çš„ã€‚ å½“ç»“æ„ä½“ refStruct è¿”å›æ—¶ï¼Œy ä¸€å®šæ˜¯ä» refStruct() ä¸­é€ƒé€¸çš„ã€‚\nå¯ä»¥å†å’Œä¸‹é¢ä¾‹å­æ¯”è¾ƒä¸€ä¸‹ï¼š\nExample 4:\npackage main type S struct { M *int } func main() { var i int refStruct(\u0026i) } func refStruct(y *int) (z S) { z.M = y return z } Output:\n$ go run -gcflags '-m -l' escape.go # command-line-arguments ./escape.go:12:27: leaking param: y to result z level=0 ./escape.go:9:13: main \u0026i does not escape é‚£è¿™ä¸ª y æ²¡æœ‰é€ƒé€¸çš„åŸå› æ˜¯ï¼Œmain() ä¸­å¸¦ç€ i çš„å¼•ç”¨è°ƒç”¨äº† refStruct() å¹¶ç›´æ¥è¿”å›äº†ï¼Œ ä»æ¥æ²¡æœ‰è¶…è¿‡ main() å‡½æ•°çš„è°ƒç”¨æ ˆï¼ŒåŸå› å’Œ Example 1 å®é™…ä¸Šæ˜¯ä¸€æ ·çš„ã€‚\nå¦å¤–è¦è¯´æ˜ä¸€ç‚¹ï¼ŒExample 4 è¦æ¯” Example 3 æ›´é«˜æ•ˆï¼š\nåœ¨ Example 3 ä¸­ï¼Œi å¿…é¡»åœ¨main() çš„æ ˆä¸­ç”³è¯·ä¸€å—æ ˆç©ºé—´ï¼Œç»è¿‡refStruct()åï¼Œyè¿˜è¦åœ¨å †ä¸Šå†ç”³è¯·ä¸€å—ç©ºé—´ï¼› è€Œåœ¨ Example 4 ä¸­ï¼Œå®é™…ä¸Šåªæœ‰iç”³è¯·äº†ä¸€æ¬¡ç©ºé—´ï¼Œç„¶åå®ƒçš„å¼•ç”¨ç»è¿‡äº† refStruct() è€Œå·²ã€‚\nä¸€ä¸ªæ›´å¤æ‚çš„ä¾‹å­ï¼š\nExample 5:\npackage main type S struct { M *int } func main() { var x S var i int ref(\u0026i, \u0026x) } func ref(y *int, z *S) { z.M = y } Output:\n$ go run -gcflags '-m -l' escape.go # command-line-arguments ./escape.go:13:21: leaking param: y ./escape.go:13:21: ref z does not escape ./escape.go:10:7: \u0026i escapes to heap ./escape.go:9:7: moved to heap: i ./escape.go:10:11: main \u0026x does not escape y å’Œ z æ²¡æœ‰é€ƒé€¸å¾ˆå¥½ç†è§£ï¼Œä½†é—®é¢˜åœ¨äº y è¿˜è¢«èµ‹å€¼åˆ°å‡½æ•° ref() çš„è¾“å…¥ z çš„æˆå‘˜äº†ï¼Œ è€ŒGoçš„é€ƒé€¸åˆ†æä¸èƒ½è·Ÿè¸ªå˜é‡ä¹‹é—´çš„å…³ç³»ï¼Œä¸çŸ¥é“ i å˜æˆäº† x çš„ä¸€ä¸ªæˆå‘˜ï¼Œ åˆ†æç»“æœè¯´ i æ˜¯é€ƒé€¸çš„ï¼Œä½†æœ¬è´¨ä¸Š iæ˜¯æ²¡é€ƒé€¸çš„ï¼Œ è¿™ä¸ªæ—¶å€™Goçš„é€ƒé€¸åˆ†æå®é™…ä¸Šæ˜¯æœ‰é—®é¢˜çš„ã€‚\nè¿™é‡Œè¿˜æœ‰å¥½å¤šå› ä¸ºGoé€ƒé€¸åˆ†æçš„ä¸è¶³è€Œå¯¼è‡´è¢«åˆ†é…åˆ°å †çš„å˜æ€ä¾‹å­ï¼š https://docs.google.com/document/d/1CxgUBPlx9iJzkz9JWkb6tIpTe5q32QDmz8l0BouG0Cw/preview\nå…¶å®è¯´è¿™ä¹ˆå¤šå…¶å®å°±æ˜¯ä¸ºäº†è¯´æ˜å¦‚æœæƒ³è¦å‡å°‘åƒåœ¾å›æ”¶çš„æ—¶é—´ï¼Œæé«˜ç¨‹åºæ€§èƒ½ï¼Œ é‚£å°±è¦å°½é‡é¿å…åœ¨å †ä¸Šåˆ†é…ç©ºé—´ï¼Œä¹‹ååœ¨å†™ç¨‹åºçš„æ—¶å€™å¯ä»¥å¤šè€ƒè™‘ä¸€ä¸‹è¿™æ–¹é¢çš„é—®é¢˜ã€‚;)\nå‚è€ƒ ã€ŠGolang escape analysisã€‹\nã€ŠGo Escape Analysis Flawsã€‹\n","description":"","tags":["Golang"],"title":"Golang é€ƒé€¸åˆ†æ","uri":"/posts/golang-escape-analysis/"},{"categories":null,"content":"æ·±å…¥å‰–æ Golang Pprof æ ‡ç­¾ Polar Signal æä¾›çš„æŒç»­åˆ†æå·¥å…·å¯ä»¥å’Œä»»ä½•æ ¼å¼çš„ pprof é…ç½®é€‚é…ï¼ŒGo æ·±åº¦é›†æˆäº† pprof ç”šè‡³æ”¯æŒäº†å®ƒçš„æ ‡ç­¾ç‰¹æ€§ã€‚ç„¶è€Œï¼Œè‡ªä»æˆ‘ä»¬å‘å¸ƒäº†æˆ‘ä»¬æŒç»­åˆ†æçš„äº§å“ä¹‹åï¼Œæˆ‘ä»¬æ”¶åˆ°äº†å¾ˆå¤šå·¥ç¨‹å¸ˆçš„åé¦ˆï¼Œå‘ç°è®¸å¤šå·¥ç¨‹å¸ˆä¸çŸ¥é“å¦‚ä½•å»åˆ†æï¼Œæˆ–è€…ä¸çŸ¥é“åˆ†æèƒ½ç»™ä»–ä»¬å¸¦æ¥ä»€ä¹ˆå¥½å¤„ã€‚è¿™ç¯‡æ–‡ç« ä¸»è¦å‰–æ pprof æ ‡ç­¾ï¼Œå¹¶ä¼šç»“åˆä¸€äº› Go çš„ç¤ºä¾‹ä»£ç å»åˆ†æã€‚\nåŸºç¡€ pprof æ ‡ç­¾åªæ”¯æŒ Go çš„ CPU åˆ†æå™¨ã€‚Go çš„åˆ†æå™¨æ˜¯æŠ½æ ·åˆ†æï¼Œè¿™æ„å‘³ç€å®ƒåªä¼šæ ¹æ®ç‰¹å®šçš„é¢‘ç‡ï¼ˆé»˜è®¤æ˜¯ 1 ç§’é’Ÿ 100 æ¬¡ï¼‰å»è·å–æ‰§è¡Œä¸­å‡½æ•°çš„è°ƒç”¨æ ˆå¹¶è®°å½•ã€‚ç®€å•æ¥è¯´ï¼Œå¼€å‘è€…å¦‚æœä½¿ç”¨æ ‡ç­¾ï¼Œåœ¨åˆ†æå™¨å–æ ·æ—¶å°±å¯ä»¥å°†å‡½æ•°çš„è°ƒç”¨æ ˆè¿›è¡ŒåŒºåˆ†ï¼Œç„¶ååªèšåˆæœ‰ç›¸åŒæ ‡ç­¾çš„å‡½æ•°è°ƒç”¨æ ˆã€‚\nGo åœ¨ runtime/pprof åŒ…ä¸­å·²ç»æ”¯æŒäº†æ ‡ç­¾æ£€æµ‹ï¼Œå¯ä»¥ä½¿ç”¨ pprof.Do å‡½æ•°éå¸¸æ–¹ä¾¿çš„ä½¿ç”¨ã€‚\n1 2 3  pprof.Do(ctx, pprof.Labels(\"label-key\", \"label-value\"), func(ctx context.Context) { // execute labeled code })   è¿›é˜¶ ä¸ºäº†è¿›è¡Œæ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ pprof æ ‡ç­¾ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåŒ…å«è®¸å¤šç¤ºä¾‹çš„ä»“åº“ï¼Œç¤ºä¾‹ä»“åº“ä¼šä½œä¸ºè¿™ç¯‡æ–‡ç« å†…å®¹çš„è¯´æ˜ã€‚ä»“åº“åœ°å€ï¼šhttps://github.com/polarsignals/pprof-labels-example\nç¤ºä¾‹ä»£ç çš„ main.go é€šè¿‡å°† tanant ä¼ é€’ç»™ iterate å‡½æ•°å®ç°äº†å¤§é‡çš„ for å¾ªç¯ï¼Œå…¶ä¸­tanant1 åšäº† 10 äº¿æ¬¡å¾ªç¯ï¼Œè€Œ tanant2 åšäº† 1 äº¿æ¬¡å¾ªç¯ï¼ŒåŒæ—¶ä¼šè®°å½• CPU çš„åˆ†ææ—¥å¿—å¹¶å°†å…¶å†™å…¥ ./cpuprofile.pb.gzã€‚\nä¸ºäº†æ¼”ç¤ºå¦‚ä½•åœ¨ pprof çš„åˆ†ææ—¥å¿—ä¸­å±•ç¤º pprof æ ‡ç­¾ï¼Œç”¨ printprofile.go æ¥æ‰“å°æ¯æ¬¡æŠ½æ ·å‡½æ•°è°ƒç”¨æ ˆä»¥åŠæ ·æœ¬å€¼ï¼Œè¿˜æœ‰æ”¶é›†åˆ°æ ·æœ¬çš„æ ‡ç­¾ã€‚\nå¦‚æœæˆ‘ä»¬æ³¨é‡Šæ‰ pprof.Do çš„è¿™éƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†æ— æ³•è¿›è¡Œæ ‡ç­¾æ£€æµ‹ï¼Œè¿è¡Œ printprofile.go ä»£ç ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹æ²¡æœ‰æ ‡ç­¾çš„æŠ½æ ·åˆ†ææ—¥å¿—ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13  runtime.main main.main main.iteratePerTenant main.iterate 2540000000 --- runtime.main main.main main.iteratePerTenant main.iterate 250000000 --- Total: 2.79s   CPU åˆ†ææ•°æ®çš„å•ä½æ˜¯ çº³ç§’ï¼Œæ‰€ä»¥è¿™äº›æŠ½æ ·æ€»å…±èŠ±è´¹æ—¶é—´æ˜¯ 2.79 ç§’ï¼ˆ2540000000ns + 250000000ns = 2790000000ns = 2.79sï¼‰ã€‚\nåŒæ ·çš„ï¼Œç°åœ¨å½“æ¯æ¬¡è°ƒç”¨ iterate æ—¶æ·»åŠ æ ‡ç­¾ï¼Œç”¨ pprof åˆ†æï¼Œè¿™äº›æ•°æ®çœ‹èµ·æ¥å°±ä¸å¤ªä¸€æ ·ï¼Œæ‰“å°å‡ºå¸¦æœ‰æ ‡ç­¾çš„æŠ½æ ·åˆ†ææ—¥å¿—ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36  runtime.main main.main main.iteratePerTenant runtime/pprof.Do main.iteratePerTenant.func1 main.iterate 10000000 --- runtime.main main.main main.iteratePerTenant runtime/pprof.Do main.iteratePerTenant.func1 main.iterate 2540000000 map[tenant:[tenant1]] --- runtime.main main.main main.iteratePerTenant runtime/pprof.Do main.iteratePerTenant.func1 main.iterate 10000000 map[tenant:[tenant1]] --- runtime.main main.main main.iteratePerTenant runtime/pprof.Do main.iteratePerTenant.func1 main.iterate 260000000 map[tenant:[tenant2]] --- Total: 2.82s   å°†æ‰€æœ‰æŠ½æ ·åŠ èµ·æ¥æ€»å…±èŠ±è´¹äº† 2.82 ç§’ï¼Œç„¶è€Œï¼Œå› ä¸ºè°ƒç”¨ iterate æ—¶ï¼Œæˆ‘ä»¬æ·»åŠ äº†æ ‡ç­¾ï¼Œæ‰€ä»¥æˆ‘ä»¬èƒ½åœ¨ç»“æœä¸­åŒºåˆ†å“ªä¸ª tanant å¯¼è‡´äº†æ›´å¤šçš„ CPU å ç”¨ã€‚ç°åœ¨æˆ‘ä»¬å¯ä»¥è¯´ tenant1 èŠ±è´¹äº†æ€»æ—¶é—´ 2.82 ç§’ä¸­çš„ 2.55 ç§’ï¼ˆ2540000000ns + 10000000ns = 2550000000ns = 2.55sï¼‰ã€‚\nè®©æˆ‘ä»¬çœ‹çœ‹æŠ½æ ·çš„åŸå§‹æ—¥å¿—ï¼ˆè¿˜æœ‰å®ƒä»¬çš„å…ƒæ•°æ®ï¼‰ï¼Œå»æ›´æ·±å…¥ç†è§£ä¸€ä¸‹å®ƒä»¬çš„æ ¼å¼ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49  $ protoc --decode perftools.profiles.Profile --proto_path ~/src/github.com/google/pprof/proto profile.proto \u003c cpuprofile.pb | grep -A12 \"sample {\" sample { location_id: 1 location_id: 2 location_id: 3 location_id: 4 location_id: 5 value: 1 value: 10000000 } sample { location_id: 1 location_id: 2 location_id: 3 location_id: 4 location_id: 5 value: 254 value: 2540000000 label { key: 14 str: 15 } } sample { location_id: 6 location_id: 2 location_id: 3 location_id: 4 location_id: 5 value: 1 value: 10000000 label { key: 14 str: 15 } } sample { location_id: 1 location_id: 2 location_id: 3 location_id: 7 location_id: 5 value: 26 value: 260000000 label { key: 14 str: 16 } }   æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ¯ä¸ªæŠ½æ ·éƒ½ç”±è®¸å¤š ID ç»„æˆï¼Œè¿™äº› ID æŒ‡å‘å®ƒä»¬åœ¨åˆ†ææ—¥å¿— location æ•°ç»„ä¸­çš„ä½ç½®ï¼Œé™¤äº†è¿™äº› ID è¿˜æœ‰å‡ ä¸ªå€¼ã€‚ä»”ç»†çœ‹ä¸‹ printprofile.go ç¨‹åºï¼Œä½ ä¼šå‘ç°å®ƒä½¿ç”¨äº†æ¯ä¸ªæŠ½æ ·çš„æœ€åä¸€ä¸ªæŠ½æ · valueã€‚ å®é™…ä¸Šï¼ŒGo çš„ CPU åˆ†æå™¨ä¼šè®°å½•ä¸¤ä¸ª valueï¼Œç¬¬ä¸€ä¸ªä»£è¡¨è¿™ä¸ªè°ƒç”¨æ ˆåœ¨ä¸€æ¬¡åˆ†æåŒºé—´è¢«è®°å½•æ ·æœ¬çš„æ•°é‡ï¼Œç¬¬äºŒä¸ªä»£è¡¨å®ƒèŠ±è´¹äº†å¤šå°‘çº³ç§’ã€‚pprof çš„å®šä¹‰æè¿°å½“æ²¡è®¾ç½® default_sample_type æ—¶ï¼ˆåœ¨ Go çš„ CPU é…ç½®ä¸­è®¾ç½®ï¼‰ï¼Œå°±ä½¿ç”¨æ‰€æœ‰ value ä¸­çš„æœ€åä¸€ä¸ªï¼Œå› æ­¤æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ä»£è¡¨çº³ç§’çš„ value è€Œä¸æ˜¯æ ·æœ¬æ•°çš„ valueã€‚æœ€åï¼Œæˆ‘ä»¬å¯ä»¥æ‰“å°å‡ºæ ‡ç­¾ï¼Œå®ƒæ˜¯ pprof å®šä¹‰çš„ä¸€ä¸ªä»¥å­—ç¬¦ä¸²ç»„æˆçš„å­—å…¸ã€‚\næœ€åï¼Œå› ä¸ºç”¨æ ‡ç­¾å»åŒºåˆ†æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥è®©å¯è§†åŒ–ç•Œé¢æ›´ç›´è§‚ã€‚\nä½ å¯ä»¥åœ¨ Polar Signals ç½‘ç«™è¿™é‡Œå»æ›´è¯¦ç»†çš„äº†è§£ä¸Šé¢çš„è¿™æ¬¡åˆ†æï¼šhttps://share.polarsignals.com/2063c5c/\nç»“è®º pprof æ ‡ç­¾æ˜¯å¸®åŠ©æˆ‘ä»¬ç†è§£ä¸åŒæ‰§è¡Œè·¯å¾„éå¸¸æœ‰ç”¨çš„æ–¹æ³•ï¼Œè®¸å¤šäººå–œæ¬¢åœ¨å¤šç§Ÿæˆ·ç³»ç»Ÿä¸­ä½¿ç”¨å®ƒä»¬ï¼Œç›®çš„å°±æ˜¯ä¸ºäº†èƒ½å¤Ÿå®šä½åœ¨ä»–ä»¬ç³»ç»Ÿä¸­å‡ºç°çš„ç”±æŸä¸€ä¸ªç§Ÿæˆ·å¯¼è‡´çš„æ€§èƒ½é—®é¢˜ã€‚å°±åƒå¼€å¤´è¯´çš„ï¼Œåªéœ€è¦è°ƒç”¨ pprof.Do å°±å¯ä»¥äº†ã€‚\nPolar Signals æä¾›çš„æŒç»­åˆ†æå·¥å…·ä¹Ÿæ”¯æŒäº† pprof æ ‡ç­¾çš„å¯è§†åŒ–ç•Œé¢å’ŒæŠ¥å‘Šï¼Œå¦‚æœä½ æƒ³å‚ä¸ä¸ªäººä½“éªŒç‰ˆè¯·ç‚¹å‡»ï¼šç”³è¯·èµ„æ ¼\n via: https://www.polarsignals.com/blog/posts/2021/04/13/demystifying-pprof-labels-with-go/\nä½œè€…ï¼šFrederic Branczyk è¯‘è€…ï¼šh1z3y3 æ ¡å¯¹ï¼šæ ¡å¯¹è€…ID\næœ¬æ–‡ç”± GCTT åŸåˆ›ç¼–è¯‘ï¼ŒGo ä¸­æ–‡ç½‘ è£èª‰æ¨å‡º\n","description":"","tags":["Golang","GCTT"],"title":"æ·±å…¥å‰–æ Golang Pprof æ ‡ç­¾","uri":"/posts/demysitifying-pprof-labels-with-go/"},{"categories":null,"content":"ä»‹ç» åœ¨ éé˜»å¡ I/O è¶…ç®€æ˜ä»‹ç» ä¸­ï¼Œ æˆ‘ä»¬å·²ç»è®¨è®ºè¿‡ç°ä»£ Web æœåŠ¡å™¨å¯ä»¥å¤„ç†å¤§é‡å¹¶å‘è¯·æ±‚ï¼Œè¿™å¾—ç›Šäºç°ä»£æ“ä½œç³»ç»Ÿå†…æ ¸å†…ç½®çš„äº‹ä»¶é€šçŸ¥æœºåˆ¶ã€‚ å— Linux epoll [ æ–‡æ¡£ ] å¯å‘ï¼Œ FreeBSD å‘æ˜äº† kqueue [ è®ºæ–‡ , æ–‡æ¡£ ]\nè¿™ç¯‡æ–‡ç« æˆ‘ä»¬å°†ä»”ç»†ç ”ç©¶ä¸‹ kqueueï¼Œæˆ‘ä»¬ä¼šç”¨ Go å®ç°ä¸€ä¸ªåŸºäº kqueue event loop çš„ TCP serverï¼Œ ä½ å¯ä»¥åœ¨ Github ä¸Šæ‰¾åˆ° æºä»£ç  ã€‚ è¦è¿è¡Œä»£ç å¿…é¡»ä½¿ç”¨å’Œ FreeBSD å…¼å®¹çš„æ“ä½œç³»ç»Ÿï¼Œæ¯”å¦‚ macOSã€‚\næ³¨æ„ kqueue ä¸ä»…èƒ½å¤„ç† socket eventï¼Œè€Œä¸”è¿˜èƒ½å¤„ç†æ–‡ä»¶æè¿°ç¬¦ eventã€ä¿¡å·ã€å¼‚æ­¥ I/O eventã€å­è¿›ç¨‹çŠ¶æ€æ”¹å˜ eventã€ å®šæ—¶å™¨ä»¥åŠç”¨æˆ·è‡ªå®šä¹‰ eventã€‚å®ƒç¡®å®é€šç”¨å’Œå¼ºå¤§ã€‚\næˆ‘ä»¬è¿™ç¯‡æ–‡ç« ä¸»è¦åˆ†ä¸ºä¸€ä¸‹å‡ éƒ¨åˆ†è®²è§£ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬ä¼šåœ¨å…ˆä»ç†è®ºå‡ºå‘è®¾è®¡æˆ‘ä»¬çš„ TCP Serverã€‚ ç„¶åï¼Œæˆ‘ä»¬ä¼šå»å®ç°å®ƒçš„å¿…è¦çš„æ¨¡å—ã€‚ æœ€åæˆ‘ä»¬ä¼šå¯¹æ•´ä¸ªè¿‡ç¨‹è¿›è¡Œæ€»ç»“ä»¥åŠæ€è€ƒã€‚\nè®¾è®¡ æˆ‘ä»¬ TCP Server å¤§æ¦‚æœ‰ä»¥ä¸‹å‡ éƒ¨åˆ†ï¼š ä¸€ä¸ªç›‘å¬ TCP çš„ socketã€ æ¥æ”¶å®¢æˆ·ç«¯è¿æ¥çš„ socketã€ ä¸€ä¸ªå†…æ ¸äº‹ä»¶é˜Ÿåˆ—ï¼ˆkqueueï¼‰ï¼Œ è¿˜æœ‰ä¸€ä¸ªäº‹ä»¶å¾ªç¯æœºåˆ¶æ¥è½®è¯¢è¿™ä¸ªé˜Ÿåˆ—ã€‚ ä¸‹é¢è¿™ä¸ªå›¾æè¿°äº†æ¥æ”¶è¿æ¥çš„åœºæ™¯ã€‚\nå½“å®¢æˆ·ç«¯æƒ³è¦è¿æ¥æœåŠ¡ç«¯ï¼Œä¸€ä¸ªè¿æ¥è¯·æ±‚å°†ä¼šè¢«æ”¾åˆ° TCP è¿æ¥é˜Ÿåˆ—ä¸­ï¼Œ è€Œå†…æ ¸ä¼šå°†ä¸€ä¸ªæ–°çš„äº‹ä»¶æ”¾åˆ° kqueue ä¸­ã€‚ è¿™ä¸ªäº‹ä»¶å°†ä¼šåœ¨äº‹ä»¶å¾ªç¯æ—¶è¢«å¤„ç†ï¼Œäº‹ä»¶å¾ªç¯ä¼šæ¥å—è¯·æ±‚ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„å®¢æˆ·ç«¯è¿æ¥ã€‚ ä¸‹é¢è¿™ä¸ªå›¾æè¿°äº†æ–°åˆ›å»ºçš„ socket å¦‚ä½•ä»å®¢æˆ·ç«¯è¯»å–è¯·æ±‚ã€‚\nå®¢æˆ·ç«¯å†™æ•°æ®åˆ°æ–°åˆ›å»ºçš„ socketï¼Œå†…æ ¸ä¼šå°†ä¸€ä¸ªæ–° event æ”¾åˆ° kqueue ä¸­ï¼Œè¡¨ç¤ºåœ¨è¿™ä¸ª socket ä¸­æœ‰ç­‰å¾…è¯»å–çš„æ•°æ®ã€‚ äº‹ä»¶å¾ªç¯å°†è½®è¯¢åˆ°è¿™ä¸ªäº‹ä»¶ï¼Œå¹¶ä» socket è¯»å–æ•°æ®ã€‚ æ³¨æ„åªæœ‰ä¸€ä¸ª socket ç›‘å¬è¿æ¥ï¼Œè€Œæˆ‘ä»¬å°†ä¸ºæ¯ä¸€ä¸ªå®¢æˆ·ç«¯è¿æ¥åˆ›å»ºæ–°çš„ socketã€‚\nä¸‹æ–‡è¦è®¨è®ºå®ç°ç»†èŠ‚ï¼Œå¯ä»¥å¤§æ¦‚æŒ‰ç…§ä¸‹é¢çš„æ­¥éª¤å®ç°æˆ‘ä»¬çš„è®¾è®¡ã€‚\n1 åˆ›å»ºï¼Œç»‘å®šä»¥åŠç›‘å¬æ–°çš„ socket 2 åˆ›å»º kqueue 3 è®¢é˜… socket event 4 å¾ªç¯é˜Ÿåˆ—è·å– event å¹¶å¤„ç†å®ƒä»¬\nå®ç° ä¸ºäº†é¿å…å•ä¸ªæ–‡ä»¶æœ‰å¤§é‡ç³»ç»Ÿè°ƒç”¨ï¼Œæˆ‘ä»¬æ‹†åˆ†æˆå‡ ä¸ªä¸åŒæ¨¡å—ï¼š\n ä¸€ä¸ª socket æ¨¡å—æ¥å¤„ç†æ‰€æœ‰ç®¡ç† socket çš„ç›¸å…³åŠŸèƒ½ï¼Œ ä¸€ä¸ª kqueue æ¨¡å—æ¥å¤„ç†äº‹ä»¶å¾ªç¯ï¼Œ æœ€å main æ¨¡å—ç”¨æ¥æ•´åˆæ‰€æœ‰æ¨¡å—å¹¶å¯åŠ¨æˆ‘ä»¬çš„ TCP serverã€‚  æˆ‘ä»¬ä¸‹é¢ä» socket æ¨¡å—å¼€å§‹ã€‚\nå®šä¹‰ Socket é¦–å…ˆï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª socket ç»“æ„ä½“ã€‚ç±» Unix æ“ä½œç³»ç»Ÿï¼Œæ¯”å¦‚ FreeBSDï¼Œä¼šæŠŠ socket ä½œä¸ºæ–‡ä»¶ã€‚ ä¸ºäº†ç”¨ Go å®ç° socketï¼Œæˆ‘ä»¬éœ€è¦äº†è§£ æ–‡ä»¶æè¿°ç¬¦ã€‚ æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªç±»ä¼¼ä¸‹é¢å¸¦æœ‰æ–‡ä»¶æè¿°ç¬¦çš„ç»“æ„ä½“ã€‚\n1 2 3 4  type Socket struct { FileDescriptor int }   æˆ‘ä»¬æœŸæœ›æˆ‘ä»¬çš„ socket å¯ä»¥åº”å¯¹ä¸åŒçš„åœºæ™¯ï¼Œæ¯”å¦‚ï¼šè¯»ã€å†™ socket æ•°æ®ï¼Œä»¥åŠå…³é—­ socketã€‚ åœ¨ Go ä¸­ï¼Œè¦æ”¯æŒè¿™äº›æ“ä½œï¼Œéœ€è¦å®ç°é€šç”¨çš„ interfaceï¼Œæ¯”å¦‚ io.Readerï¼Œio.Writerï¼Œè¿˜æœ‰ io.Closer\né¦–å…ˆï¼Œå®ç° io.Reader è¿™ä¸ªæ¥å£ï¼Œä»–ä¼šè°ƒç”¨ read() ç³»ç»Ÿå‡½æ•°ã€‚ è¿™ä¸ªå‡½æ•°ä¼šè¿”å›è¯»åˆ°å­—èŠ‚çš„æ•°é‡ï¼Œä»¥åŠè¿›è¡Œè¯»æ“ä½œæ—¶å¯èƒ½å‘ç”Ÿçš„é”™è¯¯ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12  func (socket Socket) Read(bytes []byte) (int, error) { if len(bytes) == 0 { return 0, nil } numBytesRead, err := syscall.Read(socket.FileDescriptor, bytes) if err != nil { numBytesRead = 0 } return numBytesRead, err }   ç±»ä¼¼çš„ï¼Œæˆ‘ä»¬é€šè¿‡è°ƒç”¨ write() æ¥å®ç° io.Writer æ¥å£ã€‚\n1 2 3 4 5 6 7 8  func (socket Socket) Write(bytes []byte) (int, error) { numBytesWritten, err := syscall.Write(socket.FileDescriptor, bytes) if err != nil { numBytesWritten = 0 } return numBytesWritten, err }   æœ€åå…³é—­ socket å¯ä»¥è°ƒç”¨ close() ï¼Œå¹¶ä¼ å…¥ socket å¯¹åº”çš„æ–‡ä»¶æè¿°ç¬¦ã€‚\n1 2 3  func (socket *Socket) Close() error { return syscall.Close(socket.FileDescriptor) }   ä¸ºäº†ç¨åèƒ½æ‰“å°ä¸€äº›æœ‰ç”¨çš„é”™è¯¯å’Œæ—¥å¿—ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦å®ç° fmt.Stringer æ¥å£ã€‚ æˆ‘ä»¬é€šè¿‡ä¸åŒçš„æ–‡ä»¶æè¿°ç¬¦æ¥åŒºåˆ†ä¸åŒçš„ socketã€‚\n1 2 3  func (socket *Socket) String() string { return strconv.Itoa(socket.FileDescriptor) }   ç›‘å¬ä¸€ä¸ª Socket å®šä¹‰å¥½ Socket ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦åˆå§‹åŒ–å®ƒï¼Œå¹¶è®©å®ƒä¸€ä¸ªç›‘å¬ç‰¹å®š IP å’Œ ç«¯å£çš„ã€‚ ç›‘å¬ä¸€ä¸ª socket ä¹Ÿå¯ä»¥é€šè¿‡ä¸€äº›ç³»ç»Ÿå‡½æ•°æ¥å®ç°ã€‚ ç°åœ¨å…ˆæ•´ä½“çœ‹ä¸€ä¸‹æˆ‘ä»¬å®ç°çš„ Listen() æ–¹æ³•ï¼Œç„¶åå†ä¸€æ­¥æ­¥è¿›è¡Œåˆ†æã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23  func Listen(ip string, port int) (*Socket, error) { socket := \u0026Socket{} socketFileDescriptor, err := syscall.Socket(syscall.AF_INET, syscall.SOCK_STREAM, 0) if err != nil { return nil, fmt.Errorf(\"failed to create socket (%v)\", err) } socket.FileDescriptor = socketFileDescriptor socketAddress := \u0026syscall.SockaddrInet4{Port: port} copy(socketAddress.Addr[:], net.ParseIP(ip)) if err = syscall.Bind(socket.FileDescriptor, socketAddress); err != nil { return nil, fmt.Errorf(\"failed to bind socket (%v)\", err) } if err = syscall.Listen(socket.FileDescriptor, syscall.SOMAXCONN); err != nil { return nil, fmt.Errorf(\"failed to listen on socket (%v)\", err) } return socket, nil }   é¦–å…ˆè°ƒç”¨äº† socket() å‡½æ•°ï¼Œ è¿™å°†ä¼šåˆ›å»ºé€šä¿¡çš„æ¥å…¥ç‚¹ï¼Œå¹¶è¿”å›æè¿°ç¬¦ç¼–å·ã€‚ å®ƒéœ€è¦ 3 ä¸ªå‚æ•°ï¼š\n åœ°å€ç±»å‹ï¼šæˆ‘ä»¬ç”¨çš„æ˜¯ AF_INET (IPv4) socket ç±»å‹ï¼šæˆ‘ä»¬ç”¨ SOCKET_STREAMï¼Œä»£è¡¨åŸºäºå­—èŠ‚æµè¿ç»­ã€å¯é çš„åŒå‘è¿æ¥ã€‚ åè®®ç±»å‹ï¼š0 åœ¨ SOCKET_STREAM ç±»å‹ä¸‹ä»£è¡¨çš„æ˜¯ TCPã€‚  ç„¶åï¼Œæˆ‘ä»¬è°ƒç”¨äº† bind() æ–¹æ³•æ¥æŒ‡å®šæ–°åˆ›å»º socket çš„åè®®åœ°å€ã€‚ bind() æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ–‡ä»¶æè¿°ç¬¦ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯åŒ…å«åœ°å€ä¿¡æ¯çš„ç»“æ„ä½“æŒ‡é’ˆã€‚ æˆ‘ä»¬åœ¨è¿™é‡Œä½¿ç”¨äº† Go é¢„å®šä¹‰çš„ SockaddrInet4 ç»“æ„ä½“ï¼Œå¹¶æŒ‡å®šè¦ç»‘å®šçš„ IP åœ°å€å’Œç«¯å£ã€‚\næœ€åï¼Œæˆ‘ä»¬è°ƒç”¨äº† listen() æ–¹æ³•ï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½ç­‰å¾…æ¥æ”¶è¿æ¥äº†ã€‚ å®ƒçš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯è¿æ¥è¯·æ±‚é˜Ÿåˆ—çš„æœ€å¤§é•¿åº¦ã€‚ æˆ‘ä»¬ä½¿ç”¨äº†å†…æ ¸å‚æ•° SOMAXCONN ï¼Œåœ¨æˆ‘çš„ Mac ä¸Šé»˜è®¤æ˜¯ 128ã€‚ ä½ å¯ä»¥é€šè¿‡æ‰§è¡Œ sysctl kern.ipc.somaxconn æ¥è·å–è¿™ä¸ªå€¼ã€‚\nå®šä¹‰äº‹ä»¶å¾ªç¯ åŒæ ·çš„ï¼Œæˆ‘ä»¬å°†å®šä¹‰ä¸€ä¸ªç»“æ„ä½“æ¥è¡¨ç¤º kqueue çš„äº‹ä»¶å¾ªç¯ã€‚ æˆ‘ä»¬å¿…é¡»è¦ä¿å­˜ kqueue çš„æ–‡ä»¶æè¿°ç¬¦ä»¥åŠ socket çš„æ–‡ä»¶æè¿°ç¬¦, æˆ‘ä»¬å½“ç„¶ä¹Ÿèƒ½å°†æˆ‘ä»¬å‰é¢å®šä¹‰çš„ socket å¯¹è±¡ä½œä¸ºæŒ‡é’ˆæ¥æ›¿ä»£ SocketFileDescriptorã€‚\n1 2 3 4 5  type EventLoop struct { KqueueFileDescriptor int SocketFileDescriptor int }   æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå‡½æ•°æ ¹æ®æˆ‘ä»¬æä¾›çš„ socket åˆ›å»ºä¸€ä¸ªäº‹ä»¶å¾ªç¯ã€‚ å’Œä¹‹å‰ä¸€æ ·ï¼Œæˆ‘ä»¬éœ€è¦ç”¨ä¸€ç³»åˆ—ç³»ç»Ÿå‡½æ•°å»åˆ›å»º Kqueueã€‚ æˆ‘ä»¬è¿˜æ˜¯å…ˆçœ‹ä¸‹æ•´ä¸ªå‡½æ•°ï¼Œç„¶åå†ä¸€æ­¥æ­¥æ‹†è§£æ¥çœ‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33  func NewEventLoop(s *socket.Socket) (*EventLoop, error) { kQueue, err := syscall.Kqueue() if err != nil { return nil, fmt.Errorf(\"failed to create kqueue file descriptor (%v)\", err) } changeEvent := syscall.Kevent_t{ Ident: uint64(s.FileDescriptor), Filter: syscall.EVFILT_READ, Flags: syscall.EV_ADD | syscall.EV_ENABLE, Fflags: 0, Data: 0, Udata: nil, } changeEventRegistered, err := syscall.Kevent( kQueue, []syscall.Kevent_t{changeEvent}, nil, nil ) if err != nil || changeEventRegistered == -1 { return nil, fmt.Errorf(\"failed to register change event (%v)\", err) } return \u0026EventLoop{ KqueueFileDescriptor: kQueue, SocketFileDescriptor: s.FileDescriptor }, nil }   ç¬¬ä¸€ä¸ªç³»ç»Ÿå‡½æ•° kqueue() åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å†…æ ¸äº‹ä»¶é˜Ÿåˆ—ï¼Œå¹¶ä¸”è¿”å›äº†å®ƒçš„æ–‡ä»¶æè¿°ç¬¦ã€‚ æˆ‘ä»¬ç­‰ä¼šè°ƒç”¨ kevent() çš„æ—¶å€™ä¼šç”¨åˆ°è¿™ä¸ªé˜Ÿåˆ—ã€‚ kevent() æœ‰ä¸¤ä¸ªåŠŸèƒ½ï¼Œè®¢é˜…æ–°äº‹ä»¶å’Œè½®è¯¢é˜Ÿåˆ—ã€‚\næˆ‘ä»¬çš„ä¾‹å­æ˜¯è¦è®¢é˜…ä¼ å…¥è¿æ¥çš„äº‹ä»¶ï¼Œ å¯ä»¥é€šè¿‡ä¼ é€’ kevent ç»“æ„ä½“ï¼ˆåœ¨ Go ä¸­ï¼Œç”¨ Kevent_t è¡¨ç¤ºï¼‰ç»™ kevent() è¿™ä¸ªç³»ç»Ÿå‡½æ•°æ¥å®ç°è®¢é˜…ã€‚ Kevent_t éœ€è¦åŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼š\n Ident çš„æ–‡ä»¶æè¿°ç¬¦ï¼šå€¼æ˜¯æˆ‘ä»¬ socket çš„æ–‡ä»¶æè¿°ç¬¦ å¤„ç†äº‹ä»¶çš„ Filterï¼šè®¾ç½®ä¸º EVFILT_READï¼Œå½“å’Œç›‘å¬ socket ä¸€èµ·ç”¨æ—¶ï¼Œå®ƒä»£è¡¨æˆ‘ä»¬åªå…³å¿ƒä¼ å…¥è¿æ¥çš„äº‹ä»¶ã€‚ ä»£è¡¨å¯¹è¿™ä¸ªäº‹ä»¶è¦æ‰§è¡Œæ“ä½œçš„ Flagï¼šåœ¨æˆ‘ä»¬ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æƒ³è¦æ·»åŠ ï¼ˆEV_ADDï¼‰äº‹ä»¶åˆ° kqueueï¼Œæ¯”å¦‚è¯´è®¢é˜…äº‹ä»¶ï¼ŒåŒæ—¶è¦å¯ç”¨ï¼ˆEV_ENABLEï¼‰å®ƒã€‚Flag å¯ä»¥ä½¿ç”¨ æˆ– è¿™ä¸ªä½æ“ä½œè¿›è¡Œç»“åˆã€‚  å…¶ä»–çš„å‡ ä¸ªå‚æ•°æˆ‘ä»¬å°±ä¸éœ€è¦äº†ï¼Œåˆ›å»ºå¥½è¿™ä¸ªäº‹ä»¶ä¹‹åï¼Œè¦æŠŠå®ƒç”¨ä¸€ä¸ªæ•°ç»„åŒ…è£¹ï¼Œå¹¶ä¼ é€’ç»™ kevent() è¿™ä¸ªç³»ç»Ÿå‡½æ•°ã€‚ æœ€åï¼Œæˆ‘ä»¬è¿”å›è¿™ä¸ªç­‰å¾…è¢«è½®è¯¢çš„äº‹ä»¶å¾ªç¯ã€‚æ¥ä¸‹æ¥è®©æˆ‘ä»¬å®ç°è½®è¯¢çš„å‡½æ•°ã€‚\näº‹ä»¶å¾ªç¯è½®è¯¢ äº‹ä»¶å¾ªç¯æ˜¯ä¸€ä¸ªç®€å•çš„ for å¾ªç¯ï¼Œå¯ä»¥è½®è¯¢æ–°çš„å†…æ ¸äº‹ä»¶å¹¶è¿›è¡Œå¤„ç†ã€‚ ä¹‹å‰ä½¿ç”¨ç³»ç»Ÿå‡½æ•° kevent() æ—¶ï¼Œè®¢é˜…è½®è¯¢å°±å·²ç»å®Œæˆäº†ï¼Œä½†æ˜¯ç°åœ¨æˆ‘ä»¬åˆä¼ é€’ä¸€ä¸ªç©ºçš„äº‹ä»¶æ•°ç»„ç»™å®ƒï¼Œ ç›®çš„æ˜¯å½“æœ‰æ–°çš„äº‹ä»¶æ—¶ï¼Œæ–°çš„äº‹ä»¶ä¼šå¡«å……åˆ°è¿™ä¸ªæ•°ç»„ã€‚\nç„¶åæˆ‘ä»¬å°±å¯ä»¥ä¸€ä¸ªä¸ªå¾ªç¯è¿™äº›äº‹ä»¶å¹¶å¤„ç†å®ƒä»¬äº†ã€‚ æ–°çš„å®¢æˆ·ç«¯è¿æ¥ä¼šè¢«è½¬æ¢æˆå®¢æˆ·ç«¯ socketï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä»å®¢æˆ·ç«¯è¯»å–æˆ–å†™å…¥æ•°æ®ã€‚ ç°åœ¨è®©æˆ‘ä»¬çœ‹ä¸‹ä»£ç å¦‚ä½•å¾ªç¯ä¸åŒçš„äº‹ä»¶ç±»å‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55  func (eventLoop *EventLoop) Handle(handler Handler) { for { newEvents := make([]syscall.Kevent_t, 10) numNewEvents, err := syscall.Kevent( eventLoop.KqueueFileDescriptor, nil, newEvents, nil ) if err != nil { continue } for i := 0; i \u003c numNewEvents; i++ { currentEvent := newEvents[i] eventFileDescriptor := int(currentEvent.Ident) if currentEvent.Flags\u0026syscall.EV_EOF != 0 { // client closing connection  syscall.Close(eventFileDescriptor) } else if eventFileDescriptor == eventLoop.SocketFileDescriptor { // new incoming connection  socketConnection, _, err := syscall.Accept(eventFileDescriptor) if err != nil { continue } socketEvent := syscall.Kevent_t{ Ident: uint64(socketConnection), Filter: syscall.EVFILT_READ, Flags: syscall.EV_ADD, Fflags: 0, Data: 0, Udata: nil, } socketEventRegistered, err := syscall.Kevent( eventLoop.KqueueFileDescriptor, []syscall.Kevent_t{socketEvent}, nil, nil ) if err != nil || socketEventRegistered == -1 { continue } } else if currentEvent.Filter\u0026syscall.EVFILT_READ != 0 { // data available -\u003e forward to handler  handler(\u0026socket.Socket{ FileDescriptor: int(eventFileDescriptor) }) } // ignore all other events  } } }   ç¬¬ä¸€ç§æƒ…å†µï¼Œæˆ‘ä»¬è¦å¤„ç† EV_EOF äº‹ä»¶ï¼Œä»£è¡¨å®¢æˆ·ç«¯æƒ³è¦å…³é—­å®ƒçš„è¿æ¥çš„äº‹ä»¶ã€‚è¿™ç§æƒ…å†µæˆ‘ä»¬ç®€å•çš„å…³é—­äº†å¯¹åº” socket çš„æ–‡ä»¶æè¿°ç¬¦ã€‚\nç¬¬äºŒç§æƒ…å†µä»£è¡¨æˆ‘ä»¬çš„ç›‘å¬ socket æœ‰è¿æ¥è¯·æ±‚ã€‚ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç³»ç»Ÿå‡½æ•° accept() ä» TCP è¿æ¥è¯·æ±‚é˜Ÿåˆ—ä¸­è·å–è¿æ¥è¯·æ±‚ï¼Œ å®ƒä¼šä¸ºç›‘å¬ socket åˆ›å»ºä¸€ä¸ªæ–°çš„å®¢æˆ·ç«¯ socket å’Œæ–°çš„æ–‡ä»¶æè¿°ç¬¦ã€‚ æˆ‘ä»¬ä¸ºè¿™ä¸ªæ–°åˆ›å»ºçš„ socket è®¢é˜…ä¸€ä¸ªæ–°çš„ EVFILT_READ äº‹ä»¶ã€‚ åœ¨æ–°åˆ›å»ºçš„å®¢æˆ·ç«¯ socket ä¸­ï¼Œæ— è®ºä»€ä¹ˆæ—¶å€™æœ‰å¯ä»¥è¯»å–çš„æ•°æ®ï¼Œå°±ä¼šæœ‰ EVFILT_READ äº‹ä»¶å‘ç”Ÿã€‚\nç¬¬ä¸‰ç§æƒ…å†µå°±æ˜¯å¤„ç†åˆšæåˆ°çš„ EVFILT_READ äº‹ä»¶ï¼Œè¿™äº›äº‹ä»¶æœ‰å®¢æˆ·ç«¯ socket çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œ æˆ‘ä»¬å°†å…¶å°è£…åœ¨ Socket å¯¹è±¡ä¸­å¹¶ä¼ é€’ç»™è¦å¤„ç†å®ƒçš„æ–¹æ³•ã€‚\nè¦æ³¨æ„æˆ‘ä»¬çœç•¥ä¸€äº›é”™è¯¯ç„¶åä½¿ç”¨äº†ç®€å•çš„ continue ç»§ç»­æ‰§è¡Œå¾ªç¯ã€‚ç°åœ¨äº‹ä»¶å¾ªç¯å‡½æ•°ä¹Ÿå†™å¥½äº†ï¼Œè®©æˆ‘ä»¬å°†æ‰€æœ‰çš„é€»è¾‘å°è£…åœ¨ main å‡½æ•°ä¸­å¹¶æ‰§è¡Œã€‚\nmain å‡½æ•° å› ä¸ºä¹‹å‰å·²ç»å®šä¹‰å¥½äº† socket å’Œ kqueue æ¨¡å—ï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥éå¸¸å®¹æ˜“åœ°å®ç°æœåŠ¡å™¨ã€‚ æˆ‘ä»¬é¦–å…ˆåˆ›å»ºä¸€ä¸ªç›‘å¬ç‰¹å®š IP åœ°å€å’Œç«¯å£çš„ socketï¼Œç„¶ååŸºäºå®ƒåˆ›å»ºä¸€ä¸ªæ–°çš„äº‹ä»¶å¾ªç¯ï¼Œ æœ€åæˆ‘ä»¬å®šä¹‰å¤„ç†è¾“å‡ºçš„å‡½æ•°ï¼Œæ¥å¼€å¯æˆ‘ä»¬çš„äº‹ä»¶å¾ªç¯ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27  func main() { s, err := socket.Listen(\"127.0.0.1\", 8080) if err != nil { log.Println(\"Failed to create Socket:\", err) os.Exit(1) } eventLoop, err := kqueue.NewEventLoop(s) if err != nil { log.Println(\"Failed to create event loop:\", err) os.Exit(1) } log.Println(\"Server started. Waiting for incoming connections. ^C to exit.\") eventLoop.Handle(func(s *socket.Socket) { reader := bufio.NewReader(s) for { line, err := reader.ReadString('\\n') if err != nil || strings.TrimSpace(line) == \"\" { break } s.Write([]byte(line)) } s.Close() }) }   å¤„ç†å‡½æ•°ä¼šæ ¹æ®æ¢è¡Œç¬¦é€è¡Œè¯»å–æ•°æ®å†…å®¹ï¼Œç›´åˆ°å®ƒè¯»å–åˆ°ç©ºè¡Œï¼Œç„¶åä¼šå…³é—­è¿æ¥ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡ curl æ¥æµ‹è¯•ï¼Œcurl å°†ä¼šå‘é€ä¸€ä¸ª GET è¯·æ±‚ï¼Œå¹¶è¾“å‡ºå“åº”çš„å†…å®¹ï¼Œå“åº”å†…å®¹å…¶å®å°±æ˜¯å®ƒå‘é€çš„ GET è¯·æ±‚ä½“çš„å†…å®¹ã€‚\næ€è€ƒ æˆ‘ä»¬æˆåŠŸç”¨ kqueue å®ç°äº†ä¸€ä¸ªç®€å•çš„ TCP Serverï¼Œå½“ç„¶ï¼Œè¿™ä¸ªä»£ç æƒ³ç”¨äºç”Ÿäº§ç¯å¢ƒè¿˜éœ€è¦åšå¾ˆå¤šå·¥ä½œã€‚ æˆ‘ä»¬ä½¿ç”¨å•è¿›ç¨‹å’Œé˜»å¡ socket è¿è¡Œï¼Œå¦å¤–ï¼Œä¹Ÿæ²¡æœ‰å»å¤„ç†é”™è¯¯ã€‚ å…¶å®å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½¿ç”¨å·²ç»å­˜åœ¨çš„åº“è€Œä¸æ˜¯è‡ªå·±è°ƒç”¨æ“ä½œç³»ç»Ÿå†…æ ¸å‡½æ•°ä¼šæ›´å¥½ã€‚\næ²¡æƒ³åˆ°ç”¨å†…æ ¸æ“ä½œäº‹ä»¶è¿™ä¹ˆéš¾ï¼ŒAPI éå¸¸å¤æ‚ï¼Œè€Œä¸”å¿…é¡»è¦è¯»å¥½å¤šæ–‡æ¡£å»æ‰¾éœ€è¦æ€ä¹ˆåšã€‚ ç„¶è€Œï¼Œè¿™æ˜¯ä¸€ä¸ªæƒŠäººçš„å­¦ä¹ ä½“éªŒã€‚\n via: https://dev.to/frosnerd/writing-a-simple-tcp-server-using-kqueue-cah\nä½œè€…ï¼šFrank Rosner è¯‘è€…ï¼šh1z3y3 æ ¡å¯¹ï¼špolarisxu\næœ¬æ–‡ç”± GCTT åŸåˆ›ç¼–è¯‘ï¼ŒGo ä¸­æ–‡ç½‘ è£èª‰æ¨å‡º\n","description":"","tags":["Golang","GCTT"],"title":"ç”¨ kqueue å®ç°ä¸€ä¸ªç®€å•çš„ TCP Server","uri":"/posts/writing-a-tcp-server-using-kqueue/"},{"categories":null,"content":"ä¼ä¸šçº§åº”ç”¨ç¨‹åºçš„è¦æ±‚ä¸æ–­æé«˜ï¼Œä½†æ˜¯ IT éƒ¨é—¨å›°äºå¤§é‡çš„åº”ç”¨ç¨‹åºç§¯å‹çš„å·¥ä½œè€Œä¸å¯èƒ½å¾ˆå¿«çš„å®Œæˆå·¥ä½œã€‚è€Œä¸”ï¼Œç›®å‰é¢ä¸´çš„æŒ‘æˆ˜æ˜¯ï¼ŒIT éœ€è¦é‡æ–°æ€è€ƒæé«˜äº¤ä»˜é€Ÿåº¦çš„æ–¹æ³•ã€‚æœ‰ä¸¤ä¸ªè§£å†³æ–¹æ¡ˆï¼šlow-code å’Œ serverlessã€‚\nä½†ä»€ä¹ˆæ˜¯ low-code å’Œ serverlessï¼Ÿè¿˜æœ‰æ›´é‡è¦çš„æ˜¯ï¼Œè¿™ä¸€åˆ‡åˆä¸ IoT æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿæ”¾è½»æ¾ï¼Œæˆ‘æœ€ç»ˆä¼šè§£é‡Šã€‚ä½†æ˜¯é¦–å…ˆï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹ low-code å’Œ servelessï¼Œå¦‚æœä½ è¿˜ä¸ç†Ÿæ‚‰è¿™äº›æŠ€æœ¯ï¼Œèƒ½è®©ä½ å¿«é€Ÿç†Ÿæ‚‰èµ·æ¥ã€‚\nå†°ä¸ç«ä¹‹æ­Œ low-code å’Œ serverless æŠ€æœ¯åŒæ ·éƒ½æ˜¯ä¸ºäº†ç®€åŒ–åº”ç”¨å¼€å‘æµç¨‹è€Œè®¾è®¡çš„ï¼Œä»è€ŒåŠ é€Ÿæ–°åº”ç”¨ç¨‹åºçš„äº¤ä»˜ã€‚serverless é€šè¿‡å‡è½»å¼€å‘äººå‘˜çš„æœåŠ¡å™¨ç®¡ç†è´Ÿæ‹…æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚è™½ç„¶ serverless çš„åå­—å¯èƒ½æš—ç¤ºæ²¡æœ‰ä»»ä½•æœåŠ¡å™¨ï¼Œä½†æ˜¯è¿˜æ˜¯éœ€è¦æœåŠ¡å™¨çš„ã€‚åªæ˜¯ä»å¼€å‘è€…çš„è§’åº¦æ¥çœ‹ï¼Œä»–åªéœ€è¦ç®€å•åœ°ä¸“æ³¨äºåº”ç”¨çš„å¼€å‘è€Œä¸æ˜¯è¦æ‹…å¿ƒéƒ¨ç½²ã€ç®¡ç†å’Œæ‰©å®¹æœåŠ¡å™¨ã€‚\nå¦ä¸€æ–¹é¢ï¼Œlow-code é€šè¿‡ä»ä»£ç ä¸­æŠ½è±¡å‡ºå¼€å‘äººå‘˜æ¥ç®€åŒ–åº”ç”¨ç¨‹åºå¼€å‘ã€‚æ€è·¯æ˜¯ï¼Œå¦‚æœå¼€å‘äººå‘˜å¯ä»¥æ‹–æ”¾ GUI ç»„å»ºæ¥åˆ›å»ºç”¨æˆ·ç•Œé¢ï¼Œç„¶åç”¨ç±»ä¼¼æµç¨‹å›¾çš„æ–¹å¼æ¥åˆ›å»ºä¸šåŠ¡é€»è¾‘ï¼Œä»–å°†æ›´å¿«çš„äº¤ä»˜åº”ç”¨ç¨‹åºã€‚\nä¸¤ä¸ªæŠ€æœ¯çš„å­˜åœ¨éƒ½æ˜¯ä¸ºäº†è§£å†³åŒæ ·çš„é—®é¢˜ï¼šåŠ é€Ÿåº”ç”¨ç¨‹åºå¼€å‘ã€‚ç„¶è€Œï¼Œä¸¤é¡¹æŠ€æœ¯èƒŒåçš„å…¬å¸å¯èƒ½ä¼šé‡‡å–æˆªç„¶ä¸åŒçš„æ–¹æ³•ï¼Œå¯¼è‡´ serverless å’Œ low-code çœ‹èµ·æ¥åƒæ˜¯å†°ä¸ç«ã€‚\nå…¬æœ‰äº‘ä¾›åº”å•†æ¯”å¦‚ AWSã€Googleã€Azure å’Œ IBM éƒ½æä¾› serverless é€‰æ‹©ï¼Œä½†æ˜¯å¯¹äºä»–ä»¬çš„å¤§å¤šæ•°ï¼Œä»–ä»¬åªå…³æ³¨äºä½ç­‰çº§åŠŸèƒ½ï¼Œå¤§å¤šæ•°ç»„ç»‡æ— æ³•åŸºäºè¿™äº›æŠ€æœ¯è§£å†³å¤æ‚çš„é—®é¢˜ã€‚ç›´æ¥ä¸è¿™äº›ä¾›åº”å•†åˆä½œçš„ç»„ç»‡å¯ä»¥æ›´å¥½çš„æ§åˆ¶è¾“å‡ºï¼Œä½†æ˜¯è¿™éœ€è¦æ›´å¤šçš„å¼€å‘å·¥ä½œã€‚\nåŒæ—¶ï¼Œä¼ ç»Ÿçš„ low-code ä¾›åº”å•†é€šè¿‡è®©å•†ä¸šç”¨æˆ·å¯ä»¥è®¿é—®åº”ç”¨ç¨‹åºçš„å¼€å‘ï¼Œæ¥é¢„ç¤ºç€â€œå…¨æ°‘å¼€å‘è€…â€œçš„å…´èµ·ã€‚é‰´äºå¤§å¤šæ•°å•†ä¸šç”¨æˆ·éƒ½æ²¡æœ‰è®¡ç®—æœºç›¸å…³å­¦ä½ï¼Œlow-code çš„æ–¹æ³•éå¸¸é€‚åˆä»–ä»¬ã€‚ä¸åƒ serverless é‚£æ ·ï¼Œlow-cdoe è®©åº”ç”¨ç¨‹åºäº¤ä»˜æ›´å¿«ï¼Œä½†æ˜¯ä»¥å¯æ§æ€§ä¸ºä»£ä»· â€“ å¼€å‘è€…åœ¨ä¾›åº”å•†è®¾ç½®çš„ low-code ç¯å¢ƒä¸‹å¯åšçš„äº‹æƒ…å—åˆ°å¾ˆå¤§é™åˆ¶ã€‚\nå¼‚æ€§ç›¸å¸ï¼šå†°ä¸ç«çš„ç»“åˆ éšç€æ‰¾åˆ°åº”ç”¨ç¨‹åºå¼€å‘æŒ‘æˆ˜è§£å†³æ–¹æ¡ˆçš„å‹åŠ›è¶Šæ¥è¶Šå¤§ï¼Œè¿™äº›æŠ€æœ¯æ²¡æœ‰ç†ç”±ä¸èƒ½å…±å­˜ã€‚åªæ˜¯ä¼ ç»Ÿ low-code ä¾›åº”å•†æ—©äº serverless çš„æ¦‚å¿µï¼Œå¹¶ä½¿ç”¨éœ€è¦åº”ç”¨æœåŠ¡å™¨çš„ä¼ ç»ŸæŠ€æœ¯ã€‚æ˜¯çš„ï¼Œåº”ç”¨æœåŠ¡å™¨è¢«è®¤ä¸ºæ˜¯è¿‡æ—¶çš„æŠ€æœ¯ï¼Œå³ä½¿ä»–ä»¬æ˜¯å¼€æºçš„ï¼è€Œä¸”ç»™å…¨æ°‘å¼€å‘è€…æä¾› low-code çš„æ–¹æ³•ä¹Ÿä¸æ˜¯ AWSã€Google æˆ– IBM çš„ DNAã€‚ Microsoft æœ‰ä¸€ç‚¹ä¸åŒï¼Œä½†å…¶ä¸šåŠ¡å¼€å‘å·¥ä½œç›®å‰å¹¶æœªä¸ serverless ç›¸å…³è”ã€‚\næ‰€ä»¥ï¼Œè¿™å›å¸¦æ¥ä»€ä¹ˆé—®é¢˜ï¼Ÿå¯¹äºå¯»æ‰¾ low-code é€‰é¡¹çš„äººæ¥è¯´ï¼Œä»–ä»¬åº”è¯¥ä»”ç»†è€ƒè™‘ç³»ç»Ÿçš„æ¶æ„ã€‚è¿™å¯èƒ½ä¼šå¾ˆéš¾ï¼Œå› ä¸ºä¾›åº”å•†å–œæ¬¢åˆ°å¤„ä¹±ç”¨æŠ€æœ¯åç§°ï¼Œé‚£å°†ä¼šè®©è°ƒç ”å˜å¾—å¤æ‚ã€‚ä¸å¹¸çš„æ˜¯ï¼Œå®é™…ä¸Šå¾ˆå¤šä¼ ç»Ÿçš„ low-code ä¾›åº”å•†éƒ½ä¾èµ–è¾ƒæ—§çš„æŠ€æœ¯ã€‚ç›¸æ¯”äº serverlessï¼Œä½ å¯ä»¥è®¤ä¸ºä»–ä»¬æ˜¯å•ä½“æ¶æ„ â€“ é‚£æ„å‘³ç€ä½ æ²¡æœ‰å¯¹äº è®¾è®¡ã€å¼€å‘ã€æµ‹è¯•ã€éƒ¨ç½²ã€ç‹¬ç«‹æ‰©å±•èƒ½åŠ›çš„å¯çµæ´»æ€§ã€‚\nå¥½æ¶ˆæ¯æ˜¯ï¼Œç°åœ¨æœ‰å¾ˆå¤š low-code çš„å¯é€‰é¡¹æ˜¯åŸºäº serverless çš„ã€‚å®ƒä»¬é‡‡å–ä¸åŒçš„æ–¹æ³•ï¼Œé€šè¿‡å…³æ³¨äºæé«˜ä¸“ä¸šå¼€å‘äººå‘˜çš„ç”Ÿäº§åŠ›è€Œä¸æ˜¯å°†åº”ç”¨ç¨‹åºå¼€å‘äººå‘˜çš„è´£ä»»è½¬ç§»ç»™å…¨æ°‘å¼€å‘è€…ã€‚æœ¬è´¨ä¸Šï¼Œå®ƒä»¬æ—¨åœ¨é€šè¿‡ä½¿ç”¨ç°æœ‰çš„å·¥å…·å’Œæµç¨‹è®¾è®¡çš„é€šç”¨ web æŠ€èƒ½ä¸ºå¼€å‘äººå‘˜æä¾›æ›´é«˜çº§åˆ«çš„æ§åˆ¶ã€‚\nServerlessã€low-code å’Œ IoT åº”ç”¨ç¨‹åºç»éªŒ æ‰€ä»¥ï¼Œä¸ºä»€ä¹ˆè¿™ä¸€åˆ‡å¯¹äº IoT å¾ˆé‡è¦ï¼Ÿä¼ ç»Ÿçš„ low-code å¹æ§æ”¯æŒ IoT åº”ç”¨ç¨‹åºçš„èƒ½åŠ›ã€‚ä½†æ˜¯ä»–ä»¬ä»…é™äºè°ƒç”¨æ‰“åŒ…çš„æœåŠ¡ï¼ˆæ¯”å¦‚ åˆ†æï¼‰å’Œåœ¨åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨æœåŠ¡ã€‚\nå¦ä¸€æ–¹é¢ï¼Œserverless å¯¹äº IoT æ¥è¯´æ˜¯éå¸¸å¥½çš„æ¶æ„ï¼Œå› ä¸º event-based å·¥ä½œæ–¹å¼åœ¨ serverless ç¯å¢ƒè¿è¡Œçš„éå¸¸å¥½ã€‚è€Œä¸” event-based æ˜¯ IoT åº”ç”¨ç¨‹åºçš„å…³é”®ï¼Œå› ä¸ºæ¥è‡ªä¼ æ„Ÿå™¨æ•°æ®åˆ†æçš„äº‹ä»¶å¯ä»¥å®ç°æ›´è‡ªç„¶çš„ã€ä¸­æ–­é©±åŠ¨çš„åº”ç”¨ä½“éªŒã€‚è¿™å…è®¸åº”ç”¨ç¨‹åºä»£è¡¨ç”¨æˆ·æ‰§è¡Œæ“ä½œï¼Œä»è€Œæœ€å¤§é™åº¦åœ°å‡å°‘ç”¨æˆ·å¿…é¡»åšçš„å·¥ä½œã€‚\nå› æ­¤ï¼Œå¦‚æœæ‚¨æ­£åœ¨è€ƒè™‘ low-code ï¼Œè¯·ç¡®ä¿è¦ä»”ç»†è€ƒè™‘ç³»ç»Ÿçš„æ¶æ„ï¼Œè€Œä¸æ˜¯åªå…³æ³¨æ‹–æ”¾å¼ UI â€”â€” å®ƒå¯ä»¥å¯¹æœ€ç»ˆäº§å“äº§ç”Ÿé‡å¤§å½±å“ã€‚\n","description":"","tags":["low-code","serverless"],"title":"low-code å’Œ serverless â€“ å†°ä¸ç«ï¼Ÿ","uri":"/posts/lowcode-and-serverless/"},{"categories":null,"content":"è‹±æ–‡åŸæ–‡é“¾æ¥ï¼šhttps://www.zdnet.com/article/http-over-quic-to-be-renamed-http3/\næ® IETF å®˜æ–¹äººå‘˜é€éœ²ï¼ŒHTTP-over-QUIC å®éªŒæ–¹æ¡ˆå°†ä¼šè¢«å‘½åä¸º HTTP/3ï¼Œå¹¶å°†æˆä¸º HTTP åè®®çš„ç¬¬ä¸‰ä¸ªå®˜æ–¹ç‰ˆæœ¬ã€‚ åœ¨è°·æ­Œå°† SPDY æŠ€æœ¯å‘å±•æˆä¸º HTTP/2 åè®®ä¹‹åï¼Œè¿™æ˜¯è°·æ­Œç¬¬äºŒæ¬¡å°†å®éªŒæŠ€æœ¯å‘å±•æˆä¸º HTTP çš„å®˜æ–¹åè®®ç‰ˆæœ¬ã€‚ HTTP-over-QUIC åè®®æ˜¯ HTTP åè®®çš„å‡çº§ï¼Œè°·æ­Œä½¿ç”¨ QUIC å–ä»£ TCP (Transmission Control Protocal) ä½œä¸º HTTP çš„åŸºç¡€æŠ€æœ¯ã€‚ QUIC å…¨ç§° Quick UDP Internet Connectionsï¼Œæ˜¯è°·æ­Œå°† TCP åè®®é‡å†™ä¸ºä¸€ç§ç»“åˆäº†HTTP/2ã€TCPã€UDP å’Œ TLS çš„æ”¹è¿›æŠ€æœ¯ã€‚\nè°·æ­Œå¸Œæœ› QUIC èƒ½é€æ¸å–ä»£ TCP å’Œ UDP æˆä¸ºåœ¨å› ç‰¹ç½‘ä¼ è¾“äºŒè¿›åˆ¶æ•°æ®åè®®çš„æ–°é€‰æ‹©ï¼Œè€Œä½¿ç”¨å®ƒçš„æ›´å¥½çš„ç†ç”±ï¼Œæ˜¯ QUIC çš„åŠ å¯†æ–¹æ¡ˆå®ç°å·²ç»è¢«æµ‹è¯•è¯æ˜æ›´å¿«è€Œä¸”æ›´å®‰å…¨ (ç›®å‰ HTTP-over-QUIC åè®®è‰æ¡ˆä½¿ç”¨çš„æ˜¯ TLS1.3 åè®®)ã€‚\nQUIC è¢«æè®®ä½œä¸º2015å¹´ IETF çš„æ ‡å‡†è‰æ¡ˆï¼Œè€Œ HTTP-over-QUIC è¿™ä¸ªåŸºäº QUIC è€Œä¸æ˜¯ TCP é‡å†™ HTTP çš„åè®®åˆ™åœ¨2016å¹´7æœˆè¢«æè®®ã€‚ åœ¨é‚£ä¹‹åï¼ŒHTTP-over-QUIC åœ¨ Chrome 29ã€Opera 16 è¢«æ”¯æŒï¼Œå½“ç„¶è¿˜æœ‰ä¸€äº›ä½æ€§èƒ½çš„æµè§ˆå™¨ã€‚æœ€åˆï¼Œåªæœ‰è°·æ­Œçš„æœåŠ¡å™¨æ”¯æŒ HTTP-over-QUICï¼Œä»Šå¹´ï¼ŒFacebookä¹Ÿå¼€å§‹é‡‡ç”¨è¿™é¡¹æŠ€æœ¯ã€‚ åœ¨2018å¹´10æœˆä»½çš„é‚®ä»¶è®¨è®ºé‡Œï¼ŒIETF HTTP å’Œ QUIC å·¥ä½œç»„çš„ä¸»å¸­ Mark Nottingham æå‡ºäº†å°† HTTP-over-QUIC é‡å‘½åä¸º HTTP/3 çš„å®˜æ–¹ç”³è¯·ï¼Œå¹¶å¸Œæœ›å°† QUIC å·¥ä½œç»„çš„å¼€å‘å·¥ä½œè½¬é€’ç»™ HTTP å·¥ä½œç»„ã€‚ ç»è¿‡å‡ å¤©çš„è®¨è®ºï¼ŒNottingham çš„æè®®è¢« IETF çš„æˆå‘˜æ¥å—å¹¶ç»™å‡ºäº†å®˜æ–¹è®¤å¯ï¼Œå°† HTTP-over-QUIC ä½œä¸º HTTP åè®®çš„ä¸‹ä¸€ä¸ªç‰ˆæœ¬ â€”â€” HTTP/3ï¼Œç”¨äºå®Œå–„ä¼˜åŒ–å½“ä»Šçš„ç½‘ç»œã€‚ æ ¹æ® W3Techs çš„ç»Ÿè®¡ï¼Œæˆªæ­¢2018å¹´11æœˆï¼Œå…¨çƒè®¿é—®é‡æœ€é«˜çš„1åƒä¸‡ä¸ªç½‘ç«™ä¸­ï¼Œå·²ç»æœ‰31.2%çš„ç½‘ç«™æ”¯æŒäº† HTTP/2ï¼Œåªæœ‰1.2%çš„ç½‘ç«™æ”¯æŒäº† QUICã€‚\nä»¥ä¸‹æ˜¯è‡ªå·±çš„ä¸€ç‚¹æ€è€ƒï¼š\nå¯ä»¥çœ‹åˆ°ï¼ŒHTTP/3 åè®®å¸¦æ¥çš„æœ€å¤§æ”¹å˜æ˜¯åè®®åº•å±‚å°†é‡‡ç”¨ UDP åè®®ï¼Œè€Œä¸å†æ˜¯ TCP åè®®ï¼Œé‚£è¿™æ ·çš„å¥½å¤„å¯ä»¥è¯´æ˜¯æ›´ä½æ—¶å»¶å’Œæ›´å¥½çš„æ‹¥å¡æ§åˆ¶ï¼Œè¿˜æœ‰æ›´é«˜æ•ˆç‡çš„å¤šè·¯å¤ç”¨ï¼Œå¯ä»¥è¯´è°·æ­ŒçœŸçš„å¾ˆå‰å®³äº†ï¼Œè¦çŸ¥é“ HTTP/2 ä¹Ÿæ˜¯è°·æ­Œçš„ SPDY æ ‡å‡†åŒ–ä¹‹åçš„åè®®ã€‚è€Œä¸”è¿™æ¬¡ QUIC å‘éŸ³åŒ quick ï¼Œä¸Šæ¬¡ SPDY å‘éŸ³åŒ speedyï¼Œæ˜¯å·§åˆè¿˜æ˜¯æœ‰æ„ä¸ºä¹‹å‘¢ã€‚ï¼šï¼‰\nçœŸæ˜¯å¼ºè€…åˆ¶å®šè§„åˆ™ï¼š\n They are in control of future web protocol development.\n","description":"","tags":["HTTP"],"title":"è¯‘ï¼šHTTP/3 æ¥äº†","uri":"/posts/http3/"},{"categories":null,"content":"å·¥å‚æ–¹æ³•æ¨¡å¼æ˜¯ç®€å•å·¥å‚çš„å‡çº§ã€‚ä»–åˆ›å»ºä¸€ä¸ªç”¨äºå®ä¾‹åŒ–ç±»çš„æ¥å£ï¼Œå¹¶ç”±å·¥å‚çš„å­ç±»å†³å®šå®ä¾‹åŒ–å“ªä¸ªç±»ã€‚å·¥å‚æ–¹æ³•æ¨¡å¼ä½¿å¾—ä¸€ä¸ªç±»çš„å®ä¾‹åŒ–å»¶è¿Ÿåˆ°å­ç±»ã€‚\nä¸‹é¢ä»ç„¶ä»¥â€œä¸¤ä¸ªæ•°å­—çš„è¿ç®—â€ä½œä¸ºä¾‹å­\noperations.go // è¿ç®—ç±»\npackage factory_method // è¿ç®— type Operation interface { SetA(float64) SetB(float64) GetResult() (float64, error) } // è¿ç®—åŸºç±»ï¼Œå®ç°å…¬å…±çš„æ–¹æ³• type OperationBase struct { a float64 b float64 } func (oper *OperationBase) SetA(a float64) { oper.a = a } func (oper *OperationBase) SetB(b float64) { oper.b = b } // åŠ æ³•è¿ç®— type AddOperation struct { *OperationBase } func (oper *AddOperation) GetResult() (float64, error) { return oper.a + oper.b, nil } // å‡æ³•è¿ç®— type SubOperation struct { *OperationBase } func (oper *SubOperation) GetResult() (float64, error) { return oper.a - oper.b, nil } // ä¹˜æ³•å…ƒç®— type MulOperation struct { *OperationBase } func (oper *MulOperation) GetResult() (float64, error) { return oper.a * oper.b, nil } factory_method.go // å·¥å‚ç±»\npackage factory_method // å·¥å‚ç±» type OperationFactory interface { CreateOperation() Operation } // åŠ æ³•å·¥å‚ type AddFactory struct { } func (f *AddFactory) CreateOperation() Operation { return \u0026AddOperation{ OperationBase: \u0026OperationBase{}, } } // å‡æ³•å·¥å‚ type SubFactory struct { } func (f *SubFactory) CreateOperation() Operation { return \u0026SubOperation{ OperationBase: \u0026OperationBase{}, } } // ä¹˜æ³•å·¥å‚ type MulFactory struct { } func (f *MulFactory) CreateOperation() Operation { return \u0026MulOperation{ OperationBase: \u0026OperationBase{}, } } æºç ä»¥åŠæµ‹è¯•æºç ä¸‹è½½åœ°å€ï¼šhttps://github.com/h1z3y3/big-talk-go-design-patterns/tree/master/04_factory_method\n","description":"","tags":["è®¾è®¡æ¨¡å¼","Golang"],"title":"è®¾è®¡æ¨¡å¼ï¼šå·¥å‚æ–¹æ³•æ¨¡å¼","uri":"/posts/design-pattern-factory-method/"},{"categories":null,"content":"ä»£ç†æ¨¡å¼å³åœ¨çœŸå®ç±»çš„åŸºç¡€ä¸Šå°è£…ä¸€å±‚ä»£ç†ç±»ï¼Œç”±ä»£ç†ç±»å®Œæˆå¯¹çœŸå®ç±»çš„è°ƒç”¨ã€‚ ä»¥ä¾¿å¯ä»¥åœ¨ä»£ç†ç±»ä¸­åšä¸€äº›é¢å¤–çš„å·¥ä½œï¼Œå¦‚è¿›è¡Œè®¿é—®æƒé™æ ¡éªŒã€ä¿å­˜Cacheç¼“å­˜ç­‰æ“ä½œã€‚\nä¸‹é¢ä»¥\"è¯»å–å›¾ç‰‡èµ„æº\"ä¸ºä¾‹è¯´æ˜ä»£ç†æ¨¡å¼ï¼š\npackage proxy // æ¥å£ï¼Œä»£ç†ç±»å’ŒçœŸå®ç±»éƒ½è¦å®ç° type Image interface { Get() string } // çœŸå®çš„å›¾ç‰‡ç±» type RealImage struct {} func (r *RealImage) Get() string { return \"real_image_url\" } // ä»£ç†ç±» type ImageProxy struct { realImage RealImage } // ç”±ä»£ç†ç±»è¿›è¡ŒåŸç±»çš„è°ƒç”¨ï¼Œä»è€Œèƒ½åœ¨åŸç±»åŸºç¡€ä¸Šåšä¸€äº›æ“ä½œ func (r *ImageProxy) Get() string { var res string // pre: æƒé™æ£€æŸ¥ã€æŸ¥çœ‹æ˜¯å¦æœ‰cacheç­‰ res += \"pre:\" res += r.realImage.Get() // after: ä¿å­˜cacheã€æ ¼å¼åŒ–ç»“æœç­‰ res += \":after\" return res } æºç ä»¥åŠæµ‹è¯•æºç ä¸‹è½½åœ°å€ï¼šhttps://github.com/h1z3y3/big-talk-go-design-patterns/tree/master/03_proxy\n","description":"","tags":["è®¾è®¡æ¨¡å¼","Golang"],"title":"è®¾è®¡æ¨¡å¼ï¼šä»£ç†æ¨¡å¼","uri":"/posts/design-pattern-proxy/"},{"categories":null,"content":" å¹³å‡è´Ÿè½½æ˜¯å•ä½æ—¶é—´å†…â€œæ­£åœ¨ä½¿ç”¨CPUâ€ã€â€œç­‰å¾…CPUâ€ã€â€œç­‰å¾…IOâ€çš„è¿›ç¨‹æ•°é‡ å¹³å‡è´Ÿè½½å’ŒCPUä½¿ç”¨ç‡ä¸ä¸€æ ·ï¼Œä½†æ˜¯CPUå¯†é›†å‹ä»»åŠ¡å¯èƒ½å¯¼è‡´å¹³å‡è´Ÿè½½å‡é«˜ ç”±1ï¼Œ2å¯çŸ¥ï¼Œå¹³å‡è´Ÿè½½å‡é«˜ï¼Œä¸ä¸€å®šæ˜¯ç”±äºCPUä½¿ç”¨ç‡é«˜å¯¼è‡´ï¼Œä¹Ÿå¯èƒ½æ˜¯IOç¹å¿™ é™¤äº†topå‘½ä»¤ï¼Œè¿˜æœ‰mpstatã€pidstatç­‰å‘½ä»¤ watchå‘½ä»¤ï¼Œå¯ä»¥æ£€æµ‹ä¸€ä¸ªå‘½ä»¤çš„æ‰§è¡Œç»“æœï¼Œè€Œä¸å¿…ä¸€æ¬¡æ¬¡æ‰‹åŠ¨è¾“å…¥è¿è¡Œ uptimeå‘½ä»¤  ","description":"","tags":["Linux"],"title":"Linux:å¹³å‡è´Ÿè½½","uri":"/posts/linux-avarage-load/"},{"categories":null,"content":"è£…é¥°å™¨æ¨¡å¼ä¸»è¦è§£å†³è¦åŠ¨æ€çš„ç»™ä¸€ä¸ªç±»æ·»åŠ ä¸€äº›æ–°åŠŸèƒ½ï¼Œè€Œåˆä¸æƒ³è®©è¿™ä¸ªç±»å˜å¾—åºå¤§ã€‚ è¿™ç§æ¨¡å¼éœ€è¦åˆ›å»ºä¸€ä¸ªè£…é¥°ç±»æ¥åŒ…è£…æ‰©å±•åŸæœ‰çš„ç±»ï¼Œå¹¶ä¸”åœ¨ä¿è¯åŸæœ‰çš„ç±»ä¿æŒç»“æ„ä¸€è‡´çš„å‰æä¸‹ï¼Œæä¾›é¢å¤–çš„åŠŸèƒ½ã€‚\nä¸‹é¢æ˜¯ç»™ä¸€ä¸ªäººè£…é¥°è¡£æœçš„å®ä¾‹ï¼š\npackage decorator import \"fmt\" type Person interface { Show() } // å…·ä½“å®ç° type ConcreteComponent struct { } func (c *ConcreteComponent) Show() { fmt.Print(\"A Person wears sunglasses; \") } // ç”·äºº type Man struct{} func (m *Man) Show() { fmt.Print(\"A man wear a hat!\") } // å¥³äºº type Woman struct{} func (w *Woman) Show() { fmt.Print(\"A woman wear a skirt!\") } // TShirt type TShirtDecorator struct { Person Color string } func (t *TShirtDecorator) Show() { t.Person.Show() // è°ƒç”¨çˆ¶ç±»çš„ Show() æ–¹æ³• // \"è£…é¥°\": å¢åŠ è‡ªå·±ç‰¹æœ‰çš„å±æ€§ fmt.Print(fmt.Sprintf(\"Color: %s, TShirt; \", t.Color)) } func WearTShirt(p Person, c string) Person { return \u0026TShirtDecorator{ Person: p, Color: c, } } // Pants type PantsDecorator struct { Person Length int64 } func (p *PantsDecorator) Show() { p.Person.Show() fmt.Print(fmt.Sprintf(\"Lenght: %dcm, Pants.; \", p.Length)) } func WearPants(p Person, l int64) Person { return \u0026PantsDecorator{ Person: p, Length: l, } } // Shoes type ShoesDecorator struct { Person Size int64 } func (s *ShoesDecorator) Show() { s.Person.Show() fmt.Print(fmt.Sprintf(\"Size: %d, Shoes; \", s.Size)) } func WearShoes(p Person, s int64) Person { return \u0026ShoesDecorator{ Person: p, Size: s, } } // Examples func ExampleConcrete_Wear() { var p Person = \u0026ConcreteComponent{} p = WearTShirt(p, \"Blue\") p = WearPants(p, 100) p = WearShoes(p, 42) p.Show() // Output: A Person wears sunglasses; Color: Blue, TShirt; Lenght: 100cm, Pants.; Size: 42, Shoes; } func ExampleMan_Show() { var xiaoming Person = \u0026Man{} xiaoming = WearShoes(xiaoming, 43) xiaoming = WearTShirt(xiaoming, \"White\") xiaoming.Show() // Output:A man wear a hat!Size: 43, Shoes; Color: White, TShirt; } func ExampleWoman_Show() { var xiaohong Person = \u0026Woman{} xiaohong = WearTShirt(xiaohong, \"Red\") xiaohong = WearShoes(xiaohong, 38) xiaohong.Show() // Output: A woman wear a skirt!Color: Red, TShirt; Size: 38, Shoes; } æºç ä»¥åŠæµ‹è¯•æºç ä¸‹è½½åœ°å€ï¼šhttps://github.com/h1z3y3/big-talk-go-design-patterns/tree/master/02_decorator\n","description":"","tags":["è®¾è®¡æ¨¡å¼","Golang"],"title":"è®¾è®¡æ¨¡å¼ï¼šè£…é¥°å™¨æ¨¡å¼","uri":"/posts/design-pattern-decorator/"},{"categories":null,"content":"åœ¨ç­–ç•¥æ¨¡å¼ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ç³»åˆ—ç­–ç•¥å¯¹è±¡å’Œä¸€ä¸ªèƒ½éšç­–ç•¥å¯¹è±¡æ”¹å˜è€Œæ”¹å˜çš„Contextå¯¹è±¡ï¼Œç­–ç•¥å¯¹è±¡æ”¹å˜Contextçš„æ‰§è¡Œæ–¹æ³•ã€‚\nä»ä»¥ä¸¤ä¸ªæ•°å­—çš„åŠ å‡ä¹˜é™¤æ“ä½œä½œä¸ºç¤ºä¾‹\npackage strategy import \"fmt\" // Context ç±» type Context struct { strategy Strategy } func NewContext(strategy Strategy) *Context { return \u0026Context{ strategy: strategy, } } func (c *Context) GetResult(a float64, b float64) (float64, error) { return c.strategy.GetResult(a, b) } // ç­–ç•¥æ¥å£ type Strategy interface { GetResult(a float64, b float64) (float64, error) } // ä»¥ä¸‹ç±»å®ç°ç­–ç•¥æ¥å£ // åŠ æ³• type Add struct{} func (o *Add) GetResult(a float64, b float64) (float64, error) { return a + b, nil } // å‡æ³• type Sub struct{} func (o *Sub) GetResult(a float64, b float64) (float64, error) { return a - b, nil } // ä¹˜æ³• type Mul struct{} func (o *Mul) GetResult(a float64, b float64) (float64, error) { return a * b, nil } // é™¤æ³• type Div struct{} func (o *Div) GetResult(a float64, b float64) (float64, error) { if b == 0 { return 0, fmt.Errorf(\"é™¤æ•°ä¸èƒ½ä¸º0\") } return a / b, nil } æºç ä»¥åŠæµ‹è¯•æºç ä¸‹è½½åœ°å€ï¼šhttps://github.com/h1z3y3/big-talk-go-design-patterns/tree/master/01_strategy\n","description":"","tags":["è®¾è®¡æ¨¡å¼","Golang"],"title":"è®¾è®¡æ¨¡å¼ï¼šç­–ç•¥æ¨¡å¼","uri":"/posts/design-pattern-strategy/"},{"categories":null,"content":"è¿™ä¸ªç³»åˆ—æ˜¯ã€Šå¤§è¯è®¾è®¡æ¨¡å¼ã€‹çš„è¯»åæ„Ÿï¼Œå°†ä¹¦ä¸­çš„è®¾è®¡æ¨¡å¼ç”¨golangå®ç°ã€‚\nç¬¬ä¸€ä¸ªè®¾è®¡æ¨¡å¼æ˜¯ç®€å•å·¥å‚æ¨¡å¼ï¼Œä¸»è¦ç”¨åˆ°çš„çŸ¥è¯†ç‚¹æ˜¯ç±»çš„å¤šæ€ã€‚ å¤šæ€è¡¨ç¤ºä¸åŒçš„ç±»å¯ä»¥æ‰§è¡Œç›¸åŒçš„æ–¹æ³•ï¼Œä½†è¦é€šè¿‡å®ƒä»¬è‡ªå·±çš„å®ç°ä»£ç æ¥æ‰§è¡Œã€‚ è€Œåœ¨golangä¸­æ²¡æœ‰ç±»çš„æ¦‚å¿µï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©æ¥å£(interface)ç±»å‹å®ç°ç±»çš„å¤šæ€ã€‚\nå¦‚æœä¸€ä¸ªç±»å‹å®ç°äº†æ¥å£çš„æ‰€æœ‰æ–¹æ³•ï¼Œé‚£ä¹ˆå°±å¯ä»¥è¯´è¿™ä¸ªç±»å‹å®ç°äº†è¿™ä¸ªæ¥å£ã€‚\næˆ‘ä»¬è¦å®ç°ä¸¤ä¸ªæ•°å­—çš„åŠ å‡ä¹˜é™¤æ“ä½œä½œä¸ºç¤ºä¾‹\npackage simplefactory import \"fmt\" // 1. å®šä¹‰ä¸€ä¸ªæ¥å£ç±»å‹ï¼Œå­ç±»å¿…é¡»å®ç°GoResultæ–¹æ³•æ¥å®ç°è¯¥æ¥å£ type Operation interface { GetResult(a float64, b float64) (float64, error) } // 2. åˆå§‹åŒ–å·¥å‚ç±»æ–¹æ³•ï¼Œä¼ å…¥æ“ä½œç¬¦ï¼Œè¿”å›å¯¹åº”çš„ç±» func NewOperation(oper string) Operation { switch oper { case \"+\": return \u0026operationAdd{} case \"-\": return \u0026operationSub{} case \"*\": return \u0026operationMul{} case \"/\": return \u0026operationDiv{} default: return nil } } // åŠ æ³• type operationAdd struct{} func (o *operationAdd) GetResult(a float64, b float64) (float64, error) { return a + b, nil } // å‡æ³• type operationSub struct{} func (o *operationSub) GetResult(a float64, b float64) (float64, error) { return a - b, nil } // ä¹˜æ³• type operationMul struct{} func (o *operationMul) GetResult(a float64, b float64) (float64, error) { return a * b, nil } // é™¤æ³• type operationDiv struct{} func (o *operationDiv) GetResult(a float64, b float64) (float64, error) { if b == 0 { return 0, fmt.Errorf(\"é™¤æ•°ä¸èƒ½ä¸º0\") } return a / b, nil } æºç ä»¥åŠæµ‹è¯•æºç ä¸‹è½½åœ°å€ï¼šhttps://github.com/h1z3y3/big-talk-go-design-patterns/tree/master/00_simple_factory\n","description":"","tags":["è®¾è®¡æ¨¡å¼","Golang"],"title":"è®¾è®¡æ¨¡å¼ï¼šç®€å•å·¥å‚æ¨¡å¼","uri":"/posts/design-pattern-simple-factory/"},{"categories":null,"content":" è®¡ç®—å¯†é›†å‹ä»»åŠ¡\n è®¡ç®—å¯†é›†å‹ä»»åŠ¡ä¸»è¦æ¶ˆè€—CPUèµ„æºï¼Œéœ€è¦è¿›è¡Œå¤§é‡çš„è®¡ç®—ï¼Œå¦‚è®¡ç®—åœ†å‘¨ç‡æˆ–å¯¹è§†é¢‘è¿›è¡Œé«˜æ¸…çš„è§£ç ç­‰ï¼Œå…¨é CPUçš„è¿ç®—èƒ½åŠ›ã€‚ è¿™ç§ä»»åŠ¡è™½ç„¶å¯ä»¥åˆ©ç”¨å¤šä»»åŠ¡å»å®Œæˆï¼Œä½†æ˜¯ä»»åŠ¡è¶Šå¤šï¼ŒèŠ±åœ¨ä»»åŠ¡åˆ‡æ¢ä¸Šçš„æ—¶é—´å°±ä¼šè¶Šå¤šï¼Œé‚£ä¹ˆCPUçš„æ‰§è¡Œæ•ˆç‡å°±ä¼šè¶Šä½ï¼Œ æ‰€ä»¥ï¼Œè¦é«˜æ•ˆçš„åˆ©ç”¨CPUï¼Œè®¡ç®—å¯†é›†å‹ä»»åŠ¡åŒæ—¶è¿›è¡Œçš„æ•°é‡åº”å½“ç­‰äºCPUçš„æ ¸å¿ƒæ•°ï¼Œå°½é‡å‡å°‘CPUåœ¨ä»»åŠ¡é—´çš„åˆ‡æ¢æ—¶é—´ã€‚\n IOå¯†é›†å‹ä»»åŠ¡\n ä¸€èˆ¬æ¶‰åŠåˆ°ç½‘ç»œã€ç£ç›˜IOçš„ä»»åŠ¡éƒ½æ˜¯IOå¯†é›†å‹ä»»åŠ¡ï¼Œè¿™ç±»ä»»åŠ¡çš„ç‰¹ç‚¹å°±æ˜¯CPUæ¶ˆè€—å¾ˆå°‘ï¼Œä»»åŠ¡çš„å¤§éƒ¨åˆ†æ—¶é—´éƒ½èŠ±åœ¨ç­‰å¾…IOæ“ä½œçš„å®Œæˆã€‚ ç”±äºIOçš„é€Ÿåº¦è¿œè¿œä½äºCPUå’Œå†…å­˜çš„é€Ÿåº¦ï¼Œæ‰€ä»¥IOå¯†é›†å‹ä»»åŠ¡çš„æ•°é‡è¶Šå¤šï¼ŒCPUçš„æ•ˆç‡å°±ä¼šè¶Šé«˜ï¼Œä½†æ˜¯ä¹Ÿä¼šæœ‰ä¸€å®šçš„é™åº¦ã€‚ å¸¸è§çš„å¤§éƒ¨åˆ†ä»»åŠ¡éƒ½æ˜¯IOå¯†é›†å‹ä»»åŠ¡ï¼Œæ¯”å¦‚Webåº”ç”¨ã€‚\nIOå¯†é›†å‹ä»»åŠ¡æ‰§è¡ŒæœŸé—´ï¼Œ99%çš„æ—¶é—´éƒ½èŠ±åœ¨IOä¸Šï¼ŒèŠ±åœ¨CPUä¸Šçš„æ—¶é—´å¾ˆå°‘ï¼Œå› æ­¤ï¼Œç”¨è¿è¡Œé€Ÿåº¦æå¿«çš„Cè¯­è¨€æ›¿æ¢Pythonè¿™æ ·è¿è¡Œé€Ÿåº¦æä½çš„è„šæœ¬è¯­è¨€ï¼Œ ä¹Ÿå®Œå…¨æ— æ³•æå‡è¿è¡Œæ•ˆç‡ã€‚å¯¹äºIOå¯†é›†å‹ä»»åŠ¡ï¼Œæœ€åˆé€‚çš„è¯­è¨€å°±æ˜¯å¼€å‘æ•ˆç‡æœ€é«˜ï¼Œä»£ç é‡æœ€å°‘çš„è¯­è¨€ï¼Œè„šæœ¬è¯­è¨€æ˜¯é¦–é€‰ï¼ŒCè¯­è¨€æœ€å·®ã€‚\n æ€»ç»“\n è®¡ç®—å¯†é›†å‹ç¨‹åºé€‚åˆCè¯­è¨€å¤šçº¿ç¨‹ IOå¯†é›†å‹ç¨‹åºé€‚åˆè„šæœ¬è¯­è¨€å¼€å‘çš„å¤šçº¿ç¨‹\n","description":"","tags":["åŸºç¡€"],"title":"è®¡ç®—å¯†é›†å‹ vs. IOå¯†é›†å‹","uri":"/posts/cpu-io/"},{"categories":null,"content":"æœ€è¿‘åœ¨åšæ¯•ä¸šè®¾è®¡ï¼Œä½¿ç”¨åˆ°äº†CkEditorå’ŒCkFinderæ¥åšå¯Œæ–‡æœ¬ç¼–è¾‘æ¡†ä»¥åŠæ–‡ä»¶ç®¡ç†ã€‚ å› ä¸ºCkFinderåªèƒ½ä¸‹è½½ä½¿ç”¨Demoç‰ˆæœ¬ï¼Œä¼šæœ‰ä¸€äº›ç‰ˆæƒä¿¡æ¯ã€‚ æˆ‘ä¸æ˜¯ç”¨åšå•†ä¸šç›®çš„ï¼Œä»…ä»…ä¸ºäº†å­¦ä¹ ï¼Œæ‰€ä»¥æƒ³æŠŠç‰ˆæƒä¿¡æ¯å»æ‰ã€‚ çœ‹äº†å‡ ç¯‡åšå®¢ï¼Œéƒ½æ˜¯æ•™ä½ æŠŠalertæ¡†åŠ ä¸Šdisplay:noneï¼Œæˆ‘è€ƒè™‘åˆ°è¿™æ ·å¹¶ä¸å¥½ï¼Œå› ä¸ºå¦‚æœæœ‰å…¶ä»–æ­£å¸¸çš„ä¿¡æ¯ä¹Ÿä¸èƒ½æ˜¾ç¤ºäº†ï¼Œæ‰€ä»¥èŠ±äº†äº›æ—¶é—´æ”¹äº†ä¸‹ckfinder.jsï¼Œæ—¢å»æ‰äº†ç‰ˆæƒä¿¡æ¯ï¼Œåˆä¸ä¼šå½±å“å…¶ä»–ä¿¡æ¯çš„æç¤ºã€‚\nä¸‹æ–‡æä¾›äº†ä¸¤ç§æ–¹æ³•ï¼Œå»ºè®®ä½¿ç”¨ç¬¬äºŒç§ã€‚\nå¦‚æœä½ æ˜¯ç”¨äºå•†ä¸šç›®çš„ï¼Œè¯·åˆ°å®˜ç½‘è´­ä¹°ä½¿ç”¨çš„Licenseä½¿ç”¨ã€‚\nCKFinderç‰ˆæœ¬: Version: 2.6.2.1 â€¢ Released 11 Oct 2016\nä¸æƒ³è‡ªå·±æ“ä½œè¿™ä¹ˆéº»çƒ¦çš„ï¼Œå»CSDNä¸‹è½½æˆ‘ä¸Šä¼ å¥½çš„ï¼Œ2ç§¯åˆ† å“ˆå“ˆå“ˆ\né“¾æ¥ï¼šhttp://download.csdn.net/detail/qq1255685485/9845062\nç¬¬ä¸€ç§ ç¬¬ä¸€ç§éº»çƒ¦è€Œä¸”éœ€è¦é€»è¾‘æ”¹åŠ¨è¾ƒå¤§ã€‚\nå·¦ä¸‹è§’ä¿¡æ¯ åœ¨ckfinder.jsä¸­æœç´¢:\nt=\"\\x54\\150\\151\\163\\040\\x69\\163\\x20\\164\\x68\\145\\040\\x44\\105\\x4d\\x4f\\040\\166\\x65\\x72\\x73\\x69\\157\\156\\x20\\157\\146\\040\\103\\113\\x46\\151\\x6e\\144\\145\\x72\\056\\040\\120\\154\\x65\\141\\163\\145\\040\\166\\x69\\x73\\x69\\x74\\x20\\164\\150\\145\\040\\x3c\\x61\\x20\\150\\162\\x65\\x66\\x3d\\x27\\150\\164\\x74\\x70\\x3a\\x2f\\x2f\\x63\\x6b\\163\\157\\x75\\x72\\x63\\x65\\056\\143\\x6f\\x6d\\057\\143\\153\\146\\151\\x6e\\144\\x65\\162\\x27\\x20\\164\\141\\162\\x67\\x65\\x74\\x3d\\047\\x5f\\x62\\154\\141\\x6e\\x6b\\x27\\x3e\\x43\\x4b\\106\\151\\156\\144\\x65\\x72\\040\\x77\\145\\x62\\040\\163\\151\\x74\\x65\\x3c\\x2f\\x61\\x3e\\x20\\164\\157\\040\\x6f\\x62\\x74\\141\\x69\\x6e\\x20\\141\\040\\166\\x61\\154\\151\\144\\040\\x6c\\151\\x63\\x65\\156\\163\\x65\\x2e\"  ä½ç½®åœ¨æ–‡ä»¶æ¯”è¾ƒé åçš„ä½ç½®ï¼Œæ›¿æ¢ä¸º:\nt=\"\"  è¿™ä¸€å¥çš„è§£ç åä¸º:\nThis is the DEMO version of CKFinder.Please visit the \u003ca href='http://cksource.com/ckfinder' target='_blank'\u003eCKFinder web site\u003c/a\u003e to obtain a valid license.  å¯ä»¥åœ¨ http://ddecode.com/hexdecoder è§£ç \né¡¶ç«¯ä¿¡æ¯ åœ¨ckfinder.jsä¸­æœç´¢:\nP=\"\\x50\\x6c\\x65\\141\\x73\\x65\\040\\166\\151\\x73\\x69\\x74\\x20\\164\\x68\\x65\\040\\074\\141\\040\\x68\\162\\x65\\146\\075\\x27\\x68\\164\\x74\\160\\072\\057\\057\\x63\\x6b\\x73\\x6f\\x75\\x72\\x63\\x65\\056\\x63\\157\\155\\057\\143\\x6b\\x66\\151\\x6e\\x64\\x65\\x72\\x27\\x20\\x74\\141\\162\\147\\145\\x74\\x3d\\x27\\x5f\\x62\\154\\141\\x6e\\153\\x27\\x3e\\x43\\x4b\\106\\x69\\x6e\\x64\\x65\\162\\x20\\x77\\x65\\142\\x20\\x73\\x69\\x74\\145\\x3c\\x2f\\x61\\x3e\\040\\x74\\x6f\\x20\\157\\142\\x74\\x61\\151\\156\\x20\\141\\040\\166\\141\\154\\151\\x64\\040\\154\\151\\143\\145\\x6e\\163\\145\\x2e\",Q=\"\\x54\\150\\x69\\163\\x20\\151\\x73\\040\\x74\\x68\\x65\\040\\x44\\x45\\x4d\\117\\040\\x76\\x65\\x72\\163\\x69\\157\\156\\x20\\157\\x66\\040\\x43\\x4b\\106\\x69\\156\\144\\145\\x72\\x2e\\x20\"+P,R=\"\\x50\\162\\157\\144\\x75\\x63\\164\\040\\154\\151\\143\\x65\\156\\163\\145\\x20\\150\\141\\x73\\x20\\x65\\x78\\160\\x69\\162\\145\\144\\x2e\\040\"+P;  è¿™é‡Œå®šä¹‰äº†ä¸‰ä¸ªå˜é‡P, Q, R, åˆ†åˆ«ä»£è¡¨çš„æ„æ€å¦‚ä¸‹:\nP=\"Please visit the \u003ca href='http://cksource.com/ckfinder' target='_blank'\u003eCKFinder web site\u003c/a\u003e to obtain a valid license.\"; Q=\"This is the DEMO version of CKFinder.\" + P; R=\"Product license has expired.\" + P;  å°†æœç´¢åˆ°çš„å†…å®¹æ›¿æ¢ä¸º\nP=\"\"; Q=\"\"; R=\"\";  æ›¿æ¢å®Œæˆåå‘ç°æ–‡ä»¶åº“ä¸ºç©ºç™½ï¼Œæ›´å…·ä½“å¯ä»¥è¯´ï¼Œå½“å°†Qè®¾ç½®ä¸ºç©ºç™½å­—ç¬¦ä¸²ä¹‹åæ‰ä¼šæ˜¾ç¤ºç©ºç™½ï¼Œè€Œæ›¿æ¢På’ŒRéƒ½ä¸ä¼šå‡ºç°è¿™ç§æƒ…å†µï¼Œå› ä¸ºä»£ç åé¢å¯¹Qçš„å€¼åšäº†åˆ¤æ–­.\næ‰€ä»¥æˆ‘ä»¬ç»§ç»­å‘ä¸‹çœ‹ï¼Œç»§ç»­æœç´¢ï¼š\nif(!Q)  å¯ä»¥çœ‹åˆ°è¿™ä¸ªåˆ¤æ–­if(!Q) return;,åˆ é™¤è¿™ä¸€ä¸ªåˆ¤æ–­ä½“.\nè¿˜æ²¡æœ‰ç»“æŸï¼Œç»§ç»­æœç´¢:\nQ.charAt  å¯ä»¥çœ‹åˆ°å¦å¤–ä¸€ä¸ªåˆ¤æ–­if(pw||Q.charAt(2\u003c\u003c2)!='t')return;ï¼Œä¸ºäº†ä¿è¯æ­£å¸¸ä½¿ç”¨ï¼Œå°†è¿™ä¸ªåˆ¤æ–­ä½“æ›¿æ¢ä¸º:\nif(pw) return;  å¦å¤–å¤šè¯´ä¸€å¥ï¼ŒQå˜é‡åˆ é™¤åˆ°Q=\"\\x54\\150\\x69\\163\\x20\\151\\x73\\040\\x74\"çš„æ—¶å€™è¿˜èƒ½æ­£å¸¸ä½¿ç”¨ï¼Œä¹Ÿå°±æ˜¯Q=\"This is t\"ï¼Œå¯ä»¥åšäº›å°è¯•ã€‚\nå½“ä»¥ä¸Šå·¥ä½œå…¨éƒ¨å®Œæˆä¹‹åï¼Œåˆ·æ–°é¡µé¢å³å¯ä»¥çœ‹åˆ°ç‰ˆæƒä¿¡æ¯å…¨éƒ¨å»æ‰äº†ï¼Œè€Œä¸”å¹¶æ²¡æœ‰å½±å“åˆ°å…¶ä»–ä¿¡æ¯çš„æé†’ã€‚\nå“ˆå“ˆå“ˆğŸ˜‚ã€‚çœ‹åˆ°è¿™çš„éƒ½æ˜¯çœŸçˆ±ã€‚ é‚£ä¹ˆç»™ä½ ä»¬è¯´ä¸€ä¸ªæ›´ç®€å•çš„æ–¹æ³•ï¼Œåªéœ€ä¸‰æ­¥ï¼Œæ›´å®Œç¾çš„è§£å†³é—®é¢˜ã€‚\nç¬¬äºŒç§ ç®€å•ï¼Œåªéœ€ä¸‰æ­¥\nå·¦ä¸‹è§’ä¿¡æ¯ æœç´¢: this.dV().getChild(0).appendHtmlï¼Œå¾ˆæ˜¾ç„¶æ˜¯ä¸ºå·¦ä¸‹è§’æ·»åŠ ä¿¡æ¯ï¼Œçœ‹è¿™ä¸€å¥ä¸Šé¢æœ‰ä¸ªifåˆ¤æ–­:\n if (this.app.gd == 'bootstrap') { var H = \"\\x3c\\x64\\151\\x76\\x20\\143\\x6c\\x61\\x73\\x73\\x3d\\x27\\166\\x69\\145\\167\\x20\\164\\157\\157\\154\\137\\160\\141\\x6e\\145\\x6c\\047\\040\\x73\\x74\\x79\\154\\145\\075\\047\\x64\\151\\x73\\x70\\154\\141\\x79\\x3a\\x62\\x6c\\157\\143\\153\\x20\\x21\\x69\\x6d\\160\\157\\x72\\164\\x61\\x6e\\164\\x3b\\160\\x6f\\163\\x69\\x74\\151\\x6f\\x6e\\072\\x73\\x74\\x61\\164\\151\\143\\040\\x21\\x69\\x6d\\160\\157\\x72\\164\\x61\\x6e\\x74\\x3b\\x63\\x6f\\x6c\\157\\x72\\x3a\\043\\x33\\x31\\x37\\x30\\x38\\x66\\x20\\041\\151\\155\\x70\\157\\x72\\x74\\x61\\156\\x74\\073\\x62\\x61\\x63\\x6b\\147\\162\\157\\165\\x6e\\144\\055\\143\\157\\x6c\\x6f\\x72\\x3a\\x23\\144\\x39\\145\\144\\146\\x37\\x20\\x21\\x69\\x6d\\x70\\157\\x72\\x74\\141\\156\\x74\\073\\146\\x6f\\156\\164\\x2d\\x73\\151\\172\\x65\\x3a\\x20\\061\\063\\x70\\170\\073\\040\\x70\\141\\x64\\144\\x69\\156\\147\\072\\040\\x35\\x70\\170\\073\\x20\\155\\141\\162\\147\\x69\\x6e\\072\\065\\160\\170\\x3b\\x62\\157\\162\\144\\x65\\162\\055\\x72\\141\\144\\x69\\x75\\x73\\x3a\\x34\\160\\x78\\x3b\\047\\x3e\"; v = H + t + s; w = H + u + s; }  è¿›è¡Œè§£ç å’Œå­—ç¬¦ä¸²ç»„åˆï¼Œå¯ä»¥çœ‹åˆ°å˜é‡vå°±æ˜¯ç‰ˆæƒä¿¡æ¯, wæ˜¯å·²ç»è´­ä¹°çš„ä¿¡æ¯ã€‚åœ¨æœç´¢åˆ°çš„this.dV().getChild(0).appendHtmlæ‹¬å·é‡Œé¢ï¼Œæ”¹ä¸º:\nthis.dV().getChild(0).appendHtml(C||D||A!=4?\"\":\"\");  ç®€è¨€ä¹‹å°±æ˜¯ä¸ç®¡ä¹°æ²¡ä¹°ï¼Œéƒ½ä¸æ˜¾ç¤ºè¿™ä¸ªæç¤ºï¼Œè®¾ç½®ä¸ºç©ºå­—ç¬¦ä¸²å°±å¥½äº†ã€‚\né¡¶ç«¯ä¿¡æ¯ é¡¶ç«¯çš„å»å¤„ç‰ˆæƒä¿¡æ¯çš„æ–¹æ³•å’Œå·¦ä¸‹è§’ç±»ä¼¼ã€‚\næœç´¢: aT.mj=Q æ›¿æ¢ä¸º aT.mj=Q.toLowerCase().indexOf(\"demo\") ? \"\" : Q; æœç´¢: aT.mj=R æ›¿æ¢ä¸º aT.mj=R.toLowerCase().indexOf(\"demo\") ? \"\" : R;\nå¤§åŠŸå‘Šæˆï¼Œ æ›´å®Œç¾çš„è§£å†³äº†é—®é¢˜ï½ ğŸ˜\n2017-5-17 æ›´æ–°ï¼šå¯ç”¨å‰ªåˆ‡åŠŸèƒ½ ä»Šå¤©å‘ç°è™½ç„¶ç‰ˆæƒä¿¡æ¯æ²¡æœ‰äº†ï¼Œä½†æ˜¯â€œä¸´æ—¶æ–‡ä»¶å¤¹â€åŠŸèƒ½â€œä»ä¸´æ—¶æ–‡ä»¶å¤¹å‰ªåˆ‡è‡³æ­¤â€åœ¨Demoç‰ˆæœ¬ä¸­ä¸èƒ½ä½¿ç”¨ï¼Œæç¤º:\nThis function is disabled in the demo version of CKFinder. Please visit the CKFinder web site to obtain a valid license.  å¯ç”¨æ–¹æ³•ï¼š\n  æœç´¢z.app.msgDialog, å¯ä»¥çœ‹åˆ°åŒ…å«å®ƒçš„æ˜¯ä¸€ä¸ªåˆ¤æ–­ã€‚\n if('balabalabalabalabala...') //è¿™ä¸ªåˆ¤æ–­å¾ˆé•¿ æ˜¾ç¤ºè¿™æ˜¯Demoç‰ˆæœ¬ï¼Œä¸èƒ½ç”¨è¿™ä¸ªåŠŸèƒ½; else æ‰§è¡ŒæŒ‡ä»¤;  é‚£æˆ‘ä»¬è¦åšçš„å°±æ˜¯åªç•™ä¸‹éœ€è¦æ‰§è¡Œçš„æŒ‡ä»¤å°±å¯ä»¥äº†ã€‚ è¿™ä¸€æ­¥å®Œæˆï¼Œå°±å¯ä»¥ä»ä¸´æ—¶æ–‡ä»¶ä¸­ç§»åŠ¨æ–‡ä»¶äº†ã€‚\n  å’Œç¬¬1æ­¥ç±»ä¼¼ï¼Œæœç´¢y.msgDialog,åŒæ ·åŒ…å«å®ƒçš„æ˜¯ä¸€ä¸ªåˆ¤æ–­ï¼Œä¸åŒçš„æ˜¯è¿™ä¸ªåˆ¤æ–­ä½“çš„elseéƒ¨åˆ†æ‰§è¡Œäº†å¤šæ¡æŒ‡ä»¤ã€‚åˆ é™¤åˆ¤æ–­åªç•™ä¸‹æŒ‡ä»¤å°±å¯ä»¥äº†ã€‚\nè¿™ä¸€æ­¥å®Œæˆï¼Œå°±å¯ä»¥åœ¨å„ä¸ªæ–‡ä»¶å¤¹ä¸­ç§»åŠ¨æ–‡ä»¶äº†ã€‚\n  è¿™æ ·æ–‡ä»¶çš„ç§»åŠ¨åŠŸèƒ½å°±å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ã€‚æˆ‘å¥½åƒå¤ªåäº†ã€‚\n","description":"","tags":["J2EE","CKFinder","CKEditor"],"title":"å»é™¤CKFinderç‰ˆæƒä¿¡æ¯ä»¥åŠå¯ç”¨æ–‡ä»¶ç§»åŠ¨åŠŸèƒ½","uri":"/posts/remove-ckfinder-copyright/"},{"categories":null,"content":"Apache Shiroç”¨äºæƒé™ç®¡ç†ååˆ†æ–¹ä¾¿ï¼Œä½†å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å½“ç”¨æˆ·çš„æƒé™å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œå°±éœ€è¦ç”¨æˆ·é‡æ–°ç™»å½•ï¼Œé‡æ–°ç¼“å­˜ç”¨æˆ·çš„æƒé™ä¿¡æ¯ã€‚\nç°åœ¨æƒ³è¦åœ¨æ”¹å˜ç”¨æˆ·çš„æƒé™çš„æ—¶å€™ï¼Œæ¸…ç†ç”¨æˆ·çš„æƒé™ã€‚ åœ¨å†™çš„è¿‡ç¨‹ä¸­æŸ¥æ‰¾äº†ä¸€äº›èµ„æ–™ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰æˆåŠŸå®ç°æƒé™çš„æ¸…ç†ï¼Œæ‰€ä»¥æˆ‘è¿›è¡Œäº†ä¸€äº›ä¿®æ”¹ï¼Œå¹¶å®ç°äº†Helperç±»ã€‚\næˆ‘å†™çš„å¸®åŠ©ç±»ï¼š\npackage com.zhaoyang.core.feature.security; import org.apache.shiro.SecurityUtils; import org.apache.shiro.cache.Cache; import org.apache.shiro.cache.CacheManager; import org.apache.shiro.subject.SimplePrincipalCollection; import org.apache.shiro.subject.Subject; import org.slf4j.Logger; import org.slf4j.LoggerFactory; /** * @author zhaoyang * * @since 2017-04-04 2:12 PM */ public class ShiroAuthorizationHelper { //shiro é…ç½®çš„cacheManagerï¼Œ éœ€è¦ä½¿ç”¨Spring beanè¿›è¡Œæ³¨å…¥ private static CacheManager cacheManager; private static Logger logger = LoggerFactory.getLogger(ShiroAuthorizationHelper.class); /** * æ¸…é™¤ç”¨æˆ·çš„æƒé™ * * è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ * ç½‘ä¸Šå¾ˆå¤šå®ç°éƒ½æ˜¯è¿™é‡Œåªä¼ é€’ä¸€ä¸ªStringç±»å‹çš„usernameè¿‡æ¥ï¼Œæ ¹æ®è¿™ä¸ªStringå½“keyå»æ¸…é™¤Cache * ä½†æ˜¯Shiroåœ¨ç¼“å­˜ç”¨æˆ·æƒé™çš„æ—¶å€™ä½¿ç”¨çš„keyå¹¶ä¸æ˜¯Stringç±»å‹ï¼Œæ‰€ä»¥è°ƒç”¨removeçš„æ—¶å€™å¹¶ä¸èƒ½æ¸…é™¤ç¼“å­˜çš„æƒé™ * * shiroç¼“å­˜æ—¶ä½¿ç”¨çš„keyï¼Œæ˜¯ç™»å½•æ—¶ä½¿ç”¨çš„SimplePrincipalCollectionå¯¹è±¡ï¼Œæ‰€ä»¥removeçš„æ—¶å€™éœ€è¦çš„ä¸æ˜¯ä¸€ä¸ªStringå€¼ï¼Œ * å…·ä½“å¯ä»¥å‚è€ƒä¸‹é¢æ–¹æ³•ä¸­æ‰“å°cacheçš„keyçš„è¿‡ç¨‹, å¯ä»¥çœ‹åˆ°æ‰“å°å‡ºkeyçš„ç±»æ˜¯ `class org.apache.shiro.subject.SimplePrincipalCollection` * æ‰€ä»¥ä½ cache.remove(String username)è‚¯å®šæ¸…é™¤ä¸äº† * * @param principal */ public static void clearAuthorizationInfo(SimplePrincipalCollection principal) { logger.info(\"clear the user: \" + principal.toString() + \"'s authorizationInfo\"); Cache\u003cObject, Object\u003e cache = cacheManager.getCache(\"myShiroCache\");//myShiroCacheæ˜¯æˆ‘é…ç½®ç”¨äºç¼“å­˜çš„cacheçš„Nameï¼Œåœ¨springé…ç½®æ–‡ä»¶ä¸­é…ç½®ï¼Œå¯ä»¥çœ‹æ–‡ç« æœ€å // for (Object k : cache.keys()) { // System.out.println(k.getClass()); // } cache.remove(principal); } /** * æ¸…é™¤å½“å‰ç”¨æˆ·çš„æƒé™ */ public static void clearAuthorizationInfo() { if (SecurityUtils.getSubject().isAuthenticated()) { Subject subject = SecurityUtils.getSubject(); String username = subject.getPrincipal().toString(); String realmName = subject.getPrincipals().getRealmNames().iterator().next(); SimplePrincipalCollection principalCollection = new SimplePrincipalCollection(username, realmName); // è°ƒç”¨æ¸…ç†ç”¨æˆ·æƒé™ clearAuthorizationInfo(principalCollection); } } /** * ç”±Spring beanå°†å¯¹è±¡æ³¨å…¥ * @param cacheManager */ public static void setCacheManager(CacheManager cacheManager) { ShiroAuthorizationHelper.cacheManager = cacheManager; } }  å°†cacheManageræ³¨å…¥åˆ°å¸®åŠ©ç±»ï¼š\n \u003c!-- æ³¨å…¥Shiroå¸®åŠ©ç±»çš„cacheManager --\u003e \u003cbean class=\"org.springframework.beans.factory.config.MethodInvokingFactoryBean\"\u003e \u003cproperty name=\"staticMethod\" value=\"com.damaiya.DMYSite.core.feature.security.ShiroAuthorizationHelper.setCacheManager\"/\u003e \u003cproperty name=\"arguments\" ref=\"shiroEhcacheManager\"/\u003e \u003c/bean\u003e  å½“ç„¶ref=â€œshiroEhcacheManagerâ€éœ€è¦ä½ è‡ªå·±å»å®ç°, æˆ‘è¿™é‡Œè´´ä¸‹æˆ‘çš„ï¼š\n \u003c!-- ç¼“å­˜ç®¡ç†å™¨ ä½¿ç”¨Ehcacheå®ç° --\u003e \u003cbean id=\"shiroEhcacheManager\" class=\"org.apache.shiro.cache.ehcache.EhCacheManager\"\u003e \u003cproperty name=\"cacheManagerConfigFile\" value=\"classpath:ehcache-shiro.xml\"/\u003e \u003c/bean\u003e  ä¸‹é¢æ˜¯ehcache-shiro.xmlé…ç½®, å…·ä½“çš„å‚æ•°ä½œç”¨æˆ‘å°±ä¸è¯´äº†:\n\u003cehcache updateCheck=\"false\" name=\"shiroCache\"\u003e \u003cdefaultCache maxElementsInMemory=\"10000\" eternal=\"false\" timeToIdleSeconds=\"120\" timeToLiveSeconds=\"120\" overflowToDisk=\"false\" diskPersistent=\"false\" diskExpiryThreadIntervalSeconds=\"120\" /\u003e \u003ccache name=\"myShiroCache\" maxElementsInMemory=\"10000\" eternal=\"false\" timeToIdleSeconds=\"30\" timeToLiveSeconds=\"0\" overflowToDisk=\"false\" diskPersistent=\"false\" diskExpiryThreadIntervalSeconds=\"120\"/\u003e \u003c/ehcache\u003e  ä½¿ç”¨æŒ‡å®šNameçš„Cacheè¿›è¡Œæƒé™ç¼“å­˜é…ç½®, securityRealmæ˜¯æˆ‘è‡ªå·±çš„Realmï¼š\n\u003cbean id=\"securityRealm\" class=\"com.damaiya.DMYSite.web.security.SecurityRealm\"\u003e \u003cproperty name=\"authorizationCacheName\" value=\"myShiroCache\"/\u003e \u003c/bean\u003e  è¿™æ ·æ•´ä¸ªé…ç½®å°±å®Œæˆäº†ï¼Œè€Œä¸”è°ƒç”¨clearAuthorizationInfo()æ—¶å°±å¯ä»¥æ¸…é™¤å½“å‰ç™»å½•ç”¨æˆ·çš„æƒé™ä¿¡æ¯äº†ã€‚\n","description":"","tags":["J2EE","Shiro"],"title":"Shiroæ¸…é™¤æ›´æ–°ç¼“å­˜çš„ç”¨æˆ·æƒé™","uri":"/posts/shiro-clear-update-authorization/"},{"categories":null,"content":"åœ¨J2EEé¡¹ç›®ä¸­ä½¿ç”¨Shiroè¿›è¡Œæƒé™éªŒè¯åï¼Œæ¯æ¬¡éƒ¨ç½²è·³è½¬åˆ°ç™»å½•ç•Œé¢æ€»ä¼šåœ¨é“¾æ¥åé¢å¤šå‡º;JSESSION=xxxxï¼ŒæŸ¥äº†å¾ˆå¤šï¼Œå¤§æ¦‚æœ‰ä¸‹é¢å‡ ç§æ–¹æ³•ï¼š\n  åœ¨web.xmlä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š\n \u003csession-config\u003e \u003ctracking-mode\u003eCOOKIE\u003c/tracking-mode\u003e \u003c/session-config\u003e  å…·ä½“è¯·å‚è€ƒï¼š\nhttp://stackoverflow.com/questions/11327631/remove-jsessionid-from-url\n   ä½¿ç”¨Filterå¯¹URLè¿›è¡Œrewrite\nå…·ä½“è¯·å‚è€ƒï¼š\nhttp://dr-yanglong.github.io/2015/07/07/del-jeesessionid/\n  æœ‰äº›åŒå­¦é‡å†™äº†shiroé‡å®šå‘æ—¶éœ€è¦è°ƒç”¨çš„æ–¹æ³•encodeRedirectURL()å’ŒtoEncoded()\nå…·ä½“è¯·å‚è€ƒï¼š\nhttp://dwangel.iteye.com/blog/2275899\nhttp://alex233.blog.51cto.com/8904951/1856155\n  åæ¥å»çœ‹äº†æºç ï¼Œå‘ç°äº†ä¸€ä¸ªæœ€æœ€ç®€å•çš„æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š\nshiroæºç ï¼š\nhttps://github.com/apache/shiro/pull/31/commits/7f37394c6048d8c8a214eabd312721ddb51adc9b\n  é˜…è¯»æºç ä¹‹åï¼Œå¯ä»¥å‘ç°DefaultWebSessionManager.javaæ–‡ä»¶ä¸­æ·»åŠ äº†æ–°å±æ€§private boolean sessionIdUrlRewritingEnabled;, é¡¾åæ€ä¹‰, æ˜¯ç”¨æ¥æ§åˆ¶æ˜¯å¦é‡å†™URLæ·»åŠ SESSIONIDçš„ï¼Œåªè¦ä¿®æ”¹shiroçš„sessionManageré…ç½®å¦‚ä¸‹å³å¯ï¼š\n\t\u003cbean id=\"sessionManager\" class=\"org.apache.shiro.web.session.mgt.DefaultWebSessionManager\"\u003e ... \u003cproperty name=\"sessionIdUrlRewritingEnabled\" value=\"true\"/\u003e ... \u003c/bean\u003e  More Sourceï¼š https://fralef.me/tomcat-disable-jsessionid-in-url.html\n","description":"","tags":["J2EE","Shiro"],"title":"æœ€ç®€å•æ–¹æ³•è§£å†³ä½¿ç”¨ShiroåURLä¸­JSESSIONIDçš„é—®é¢˜","uri":"/posts/tomcat-shiro-disable-jsessionid-in-url/"},{"categories":null,"content":"grep æ¦‚è¿° åœ¨ç»™å‡ºæ–‡ä»¶åˆ—è¡¨æˆ–æ ‡å‡†è¾“å…¥å, grepä¼šå¯¹åŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªæ­£åˆ™è¡¨è¾¾å¼çš„æ–‡æœ¬è¿›è¡Œæœç´¢, å¹¶è¾“å‡ºåŒ¹é…ï¼ˆæˆ–è€…ä¸åŒ¹é…ï¼‰çš„è¡Œæˆ–æ–‡æœ¬.\nä½¿ç”¨æ ¼å¼ grep [options] PATTERN [FILE...]  å¸¸ç”¨é€‰é¡¹  -i å¿½ç•¥å­—ç¬¦å¤§å°å†™ -v æ˜¾ç¤ºæœªè¢«æ¨¡å¼åŒ¹é…åˆ°çš„è¡Œæˆ–ä¸² -o åªæ˜¾ç¤ºåŒ¹é…åˆ°çš„ä¸²è€Œä¸æ˜¯æ•´è¡Œ -n æ˜¾ç¤ºåŒ¹é…çš„è¡ŒåŠè¡Œå· -E ä½¿ç”¨æ‰©å±•çš„æ­£åˆ™è¡¨è¾¾å¼ -A n æ˜¾ç¤ºå‡ºåŒ¹é…åˆ°çš„è¡Œå’Œånè¡Œ -B n æ˜¾ç¤ºå‡ºåŒ¹é…åˆ°çš„è¡Œå’Œå‰nè¡Œ -C n æ˜¾ç¤ºå‡ºåŒ¹é…åˆ°çš„è¡Œå’Œå‰åå„nè¡Œ  æ‰©å±•çš„æ­£åˆ™è¡¨è¾¾å¼\næ‰©å±•æ­£åˆ™è¡¨è¾¾å¼ä¸åŸºç¡€æ­£åˆ™è¡¨è¾¾å¼çš„å”¯ä¸€åŒºåˆ«åœ¨äº: () {} ? + è¿™å‡ ä¸ªå­—ç¬¦.\nåŸºç¡€æ­£åˆ™è¡¨è¾¾å¼ä¸­, () {} ? + è¡¨ç¤ºç‰¹æ®Šå«ä¹‰ï¼Œä½¿ç”¨æ—¶éœ€è¦å°†ä»–ä»¬è½¬ä¹‰\nè€Œæ‰©å±•æ­£åˆ™è¡¨è¾¾å¼ä¸­, () {} ? + ä¸è¡¨ç¤ºç‰¹æ®Šå«ä¹‰, ä½ éœ€è¦å°†ä»–ä»¬è½¬ä¹‰.\nè½¬ä¹‰ç¬¦å·, éƒ½æ˜¯ä¸€æ ·çš„: åæ–œçº¿ \\ .\næ‰€è°“ç‰¹æ®Šå«ä¹‰, å°±æ˜¯æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„å«ä¹‰. éç‰¹æ®Šå«ä¹‰, å°±æ˜¯è¿™ä¸ªç¬¦å·æœ¬èº«.\næ­£åˆ™è¡¨è¾¾å¼ å…ƒå­—ç¬¦          . åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦   [] åŒ¹é…[]æŒ‡å®šèŒƒå›´å†…çš„ä»»æ„å•ä¸ªå­—ç¬¦   [^] åŒ¹é…[]æŒ‡å®šèŒƒå›´å¤–çš„ä»»æ„å•ä¸ªå­—ç¬¦    å­—ç¬¦é›†          [:digit:] æ•°å­—   [:lower:] å°å†™å­—æ¯   [:upper:] å¤§å†™å­—æ¯   [:punct:] æ ‡ç‚¹ç¬¦å·   [:space:] ç©ºç™½å­—ç¬¦   [:alpha:] æ‰€æœ‰å­—æ¯   [:alnum:] æ‰€æœ‰å­—æ¯å’Œæ•°å­—, éæ ‡ç‚¹    ä¾‹1.1\n$ grep '[[:punct:]]' grep_example # æ‰€æœ‰æœ‰æ ‡ç‚¹çš„è¡Œ  åŒ¹é…æ¬¡æ•°          .* åŒ¹é…ä»»æ„å­—ç¬¦ä¸²   * å‰é¢çš„å­—ç¬¦é‡å¤ä»»æ„æ¬¡æ•°, 0æ¬¡1æ¬¡æˆ–å¤šæ¬¡   + å‰é¢çš„å­—ç¬¦é‡å¤1æ¬¡æˆ–å¤šæ¬¡   ? å‰é¢çš„å­—ç¬¦é‡å¤0æ¬¡æˆ–è€…å¤šæ¬¡   {m, n} åŒ¹é…å‰é¢çš„å­—ç¬¦è‡³å°‘mæ¬¡, è‡³å¤šnæ¬¡   {m, } åŒ¹é…å‰é¢çš„å­—ç¬¦è‡³å°‘mæ¬¡    ä½ç½®é”šå®š ||| | ^ | ^åé¢çš„å­—ç¬¦å¿…é¡»å‡ºç°åœ¨è¡Œé¦– | | $ | $å‰é¢çš„å­—ç¬¦å¿…é¡»å‡ºç°åœ¨è¡Œå°¾ | | ^$ | ç©ºç™½è¡Œ | | \u003c | \u003cåé¢çš„å­—ç¬¦å¿…é¡»å‡ºç°åœ¨è¯é¦– | | \u003e | \u003eå‰é¢çš„å­—ç¬¦å¿…é¡»å‡ºç°åœ¨è¯å°¾ | | () | ()ä¸­çš„å½“åšä¸€ä¸ªæ•´ä½“åŒ¹é… |\nä¾‹1.2\n$ grep -E '.*(d+)' grep_example $ grep -E '.*(d+)$' grep_example  sed æ¦‚è¿° sed (æ„ä¸ºæµç¼–è¾‘å™¨, æºè‡ªè‹±è¯­\"Stream Editor\"çš„ç¼©å†™)\nsedç”¨æ¥æŠŠæ–‡æ¡£æˆ–å­—ç¬¦ä¸²é‡Œé¢çš„æ–‡å­—ç»è¿‡ä¸€ç³»åˆ—ç¼–è¾‘å‘½ä»¤è½¬æ¢ä¸ºå¦ä¸€ç§æ ¼å¼è¾“å‡º.\nsedé€šå¸¸ç”¨æ¥åŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªæ­£åˆ™è¡¨è¾¾å¼çš„æ–‡æœ¬è¿›è¡Œå¤„ç†.\næ¨¡å¼ç©ºé—´\næ¨¡å¼ç©ºé—´: æŠŠå½“å‰å¤„ç†çš„è¡Œå­˜å‚¨åœ¨ä¸´æ—¶çš„ç¼“å†²åŒº, ç§°ä¸º\"æ¨¡å¼ç©ºé—´\"(Pattern Space)\næ¨¡å¼ç©ºé—´å°±æ˜¯è¯»å…¥è¡Œæ‰€åœ¨çš„ç¼“å­˜ï¼Œsedå¯¹æ–‡æœ¬è¡Œè¿›è¡Œçš„å¤„ç†éƒ½æ˜¯åœ¨è¿™ä¸ªç¼“å­˜ä¸­è¿›è¡Œçš„ã€‚\nä½¿ç”¨æ ¼å¼ sed 'Address Command' [FILE...]  å¸¸ç”¨é€‰é¡¹  -n ä¸æ˜¾ç¤ºæ¨¡å¼ç©ºé—´ä¸­çš„å†…å®¹ -i ç›´æ¥ä¿®æ”¹åŸæ–‡ä»¶ -r ä½¿ç”¨æ‰©å±•çš„æ­£åˆ™è¡¨è¾¾å¼  Address 1. StartLine, EndLine: # å¼€å§‹è¡Œ, ç»“æŸè¡Œ # å¦‚: 1, 100 è¡¨ç¤º 1 åˆ° 100 è¡Œ 2. /RegExp/ # æ­£åˆ™è¡¨è¾¾å¼ 3. /pattern1/, /pattern2/ # ä»åŒ¹é…åˆ°/pattern1/å¼€å§‹, ä¸€ç›´åˆ°åŒ¹é…åˆ°/pattern2/ç»“æŸä¸­é—´æ‰€æœ‰çš„è¡Œ 4. LineNumber # æŒ‡å®šçš„æŸä¸€è¡Œ 5. StartLine, +N # ä»StartLineå¼€å§‹åé¢Nè¡Œ  Command  d åˆ é™¤æ»¡è¶³æ¨¡å¼çš„è¡Œ p æ˜¾ç¤ºæ»¡è¶³æ¨¡å¼çš„è¡Œ a \\string åœ¨æ»¡è¶³æ¨¡å¼çš„è¡Œåæ·»åŠ æ–°è¡Œ, å†…å®¹ä¸ºstringä¸²çš„å†…å®¹ i \\string åœ¨æ»¡è¶³æ¨¡å¼çš„è¡Œå‰æ·»åŠ æ–°è¡Œ, å†…å®¹ä¸ºstringä¸²çš„å†…å®¹ r fileï¼šå°†æŒ‡å®šçš„æ–‡ä»¶çš„å†…å®¹æ·»åŠ è‡³ç¬¦åˆæ¡ä»¶çš„è¡Œå w fileï¼šå°†åœ°å€æŒ‡å®šèŒƒå›´å†…çš„è¡Œå¦å­˜è‡³æŒ‡å®šçš„æ–‡ä»¶ä¸­ s \\pattern\\string\\ä¿®é¥°ç¬¦ å°†æ»¡è¶³patternçš„ä¸²æ›¿æ¢ä¸ºstring ä¿®é¥°ç¬¦: \\g å…¨å±€æ›¿æ¢, å³å°†è¯¥è¡Œä¸­æ‰€æœ‰åŒ¹é…é¡¹æ›¿æ¢, é»˜è®¤åªæ›¿æ¢ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹ \\i å¿½ç•¥å¤§å°å†™ \u0026 å¼•ç”¨æ¨¡å¼åŒ¹é…çš„æ•´ä¸ªä¸² \\1 è¡¨ç¤ºåŒ¹é…åˆ°æ¨¡å¼ä¸­çš„ç¬¬ä¸€ä¸ª ( å¼€å§‹çš„ä¸² \\2 è¡¨ç¤ºåŒ¹é…åˆ°æ¨¡å¼ä¸­çš„ç¬¬äºŒä¸ª ( å¼€å§‹çš„ä¸²  ä¾‹2.1\n#ä»ä»¥hezhaoyangå¼€å¤´çš„è¡Œå¼€å§‹åŒ¹é…, ä¸€ç›´åˆ°ä»¥Iå¼€å¤´çš„è¡Œ, æ˜¾ç¤ºä¸­é—´æ‰€æœ‰è¡Œ $ sed -n '/^hezhaoyang/,/^I/p' sed_example  ä¾‹2.2\n#å°†sed_insertä¸­çš„å†…å®¹æ’å…¥åˆ°ä»¥hezhaoyangå¼€å¤´çš„è¡Œå $ sed '/hezhaoyang/r sed_insert' sed_example  awk æ¦‚è¿° AWKæ˜¯ä¸€ç§å¤„ç†æ–‡æœ¬æ–‡ä»¶çš„è¯­è¨€. å®ƒå°†æ–‡ä»¶ä½œä¸ºè®°å½•åºåˆ—å¤„ç†. åœ¨ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ–‡ä»¶å†…å®¹çš„æ¯è¡Œéƒ½æ˜¯ä¸€ä¸ªè®°å½•. æ¯è¡Œå†…å®¹éƒ½ä¼šè¢«åˆ†å‰²æˆä¸€ç³»åˆ—çš„åŸŸ, å› æ­¤, æˆ‘ä»¬å¯ä»¥è®¤ä¸ºä¸€è¡Œçš„ç¬¬ä¸€ä¸ªè¯ä¸ºç¬¬ä¸€ä¸ªåŸŸ,ç¬¬äºŒä¸ªè¯ä¸ºç¬¬äºŒä¸ª, ä»¥æ­¤ç±»æ¨. AWKç¨‹åºæ˜¯ç”±ä¸€äº›å¤„ç†ç‰¹å®šæ¨¡å¼çš„è¯­å¥å—æ„æˆçš„. AWKä¸€æ¬¡å¯ä»¥è¯»å–ä¸€ä¸ªè¾“å…¥è¡Œ. å¯¹æ¯ä¸ªè¾“å…¥è¡Œ, AWKè§£é‡Šå™¨ä¼šåˆ¤æ–­å®ƒæ˜¯å¦ç¬¦åˆç¨‹åºä¸­å‡ºç°çš„å„ä¸ªæ¨¡å¼, å¹¶æ‰§è¡Œç¬¦åˆçš„æ¨¡å¼æ‰€å¯¹åº”çš„åŠ¨ä½œã€‚\nâ€”â€”é˜¿å°”ä½›é›·å¾·Â·è‰¾ä¾¯ï¼ŒThe A-Z of Programming Languages: AWK\nä½¿ç”¨æ ¼å¼ awk [options] 'BEGIN{ } pattern{ } END{ }'  å¸¸ç”¨é€‰é¡¹  -F fs : æŒ‡å®šåˆ†éš”ç¬¦ä¸ºfs -v var=value : å®šä¹‰å¯ä¼ é€’ç»™awkçš„å˜é‡ -f scriptfile : ä»è„šæœ¬æ–‡ä»¶ä¸­è¯»å–awkå‘½ä»¤  åŸºæœ¬ç»“æ„ ä¸€ä¸ªawkè„šæœ¬é€šå¸¸ç”±: BEGINè¯­å¥å—ã€èƒ½å¤Ÿä½¿ç”¨æ¨¡å¼åŒ¹é…çš„é€šç”¨è¯­å¥å—ã€ENDè¯­å¥å—3éƒ¨åˆ†ç»„æˆ, è¿™ä¸‰ä¸ªéƒ¨åˆ†æ˜¯å¯é€‰çš„. ä»»æ„ä¸€ä¸ªéƒ¨åˆ†éƒ½å¯ä»¥ä¸å‡ºç°åœ¨è„šæœ¬ä¸­, è„šæœ¬é€šå¸¸æ˜¯è¢«å•å¼•å·æˆ–åŒå¼•å·ä¸­.\nawk çš„å·¥ä½œè¿‡ç¨‹ ç¬¬ä¸€æ­¥: æ‰§è¡ŒBEGIN{ commands }è¯­å¥å—ä¸­çš„è¯­å¥; ç¬¬äºŒæ­¥: ä»æ–‡ä»¶æˆ–æ ‡å‡†è¾“å…¥(stdin)è¯»å–ä¸€è¡Œ, ç„¶åæ‰§è¡Œpattern{ commands }è¯­å¥å—, å®ƒé€è¡Œæ‰«ææ–‡ä»¶, ä»ç¬¬ä¸€è¡Œåˆ°æœ€åä¸€è¡Œé‡å¤è¿™ä¸ªè¿‡ç¨‹, ç›´åˆ°æ–‡ä»¶å…¨éƒ¨è¢«è¯»å–å®Œæ¯•. ç¬¬ä¸‰æ­¥: å½“è¯»è‡³è¾“å…¥æµæœ«å°¾æ—¶, æ‰§è¡ŒEND{ commands }è¯­å¥å—.\nBEGINè¯­å¥å—åœ¨awkå¼€å§‹ä»è¾“å…¥æµä¸­è¯»å–è¡Œä¹‹å‰è¢«æ‰§è¡Œ, è¿™æ˜¯ä¸€ä¸ªå¯é€‰çš„è¯­å¥å—, æ¯”å¦‚å˜é‡åˆå§‹åŒ–ã€æ‰“å°è¾“å‡ºè¡¨æ ¼çš„è¡¨å¤´ç­‰è¯­å¥é€šå¸¸å¯ä»¥å†™åœ¨BEGINè¯­å¥å—ä¸­. ENDè¯­å¥å—åœ¨awkä»è¾“å…¥æµä¸­è¯»å–å®Œæ‰€æœ‰çš„è¡Œä¹‹åå³è¢«æ‰§è¡Œ, æ¯”å¦‚æ‰“å°æ‰€æœ‰è¡Œçš„åˆ†æç»“æœè¿™ç±»ä¿¡æ¯æ±‡æ€»éƒ½æ˜¯åœ¨ENDè¯­å¥å—ä¸­å®Œæˆ, å®ƒä¹Ÿæ˜¯ä¸€ä¸ªå¯é€‰è¯­å¥å—. patternè¯­å¥å—ä¸­çš„é€šç”¨å‘½ä»¤æ˜¯æœ€é‡è¦çš„éƒ¨åˆ†, å®ƒä¹Ÿæ˜¯å¯é€‰çš„. {} ç›¸å½“äºä¸€ä¸ªå¾ªç¯ä½“, å®ƒä¼šå¯¹æ–‡ä»¶ä¸­çš„æ¯ä¸€è¡Œè¿›è¡Œè¿­ä»£.\nè¾“å‡º print / printf print   å½“è¦è¾“å‡ºå¤šä¸ªå˜é‡æ—¶, åº”è¯¥ç”¨é€—å·â€™,â€˜åˆ†éš”\n $ echo | awk '{ var1=\"v1\"; var2=\"v2\"; var3=\"v3\"; print var1,var2,var3; }'    åªå†™ print ç›¸å½“äº print $0, å¦‚æœæƒ³è¦è¾“å‡ºç©ºè¡Œ, åº”è¯¥å†™åš: print ''\n  $1, $2, $3 â€¦ åˆ†åˆ«å¯¹åº”è¯¥è¡Œçš„ç¬¬1ä¸ª, ç¬¬2ä¸ª, ç¬¬3ä¸ªå­—æ®µ, ä»¥æ­¤ç±»å¯¹\n  printf ä¸ print çš„åŒºåˆ«åœ¨äº printf éœ€è¦æ ¼å¼åŒ–è¾“å‡º.\n         %c å­—ç¬¦ç±»å‹   %d, %i åè¿›åˆ¶   %e, %E ç§‘å­¦è®¡æ•°æ³•è¾“å‡ºæ•°å€¼   %f æµ®ç‚¹æ•°ç±»å‹   %g, %G ç§‘å­¦è®¡æ•°æ³•æˆ–æµ®ç‚¹æ•°æ ¼å¼æ˜¾ç¤º   %s å­—ç¬¦ä¸²   %u æ— ç¬¦å·æ•´æ•°   %% %æœ¬èº«    ä¿®é¥°ç¬¦  N: å®½åº¦ -: å·¦å¯¹é½ +: æ˜¾ç¤ºæ•°å€¼ç¬¦å·  æ³¨æ„: printf é»˜è®¤ä¸æ¢è¡Œ, éœ€è¦ä½¿ç”¨\"\\n\"\nä¾‹3.1:\n#è¾“å‡ºç”¨æˆ·åå’Œä½¿ç”¨çš„shellç±»å‹ $ head -10 /etc/passwd | awk -F: '{printf \"%-15s%s\\n\", $1, $7}'  awkå†…ç½®å˜é‡ è®°å½•å˜é‡  FS: field separator å­—æ®µåˆ†éš”ç¬¦, é»˜è®¤ä¸ºç©ºç™½å­—ç¬¦ RS: record separator è®°å½•åˆ†éš”ç¬¦, é»˜è®¤ä¸ºæ¢è¡Œç¬¦ OFS: output field separator è¾“å‡ºå­—æ®µåˆ†éš”ç¬¦ ORS: output record separator è¾“å‡ºè®°å½•åˆ†éš”ç¬¦  æ•°æ®å˜é‡   NR: number of input rows å¤„ç†çš„è¡Œæ•°\n  NF: number of fields è¯¥è¡Œå­—æ®µçš„ä¸ªæ•°\n  ARGV: æ•°ç»„, ä¿å­˜awkå‘½ä»¤è¡Œ. å¦‚: $ awk â€˜{ print $0 }â€™ a.txt b.txtä¸­ARGV[0]=awk, ARGV[1]=a.txt\n  ARGC: awkå‘½ä»¤å‚æ•°çš„ä¸ªæ•°\n  FILENAME: æ‰€å¤„ç†æ–‡ä»¶çš„åç§°\n  IGNORECASE: IGNORECASE=1æ—¶å¿½ç•¥å¤§å°å†™\n $ echo \"TEST HHHH\" | awk '{IGNORECASE=1; if($1 == \"test\"){print \"ok\";}}'    èµ‹å€¼ $ awk -v var=\"value\" '{print var}' $ awk 'BEGIN{ var=\"value\"; print var; }'  æ“ä½œç¬¦ + - * / ^ ** %  æ¯”è¾ƒè¿ç®—ç¬¦ \t\u003c \u003c= \u003e= \u003e \u003e= == != x~y # True if the string x matches the regexp denoted by y # å¦‚æœå­—ç¬¦ä¸²xè¢«æ­£åˆ™è¡¨è¾¾å¼yåŒ¹é…, åˆ™ä¸ºçœŸ x!~y  æ•°ç»„ å®šä¹‰ arr[1] = 'first' arr[2] = 'second' arr['year'] = 2016 arr['month'] = 8  é•¿åº¦ length() è·å–å­—ç¬¦ä¸²ï¼Œæ•°ç»„çš„é•¿åº¦ split() åˆ†å‰²æ•°ç»„ï¼Œ è¿”å›é•¿åº¦ asort() æ’åºæ•°ç»„ï¼Œ è¿”å›é•¿åº¦  éœ€è¦æ³¨æ„ï¼š\nåˆ¤æ–­æ•°ç»„æ˜¯å¦åŒ…å«æŸé”®å€¼\n#é”™è¯¯å†™æ³• $ echo | awk 'BEGIN{a[\"a\"]=1;a[\"b\"]=2; if(a[\"c\"]!=1){print \"ok\"}; for(i in a) {print i, a[i];} }' #æ­£ç¡®åˆ¤æ–­ $ echo | awk 'BEGIN{a[\"a\"]=1;a[\"b\"]=2; if(\"c\" in a){print \"ok\"}; for(i in a) {print i, a[i];} }'  awk ä¸­çš„æ•°ç»„æ˜¯å…³è”æ•°ç»„, åªè¦æ˜¯é€šè¿‡ä»–çš„æ•°ç»„å¼•ç”¨è¿‡key, å°±ä¼šè‡ªåŠ¨åˆ›å»ºè¯¥åºåˆ—.\nå¤šç»´æ•°ç»„ awkçš„å¤šç»´æ•°ç»„æœ¬è´¨ä¸Šæ˜¯ä¸€ç»´æ•°ç»„, æ›´ç¡®åˆ‡åœ°è¯´, awkæ˜¯ä¸æ”¯æŒä»¥ä¸ºå¤šç»´æ•°ç»„çš„. ä½†æ˜¯awkæä¾›äº†é€»è¾‘ä¸Šæ¨¡æ‹Ÿå¤šç»´æ•°ç»„çš„æ–¹å¼. åœ¨awkä¸­, array[1, 2]=1 , è¿™æ ·çš„å†™æ³•æ˜¯å…è®¸çš„. ä»–æ˜¯ä½¿ç”¨äº†ä¸€ä¸ªç‰¹æ®Šå­—ç¬¦ä¸²SUBSEP(\\034)åˆ†éš”é”®, [2, 4]å®é™…ä¸Šæ˜¯[2SUBSEP4].\nè®¿é—®å¯ä»¥ä½¿ç”¨for( (i, j) in array ){}ä½†æ˜¯å¿…é¡»ç”¨åœ†æ‹¬å·. ä½†æ˜¯å•ç‹¬è®¿é—®æ—¶, å¿…é¡»ä½¿ç”¨split()å°†æ•°ç»„é”®å€¼åˆ†å¼€. å³:\narr[1,1] = 11; arr[1,2] = 12; arr[2,1] = 21; arr[2,2] = 22; for (a in arr) { split(a, tmp, SUBSEP); print tmp[1], tmp[2];z }  æ§åˆ¶è¯­å¥ 1. if-else if (condition) {} else {} 2. while while (condition) {} 3. do-while do {} while (condition) 4. for for ( ; ; ) {} for (item in array) {} 5. switch switch (expression) { case x: ; case y: ;} 6. break, continue 7. next # æå‰ç»“æŸæœ¬è¡Œ  å†…ç½®å‡½æ•° split(string, array [,fieldsep]) # ä½¿ç”¨fieldsepåˆ†éš”string, å¹¶å­˜å‚¨åœ¨åä¸ºarrayçš„æ•°ç»„ä¸­ #å®ä¾‹: $ awk '{ split( \"20:18:00\", time, \":\" ); print time[2] }' # ä¸Šä¾‹æŠŠæ—¶é—´æŒ‰å†’å·åˆ†å‰²åˆ°timeæ•°ç»„å†…ï¼Œå¹¶æ˜¾ç¤ºç¬¬äºŒä¸ªæ•°ç»„å…ƒç´ 18ã€‚ # è¿”å›å€¼ä¸ºåˆ†å‰²æ•°ç»„çš„é•¿åº¦ length(string) substr(string, start [, length]) system(command) : æ‰§è¡Œå‘½ä»¤å¹¶è¿”å›ç»™awk systime() : è¿”å›å½“å‰æ—¶é—´æ—¶é—´æˆ³ tolower(string) toupper(string) match(string, regular expression) # matchå‡½æ•°è¿”å›åœ¨å­—ç¬¦ä¸²ä¸­æ­£åˆ™è¡¨è¾¾å¼ä½ç½®çš„ç´¢å¼•, # å¦‚æœæ‰¾ä¸åˆ°æŒ‡å®šçš„æ­£åˆ™è¡¨è¾¾å¼åˆ™è¿”å›0, æ‰¾åˆ°è¿”å›1ã€‚ # matchå‡½æ•°ä¼šè®¾ç½®å†…å»ºå˜é‡RSTARTä¸ºå­—ç¬¦ä¸²ä¸­å­å­—ç¬¦ä¸²çš„å¼€å§‹ä½ç½®, RLENGTHä¸ºåˆ°å­å­—ç¬¦ä¸²æœ«å°¾çš„å­—ç¬¦ä¸ªæ•°. # substrå¯åˆ©äºè¿™äº›å˜é‡æ¥æˆªå–å­—ç¬¦ä¸². #å®ä¾‹ï¼š $ awk '{start=match(\"this is a test\",/[a-z]+$/); print start}' $ awk '{start=match(\"this is a test\",/[a-z]+$/); print start, RSTART, RLENGTH }' # ç¬¬ä¸€ä¸ªå®ä¾‹æ‰“å°ä»¥è¿ç»­å°å†™å­—ç¬¦ç»“å°¾çš„å¼€å§‹ä½ç½®, è¿™é‡Œæ˜¯11. # ç¬¬äºŒä¸ªå®ä¾‹è¿˜æ‰“å°RSTARTå’ŒRLENGTHå˜é‡, è¿™é‡Œæ˜¯11(start), 11(RSTART), 4(RLENGTH).  å†…å»ºæ•°å­¦å‡½æ•° 1. cos(x) ä½™å¼¦å‡½æ•° 2. exp(x) æ±‚å¹‚ 3. int(x) å–æ•´ 4. log(x) è‡ªç„¶å¯¹æ•°, è¿‡ç¨‹æ²¡æœ‰èˆå…¥ 5. rand() äº§ç”Ÿä¸€ä¸ªå¤§äºç­‰äº0è€Œå°äº1çš„éšæœºæ•° 6. sin(x) æ­£å¼¦ 7. sqrt(x) å¹³æ–¹æ ¹ 8. srand(x) xæ˜¯rand()å‡½æ•°çš„ç§å­  è‡ªå®šä¹‰å‡½æ•° function F_NAME([variable]) { statements } # å‡½æ•°è¿˜å¯ä»¥ä½¿ç”¨returnè¯­å¥è¿”å›å€¼ï¼Œæ ¼å¼ä¸ºâ€œreturn valueâ€ ","description":"","tags":["Linux"],"title":"Grep, Sed, Awk æ—¥å¸¸ä½¿ç”¨","uri":"/posts/grepsedawk/"},{"categories":null,"content":"å‰è¨€ æ²¡æœ‰æ¥è§¦è¿‡Vimçš„åŒå­¦, ä¸€å®šä¼šè§‰å¾—å¹³æ—¶ä½¿ç”¨çš„IDEå¾ˆå¥½ç”¨, ä½†æ˜¯å½“ä½ å¼€å§‹ä½¿ç”¨Vim, å¹¶ä¸”æ¸æ¸ç†Ÿæ‚‰, æˆ‘è§‰å¾—ä½ ä¼šçˆ±ä¸Šè¿™ä¸€æ¬¾ç¼–è¾‘å™¨. åƒä¸‡ä¸è¦å› ä¸ºä¸€å¼€å§‹Vimæœ‰å¤ªå¤šå‘½ä»¤éœ€è¦è®°å¿†è€Œæ”¾å¼ƒå®ƒ.\nè¿™ç¯‡åšå®¢æ˜¯ç¿»è¯‘è‡ªã€ŠLearn Vim Progressivelyã€‹, å¹¶åœ¨æˆ‘è§‰å¾—æœ‰å¿…è¦æ·»åŠ è¯´æ˜çš„åœ°æ–¹æ·»åŠ äº†è‡ªå·±çš„è¯´æ˜. æˆ‘è®¤ä¸ºæ˜¯æœ€é€‚åˆå…¥é—¨Vimçš„æ•™ç¨‹, æ²¡æœ‰ä¹‹ä¸€.\n æ­£æ–‡å¼€å§‹ ä½ æƒ³ä»¥æœ€å¿«çš„æ–¹å¼è‡ªå­¦Vimå—? åœ¨äººç±»æœ€ä¼˜ç§€çš„ç¼–è¾‘å™¨é¢å‰, ä½ å¿…é¡»è‡³å°‘å…ˆå­¦ä¼šå¦‚ä½•å¹¸å­˜ä¸‹æ¥, ç„¶åå†å»ä¸€ç‚¹ç‚¹æ•´åˆä½¿ç”¨å®ƒçš„æŠ€å·§.\nVim the Six Billion Dollar editor\n Better, Stronger, Faster\n å½“ä½ å­¦ä¼šä½¿ç”¨Vim, å®ƒå°†æˆä¸ºä½ æœ€åä¸€ä¸ªç¼–è¾‘å™¨. è™½ç„¶å­¦ä¹ å®ƒçš„è¿‡ç¨‹å¾ˆä¸å®¹æ˜“, ä½†æ˜¯æœ€åå®ƒä¼šéš¾ä»¥ç½®ä¿¡çš„å¥½ç”¨.\nä¸‹é¢4ä¸ªæ­¥éª¤æ˜¯ä½ è‡ªå­¦çš„æ„Ÿå—:\n å­˜æ´» ä½¿ç”¨é¡ºæ‰‹ æ›´å¥½, æ›´å¼º, æ›´å¿« ä½¿ç”¨Vimçš„è¶…èƒ½åŠ›  å½“ä½ è¯»å®Œè¿™ç¯‡æ–‡ç« , ä½ å°†ä¼šçˆ±ä¸Švim.\nä½†æ˜¯æˆ‘ä»¬å¼€å§‹ä¹‹å‰, è¦å…ˆè¯´æ˜ä¸€ç‚¹:\n å­¦ä¹ vimçš„è¿‡ç¨‹å°†æ˜¯ååˆ†ç—›è‹¦çš„ å°†èŠ±è´¹ä¸€äº›æ—¶é—´, åƒä¸‡ä¸è¦è§‰å¾—æµªè´¹æ—¶é—´å„¿æ”¾å¼ƒ å­¦ä¹ ä»–çš„è¿‡ç¨‹å°±åƒæ˜¯å­¦ä¹ ä¹å™¨, ä¸€æ—¦å…¥é—¨, å°±ä¼šå˜å¾—å¾ˆè½»æ¾ ä¸è¦å¥¢æœ›åƒå…¶ä»–ç¼–è¾‘å™¨ä¸€æ ·ä¸‰å¤©ä¹‹å†…å°±èƒ½ç†Ÿç»ƒæŒæ¡, å­¦ä¹ vimè‡³å°‘éœ€è¦ä¸¤ä¸ªæ˜ŸæœŸè€Œä¸æ˜¯ä¸‰å¤©  Level 1 - å­˜æ´» å®‰è£…vim è¿è¡Œvim ä¸è¦åšä»»ä½•äº‹æƒ…! è¯·å…ˆé˜…è¯»  åœ¨æ™®é€šç¼–è¾‘å™¨ä¸­, å½“ä½ æ•²å‡»é”®ç›˜å°±èƒ½åœ¨å±å¹•ä¸Šçœ‹åˆ°æƒ³è¦çš„å­—ç¬¦. ä½†æ˜¯å¯¹äºVimæ¥è®², ä¸æ˜¯è¿™æ ·çš„. å½“ä½ å¯åŠ¨vimçš„æ—¶å€™, vimå½“å‰æ­£åœ¨ Normal æ¨¡å¼ä¸‹, ä½ éœ€è¦å…ˆå°†æ¨¡å¼åˆ‡æ¢ä¸º Insert æ¨¡å¼, æ‰èƒ½å¤Ÿè¾“å…¥å­—ç¬¦. ä» Normal æ¨¡å¼åˆ° Insert æ¨¡å¼, éœ€è¦æ•²å‡»é”®ç›˜å­—ç¬¦ i.\nå½“ä½ è¿›å…¥*Insertæ¨¡å¼, ä½ å¯èƒ½ä¼šæ„Ÿè§‰èˆ’æœä¸€ç‚¹, å› ä¸ºä½ å¯ä»¥åƒæ™®é€šç¼–è¾‘å™¨ä¸€æ ·è¾“å…¥å­—ç¬¦äº†. å¦‚æœä½ æƒ³ä»Insertæ¨¡å¼åˆ‡æ¢å›Normal*æ¨¡å¼, åªéœ€è¦æ•²å‡»é”®ç›˜æœ€å·¦ä¸Šè§’çš„é”®ESCé”®.\nç°åœ¨ä½ çŸ¥é“å¦‚ä½•åœ¨*Insertæ¨¡å¼å’ŒNormalæ¨¡å¼ä¹‹é—´åˆ‡æ¢äº†. ç°åœ¨, ä½ å¿…é¡»è¦æŒæ¡ä¸‹é¢å‡ ä¸ªå‘½ä»¤ä»¥ä¿è¯ä½ èƒ½åœ¨Normal*æ¨¡å¼ä¸‹å­˜æ´»ä¸‹å»:\n  i : åˆ‡æ¢åˆ°*Insertæ¨¡å¼. æŒ‰ESCè¿”å›Normal*æ¨¡å¼ x : åˆ é™¤å½“å‰å…‰æ ‡æ‰€åœ¨çš„ä¸€ä¸ªå­—ç¬¦ :wq : ä¿å­˜å¹¶é€€å‡º (:w ä¿å­˜ç¼–è¾‘çš„æ–‡ä»¶, :q é€€å‡ºvim) dd : åˆ é™¤å…‰æ ‡æ‰€åœ¨çš„ä¸€è¡Œ p : ç²˜è´´    #####æ¨è\n   hjkl (å¼ºçƒˆæ¨èä½†ä¸å¼ºåˆ¶ä½¿ç”¨): ä½ å¯ä»¥ä½¿ç”¨é”®ç›˜çš„ â†‘ â†“ â† â†’ è¿›è¡Œå…‰æ ‡çš„ç§»åŠ¨. æç¤º: åœ¨*Normal*æ¨¡å¼ä¸‹, jä»£è¡¨æ–¹å‘ â†“ :help \u003ccommand\u003e : æ˜¾ç¤º \u003ccommand\u003e çš„å¸®åŠ©æ–‡æ¡£. ä½ å¯ä»¥ç›´æ¥è¾“å…¥ :help è€Œä¸è¾“å…¥ \u003ccommand\u003e è·å–ä¸€èˆ¬æ€§å¸®åŠ©.   æœ€å¼€å§‹, ä½ åªéœ€è¦ä¸Šé¢5ä¸ªå‘½ä»¤. å½“ä½ å¾ˆè‡ªç„¶åœ°ä½¿ç”¨ä»¥ä¸Šå‘½ä»¤, æŠ›å¼ƒä¹‹å‰æ™®é€šç¼–è¾‘å™¨çš„ä¹ æƒ¯, é‚£ä¹ˆä½ å°±å¯ä»¥åˆ°Level 2äº†.\nä½†æ˜¯, åœ¨*Normalæ¨¡å¼ä¸‹éœ€è¦æ³¨æ„çš„æ˜¯: åœ¨æ™®é€šç¼–è¾‘å™¨ä¸‹, Ctrl-Cæ˜¯å¤åˆ¶å‘½ä»¤, è¿™æ˜¯ä¸ªç»„åˆæŒ‰é”®æ¥å®Œæˆä¸€é¡¹å¤åˆ¶çš„åŠŸèƒ½, ä½†æ˜¯åœ¨vimä¸‹, ä¸å¯ä»¥è½»æ˜“åœ°ä½¿ç”¨Ctrl. äº‹å®ä¸Š, åœ¨Vimçš„ Normal æ¨¡å¼ä¸‹, vimå·²ç»èµ‹äºˆæ¯ä¸€ä¸ªæŒ‰é”®åŠŸèƒ½, ä¹Ÿå°±æ˜¯è¯´, åœ¨Normal*æ¨¡å¼ä¸‹, æ¯ä¸€ä¸ªé”®éƒ½æ˜¯åŠŸèƒ½é”®, è€Œä¸éœ€è¦ä½ æŒ‰ä¸‹Ctrlå»ç»„åˆå…¶ä»–æŒ‰é”®å®ç°æŸé¡¹åŠŸèƒ½.\næç¤º\n ä¸ºäº†ä¾¿äºä¹¦å†™å’Œé˜…è¯», ä¸‹é¢çš„æ–‡ç« ä¸­, \u003cC-Î»\u003e å°†ä»£è¡¨é”®å…¥ Ctrl-Î» å‘½ä»¤éƒ½æ˜¯ä»¥:å¼€å¤´, å¹¶ä¸”æœ€åè¦é”®å…¥\u003center\u003e. å¦‚: å½“æˆ‘å†™:q, å°†ä»£è¡¨:q\u003center\u003e  Level 2 - æ„Ÿè§‰é¡ºæ‰‹ ä½ ç°åœ¨å·²ç»å¯ä»¥åœ¨vimä¸­å­˜æ´»äº†. ç°åœ¨æ˜¯æ—¶å€™å­¦ç‚¹å…¶ä»–çš„å‘½ä»¤äº†. ä¸‹é¢æ˜¯æˆ‘çš„å»ºè®®(ä»¥ä¸‹å‘½ä»¤éƒ½æ˜¯åœ¨*Normal*æ¨¡å¼ä¸‹é”®å…¥):\n å„ç§æ’å…¥æ¨¡å¼    a : åœ¨å½“å‰å…‰æ ‡åå¼€å§‹æ’å…¥, å¹¶ä¸”è¿›å…¥*Insert*æ¨¡å¼ o : ä»å½“å‰è¡Œä¸‹é¢æ’å…¥æ–°è¡Œ, å¹¶ä¸”è¿›å…¥*Insert*æ¨¡å¼ O : ä»å½“å‰è¡Œä¸Šé¢æ’å…¥æ–°è¡Œ, å¹¶ä¸”è¿›å…¥*Insert*æ¨¡å¼ cw : åˆ é™¤å…‰æ ‡å¼€å§‹çš„å•è¯, å¹¶ä¸”è¿›å…¥*Insert*æ¨¡å¼   åŸºæœ¬çš„ç§»åŠ¨    0 : åˆ°å…‰æ ‡æ‰€åœ¨è¡Œçš„æœ€å¼€å§‹ ^ : åˆ°å…‰æ ‡æ‰€åœ¨è¡Œç¬¬ä¸€ä¸ªéç©ºå­—ç¬¦ $ : åˆ°å…‰æ ‡æ‰€åœ¨è¡Œçš„æœ«å°¾ g_ : åˆ°å…‰æ ‡æ‰€åœ¨è¡Œæœ€åä¸€ä¸ªéç©ºå­—ç¬¦ /pattern : å‘ä¸‹æœç´¢å­—ç¬¦ä¸²pattern ?pattern : å‘ä¸Šæœç´¢å­—ç¬¦ä¸²pattern  æ³¨: æœç´¢æ—¶, é”®å…¥né”®å¯ä»¥æŸ¥çœ‹ä¸‹ä¸€é¡¹, é”®å…¥Né”®å¯ä»¥æŸ¥çœ‹ä¸Šä¸€é¡¹\n å¤åˆ¶/ç²˜è´´    p : åœ¨å½“å‰å…‰æ ‡åç²˜è´´ P : åœ¨å½“å‰å…‰æ ‡å‰ç²˜è´´ yy: å¤åˆ¶å…‰æ ‡æ‰€åœ¨æ•´è¡Œ   æ’¤é”€/æ¢å¤ (Undo/Redo)    u : æ’¤é”€ \u003cC-r\u003e : æ¢å¤   è½½å…¥/ä¿å­˜/é€€å‡º/ä¿®æ”¹æ–‡ä»¶(Buffer)   :e \u003cpath/to/file\u003e : æ‰“å¼€æ–‡ä»¶ :w : ä¿å­˜æ–‡ä»¶ä¿®æ”¹ :saveas \u003cpath/to/file\u003e : å¦å­˜ä¸º\u003cpath/to/file\u003e :x, ZZ or :wq : ä¿å­˜å¹¶é€€å‡º. :wqç›¸å½“äºå…ˆ:wå†:q; :xåªåœ¨éœ€è¦æ—¶ä¿å­˜; ZZä¸éœ€è¦è¾“å…¥:å’Œå›è½¦\u003center\u003e :q! : å¼ºåˆ¶é€€å‡ºè€Œä¸ä¿å­˜ä¿®æ”¹. :qa!, å¼ºåˆ¶é€€å‡ºæ‰€æœ‰æ­£åœ¨ç¼–è¾‘çš„æ–‡ä»¶, å³ä½¿å…¶ä»–æ–‡ä»¶æœ‰åšè¿‡ä¿®æ”¹è€Œæ²¡æœ‰ä¿å­˜ :bnå’Œ:bp : åˆ‡æ¢åˆ°ä¸‹/ä¸Šä¸€ä¸ªæ–‡ä»¶\n èŠ±ä¸€ç‚¹æ—¶é—´å»ç†Ÿæ‚‰ä¸Šé¢çš„å‘½ä»¤. å½“ä½ ç†Ÿç»ƒæŒæ¡ä¹‹å, ä½ å¯ä»¥å®Œæˆä½ åœ¨æ™®é€šç¼–è¾‘å™¨å‡ ä¹æ‰€æœ‰åŠŸèƒ½. ä½ å¯èƒ½ä¼šè§‰å¾—ç”¨vimè¿˜æ˜¯æœ‰ç‚¹åˆ«æ‰­. ä½†æ˜¯è·Ÿç€æˆ‘è¿›å…¥ä¸‹ä¸€Level, æˆ–è®¸ä½ å¯ä»¥æ˜ç™½ä¸ºä»€ä¹ˆè¦èŠ±è´¹è¿™ä¹ˆå¤šåŠ›æ°”å»å­¦ä¹ å®ƒ.\nLevel 3 - æ›´å¥½. æ›´å¼º. æ›´å¿«. æ­å–œä½ å·²ç»åˆ°è¾¾äº†Level 3! æˆ‘ä»¬ç°åœ¨å¼€å§‹å­¦ä¹ ä¸€äº›æœ‰è¶£çš„ä¸œè¥¿. åœ¨Level 3, æˆ‘ä»¬åªè®¨è®ºå’Œviç¼–è¾‘å™¨å…¼å®¹çš„é‚£äº›å‘½ä»¤.\n3.1 æ›´å¥½ è®©æˆ‘ä»¬çœ‹çœ‹vimæ˜¯æ€ä¹ˆæ ·å¸®åŠ©ä½ åšé‡å¤çš„å‘½ä»¤çš„:\n .(ç‚¹) : é‡å¤ä¸Šä¸€æ¬¡çš„å‘½ä»¤ N\u003ccommand\u003e: å°†ä¼šè¿è¡Œ\u003ccommand\u003eNæ¬¡, è¿™é‡Œçš„Næ˜¯ä¸€ä¸ªæ•´æ•°  ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­. æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç„¶åè¾“å…¥ä¸‹é¢çš„å‘½ä»¤:\n  2dd : å°†ä¼šåˆ é™¤2è¡Œ 3p : å°†ä¼šæ‰§è¡Œç²˜è´´å‘½ä»¤3æ¬¡ 100idesu [ESC] : å°†ä¼šè¾“å…¥ â€œdesu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desu desuâ€ . : è·Ÿåœ¨ä¸Šä¸€ä¸ªå‘½ä»¤åé¢ä»£è¡¨å†æ¬¡è¾“å…¥100æ¬¡\"desu\" 3. : å°†ä¼šè¾“å…¥3æ¬¡\"desu\"(è€Œä¸æ˜¯300æ¬¡, ä½ çœ‹vimå¤šä¹ˆèªæ˜)   3.2 æ›´å¼º çŸ¥é“å¦‚ä½•é«˜æ•ˆçš„åœ¨vimä¸­ç§»åŠ¨å…‰æ ‡ååˆ†é‡è¦. ä¸è¦è·³è¿‡è¿™ä¸€éƒ¨åˆ†.\n NG : ç§»åŠ¨å…‰æ ‡åˆ°ç¬¬Nè¡Œ gg : ç›¸å½“äº 1G, åˆ°æ–‡ä»¶çš„æœ€å¼€å§‹ä¸€è¡Œ G : åˆ°æ–‡ä»¶çš„æœ€åä¸€è¡Œ æŒ‰ç…§å•è¯ç§»åŠ¨:    w : åˆ°ä¸‹ä¸€ä¸ªå•è¯çš„å¼€å§‹ e : åˆ°ä¸‹ä¸€ä¸ªå•è¯çš„ç»“å°¾ é»˜è®¤æƒ…å†µä¸‹, æˆ‘ä»¬è®¤ä¸ºå•è¯æ˜¯ç”±ä¸€ç³»åˆ—å­—ç¬¦å’Œä¸‹åˆ’çº¿ç»„æˆ. å¦‚æœä½ è®¤ä¸ºç”±ç©ºæ ¼åˆ†éš”å¼€çš„å­—ç¬¦ä¸²å³ä¸ºå•è¯, é‚£ä¹ˆä½ åªéœ€è¦ä½¿ç”¨Wå’ŒE.     ç°åœ¨ä»‹ç»æ›´é«˜æ•ˆçš„ç§»åŠ¨æ–¹å¼:\n  % : åŒ¹é…æ‹¬å·ç§»åŠ¨å…‰æ ‡, å¦‚(),[],{} *å’Œ# : åŒ¹é…å…‰æ ‡å½“å‰æ‰€åœ¨å•è¯, å¹¶ä¸”å‘ä¸‹/ä¸ŠæŸ¥æ‰¾åŒ¹é…çš„å•è¯, å¹¶æŠŠå…‰æ ‡ç§»åˆ°æŸ¥æ‰¾åˆ°çš„å•è¯   ç›¸ä¿¡æˆ‘, æœ€åçš„ä¸‰ä¸ªå‘½ä»¤æ˜¯ååˆ†é«˜æ•ˆçš„.\n3.3 æ›´å¿« è®°ä½å¦‚ä½•ç§»åŠ¨å…‰æ ‡äº†å—, å› ä¸ºå¾ˆå¤šå‘½ä»¤éƒ½æ˜¯å¯ä»¥ç»„åˆä½¿ç”¨çš„. å¹¶ä¸”å¤§å¤šæ˜¯ä»¥ä»¥ä¸‹æ ¼å¼:\n\u003cstart position\u003e\u003ccommand\u003e\u003cend position\u003e\nä¾‹å¦‚: 0y$ æ„æ€æ˜¯\n 0 : å°†å…‰æ ‡ç§»åŠ¨åˆ°è¡Œé¦– y : å¼€å§‹å¤åˆ¶ $ : å¤åˆ¶åˆ°è¡Œå°¾  æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ye, ä»å…‰æ ‡æ‰€åœ¨ä½ç½®å¤åˆ¶åˆ°å•è¯ç»“æŸ. ä¹Ÿå¯ä»¥ä½¿ç”¨y2/foo, ä»å…‰æ ‡æ‰€åœ¨ä½ç½®å¤åˆ¶åˆ°åŒ¹é…çš„ç¬¬äºŒä¸ªfoo\nå¯¹y(å¤åˆ¶)æ¥è¯´æ˜¯è¿™æ ·çš„, é‚£ä¹ˆå¯¹d(åˆ é™¤), v(å¯è§†åŒ–é€‰æ‹©), gU(è½¬å¤§å†™), gu(è½¬å°å†™)ç­‰ç­‰å‘½ä»¤æ¥è¯´ä¹Ÿæ˜¯åŒæ ·é€‚ç”¨çš„\nLevel 4 - é€‚ç”¨Vimçš„è¶…èƒ½åŠ› Â«æœªå®Œå¾…ç»­Â»\n","description":"","tags":["vim"],"title":"Vim åˆçº§å…¥é—¨","uri":"/posts/how-to-use-vim/"},{"categories":null,"content":" è°“è¯ï¼ˆNSPredicateï¼‰æä¾›åœ¨Cocoaä¸­æŒ‡å®šæŸ¥è¯¢çš„æ™®é€šè§£å†³æ–¹æ¡ˆã€‚NSPredicateç±»ç”¨äºå®šä¹‰é€»è¾‘æ¡ä»¶ä»¥é™åˆ¶æˆ–ç­›é€‰è·å–ç»“æœã€‚\n NSPredicate çš„åŸºæœ¬ä½¿ç”¨ å®šä¹‰ï¼š NSPredicate *predict = [NSPredicate predicateWithFormat: @\"SELF CONTAINS[cd] %@\", SOMESTRING];  å¸¸ç”¨æ–¹æ³•ï¼š    å…³é”®å­— æ•ˆæœ     æ¯”è¾ƒè¿ç®—ç¬¦    \u003e,\u003c,==,\u003e=,\u003c=,!= å·¦ä¾§æ»¡è¶³æ¯”è¾ƒè¿ç®—ç¬¦   å­—ç¬¦ç›¸å…³    BEGINSWITH å·¦ä¾§è¡¨è¾¾å¼ ä»¥ å³ä¾§è¡¨è¾¾å¼ å¼€å§‹   ENDSWITH å·¦ä¾§è¡¨è¾¾å¼ ä»¥ å³ä¾§è¡¨è¾¾å¼ ç»“æŸ   CONTAINS å·¦ä¾§è¡¨è¾¾å¼åŒ…å«å³ä¾§è¡¨è¾¾å¼   èŒƒå›´ç›¸å…³    BETWEEN å·¦ä¾§è¡¨è¾¾å¼åœ¨å³ä¾§è¡¨è¾¾å¼èŒƒå›´å†…   IN å·¦ä¾§è¡¨è¾¾å¼åœ¨å³ä¾§è¡¨è¾¾å¼å†…   æ­£åˆ™è¡¨è¾¾å¼    MATCHES å·¦ä¾§è¡¨è¾¾å¼æ»¡è¶³å³ä¾§è¡¨è¾¾å¼ï¼Œå³ä¾§ä¸ºæ­£åˆ™è¡¨è¾¾å¼   é€šé…ç¬¦    LIKE å·¦ä¾§è¡¨è¾¾å¼ç­‰äºå³ä¾§è¡¨è¾¾å¼: å…è®¸å°† ? å’Œ * ç”¨ä½œé€šé…ç¬¦,å…¶ä¸­ ? åŒ¹é…ä¸€ä¸ªå­—ç¬¦,è€Œ * åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªå­—ç¬¦    å­—ç¬¦ä¸² NSString *originStr = @\"I like shangha!\"; NSString *str = @\"shanghai\"; NSPredicate *predict = [NSPredicate predicateWithFormat: @\"SELF CONTAINS %@\", str]; if ([predict evaluateWithObject:originStr]) { NSLog(@\"å«æœ‰å­—ç¬¦ä¸²%@\", str); }  å…¶ä¸­ CONTAINS ä¹Ÿå¯ä»¥æ›¿æ¢ä¸º BEGINSWITH,ENDSWITHã€‚ åœ¨å®ƒä»¬åé¢ï¼Œå¯ä»¥åœ¨æ–¹æ‹¬å·ä¸­æ·»åŠ cã€d æˆ– cd, å¦‚CONTAINS[cd],å…¶ä¸­cä»£è¡¨ä¸åŒºåˆ†å¤§å°å†™, dä»£è¡¨ä¸åŒºåˆ†éŸ³è°ƒç¬¦å·ã€‚\næ•°ç»„å’Œå­—å…¸ è°“è¯å¸¸ç”¨äºæ•°ç»„çš„ç­›é€‰:\n NSArray *mArray = [NSArray arrayWithObjects:@\"beijing\", @\"shanghai\", @\"shenzhen\", @\"guangzhou\", nil]; //IN ç”¨æ³• NSPredicate *predicate1 = [NSPredicate predicateWithFormat:@\"SELF IN {'shanghai', 'guangzhou'}\"]; NSArray *filteredArray1 = [mArray filteredArrayUsingPredicate: predicate1]; NSLog(@\"ç­›é€‰åæ•°ç»„ä¸º:%@\", filteredArray1); //LIKE ç”¨æ³• NSPredicate *predicate2 = [NSPredicate predicateWithFormat:@\"SELF LIKE '*h*'\"]; NSArray *filteredArray2 = [mArray filteredArrayUsingPredicate: predicate2]; NSLog(@\"ç­›é€‰åæ•°ç»„ä¸º:%@\", filteredArray2);  è°“è¯çš„æ¡ä»¶ä¹Ÿå¯ä»¥é€šè¿‡å­—å…¸çš„å ä½ç¬¦å®ç°:\nNSPredicate *p1 = [NSPredicate predicateWithFormat:@\"name==$NAME AND price==$PRICE\"]; NSDictionary *dic = [NSDictionary dictionaryWithObjectsAndKeys:@\"name5\", @\"NAME\", @\"5000\", @\"PRICE\", nil]; NSPredicate *p2 = [p1 predicateWithSubstitutionVariables:dic]; //è¡¨ç¤ºä»carsæ•°ç»„ä¸­ç­›é€‰æ»¡è¶³ name='name5' AND price='5000' æ¡ä»¶çš„å…ƒç´  NSArray *filteredCars = [cars filteredArrayUsingPredicate:p2];  ","description":"","tags":["iOS"],"title":"NSPredicate(è°“è¯) çš„ä½¿ç”¨","uri":"/posts/predicateuse/"},{"categories":null,"content":"  ä»€ä¹ˆæ˜¯WebWorker\nweb worker æ˜¯è¿è¡Œåœ¨åå°çš„ JavaScriptï¼Œç‹¬ç«‹äºå…¶ä»–è„šæœ¬ï¼Œä¸ä¼šå½±å“é¡µé¢çš„æ€§èƒ½ã€‚æˆ‘ä»¬çŸ¥é“é¡µé¢çš„å±•ç¤ºæ”¾åœ¨ä¸»çº¿ç¨‹ï¼Œå¦‚æœè®©ä¸»çº¿ç¨‹è¿›è¡Œä¸€ç³»åˆ—å¤æ‚çš„æ“ä½œï¼Œé‚£ä¹ˆé¡µé¢å°±ä¼šå˜å¾—éå¸¸å¡ï¼Œç”¨æˆ·ä½“éªŒä¼šå¾ˆå·®ã€‚è¿™æ˜¯æˆ‘ä»¬å¯ä»¥ä½¿ç”¨web workerè¿›è¡Œå¤æ‚æ“ä½œçš„å®ç°ï¼Œç„¶åå°†å¤„ç†ç»“æœè¿”å›ç»™é¡µé¢ï¼Œé¡µé¢è¿›è¡Œæ›´æ–°å³å¯ï¼Œè¿™æ ·å°±ä¸ä¼šå½±å“ç”¨æˆ·ä¸»é¡µé¢å±•ç¤ºçš„æ‰§è¡Œã€‚\n  æ–¹æ³•ï¼š postMessage() : ç”¨äºå‘HTMLé¡µé¢è¿”å›æ¶ˆæ¯ terminate() : ç»ˆæ­¢web workerï¼Œ å¹¶ä¸”é‡Šæ”¾èµ„æº\n  å®ç°æ–¹æ³•ï¼š Demo: æ•°å­—ä»0å¼€å§‹ç´¯åŠ \nindex.html \u003c!DOCTYPE html\u003e \u003chtml lang=\"en\"\u003e \u003chead\u003e \u003cmeta charset=\"UTF-8\"\u003e \u003ctitle\u003e\u003c/title\u003e \u003cscript src=\"index.js\"\u003e\u003c/script\u003e \u003c/head\u003e \u003cbody\u003e \u003cdiv id=\"numDiv\"\u003e0\u003c/div\u003e \u003c/body\u003e \u003c/html\u003e  index.js var numDiv; window.onload = function() { numDiv = document.getElementById(\"numDiv\"); var worker = new Worker(\"webWorker.js\");//åˆ›å»ºWorkerå¯¹è±¡ worker.onmessage = function (e) { numDiv.innerHTML = e.data; } }  webWorker.js var countNum = 0; function count () { postMessage(countNum);//ç»™htmlé¡µé¢è¿”å›æ•°æ® countNum ++;//æ•°å­—ç´¯åŠ  setTimeout(count, 1000);//ä¸€ç§’æ‰§è¡Œä¸€æ¬¡ } count();//è°ƒç”¨å‡½æ•°æ‰§è¡Œ ","description":"","tags":["HTML5","WebWorker"],"title":"HTML5 WebWorker ç®€å•ä½¿ç”¨","uri":"/posts/html5webworker/"},{"categories":null,"content":"  ä»€ä¹ˆæ˜¯åº”ç”¨ç¼“å­˜ï¼Ÿ\nHTML5å¼•å…¥äº†åº”ç”¨ç¼“å­˜æ¦‚å¿µï¼Œæ„å‘³ç€åœ¨æ²¡æœ‰å› ç‰¹ç½‘è¿æ¥æ—¶ä¹Ÿå¯ä»¥è¿›è¡Œè®¿é—®ã€‚\n  ä½¿ç”¨åº”ç”¨ç¼“å­˜å¥½å¤„ï¼š\n ç¦»çº¿æµè§ˆï¼Œæ²¡æœ‰å› ç‰¹ç½‘çš„æƒ…å†µä¸‹ä¾ç„¶å¯ä»¥è¿›è¡Œè®¿é—® è®¿é—®é€Ÿåº¦æå‡ï¼Œå·²ç»ç¼“å­˜çš„èµ„æºåŠ è½½æ›´å¿« å‡å°‘æœåŠ¡å™¨è´Ÿè½½ï¼Œæµè§ˆå™¨åªéœ€è¦ä¸‹è½½æ›´æ–°è¿‡çš„é¡µé¢èµ„æº    å®ç°æ–¹æ³•ï¼š\nå¦‚æœéœ€è¦ä½¿ç”¨åº”ç”¨ç¼“å­˜ï¼Œéœ€è¦åœ¨é¡µé¢\u003chtml\u003eæ ‡ç­¾ä¸­åŒ…å« manifest å±æ€§ï¼Œè€Œmanifestæ–‡ä»¶å»ºè®®ä½¿ç”¨æ–‡ä»¶æ‰©å±•å.appcacheã€‚\n  Manifestæ–‡ä»¶åŠŸèƒ½ï¼š\n CACHE: åœ¨æ­¤æ ‡é¢˜ä¸‹åˆ—å‡ºçš„æ–‡ä»¶ä¼šåœ¨é¦–æ¬¡è®¿é—®åŠ è½½ä¹‹åè¿›è¡Œç¼“å­˜ï¼› NETWORK: åœ¨æ­¤æ ‡é¢˜ä¸‹åˆ—å‡ºçš„æ–‡ä»¶éœ€è¦ä¸æœåŠ¡å™¨è¿æ¥ã€ä¸”ä¸ä¼šè¢«ç¼“å­˜ï¼› FALLBACK: åœ¨æ­¤æ ‡é¢˜ä¸‹åˆ—å‡ºçš„æ–‡ä»¶è§„å®šå½“é¡µé¢æ— æ³•è®¿é—®æ—¶çš„é€€å›é¡µé¢ï¼ˆå¦‚404é¡µé¢ï¼‰    åŠŸèƒ½å®ç° index.html è¯·æ³¨æ„\u003chtml\u003eæ ‡ç­¾ \u003c!DOCTYPE html\u003e \u003chtml lang=\"en\" manifest=\"index.appcache\"\u003e \u003chead\u003e \u003cmeta charset=\"UTF-8\"\u003e \u003ctitle\u003e\u003c/title\u003e \u003clink rel=\"stylesheet\" href=\"style.css\"\u003e \u003cscript src=\"index.js\"\u003e\u003c/script\u003e \u003c/head\u003e \u003cbody\u003e \u003ch1 class=\"h1\"\u003eHELLO HMTL5\u003c/h1\u003e \u003c/body\u003e \u003c/html\u003e  style.css .h1 { color: red; background: blue; }  index.js /*ç©ºæ–‡ä»¶*/  index.appcache CACHE MANIFEST CACHE: index.html style.css index.js NETWORK: FALLBACK:  æµ‹è¯•   å¼€å¯æœ¬åœ°æœåŠ¡å™¨ï¼Œåœ¨Chromeè¾“å…¥localhost/webCache\n  ä½¿ç”¨Chromeå®¡æŸ¥å…ƒç´ åŠŸèƒ½ï¼Œåˆ‡æ¢åˆ°ResourcesåŠŸèƒ½æ ‡ç­¾ï¼Œç‚¹å‡»å·¦ä¾§Application CacheåŠŸèƒ½æ ‡ç­¾ï¼Œå¯ä»¥è§‚å¯Ÿåˆ°æˆ‘ä»¬è®¾ç½®ç¼“å­˜çš„ä¸‰ä¸ªæ–‡ä»¶å·²ç»ç¼“å­˜æˆåŠŸ\n  æ–­å¼€æœ¬åœ°æœåŠ¡å™¨ï¼Œé‡æ–°åˆ·æ–°é¡µé¢ï¼Œä¼šå‘ç°é¡µé¢æ ·å¼ä»ç„¶ä¿æŒï¼Œè¯´æ˜ç¼“å­˜èµ·ä½œç”¨äº†ã€‚\n ","description":"","tags":["HTML5","Cache"],"title":"HTML5åº”ç”¨ç¼“å­˜ç®€å•ä½¿ç”¨","uri":"/posts/html5webcache/"},{"categories":null,"content":"å‰æ–‡å·²ç»ä»‹ç»äº†å¦‚ä½•ç»™UITableViewæ·»åŠ æœç´¢æ ï¼Œè¿™æ¬¡è¦ç»™UITableViewè¿›ä¸€æ­¥æ·»åŠ ç´¢å¼•æ¡ã€‚ åŸºæœ¬æ€è·¯ï¼š\n è·å–æ€»ç»Ÿåå­—çš„é¦–å­—æ¯ç»„æˆä¸€ä¸ªç´¢å¼•å­—æ¯è¡¨å‚¨å­˜åœ¨æ•°ç»„ä¸­ï¼› ä¿®æ”¹TableViewçš„ä»£ç†æ–¹æ³•å®ç°sectionçš„æ˜¾ç¤ºï¼Œsectionçš„æ•°é‡åº”ä¸ºç´¢å¼•å­—æ¯è¡¨çš„å…ƒç´ çš„ä¸ªæ•°ï¼› æŠŠç´¢å¼•æ¡æ·»åŠ åˆ°TableView ä¸­ï¼Œç”¨TableViewçš„ä»£ç†æ–¹æ³•å³å¯å®ç°ã€‚  ç”±äºæ¥ç€ä¸Šæ–‡ï¼Œæ‰€ä»¥æœ¬æ–‡ä¸­ä»£ç å°†ä¸ä¼šå…¨éƒ¨å±•ç¤ºï¼Œä»£ç çš„é‡å¤éƒ¨åˆ†å°†ç”¨çœç•¥å·ä»£æ›¿ã€‚\nStep1. æ·»åŠ å±æ€§ åœ¨ViewController.hä¸­æ·»åŠ å±æ€§ï¼šNSMutableArray *alphabetArray;\n#import \u003cUIKit/UIKit.h\u003e @interface ViewController : UIViewController ...\t@property (nonatomic, strong) NSMutableArray *alphabetArray; ...\t@end  Step2. ä¿®æ”¹ViewController.m // // ViewController.m // UITableViewAdvanced01 // // Created by mungo on 19/03/16. // Copyright Â© 2016 mungo. All rights reserved. // #import \"ViewController.h\" #import \"President.h\" @interface ViewController () \u003cUITableViewDataSource, UITableViewDelegate, UISearchBarDelegate, UISearchResultsUpdating, UISearchDisplayDelegate\u003e @end @implementation ViewController - (void)viewDidLoad { [super viewDidLoad]; //åˆå§‹åŒ–æ•°æ® ... //åˆ›å»ºtableview ... //åˆ›å»ºsearchController ... //è®¾ç½®tableviewçš„æœç´¢æ  ... //è®¾ç½®å­—æ¯è¡¨ self.alphabetArray = [self getAlphetSortedArray]; } /** * æ–°æ·»åŠ æ–¹æ³•ï¼š * è·å–å­—æ¯è¡¨ * @return MSMutableArray* å·²ç»æ’åºçš„å­—æ¯è¡¨æ•°ç»„ */ - (NSMutableArray *) getAlphetSortedArray { self.alphabetArray = [[NSMutableArray alloc] init]; for (int i = 0; i \u003c [self.presidents count]; i ++) { //è·å–åå­—çš„ç¬¬ä¸€ä¸ªå­—æ¯ President *president = [self.presidents objectAtIndex:i]; char letter = [president.firstName characterAtIndex:0]; NSString *uniqueChar = [NSString stringWithFormat:@\"%c\", letter]; //å°†å­—æ¯åŠ å…¥åˆ°å­—æ¯è¡¨ä¸­ if (![self.alphabetArray containsObject:uniqueChar]) { [self.alphabetArray addObject:uniqueChar]; } } //å¯¹å­—æ¯è¡¨è¿›è¡Œæ’åº NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@\"self\" ascending:YES]; NSArray *sortDescirptors = [NSArray arrayWithObject:sortDescriptor]; NSArray *sortedArray; sortedArray = [self.alphabetArray sortedArrayUsingDescriptors:sortDescirptors]; NSMutableArray *alphabetArray = [[NSMutableArray alloc] initWithArray:sortedArray copyItems:YES]; return alphabetArray; } #pragma mark - tableView Delegate - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section { if (self.searchController.active) { ... } else { //æ ¹æ®sectionç­›é€‰ä»¥å½“å‰å­—æ¯å¼€å¤´çš„æ€»ç»Ÿæ•°ç»„ NSArray *tmpArray = [self getAlphabetArrayWithIndex:section]; return [tmpArray count]; } } #pragma mark - Indexing UITableView //ç´¢å¼•æ¡çš„å­—æ¯è¡¨ - (NSArray\u003cNSString *\u003e *)sectionIndexTitlesForTableView:(UITableView *)tableView { return self.alphabetArray; } - (NSInteger) tableView:(UITableView *)tableView sectionForSectionIndexTitle:(NSString *)title atIndex:(NSInteger)index { return index; } #pragma mark - tableView Datasource - (NSInteger) numberOfSectionsInTableView:(UITableView *)tableView { if (self.searchController.active) { self.alphabetArray = nil;//æœç´¢æ—¶ä¸æ˜¾ç¤ºsection return 1; } else { self.alphabetArray = [self getAlphetSortedArray];//åœæ­¢æœç´¢æ¢å¤sectionæ˜¾ç¤º return [self.alphabetArray count]; } } //tableView sectionçš„æ ‡é¢˜ - (NSString *) tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section { return [self.alphabetArray objectAtIndex: section]; } - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath { ... President *president; if (self.searchController.active) { ... } else { //æ ¹æ®sectionç­›é€‰ä»¥å½“å‰å­—æ¯å¼€å¤´çš„æ€»ç»Ÿæ•°ç»„ NSArray *tmpArray = [self getAlphabetArrayWithIndex:indexPath.section]; if ([tmpArray count]) { president = [tmpArray objectAtIndex:indexPath.row]; } } if (president) { cell.textLabel.text = [NSString stringWithFormat:@\"%@ %@\", president.firstName, president.lastName]; } return cell; } /* * æ–°æ·»åŠ æ–¹æ³•ï¼š * æ ¹æ®é¦–å­—æ¯å¯¹æ‰€æœ‰æ€»ç»Ÿè¿›è¡Œç­›é€‰ * @return NSArray* äºå½“å‰é¦–å­—æ¯ç›¸åŒçš„æ€»ç»Ÿæ•°ç»„ */ - (NSArray *) getAlphabetArrayWithIndex:(NSInteger)index{ NSString *alphabet = [self.alphabetArray objectAtIndex:index]; NSPredicate *president = [NSPredicate predicateWithFormat:@\"firstName BEGINSWITH [cd] %@\", alphabet]; NSArray *tmpArray = [self.presidents filteredArrayUsingPredicate:president]; return tmpArray; } #pragma mark - SearchController delegate - (void)updateSearchResultsForSearchController:(UISearchController *)searchController { ... } @end  æ³¨æ„ï¼š numberOfSectionsInTableViewä¸­ï¼Œ å¼€å§‹æœç´¢çš„æ—¶å€™è¦å°†TableViewçš„sectionæ•°é‡è®¾ç½®ä¸º1ï¼Œå¹¶ä¸”è¦æŠŠå­—æ¯è¡¨è®¾ç½®ä¸ºç©ºï¼›ä¸æœç´¢æ—¶è¦æ¢å¤sectionçš„æ•°é‡ã€‚\nå®ç°æ•ˆæœ ","description":"","tags":["iOS","UITableView"],"title":"UITableViewä½¿ç”¨ç®€å•è¿›é˜¶(äºŒ):ç´¢å¼•æ¡","uri":"/posts/uitableviewadvance02/"},{"categories":null,"content":"UITableView æ˜¯å¼€å‘ä¸­ä½¿ç”¨ååˆ†é¢‘ç¹çš„æ§ä»¶ï¼Œæœ¬ç³»åˆ—è®°å½•UITableViewçš„è¿›é˜¶ä½¿ç”¨ï¼šUITableViewçš„æœç´¢æ å’Œå­—æ¯ç´¢å¼•è¡¨ã€‚\nä¸æƒ³çœ‹æˆ‘åºŸè¯çš„å¯ä»¥ç›´æ¥åˆ°gitHubä»“åº“ä¸‹è½½æºç ğŸ˜ã€‚ UITableViewä½¿ç”¨è¿›é˜¶gitHubæºç \næœç´¢æ æœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼Œç¬¬ä¸€ç§æ˜¯é€šè¿‡UISearchBarå’ŒUISearchDisplayControllerå®ç°ï¼Œç¬¬äºŒç§æ˜¯é€šè¿‡UISearchControllerå®ç°ã€‚è€Œåœ¨iOS8.0ä¹‹åï¼Œè‹¹æœå®˜æ–¹æ¨èä½¿ç”¨ç¬¬äºŒç§æ–¹å¼ã€‚\næœ¬æ–‡ä½¿ç”¨çš„æ˜¯ç¬¬äºŒç§æ–¹å¼ï¼ˆUISearchControllerï¼‰ï¼Œä¸è¿‡æºç ä¸­ä¹Ÿå®ç°äº†ç¬¬ä¸€ç§(UISearchBar+UISearchDisplayController)ã€‚å…³äºUISearchBarå’ŒUISearchDisplayControllerçš„ä½¿ç”¨ï¼Œå¯ä»¥å‚è€ƒæˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« ï¼šUISearchBarå’ŒUISearchDisplayControllerå®ç°æœç´¢æ \næœ¬æ–‡å…ˆä»‹ç»UITableViewçš„æœç´¢æ ï¼ˆUISearchControllerï¼‰ï¼Œæ˜¯ä¸€ä¸ªæ˜¾ç¤ºç¾å›½æ€»ç»Ÿçš„TableViewã€‚\nStep1. åˆ›å»ºPresidentç±» åˆ›å»ºä¸€ä¸ªåä¸ºPresidentçš„Objective-Cç±»ï¼Œå®ƒç»§æ‰¿äºNSObjectç±»ï¼Œç”¨äºä¿å­˜æ€»ç»Ÿçš„å§“æ°å’Œåå­—ã€‚å®šä¹‰ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œç”¨æ¥åˆ›å»ºPresidentå¯¹è±¡ï¼Œå¹¶ä¸”å¯¹firstNameå’ŒlastNameèµ‹å€¼ã€‚\nPresident.h #import \u003cFoundation/Foundation.h\u003e @interface President : NSObject @property (nonatomic, retain) NSString *firstName; @property (nonatomic, retain) NSString *lastName; + (President *) presidentWithFirstName: (NSString *)firstname lastName: (NSString *)lastname; @end  President.m #import \"President.h\" @implementation President + (President *) presidentWithFirstName:(NSString *)firstname lastName:(NSString *)lastname { President *president = [[President alloc] init]; president.firstName = firstname; president.lastName = lastname; return president; } @end  Step2. ç¼–å†™ViewController viewController.h #import \u003cUIKit/UIKit.h\u003e @interface ViewController : UIViewController @property (nonatomic, strong) UITableView *mTableView; @property (nonatomic, strong) NSArray *presidents;//æ‰€æœ‰æ€»ç»Ÿ @property (nonatomic, strong) NSArray *filteredPresidents;//ä¿å­˜æœç´¢ç»“æœ @property (nonatomic, retain) UISearchController *searchController;\t@end  viewController.m #import \"ViewController.h\" #import \"President.h\" @interface ViewController () \u003cUITableViewDataSource, UITableViewDelegate, UISearchBarDelegate, UISearchResultsUpdating, UISearchDisplayDelegate\u003e @end @implementation ViewController - (void)viewDidLoad { [super viewDidLoad]; //åˆå§‹åŒ–æ•°æ® self.presidents = [[NSArray alloc] initWithObjects: [President presidentWithFirstName:@\"George\" lastName:@\"Washington\"], [President presidentWithFirstName:@\"John\" lastName:@\"Adams\"], [President presidentWithFirstName:@\"Thomas\" lastName:@\"Jeffeson\"], [President presidentWithFirstName:@\"James\" lastName:@\"Madison\"], [President presidentWithFirstName:@\"James\" lastName:@\"Monroe\"], [President presidentWithFirstName:@\"John Quincy\" lastName:@\"Adams\"], [President presidentWithFirstName:@\"Andrew\" lastName:@\"Jackson\"], [President presidentWithFirstName:@\"Martin\" lastName:@\"van Buren\"], [President presidentWithFirstName:@\"William Henry\" lastName:@\"Harrison\"], [President presidentWithFirstName:@\"John\" lastName:@\"Tyler\"], [President presidentWithFirstName:@\"James K\" lastName:@\"Polk\"], [President presidentWithFirstName:@\"Zachary\" lastName:@\"Taylor\"], [President presidentWithFirstName:@\"Millard\" lastName:@\"Fillmore\"], [President presidentWithFirstName:@\"Franklin\" lastName:@\"Pierce\"], [President presidentWithFirstName:@\"James\" lastName:@\"Buchanan\"], [President presidentWithFirstName:@\"Abraham\" lastName:@\"Lincoln\"], [President presidentWithFirstName:@\"Andrew\" lastName:@\"Johnson\"], [President presidentWithFirstName:@\"Ulysses S\" lastName:@\"Grant\"], [President presidentWithFirstName:@\"Rutherford B\" lastName:@\"Hayes\"], [President presidentWithFirstName:@\"James A\" lastName:@\"Garfield\"], [President presidentWithFirstName:@\"Chester A\" lastName:@\"Arthur\"], [President presidentWithFirstName:@\"Grover\" lastName:@\"Cleveland\"], [President presidentWithFirstName:@\"Bejamin\" lastName:@\"Harrison\"], [President presidentWithFirstName:@\"Grover\" lastName:@\"Cleveland\"], [President presidentWithFirstName:@\"William\" lastName:@\"McKinley\"], [President presidentWithFirstName:@\"Theodore\" lastName:@\"Roosevelt\"], [President presidentWithFirstName:@\"William Howard\" lastName:@\"Taft\"], [President presidentWithFirstName:@\"Woodrow\" lastName:@\"Wilson\"], [President presidentWithFirstName:@\"Warren G\" lastName:@\"Harding\"], [President presidentWithFirstName:@\"Calvin\" lastName:@\"Coolidge\"], [President presidentWithFirstName:@\"Herbert\" lastName:@\"Hoover\"], [President presidentWithFirstName:@\"Franklin D\" lastName:@\"Roosevelt\"], [President presidentWithFirstName:@\"Harry S\" lastName:@\"Truman\"], [President presidentWithFirstName:@\"Dwight D\" lastName:@\"Eisenhower\"], [President presidentWithFirstName:@\"John F\" lastName:@\"Kennedy\"], [President presidentWithFirstName:@\"Lyndon B\" lastName:@\"Johnson\"], [President presidentWithFirstName:@\"Richard\" lastName:@\"Nixon\"], [President presidentWithFirstName:@\"Gerald\" lastName:@\"Ford\"], [President presidentWithFirstName:@\"Jimmy\" lastName:@\"Carter\"], [President presidentWithFirstName:@\"Ronald\" lastName:@\"Reagan\"], [President presidentWithFirstName:@\"George H W\" lastName:@\"Bush\"], [President presidentWithFirstName:@\"Bill\" lastName:@\"Clinton\"], [President presidentWithFirstName:@\"George W\" lastName:@\"Bush\"], [President presidentWithFirstName:@\"Barack\" lastName:@\"Obama\"], nil]; CGRect appFrame = [[UIScreen mainScreen] bounds]; //åˆ›å»ºtableview self.mTableView = [[UITableView alloc] initWithFrame:CGRectMake(0, 20, appFrame.size.width, appFrame.size.height - 20) style:UITableViewStylePlain]; self.mTableView.delegate = self; self.mTableView.dataSource = self; [self.view addSubview:self.mTableView]; //åˆ›å»ºsearchController self.searchController = [[UISearchController alloc] initWithSearchResultsController:nil]; self.searchController.searchResultsUpdater = self; self.searchController.dimsBackgroundDuringPresentation = NO; self.searchController.hidesNavigationBarDuringPresentation = NO; //è®¾ç½®tableviewçš„æœç´¢æ  self.mTableView.tableHeaderView = self.searchController.searchBar; } #pragma mark - tableView Delegate - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section { if (self.searchController.active) { return [self.filteredPresidents count]; } else { return [self.presidents count]; } } #pragma mark - tableView Datasource - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath { static NSString *cellId = @\"cellId\"; UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellId]; if (!cell) { cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellId]; } President *president; if (self.searchController.active) { president = [self.filteredPresidents objectAtIndex:indexPath.row]; } else { president = [self.presidents objectAtIndex:indexPath.row]; } cell.textLabel.text = [NSString stringWithFormat:@\"%@ %@\", president.firstName, president.lastName]; return cell; } #pragma mark - SearchController delegate - (void)updateSearchResultsForSearchController:(UISearchController *)searchController { NSString *searchString = [self.searchController.searchBar text]; NSPredicate *predicate = [NSPredicate predicateWithFormat:@\"firstName CONTAINS[cd] %@ OR lastName CONTAINS[cd] %@\", searchString, searchString]; self.filteredPresidents = [self.presidents filteredArrayUsingPredicate:predicate]; //åˆ·æ–°è¡¨æ ¼ [self.mTableView reloadData]; } - (void)didReceiveMemoryWarning { [super didReceiveMemoryWarning]; // Dispose of any resources that can be recreated. } @end  å®ç°æ•ˆæœ ","description":"","tags":["iOS","UITableView","æœç´¢æ "],"title":"UITableViewä½¿ç”¨ç®€å•è¿›é˜¶(ä¸€):æœç´¢æ ","uri":"/posts/uitableviewadvanced01/"},{"categories":null,"content":"è¦å®ç°tableviewçš„æœç´¢æ ï¼Œå®ç°æ–¹æ³•æœ‰ä¸¤ç§ï¼šç¬¬ä¸€ç§æ˜¯UISearchBarå’ŒUIDisplayControllerç»“åˆèµ·æ¥å®ç°ï¼Œå¦ä¸€ç§æ˜¯é€šè¿‡UISearchControllerå®ç°ã€‚è¿™é‡Œåªä»‹ç»ç¬¬ä¸€ç§ï¼š\næ³¨æ„: UISearchBarå’ŒUISearchDisplayåªæ¨èiOS8.0ä¹‹å‰ä½¿ç”¨ã€‚ å…³äºUISearchControllerçš„ä½¿ç”¨è¯·è·³è½¬è‡³ï¼š UITableViewä½¿ç”¨è¿›é˜¶(ä¸€):æœç´¢æ \nä½¿ç”¨çš„åè®® éœ€è¦ä½¿ç”¨å››ä¸ªåè®®ï¼Œåˆ†åˆ«æ˜¯\n\u003cUITableViewDelegate, UITableViewDataSource, UISearchBarDelegate, UISearchDisplayDelegate\u003e\nå¤´æ–‡ä»¶ ViewController.h #import \u003cUIKit/UIKit.h\u003e @interface ViewController : UIViewController @property (nonatomic, strong) UITableView *mTableView; //æœç´¢ç»“æœ @property (nonatomic, strong) NSArray *filterData; //å…¨éƒ¨æ•°æ® @property (nonatomic, strong) NSMutableArray *allData; @property (nonatomic, retain) UISearchDisplayController *searchDisplayController; @end  å®ç°æ–‡ä»¶ ViewController.m #import \"ViewController.h\" @interface ViewController () \u003cUITableViewDelegate, UITableViewDataSource, UISearchBarDelegate, UISearchDisplayDelegate\u003e @end @implementation ViewController - (void)viewDidLoad { [super viewDidLoad]; //åˆå§‹åŒ–æ•°æ® int count = 100; self.allData = [NSMutableArray arrayWithCapacity:count]; for (int i = 0; i \u003c count; i ++) { [self.allData addObject:[NSString stringWithFormat:@\"ç¬¬%dè¡Œ\", i]]; } //å®šä¹‰tableview CGRect appFrame = [[UIScreen mainScreen] bounds]; self.mTableView = [[UITableView alloc] initWithFrame:CGRectMake(0, 20, appFrame.size.width, appFrame.size.height - 20) style:UITableViewStylePlain]; self.mTableView.delegate = self; self.mTableView.dataSource = self; [self.view addSubview:self.mTableView]; //å®šä¹‰UISearchBar UISearchBar *mySearchBar = [[UISearchBar alloc] init]; mySearchBar.delegate = self; [mySearchBar setAutocapitalizationType:UITextAutocapitalizationTypeNone]; [mySearchBar sizeToFit]; self.mTableView.tableHeaderView = mySearchBar; //å®šä¹‰UISearchDisplayController self.searchDisplayController = [[UISearchDisplayController alloc] initWithSearchBar:mySearchBar contentsController:self]; self.searchDisplayController.delegate = self; [self.searchDisplayController setSearchResultsDataSource:self]; [self setSearchDisplayController:self.searchDisplayController]; } #pragma mark - UITableView Delegate - (NSInteger) numberOfSectionsInTableView:(UITableView *)tableView { return 1; } - (NSInteger) tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section { if (tableView == self.searchDisplayController.searchResultsTableView) { return [self.filterData count]; } else { return [self.allData count]; } } #pragma mark - UITableView DataSource - (UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath { static NSString *cellid = @\"cellid\"; UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellid]; if (!cell) { cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellid]; } if (tableView == self.searchDisplayController.searchResultsTableView) { cell.textLabel.text = [self.filterData objectAtIndex:indexPath.row]; } else { cell.textLabel.text = [self.allData objectAtIndex:indexPath.row]; } return cell; } #pragma mark - UISearchDisplayController - (BOOL) searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchString:(NSString *)searchString { NSPredicate *predicate = [NSPredicate predicateWithFormat:@\"SELF CONTAINS[cd] %@\", searchString]; self.filterData = [self.allData filteredArrayUsingPredicate:predicate]; return YES; } - (void)didReceiveMemoryWarning { [super didReceiveMemoryWarning]; // Dispose of any resources that can be recreated. } @end  å®ç°æ•ˆæœ ","description":"","tags":["iOS","UITableView","æœç´¢æ "],"title":"UISearchBarå’ŒUISearchDisplayControllerå®ç°æœç´¢æ ","uri":"/posts/uisearchbar-uisearchdisplaycontroller/"},{"categories":null,"content":"- (UIImage *) stretchableImageWithLeftCapWidth:(NSInteger)leftCapWidth topCapHeight:(NSInteger)topCapHeight  è¿™ä¸ªå‡½æ•°æ˜¯UIImageçš„ä¸€ä¸ªç±»å‡½æ•°ï¼Œå®ƒçš„åŠŸèƒ½æ˜¯åˆ›å»ºä¸€ä¸ªå†…å®¹å¯æ‹‰ä¼¸ï¼Œè€Œè¾¹è§’ä¸æ‹‰ä¼¸çš„å›¾ç‰‡ã€‚ä¸¤ä¸ªå‚æ•°çš„å«ä¹‰åˆ†åˆ«ä¸ºï¼šä¸æ‹‰ä¼¸åŒºåŸŸçš„å®½åº¦ã€ä¸æ‹‰ä¼¸åŒºåŸŸçš„é«˜åº¦ã€‚\næ ¹æ®è®¾ç½®çš„å®½åº¦å’Œé«˜åº¦ï¼Œåœ¨åƒç´ ç‚¹((leftCapWidth+1), (topCapWidth+1))å¼€å§‹å·¦å³æ‰©å±•å’Œä¸Šä¸‹æ‹‰ä¼¸ã€‚\næ³¨æ„ï¼š   å¯æ‹‰ä¼¸èŒƒå›´æ˜¯è·ç¦»leftCapWidth+1çš„é‚£ä¸€åˆ—åƒç´ å’ŒtopCapHeight+1çš„é‚£ä¸€æ¨ªæ’åƒç´ ã€‚ å¦‚æœè®¾ç½®å‚æ•°ä¸º10å’Œ5ï¼Œé‚£ä¹ˆï¼Œå›¾ç‰‡å·¦è¾¹10ä¸ªåƒç´ å’Œä¸Šè¾¹5ä¸ªåƒç´ åŒºåŸŸå†…ä¸ä¼šè¢«æ‹‰ä¼¸ã€‚è€Œä»(11, 5)å¼€å§‹æ‰©å±•å’Œæ‹‰ä¼¸ã€‚\n  åªæ˜¯å¯¹ä¸€ä¸ªåƒç´ è¿›è¡Œå¤åˆ¶åˆ°ä¸€å®šå®½åº¦ï¼Œè€Œå›¾åƒåé¢çš„å‰©ä½™éƒ¨åˆ†ä¹Ÿä¸ä¼šè¢«æ‹‰ä¼¸ã€‚\n //åŸå§‹å›¾ç‰‡ UIImage *image = [UIImage imageNamed:@\"yoububble.png\"] ; UIImageView *imageView1 = [[UIImageView alloc] initWithImage:image]; [imageView1 setFrame:CGRectMake(10, 60, 40, 40)]; [self.view addSubview:imageView1]; //æ‹‰ä¼¸åå›¾ç‰‡ UIImage *strechImage = [image stretchableImageWithLeftCapWidth:10 topCapHeight:10]; UIImageView *imageView2 = [[UIImageView alloc] initWithImage:strechImage]; [imageView2 setFrame:CGRectMake(10, 120, 300, 100)]; [self.view addSubview:imageView2];    ","description":"","tags":["iOS"],"title":"stretchableImageWithLeftCapWith:(NSInteger)leftCapWidth topCapHeight:(NSInteger)topCapHeight","uri":"/posts/stretchableimagewithleftcapwidth/"},{"categories":null,"content":"- (UILabel *) getLabelHeightFixedWithText: (NSString *) text { UIFont *font = [UIFont boldSystemFontOfSize: 12.0f]; int width = 225, height = 10000; NSMutableDictionary *attrs = [[NSMutableDictionary alloc] init]; [attrs setObject: font forKey: NSFontAttributeName]; CGRect size = [text boundingRectWithSize:CGSizeMake(width, height) options: NSStringDrawingUsesLineFragmentOrigin attributes: attrs context: nil]; UILabel *label = [[UILabel alloc] initWithFrame: CGRectMake(0, 0, size.size.width, size.size.height)]; label.numberOfLines = 0;//ä¸€å®šè¦è®¾ç½®è¡Œæ•°ä¸º0 label.font = font; label.lineBreakMode = NSLineBreakByWordWrapping; label.text = (text ? text : @\"\"); label.backgroundColor = [UIColor clearColor]; label.textColor = [UIColor blackColor]; return label; }  ","description":"","tags":["iOS","UILabel"],"title":"æ ¹æ®å­—æ•°è‡ªé€‚åº”é«˜åº¦çš„UILabel","uri":"/posts/uilabel-with-height-fixed/"},{"categories":null,"content":"ç®€ä»‹ åœ¨ç¼–å†™Webç¨‹åºæ—¶ï¼Œè¡¨å•çš„æäº¤è‹¥å¯†ç ä½¿ç”¨æ˜æ–‡æäº¤ä¼šååˆ†ä¸å®‰å…¨ï¼Œå› æ­¤åœ¨æµè§ˆå™¨ç«¯ä¹Ÿè¦å¯¹å¯†ç è¿›è¡ŒåŠ å¯†å¤„ç†ã€‚ä½†æ˜¯è‹¥åªæ˜¯åœ¨æµè§ˆå™¨ç«¯å¤„ç†äº†ï¼Œè€ŒæœåŠ¡å™¨æ²¡æœ‰å†ä¸€æ¬¡åŠ å¯†ï¼Œä¹Ÿæ˜¯ä¸å¦¥å½“çš„ï¼Œå› ä¸º\"ä¸­é—´äºº\"åªè¦è·å–äº†æµè§ˆå™¨ç«¯åŠ å¯†çš„å¯†ç ï¼Œä¸éœ€è¦è¿›è¡Œå¤„ç†ä¹Ÿèƒ½è¿›è¡Œç™»å½•ã€‚æ‰€ä»¥æˆ‘ä¸€èˆ¬çš„åšæ³•æ˜¯åœ¨å‰ç«¯åŠ å¯†ä¸€æ¬¡ï¼Œåœ¨æœåŠ¡å™¨å†åŠ å¯†ä¸€æ¬¡ã€‚å¯†ç åŠ ç›ï¼ˆsaltï¼‰çš„é—®é¢˜ç­‰æˆ‘å…ˆç ”ç©¶ä¸‹å†å†™ä¸€ä¸‹ã€‚è€Œæµè§ˆå™¨ç«¯åŠ å¯†ä¸€èˆ¬æˆ‘éƒ½ç”¨javascriptè¿›è¡ŒåŠ å¯†åå†æäº¤ã€‚ä¸‹é¢æ˜¯ç”¨javascriptç¼–å†™çš„base64åŠ å¯†ï¼Œmd5åŠ å¯†å’Œsha1åŠ å¯†ã€‚ä½¿ç”¨æ–¹æ³•ä¹Ÿæå…¶ç®€å•ï¼Œåªè¦åœ¨é¡µé¢å†…å¼•å…¥ç›¸åº”jsæ–‡ä»¶å³å¯ã€‚\nbase64åŠ è§£å¯† \u003c!DOCTYPE HTML\u003e \u003chtml\u003e \u003chead\u003e \u003cmeta charset=\"utf-8\"\u003e \u003ctitle\u003ebase64åŠ è§£å¯†\u003c/title\u003e \u003cscript type=\"text/javascript\" src=\"base64.js\"\u003e\u003c/script\u003e \u003cscript\u003e var base64 = new Base64(); //åŠ å¯† var base64encodeStg = base64.encode(\"hello world!\"); alert(\"base64encode:\" + base64encodeStg); //è§£å¯† var base64decodeStg = base64.decode(base64encodeStg); alert(\"base64decode:\" + base64decodeStg); \u003c/script\u003e \u003c/head\u003e \u003c/html\u003e  md5åŠ å¯† \u003c!DOCTYPE HTML\u003e \u003chtml\u003e \u003chead\u003e \u003cmeta charset=\"utf-8\"\u003e \u003ctitle\u003emd5åŠ å¯†\u003c/title\u003e \u003cscript type=\"text/javascript\" src=\"md5.js\"\u003e\u003c/script\u003e \u003cscript\u003e var hash = hex_md5(\"hello world!\"); alert(hash);\t\u003c/script\u003e \u003c/head\u003e \u003c/html\u003e  sha1åŠ å¯† ç›¸å¯¹äºå‰ä¸¤ä¸ªï¼Œsha1åŠ å¯†å¯èƒ½æ›´å®‰å…¨\n\u003c!DOCTYPE HTML\u003e \u003chtml\u003e \u003chead\u003e \u003cmeta charset=\"utf-8\"\u003e \u003ctitle\u003esha1åŠ å¯†\u003c/title\u003e \u003cscript type=\"text/javascript\" src=\"sha1.js\"\u003e\u003c/script\u003e \u003cscript\u003e var sha1 = hex_sha1(\"hello world!\"); alert(sha1); \u003c/script\u003e \u003c/head\u003e \u003c/html\u003e  ç›¸å…³æ–‡ä»¶ä¸‹è½½ base64.js | md5.js | sha1.js ç™¾åº¦ç½‘ç›˜åˆ†äº«\n","description":"","tags":["md5","base64","sha1","javascript","åŠ å¯†"],"title":"JSå®ç°å¯†ç åŠ å¯†(base64, md5, sha1)","uri":"/posts/javascript-md5-base64-sha1/"},{"categories":null,"content":"ç«™é•¿ä¹‹å®¶ï¼ˆChinaZ.comï¼‰ 3æœˆ4æ—¥æ¶ˆæ¯ï¼Œæ˜¨æ—¥å¼€å§‹ï¼Œå›½å†…çŸ¥åå›¾åºŠæœåŠ¡ç½‘ç«™è´´å›¾åº“é¦–é¡µå’ŒæœåŠ¡å™¨éƒ¨åˆ†åœ°åŒºå‡ºç°äº†æ— æ³•è®¿é—®çš„æƒ…å†µã€‚æ®ç«™é•¿ä¹‹å®¶äº†è§£ï¼Œè´´å›¾åº“å› è¢«æ£€æµ‹åˆ°éæ³•å†…å®¹ï¼Œé­åˆ°ç½‘ä¿¡åŠä¸‹ä»¤è¦æ±‚åŸŸåæœåŠ¡å•†æ˜“åä¸­å›½å°†åŸŸå**clientHoldï¼ˆé”å®šï¼‰**å¤„ç†ã€‚\næˆ‘åšå®¢ä¸Šé¢çš„å›¾ç‰‡ä¹Ÿå…¨éƒ½æ”¾åœ¨è´´å›¾åº“ä¸Šé¢çš„ï¼Œä»Šå¤©åˆšå›å½’åšå®¢å°±å‘ç°å›¾ç‰‡ä¸èƒ½è®¿é—®äº†ã€‚æŸ¥è¿‡ä¹‹åæ‰è´´å›¾åº“è¢«å…³é—­äº†ï¼Œä¸è¿‡æˆ‘è§‰å¾—å®˜æ–¹åº”è¯¥èƒ½è§£å†³å¥½è¿™ä¸ªäº‹æƒ…ï¼Œæ¯•ç«Ÿæ˜¯å›½å†…çŸ¥åå›¾åºŠæœåŠ¡ç½‘ç«™ï¼Œç”¨æˆ·æ•°é‡åº”è¯¥å¾ˆå¤šã€‚æˆ‘è§‰å¾—ä¼šç»™ç”¨æˆ·ä¸€ä¸ªæ»¡æ„çš„ç­”å¤çš„ã€‚è¦ä¸ç„¶æˆ‘åšå®¢é‡Œé¢çš„å›¾ç‰‡æ€ä¹ˆåŠå•Šã€‚æ‘”ï¼\n","description":"","tags":["è´´å›¾åº“","ç½‘ä¿¡åŠ","è®°å½•"],"title":"è´´å›¾åº“è¢«ç½‘ä¿¡åŠå…³é—­ å®˜æ–¹ï¼šè§£å†³éœ€è¦æ—¶é—´","uri":"/posts/tietuku-clienthold/"},{"categories":null,"content":"ä¸ºäº†ä½¿ä¿å­˜çš„å¯†ç æ›´å®‰å…¨ï¼Œ æˆ‘ä»¬åº”è¯¥å®ç°ä¸€ä¸ªNSStringçš„åˆ†ç±»ï¼Œä¸ºå¯†ç åˆ›å»ºä¸€ä¸ªMD5çš„å“ˆå¸Œå€¼ï¼Œè€Œä¸”å¹¶æŠŠå®ƒä¿å­˜åœ¨keychainä¸­ï¼›keychainæ˜¯åœ¨è®¾å¤‡ä¸­ä¿å­˜å…³é”®æ•°æ®çš„å”¯ä¸€å®‰å…¨çš„åœ°æ–¹ã€‚\nstep1. æ–°å»ºæ–‡ä»¶ æ–°å»ºæ–‡ä»¶ï¼Œåœ¨æ¨¡æ¿åˆ—è¡¨ä¸­é€‰æ‹©Objective-C Categoryé¡¹ã€‚å•å‡»NextæŒ‰é’®ï¼Œè¾“å…¥â€œMD5â€ä½œä¸ºè¿™ä¸ªåˆ›å»ºçš„åˆ†ç±»çš„åå­—ï¼Œç„¶ååœ¨CategoryOnä¸‹æ‹‰èœå•ä¸­é€‰æ‹©NSStringï¼Œè¡¨æ˜æ˜¯NSStringçš„Categoryã€‚\nstep2. å¤´æ–‡ä»¶ #import \u003cFoundation/Foundation.h\u003e @interface NSString (MD5) - (NSString *) MD5; @end  step3. æºæ–‡ä»¶ #import \"NSString+MD5.h\" #import \u003cCommonCrypto/CommonDigest.h\u003e @implementation NSString (MD5) - (NSString *) MD5{ //è½¬åŒ–ä¸ºUTF8æ ¼å¼å­—ç¬¦ä¸² const char *ptr = [self UTF8String]; //å¼€è¾Ÿä¸€ä¸ª16å­—èŠ‚æ•°ç»„ unsigned char md5Buffer[CC_MD5_DIGEST_LENGTH]; //è°ƒç”¨å®˜æ–¹å°è£…çš„åŠ å¯†æ–¹æ³•, å°†ptrå¼€å§‹çš„å­—ç¬¦ä¸²å­˜å‚¨åˆ°md5Buffer[]ä¸­ CC_MD5(ptr, strlen(ptr), md5Buffer); //è½¬æ¢ä½NSStringå¹¶è¿”å› NSMutableString *output = [NSMutableString stringWithCapacity: CC_MD5_DIGEST_LENGTH * 2]; for (int i = 0; i \u003c CC_MD5_DIGEST_LENGTH; i ++) { [output appendFormat: @\"%02x\", md5Buffer[i]]; } /* * `x`è¡¨ç¤ºåå…­è¿›åˆ¶ï¼Œ%02 æ„æ€æ˜¯ä¸è¶³ä¸¤ä½ç”¨0è¡¥é½ï¼Œå¦‚æœå¤šäº2ä½åˆ™ä¸å½±å“ * NSLog(\"%02x\", 0x666); //è¾“å‡º `666` * NSLog(\"%02x\", 0x3);\t//è¾“å‡º `03` */ return output; } @end ","description":"","tags":["iOS","åŠ å¯†","MD5"],"title":"iOS NSStringå­—ç¬¦ä¸²MD5åŠ å¯†","uri":"/posts/ios-md5/"},{"categories":null,"content":"ä¹‹å‰ä»æ¥å£è·å–æ•°æ®åè½¬æ¢ä¸ºNSDictionaryç„¶åæ‰§è¡ŒwriteToFileå°±å¯ä»¥å†™å…¥æ–‡ä»¶æˆåŠŸï¼Œæ˜¨å¤©åœ¨ä½¿ç”¨è±†ç“£ç”µå½±Apiæ—¶ï¼Œå‡ºç°äº†å‰å‡ æ¡è¯·æ±‚çš„æ•°æ®å†™å…¥ç¼“å­˜æˆåŠŸï¼Œä»æŸä¸€æ¬¡è¯·æ±‚å¼€å§‹å°±æ€»æ˜¯å†™å…¥ä¸æˆåŠŸã€‚å› ä¸ºæˆ‘æ˜¯ç”¨gcdæ–¹å¼è¯·æ±‚æ•°æ®çš„ï¼Œæˆ‘è¿˜ä»¥ä¸ºæ˜¯å› ä¸ºçº¿ç¨‹ç«äº‰çš„é—®é¢˜ï¼Œä½†æ˜¯å†™æ–‡ä»¶çš„åŸå­æ“ä½œæˆ‘è®¾ç½®çš„YESå•Šã€‚ç„¶åå†™è¿›ç¨‹é”è¯•ä¸€ä¸‹ï¼Œç„¶è€Œä»ç„¶å†™å…¥å¤±è´¥ï¼Œåæ¥æˆ‘ä¸ç”¨gcdä»¥ä¸ºèƒ½å¥½ï¼Œç»“æœè¿˜æ˜¯å†™å…¥å¤±è´¥ã€‚åæ¥ç¿»èµ„æ–™ï¼Œè¯´å¥½åƒå¦‚æœNSDictionaryä¸­æœ‰è‡ªå®šä¹‰çš„objectç±»å‹æ˜¯ä¸èƒ½å†™å…¥æ–‡ä»¶çš„ï¼Œæ¯”å¦‚åƒnullï¼Œå‘µå‘µã€‚ä½†æ˜¯æˆ‘æ‰¾äº†åŠå¤©ä¹Ÿæ²¡æ‰¾åˆ°é”™è¯¯æ‰€åœ¨ï¼Œç„¶åä¹Ÿä¸å¤ªå½±å“æ­£å¸¸ä½¿ç”¨ï¼Œå°±æš‚æ—¶æ”¾åœ¨ä¸€è¾¹äº†ã€‚\nç»“æœä»Šå¤©å‡ºé—®é¢˜äº†ï¼Œä¹‹å‰è·å–çš„æ˜¯ç”µå½±çš„åˆ—è¡¨ä¿¡æ¯ï¼Œä»Šå¤©è¦å†™ç”µå½±çš„è¯¦æƒ…é¡µä¿¡æ¯ã€‚å†™å¥½åä¸æ–­æµ‹è¯•ï¼Œç»“æœæœ‰ä¸€æ¡ç”µå½±ï¼Œä¸€ç‚¹è¿›å…¥è¯¦æƒ…å°±ä¼šå´©æºƒã€‚å¥½äº†ï¼Œè®¾ç½®å¥½æ–­ç‚¹ï¼Œä¸€æ­¥æ­¥æ’æŸ¥ï¼Œæœ€åNSLogå¯¼æ¼”å¤´åƒçš„urlStringæ—¶ï¼Œæ‰¾åˆ°äº†é—®é¢˜æ‰€åœ¨ï¼Œå¯¼æ¼”çš„å¤´åƒå›¾ç‰‡çš„urlä¸ºnullï¼ç»ˆäºæ‰¾åˆ°äº†é—®é¢˜æ‰€åœ¨ã€‚é‚£ä¹ˆå¯ä»¥è§£å†³äº†â€¦\næˆ‘è·å–äº†è¯¥æ¡ç›®ç”µå½±çš„idå·ï¼Œç„¶ååœ¨æµè§ˆå™¨ä¸­è·å–äº†ä»–çš„jsonæ•°æ®ï¼Œæœä¸å…¶ç„¶ï¼Œå°±æ˜¯è¿™ä¸ªç”µå½±!ã€Šç«äº‘ç«¯ã€‹!\nç„¶è€Œæˆ‘å¹¶æ²¡æœ‰æƒ³åˆ°æœ‰è¿™ä¹ˆå¤šnullã€‚\nç»è¿‡ç™¾åº¦ï¼Œå¥½åƒè¦å†™æ–‡ä»¶ï¼ŒNSDictionaryé‡Œé¢çš„objectå¿…é¡»æ˜¯NSStringï¼ŒNSDataï¼ŒNSNumberï¼ŒNSDateï¼ŒNSArrayï¼ŒNSDictionaryä¸­çš„æ•°æ®ç±»å‹ã€‚ä¸è¿‡æˆ‘çŸ¥é“ï¼Œå«æœ‰nullæ˜¯ä¸‡ä¸‡ä¸èƒ½çš„ï¼Œæ··è›‹ã€‚\nè§£å†³æ–¹æ¡ˆï¼šNSDictionary -\u003e NSDate NSDictionaryå†™æ–‡ä»¶ä¹‹å‰ï¼Œå¯ä»¥æŠŠå®ƒè½¬æ¢æˆNSDataç±»å‹çš„æ•°æ®ï¼Œå†æ‰§è¡Œå†™æ–‡ä»¶æ“ä½œã€‚ ä»æ–‡ä»¶è¯»å–æ—¶æŠŠè¯»å–å‡ºçš„NSDataè½¬æ¢ä¸ºNSDictionaryå°±å¯ä»¥äº†ã€‚\nç”¨åˆ°çš„æ–¹æ³• NSDictionary -\u003e NSData:\nNSData *data = [NSKeyedArchiver archivedDataWithRootObject:dictionary];  NSData -\u003e NSDictionary:\nNSDictionary *dictionary = (NSDictionary *)[NSKeyedUnarchiver unarchiveObjectWithData:data];  æ˜¨å¤©çš„é—®é¢˜è§£å†³äº†ï¼Œè¿™æ ·å†™æ—¶å€™ï¼Œæ¯ä¸€æ¬¡éƒ½èƒ½å†™å…¥ç¼“å­˜æ–‡ä»¶æˆåŠŸã€‚\nä»Šå¤©çš„æ¶‰åŠåˆ°NSDictionaryå€¼çš„è·å–çš„éƒ¨åˆ†ï¼Œæˆ‘éƒ½åŠ äº†ä¸€ä¸ªåˆ¤æ–­ if([theValue isKindOfClass:[NSNull class]])ï¼Œç„¶åè¿›è¡Œç›¸åº”å¤„ç†å°±å¯ä»¥äº†ã€‚\nè¿™ä¸ªæ—¶iOSçš„ä¸€ä¸ªå½’æ¡£æ–¹æ³•ï¼Œä¸ä»…ä»…èƒ½å½’æ¡£nullï¼Œè‡ªå®šä¹‰çš„ç±»å‹ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚å…·ä½“å¯ä»¥å‚è§å°ç™½çŒªjianjiançš„åšå®¢-ä½¿ç”¨NSKeyedArchiverå½’æ¡£\næ„Ÿæƒ³ ç”Ÿæ´»ä¸­æˆ–è€…ç¨‹åºå¼€å‘ä¸­ï¼Œé‡åˆ°äº†é—®é¢˜ä¸ä¸€å®šéè¦ç«‹é©¬è§£å†³ï¼Œå¦‚æœæ­»é’»ç‰›è§’å°–å„¿å¯èƒ½ä¸€ç›´éƒ½è§£å†³ä¸äº†ï¼Œé‚£æ—¶åªèƒ½æµªè´¹æ—¶é—´ã€‚å¦‚æœæš‚æ—¶æ”¾æ”¾ï¼Œä¼‘æ¯ä¸€ä¼šï¼Œå†å›æ¥æƒ³è§£å†³åŠæ³•å¯èƒ½å°±èƒ½æƒ³åˆ°è§£å†³æ–¹æ¡ˆã€‚å°±åƒä»Šå¤©æˆ‘è§£å†³æˆ‘çš„é—®é¢˜ä¸€æ ·ï¼Œå®Œå…¨æ˜¯æœºç¼˜å·§åˆã€‚åŒæ—¶æˆ‘ä»¬ä¹Ÿåº”è¯¥å‘ç°ï¼Œå¦‚æœæƒ³åšå‡ºå¥½çš„è½¯ä»¶ï¼Œå‰æœŸå¼€å‘çš„æŠ•å…¥å¾ˆé‡è¦ï¼Œä½†æ˜¯åæœŸçš„æµ‹è¯•ä¹Ÿå¾ˆé‡è¦ã€‚åŠŸèƒ½åšå®Œä¹‹åæˆ‘ä¹Ÿæ˜¯ç‚¹å‡»æµ‹è¯•äº†ä¸è¯´å‡ ç™¾æ¬¡ï¼Œå‡ åæ¬¡ä¹Ÿæ˜¯æœ‰äº†æ‰å‘ç°äº†è¿™ä¸ªé—®é¢˜ã€‚\næœ€åç»™å¤§å®¶çœ‹ä¸‹æˆ‘åšçš„ç”µå½±å½±è®¯ï¼Œå˜¿å˜¿ï¼Œä½¿ç”¨äº†è±†ç“£ç”µå½±Apiã€‚\n","description":"","tags":["iOS"],"title":"NSDictionaryå«æœ‰nullå¯¼è‡´å†™æ–‡ä»¶(writeToFile)å¤±è´¥(è±†ç“£ç”µå½±Apiè¿”å›Jsonæ•°æ®ä¸­å«æœ‰null)","uri":"/posts/nsdictionarywritetofilefailedbecauseofcontainsnull/"},{"categories":null,"content":"ä¸Šä¸€ç¯‡å·²ç»å®ç°äº†é¡µé¢çš„å¸ƒå±€ï¼Œè¿™ä¸€ç¯‡æˆ‘ä»¬æ¥å®ç°ç•Œé¢çš„é€»è¾‘å˜æ¢ã€‚ä¸»è¦ç”¨åˆ°çš„æ˜¯scollViewçš„ä¸¤ä¸ªä»£ç†æ–¹æ³•ã€‚æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹æ•ˆæœã€‚\n1.å®ç°ç‚¹å‡»é¡¶éƒ¨æŒ‰é’®åˆ‡æ¢åº•éƒ¨è¯¦æƒ…é¡µé¢ ç»™é¡¶éƒ¨itemsçš„æŒ‰é’®æ·»åŠ target åœ¨- (void) addFirstScrollViewOnView æ–¹æ³•ä¸­çš„forå¾ªç¯ä¸­ï¼Œä¸ºæ¯ä¸ªbuttonæ·»åŠ ä¸€ä¸ªtargetï¼Œç”¨äºç›‘å¬ç‚¹å‡»æŒ‰é’®çš„äº‹ä»¶ã€‚\n [itemButton addTarget:self action:@selector(itemButtonClicked:) forControlEvents:UIControlEventTouchUpInside];  æ·»åŠ ç›‘å¬æ–¹æ³• æˆ‘ä»¬åº”è¯¥çŸ¥é“å½“ç‚¹å‡»é¡¶éƒ¨itemæŒ‰é’®æ—¶ï¼Œåº•éƒ¨è¯¦æƒ…é¡µåº”è¯¥åšç›¸åº”çš„åˆ‡æ¢ï¼ŒåŒæ—¶æŒ‰é’®æ ·å¼ä¹Ÿæ”¹å˜ã€‚ å¤§å®¶å¯èƒ½æ³¨æ„åˆ°äº†éœ€è¦ç”¨åˆ°æŒ‰é’®çš„tagå€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬åŒæ ·åœ¨ä¸Šä¸€æ­¥çš„æ–¹æ³•çš„forå¾ªç¯ä¸­ä¸ºæ¯ä¸ªæŒ‰é’®è®¾ç½®tagå€¼ã€‚\nitemButton.tag = 100 + i;//è®¾ç½®buttonçš„tagå€¼  åŒæ—¶ï¼Œéœ€è¦æ·»åŠ ä¸€ä¸ªå®ä¾‹å˜é‡ï¼š\n //è®°å½•å½“å‰è¢«ç‚¹å‡»çš„æŒ‰é’®tag @property (nonatomic, assign) NSInteger currentButtonTag;  **(é‡è¦)**å¹¶åœ¨ä¸Šä¸€æ­¥æ–¹æ³•çš„æœ€åä¸ºå®ƒè®¾ç½®åˆå§‹å€¼ä¸º100ï¼Œä¹Ÿå°±æ˜¯å½“å‰ç‚¹å‡»çš„æŒ‰é’®ä¸ºç¬¬ä¸€ä¸ªã€‚\ntipsï¼šä¸ä»1å¼€å§‹è®¾ç½®tagå€¼çš„åŸå› æ˜¯å› ä¸ºå‰100å¯èƒ½æœ‰ç³»ç»Ÿçš„æ§ä»¶å ç”¨ scrollViewè¯¦æƒ…é¡µåˆ‡æ¢ï¼šè·å–å½“å‰æŒ‰é’®çš„tagå€¼ï¼Œè®¡ç®—åç§»é‡\n- (void) itemButtonClicked:(UIButton *)button { //**1.åç§»åº•éƒ¨è¯¦æƒ…scrollView NSInteger buttonTag = button.tag - 100;//è·å–ç‚¹å‡»æŒ‰é’®çš„tag self.secondScrollView.contentOffset = CGPointMake(buttonTag * KSCREEN_WIDTH, 0);//è®¾ç½®åº•éƒ¨scrollviewçš„å†…å®¹åç§»é‡ //**2.æ¢å¤å‰ä¸€ä¸ªè¢«ç‚¹å‡»çš„æŒ‰é’®çš„æ ·å¼ UIButton *preClickedButton = (UIButton *)[self.view viewWithTag:self.currentButtonTag]; preClickedButton.titleLabel.font = [UIFont systemFontOfSize:14.0f]; [preClickedButton setTitleColor:[UIColor colorWithRed:0.4 green:0.4 blue:0.4 alpha:1.0] forState:UIControlStateNormal];//æ ‡é¢˜é¢œè‰² //**3.è®¾ç½®å½“å‰ç‚¹å‡»æŒ‰é’®æ ·å¼ button.titleLabel.font = [UIFont systemFontOfSize:18.0f]; [button setTitleColor:[UIColor colorWithRed:1.0 green:0.3 blue:0.3 alpha:1.0f] forState:UIControlStateNormal]; //**4.æ”¹å˜å½“å‰ç‚¹å‡»æŒ‰é’®çš„tagå€¼ self.currentButtonTag = buttonTag + 100; }  å®Œæˆè¿™ä¸€æ­¥ï¼Œå½“ä½ ç‚¹å‡»é¡¶éƒ¨æŒ‰é’®çš„æ—¶å€™ï¼Œä½ å°±å¯ä»¥çœ‹åˆ°é¡¶éƒ¨æŒ‰é’®æ ·å¼çš„æ”¹å˜å’Œåº•éƒ¨è¯¦æƒ…é¡µé¢çš„åˆ‡æ¢ã€‚\n2.å®ç°æ»šåŠ¨åº•éƒ¨è¯¦æƒ…é¡µé¡¶éƒ¨æŒ‰é’®å­—ä½“åˆ‡æ¢ æ·»åŠ scrollViewçš„ä»£ç† æ·»åŠ ä»£ç†\n@interface ViewController () \u003cUIScrollViewDelegate\u003e  åœ¨- (void) addSecondScrollViewOnView æ–¹æ³•ä¸­è®¾ç½®secondScrollViewçš„ä»£ç†ä¸ºselfã€‚è¿™æ­¥ä¸è¦å¿˜è®°äº†ã€‚\nsecondScrollView.delegate = self;  å®ç°scrollView çš„ä»£ç†æ–¹æ³• - (void) scrollViewDidScroll:(UIScrollView *)scrollViewï¼› åœ¨è¿™ä¸€æ­¥ï¼Œæˆ‘ä»¬è¦å®ç°æ»šåŠ¨æ—¶ï¼Œé¡¶éƒ¨itemsçš„æŒ‰é’®å­—ä½“å¤§å°å’Œé¢œè‰²çš„æ”¹å˜ã€‚\n\t//æ­£åœ¨æ»‘åŠ¨è°ƒç”¨çš„ä»£ç†æ–¹æ³• - (void) scrollViewDidScroll:(UIScrollView *)scrollView { //è·å–å½“å‰ç¬¬äºŒä¸ªscrollViewçš„åç§»é‡ CGFloat secondScrollViewContentOffsetX = scrollView.contentOffset.x; //è·å–é€‰ä¸­æŒ‰é’®çš„åºå· int buttonTag = (secondScrollViewContentOffsetX) / KSCREEN_WIDTH; //è®¡ç®—æ‰‹æŒ‡æ»‘åŠ¨äº†å¤šå°‘è·ç¦» CGFloat fingerDistance = secondScrollViewContentOffsetX - KSCREEN_WIDTH * buttonTag; //è·å–åˆ°ä¸‹ä¸€ä¸ªæŒ‰é’®ï¼Œå¹¶æ”¹å˜å…¶å­—ä½“å¤§å°å’Œé¢œè‰²ï¼Œé€æ¸æ”¾å¤§ï¼ˆæ ¹æ®æ‰‹æŒ‡æ»‘åŠ¨çš„è·ç¦»åŠ¨æ€æ”¹å˜ï¼‰ UIButton *buttonNext = (UIButton *)[self.view viewWithTag:(buttonTag + 100 + 1)]; buttonNext.titleLabel.font = [UIFont systemFontOfSize:(14.0 + fingerDistance * 4 / (KSCREEN_WIDTH))]; [buttonNext setTitleColor:[UIColor colorWithRed:(0.4f + 3 * fingerDistance / (KSCREEN_WIDTH * 5)) green:0.3 blue:0.3 alpha:1.0] forState:UIControlStateNormal]; //åŒæ ·æ–¹æ³•è·å–åˆ°å½“å‰æŒ‰é’®ï¼Œå¹¶æ”¹å˜å…¶å­—ä½“å¤§å°å’Œé¢œè‰²æ¢å¤å›åŸæ¥æ ·å¼ï¼Œé€æ¸ç¼©å°ï¼ˆæ ¹æ®æ‰‹æŒ‡æ»‘åŠ¨çš„è·ç¦»åŠ¨æ€æ”¹å˜ï¼‰ UIButton *buttonCurr = (UIButton *)[self.view viewWithTag:(buttonTag + 100)]; buttonCurr.titleLabel.font = [UIFont systemFontOfSize:(18.0 - fingerDistance * 4 / (KSCREEN_WIDTH))]; [buttonCurr setTitleColor:[UIColor colorWithRed:(1.0f - 3 * fingerDistance / (KSCREEN_WIDTH * 5)) green:0.3 blue:0.3 alpha:1.0] forState:UIControlStateNormal]; }  è¿™é‡Œå¯ä»¥çœ‹åˆ°ä¸‹ä¸€ä¸ªæŒ‰é’®çš„å­—ä½“åŠ¨æ€æ”¹å˜ï¼Œè®¡ç®—æ–¹æ³•å…¶å®éå¸¸ç®€å•ã€‚ è®¾æ‰‹æŒ‡æ»‘åŠ¨è·ç¦»ä¸ºxï¼Œå­—ä½“å¤§å°ä¸ºyã€‚é‚£ä¹ˆæˆ‘ä»¬æœ‰ä¸¤ä¸ªå€¼ (0,14), (KSCREEN_WIDTH, 18)ã€‚ ç„¶ååˆ—äºŒå…ƒä¸€æ¬¡æ–¹ç¨‹ç»„ï¼Œå°±å¯ä»¥å¾—åˆ° a å’Œ bã€‚ æˆ‘è¿™é‡Œè§£å¾— a = 4/KSCREEN_WIDTD , b = 14\nå½“å‰æŒ‰é’®çš„æ”¹å˜äº¦ç„¶ã€‚åªæ˜¯ä¸¤ä¸ªç‚¹å˜ä¸º (KSCREEN_WIDTH, 14), (0, 18) è®¡ç®—å¾—åˆ° a = ï¼(4/KSCREEN_WIDTH), b = 18\né¢œè‰²å¤§å®¶è®¡ç®—æ–¹å¼ç›¸ä¼¼ï¼Œä¸å†èµ˜è¿°ã€‚\n3.ä½¿é¡¶éƒ¨scrollViewéšåº•éƒ¨scrollViewæ»‘åŠ¨è€Œæ»šåŠ¨ æˆ‘ä»¬æ³¨æ„çœ‹ç½‘æ˜“æ–°é—»å®¢æˆ·ç«¯ï¼Œå®ƒåº•éƒ¨scrollViewæ»šåŠ¨ä¹‹åï¼Œé¡¶éƒ¨çš„scrollViewä¹Ÿä¼šéšä¹‹æ»šåŠ¨ï¼Œå¹¶ä¸”é™¤äº†å¼€å¤´æˆ–è€…æœ«å°¾çš„å‡ ä¸ªæŒ‰é’®ï¼Œå®ƒå½“å‰æ‰€åœ¨çš„æ–°é—»ç±»å‹å§‹ç»ˆåœ¨å±å¹•ä¸­é—´ã€‚å¹¶ä¸”é¡¶éƒ¨çš„æ»šåŠ¨æ€»æ˜¯åœ¨åº•éƒ¨æ»‘åŠ¨ç»“æŸä¹‹åï¼Œæ‰€ä»¥æˆ‘ä»¬å®ç°scrollViewçš„ä»£ç†æ–¹æ³•\t- (void) scrollViewDidEndDecelerating:(UIScrollView *)scrollView \n//æ»‘åŠ¨ç»“æŸè°ƒç”¨çš„ä»£ç†æ–¹æ³• - (void) scrollViewDidEndDecelerating:(UIScrollView *)scrollView { //**1.è·å–é€‰ä¸­è¯¦æƒ…é¡µå¯¹åº”çš„é¡¶éƒ¨button //ç§»åŠ¨é¡¶éƒ¨é€‰ä¸­çš„æŒ‰é’® CGFloat secondScrollViewContentOffsetX = scrollView.contentOffset.x; //è·å–é€‰ä¸­æŒ‰é’®çš„åºå· int buttonTag = (secondScrollViewContentOffsetX) / KSCREEN_WIDTH; //æ ¹æ®æŒ‰é’®å·ç è·å–åˆ°é¡¶éƒ¨çš„æŒ‰é’® UIButton *buttonCurr = (UIButton *)[self.view viewWithTag:(buttonTag + 100)]; //**2.(é‡è¦)è®¾ç½®å½“å‰é€‰ä¸­çš„æŒ‰é’®å·ã€‚å¦‚è‹¥ä¸å†™ï¼Œå°†å¯¼è‡´æ»‘åŠ¨åå†ç‚¹å‡»é¡¶éƒ¨æŒ‰é’®ï¼Œä¸Šä¸€ä¸ªæŒ‰é’®é¢œè‰²ï¼Œå­—ä½“ä¸ä¼šæ”¹å˜ self.currentButtonTag = buttonTag + 100; //**3.å§‹ç»ˆä¿æŒé¡¶éƒ¨é€‰ä¸­æŒ‰é’®åœ¨ä¸­é—´ä½ç½® //æ³¨æ„ä¸€ï¼šå¼€å§‹çš„å‡ ä¸ªæŒ‰é’®ï¼Œå’Œæœ«å°¾çš„å‡ ä¸ªæŒ‰é’®å¹¶ä¸éœ€è¦ä¸€ç›´ä¿æŒä¸­é—´ã€‚ //æ³¨æ„äºŒï¼šå¯¹äºå·²ç»æ”¾ç½®åœ¨firstScrollViewä¸­çš„æŒ‰é’®ï¼Œå®ƒçš„centeræ˜¯ç›¸å¯¹äºscrollViewçš„contentè€Œè¨€çš„ï¼Œæ³¨æ„å¹¶ä¸æ˜¯ç›¸å¯¹äºself.viewçš„boundsè€Œè¨€çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ”¾ç½®å¥½æŒ‰é’®ï¼Œå®ƒçš„centerå°±ä¸ä¼šå†æ”¹å˜ //å¦‚æœæ˜¯é¡¶éƒ¨scrollViewå³å°†åˆ°æœ«å°¾çš„å‡ ä¸ªæŒ‰é’®ï¼Œè®¾ç½®åç§»é‡ï¼Œç›´æ¥return if (buttonCurr.center.x + KSCREEN_WIDTH * 0.5 \u003e self.firstScrollView.contentSize.width) { [UIView animateWithDuration:0.3 animations:^{ self.firstScrollView.contentOffset = CGPointMake(self.firstScrollView.contentSize.width - KSCREEN_WIDTH, 0); }]; return; } //å¦‚æœæ˜¯é¡¶éƒ¨scrollViewå¼€å¤´çš„å‡ ä¸ªæŒ‰é’®ï¼Œè®¾ç½®åç§»é‡ï¼Œç›´æ¥return if (buttonCurr.center.x \u003c KSCREEN_WIDTH * 0.5) { [UIView animateWithDuration:0.3 animations:^{ self.firstScrollView.contentOffset = CGPointMake(0, 0); }]; return; } //å¦‚æœæ˜¯ä¸­é—´å‡ ä¸ªæŒ‰é’®çš„æƒ…å†µ if (buttonCurr.center.x \u003e (KSCREEN_WIDTH * 0.5)) { [UIView animateWithDuration:0.3 animations:^{ self.firstScrollView.contentOffset = CGPointMake(buttonCurr.center.x - self.view.center.x, 0); }]; } }  è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯æˆ‘æ³¨é‡Šé‡Œé¢çš„ç¬¬2æ­¥å’Œç¬¬3æ­¥ã€‚ ç¬¬2æ­¥ä¸€å®šè¦å†™ï¼Œå¦åˆ™å¯¼è‡´å…ˆæ»‘åŠ¨åº•éƒ¨scrollViewï¼Œå†ç‚¹å‡»é¡¶éƒ¨scrollViewçš„buttonï¼Œå‡ºç°ä¹‹å‰çš„é‚£ä¸ªbuttonæ ·å¼ä¸æ¢å¤çš„æƒ…å†µã€‚ ç¬¬3æ­¥ï¼Œæ³¨æ„å‰å‡ ä¸ªæŒ‰é’®å’Œåå‡ ä¸ªæŒ‰é’®ä½ç½®çš„åˆ¤æ–­ï¼Œå¦‚æœä¸€å‘³ä¿æŒæŒ‰é’®åœ¨ä¸­é—´ï¼Œå°±ä¼šå‡ºç°é¡¶éƒ¨çš„offsetè¿‡å¤šï¼Œè€Œåé¢å‡ºç°ç©ºç™½ï¼Œå¤§å®¶å¯ä»¥ç®€å•å°è¯•ä¸€ä¸‹ã€‚\næ•´ä¸ªæ•ˆæœå°±å·²ç»å®Œæˆäº†ï½â˜ºï¸\n","description":"","tags":["iOS"],"title":"çº¯ä»£ç é«˜ä»¿ç½‘æ˜“æ–°é—»å®¢æˆ·ç«¯ä¸¤ä¸ªscrollViewè”åŠ¨ï¼ˆäºŒï¼‰ï¼šå®ç°ç•Œé¢é€»è¾‘å˜æ¢","uri":"/posts/twoscrollviewlinkage-2-businesslogic/"},{"categories":null,"content":"è‡ªå·±å†å¼€å‘appè¿‡ç¨‹ä¸­é‡åˆ°äº†è¿™æ ·é‚£æ ·çš„éœ€æ±‚ï¼Œå…¶ä¸­æœ‰ä¸€é¡¹æ˜¯æ–°é—»é¡µé¢ï¼Œéœ€è¦ä¸¤ä¸ªscrollViewè”åŠ¨ï¼Œä¸Šé¢çš„scrollViewæ˜¯æ–°é—»ç±»å‹ï¼Œä¸‹é¢scrollViewæ˜¯tableViewæ–°é—»æ ‡é¢˜ã€‚å¼€å‘è¿‡ç¨‹ä¸­æˆ‘å…¨éƒ¨éƒ½æ˜¯ç”¨ä»£ç å¸ƒå±€çš„ï¼Œå› ä¸ºè‡ªå·±æ˜¯æ–°æ‰‹ï¼Œä¸çŸ¥é“åˆ°åº•æ˜¯ç”¨ä»£ç å†™æ¯”è¾ƒæ–¹ä¾¿è¿˜æ˜¯ç”¨storyBoardæ›´æ–¹ä¾¿ï¼Œä½†æ˜¯æ„Ÿè§‰æ‰‹å†™ä»£ç é€‚åº”å±å¹•ä¸Šæ›´å®¹æ˜“ä¸Šæ‰‹å§ã€‚éœ€æ±‚å®ç°ä¹‹åç°åœ¨æ‹¿å‡ºæ¥ç®€å•æ•´ç†ä¸€ä¸‹ï¼Œæ–¹ä¾¿è‡ªå·±æ—¥åæŸ¥çœ‹ï¼Œä¹Ÿç»™åæ¥è€…ä»¥å‚è€ƒã€‚å› ä¸ºåˆšåˆšå¼€å§‹å­¦ï¼Œç”¨åˆ°çš„éƒ½æ˜¯äº›ç®€å•çš„æ–¹æ³•ï¼Œä¹Ÿå¯èƒ½ä¼šå‡ºé”™ï¼Œå¦‚æœæœ‰ä»€ä¹ˆä¸è¶³ï¼Œè¯·ç•™è¨€ç»™æˆ‘æŒ‡å‡ºã€‚è°¢è°¢ï½\nç°åœ¨å¼€å§‹æ­£é¢˜ï¼š æœ¬æ–‡æ˜¯ç¬¬ä¸€ç¯‡ï¼Œå…ˆæ˜¯ç®€å•çš„é¡µé¢å¸ƒå±€ï¼Œé¦–å…ˆæˆ‘ä»¬çœ‹ä¸€ä¸‹å¸ƒå±€ä¹‹åçš„æ•ˆæœï¼š\n1.å®å®šä¹‰ //å±å¹•çš„å®½å’Œé«˜ #define KSCREEN_HEIGHT [UIScreen mainScreen].bounds.size.height #define KSCREEN_WIDTH [UIScreen mainScreen].bounds.size.width //æœ€é¡¶éƒ¨çŠ¶æ€æ çš„é«˜åº¦ #define KSTATUS_HEIGHT 20 //é¡¶éƒ¨itemsçš„scrollViewçš„é«˜åº¦ #define KFIRST_SCROLLVIEW_HEIGHT 30 //æ ¹æ®è®¡ç®—ï¼Œå¾—åˆ°åº•éƒ¨è¯¦æƒ…scrollViewçš„é«˜åº¦ #define KSECOND_SCROLLVIEW_HEIGHT (KSCREEN_HEIGHT - KSTATUS_HEIGHT - KFIRST_SCROLLVIEW_HEIGHT) //é¡¶éƒ¨scrollViewæ¯ä¸ªitemæŒ‰é’®çš„å®½åº¦ #define KFIRST_SCROLLVIEW_ITEM_WIDTH 55  2.é¦–å…ˆå®šä¹‰éœ€è¦ç”¨åˆ°çš„å˜é‡ @interface ViewController () //é¡¶éƒ¨itemsçš„scrollView @property (nonatomic, weak) UIScrollView *firstScrollView; //åº•éƒ¨è¯¦æƒ…scrollView @property (nonatomic, weak) UIScrollView *secondScrollView; //itemç±»å‹çš„æ•°ç»„ @property (nonatomic, strong) NSArray *itemsTitlesArray; //ä¸ºäº†æ–¹ä¾¿ï¼Œå®šä¹‰ä¸€ä¸ªåŒ…å«é¢œè‰²çš„NSArrayï¼ˆè‡ªè¡Œå–èˆï¼‰ @property (nonatomic, strong) NSArray *colorArray; @end  3.æ‡’åŠ è½½ #pragma mark - lazy load //å®šä¹‰itemsçš„æ ‡é¢˜ - (NSArray *) itemsTitlesArray { if (!_itemsTitlesArray) { _itemsTitlesArray = [NSArray arrayWithObjects:@\"çƒ­ç‚¹æ–°é—»\", @\"æ–°é—»å¿«è®¯\", @\"é€šçŸ¥å…¬å‘Š\", @\"é™¢ç³»é€šçŸ¥\", @\"äººç‰©é£é‡‡\", nil]; } return _itemsTitlesArray; } //é¢œè‰²æ•°ç»„ - (NSArray *) colorArray { if (!_colorArray) { _colorArray = [NSArray arrayWithObjects: [UIColor colorWithRed:240.0/255.0 green:89.0/255.0 blue:136.0/255.0 alpha:1.0], [UIColor colorWithRed:0.0/255.0 green:179.0/255.0 blue:155.0/255.0 alpha:1.0], [UIColor colorWithRed:244.0/255.0 green:131.0/255.0 blue:69.0/255.0 alpha:1.0], [UIColor colorWithRed:241.0/255.0 green:90.0/255.0 blue:102.0/255.0 alpha:1.0], [UIColor colorWithRed:0.0/255.0 green:179.0/255.0 blue:155.0/255.0 alpha:1.0], [UIColor colorWithRed:255.0/255.0 green:223.0/255.0 blue:104.0/255.0 alpha:1.0], nil]; } return _colorArray; }  4.æ·»åŠ é¡¶éƒ¨itemsçš„scrollView //æ·»åŠ ç¬¬ä¸€ä¸ªscrollview - (void) addFirstScrollViewOnView { //**1.è®¾ç½®é¡¶éƒ¨ç±»å‹scrollView UIScrollView *firstScrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, KSTATUS_HEIGHT, KSCREEN_WIDTH, KFIRST_SCROLLVIEW_HEIGHT)]; firstScrollView.bounces = NO;//ç¦æ­¢åå¼¹ firstScrollView.showsHorizontalScrollIndicator = NO;//ç¦æ­¢æ˜¾ç¤ºæ°´å¹³æ»šåŠ¨æ¡ //è®¾ç½®scrollViewçš„å†…å®¹å¤§å°ï¼Œå®½åº¦ä¸º å®å®šä¹‰é¡¶éƒ¨æŒ‰é’®çš„å®½åº¦ ï¼Š itemsæ•°ç»„çš„æ•°é‡ firstScrollView.contentSize = CGSizeMake(self.itemsTitlesArray.count * KFIRST_SCROLLVIEW_ITEM_WIDTH, KFIRST_SCROLLVIEW_HEIGHT); self.firstScrollView = firstScrollView; [self.view addSubview:firstScrollView];//æ·»åŠ åˆ°self.view //**2.ä¸ºç¬¬ä¸€ä¸ªscrollViewæ·»åŠ buttons for (int i = 0; i \u003c self.itemsTitlesArray.count; i ++) { UIButton *itemButton = [[UIButton alloc] initWithFrame:CGRectMake(i * KFIRST_SCROLLVIEW_ITEM_WIDTH, 0, KFIRST_SCROLLVIEW_ITEM_WIDTH, KFIRST_SCROLLVIEW_HEIGHT)];//æ³¨æ„å·¦è¾¹è·çš„å†™æ³• [itemButton setTitle:[self.itemsTitlesArray objectAtIndex:i] forState:UIControlStateNormal];//æ ‡é¢˜ itemButton.backgroundColor = [UIColor colorWithRed:0.97 green:0.97 blue:0.97 alpha:1.0];//èƒŒæ™¯é¢œè‰² [itemButton setTitleColor:[UIColor colorWithRed:0.4 green:0.4 blue:0.4 alpha:1.0] forState:UIControlStateNormal];//æ ‡é¢˜é¢œè‰² itemButton.titleLabel.font = [UIFont systemFontOfSize:14.0]; [firstScrollView addSubview:itemButton];//æ·»åŠ åˆ°ç¬¬ä¸€ä¸ªscrollView //å®šä¹‰ç¬¬ä¸€ä¸ªé¡¶éƒ¨itemçš„æŒ‰é’®æ ·å¼ if (i == 0) { itemButton.titleLabel.font = [UIFont systemFontOfSize:18.0f]; [itemButton setTitleColor:[UIColor colorWithRed:1.0 green:0.3 blue:0.3 alpha:1.0f] forState:UIControlStateNormal]; } } }  5.æ·»åŠ åº•éƒ¨è¯¦æƒ…scrollView //æ·»åŠ ç¬¬äºŒä¸ªscrollview - (void) addSecondScrollViewOnView { //**1.è®¾ç½®åº•éƒ¨è¯¦æƒ…scrollView UIScrollView *secondScrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, KSTATUS_HEIGHT + KFIRST_SCROLLVIEW_HEIGHT, KSCREEN_WIDTH, KSECOND_SCROLLVIEW_HEIGHT)]; secondScrollView.pagingEnabled = YES;//åˆ†é¡µ secondScrollView.bounces = NO;//ç¦æ­¢åå¼¹ secondScrollView.delegate = self; //è®¾ç½®å†…å®¹å¤§å°ï¼Œå®½åº¦ä¸º å±å¹•çš„å®½åº¦ * itemsæ•°ç»„çš„æ•°é‡ secondScrollView.contentSize = CGSizeMake(self.itemsTitlesArray.count * KSCREEN_WIDTH, KSECOND_SCROLLVIEW_HEIGHT); self.secondScrollView = secondScrollView; [self.view addSubview:secondScrollView]; //**2.æ·»åŠ Views for (int i = 0; i \u003c self.itemsTitlesArray.count; i ++) { UIView *bottomView = [[UIView alloc] initWithFrame:CGRectMake(i * KSCREEN_WIDTH, 0, KSCREEN_WIDTH, KSECOND_SCROLLVIEW_HEIGHT)]; bottomView.backgroundColor = [self.colorArray objectAtIndex:(i % 6)];//é¢œè‰²æ•°ç»„å–ä½™ //ä¸ºäº†æ–¹ä¾¿è§‚å¯Ÿï¼Œæ”¾ç½®ä¸€ä¸ªlabelï¼Œå¦‚æœéœ€è¦å…¶å®ƒæ§ä»¶è‡ªè¡Œæ›¿æ¢ï¼ˆå¦‚è‹¥æ–°é—»ï¼Œç”¨tableViewï¼‰ UILabel *flagLabel = [[UILabel alloc] initWithFrame:bottomView.bounds]; flagLabel.font = [UIFont systemFontOfSize:50.0f]; flagLabel.textColor = [UIColor whiteColor]; flagLabel.textAlignment = NSTextAlignmentCenter; flagLabel.text = [NSString stringWithFormat:@\"%@\", [self.itemsTitlesArray objectAtIndex:i]]; [bottomView addSubview:flagLabel]; [secondScrollView addSubview:bottomView]; } }  6.åœ¨-(void)viewDidLoadæ–¹æ³•ä¸­è°ƒç”¨ä¸¤ä¸ªæ·»åŠ scrollViewçš„æ–¹æ³• - (void)viewDidLoad { [super viewDidLoad]; [self addFirstScrollViewOnView];//æ·»åŠ é¡¶éƒ¨itemsçš„scrollView [self addSecondScrollViewOnView];//æ·»åŠ åº•éƒ¨è¯¦æƒ…çš„scrollView }  7.å£°æ˜ æœ¬æ–‡æ¶‰åŠçš„ä¸€åˆ‡ä»£ç ï¼Œéƒ½å°†ä¸Šä¼ åˆ°æˆ‘çš„githubä»“åº“:https://github.com/Gitzhaoyang/iOSWithOC/tree/master/twoScrollViewLinkageï¼Œè¯·è‡ªè¡ŒæŸ¥çœ‹ã€‚\n","description":"","tags":["iOS"],"title":"çº¯ä»£ç é«˜ä»¿ç½‘æ˜“æ–°é—»å®¢æˆ·ç«¯ä¸¤ä¸ªscrollViewè”åŠ¨ï¼ˆä¸€ï¼‰ï¼šè®¾ç½®åŸºæœ¬çš„ç•Œé¢å¸ƒå±€","uri":"/posts/twoscrollviewlinkage-1-baseview/"},{"categories":null,"content":"å®ç°åŸç†ååˆ†ç®€å•ï¼Œä½¿ç”¨UIImageViewçš„é€æ˜åº¦å³å¯ã€‚ç„¶ååœ¨åŠ¨ç”»ä¸­å®Œæˆã€‚ alpha = 1 ä¸ºå…¨é€æ˜ã€‚ è¿è¡Œå›¾ä¾‹ï¼š\nå®ç°ä»£ç :\n//å›¾ç‰‡æ¸éšæ¸ç° self.backgroundView.alpha = 0.7; [UIView animateWithDuration:0.5 animations:^{ self.backgroundView.alpha = 1; self.backgroundView.image = [UIImage imageNamed:@\"weather_bg_02.jpg\"]; }];   åæ¥æˆ‘çŸ¥é“äº†å¯ä»¥ç”¨æ›´å¥½çš„æ–¹æ³•å®ç°ï¼Œ åç»­ä¼šæœ‰æ›´æ–°\n","description":"","tags":["iOS"],"title":"UIImageViewæ›´æ¢å›¾ç‰‡æ—¶æ¸éšæ¸ç°","uri":"/posts/uiimageview-image-fade-out/"},{"categories":null,"content":"ä¸€å¼€å§‹è‡ªå·±å°†tabBarå…¨éƒ¨è‡ªå®šä¹‰ï¼Œå°†ç³»ç»Ÿtabbarè®¾ç½®ä¸ºself.tabBar.hidden=YESï¼Œéšè—ç³»ç»Ÿçš„tabbarã€‚ä½†æ˜¯è‡ªå®šä¹‰çš„tabbaråœ¨pushå‡ºæ–°é¡µé¢çš„æ—¶å€™ï¼Œtabbarå¹¶ä¸ä¼šè‡ªåŠ¨éšè—ã€‚ä¹‹ååœ¨æ–°é¡µé¢viewWillAppearä¸­è®¾ç½®è‡ªåŠ¨éšè—ï¼Œä½†æ˜¯popå›ä¹‹å‰é¡µé¢ï¼ˆåœ¨viewDidAppearä¸­è®¾ç½®tabbaræ˜¾ç¤ºï¼‰åˆå‡ºç°ä¸èƒ½åŠæ—¶å‡ºç°ï¼Œä¼šæœ‰æ—¶é—´å»¶è¿Ÿï¼Œçœ‹ä¸Šå»ç‰¹åˆ«ä¸èˆ’æœã€‚è€Œä¸”ï¼Œè¾¹ç¼˜è¿”å›æ—§é¡µé¢çš„æ—¶å€™ä¸èƒ½åŠæ—¶æ˜¾ç¤ºtabbarä¹Ÿï¼Œæ‰€ä»¥æ‰“ç®—ç”¨ç³»ç»Ÿé»˜è®¤çš„tabbarã€‚è®°å½•ä¸‹ç³»ç»ŸtabBaræ ·å¼çš„ç®€å•å®šä¹‰ã€‚\nç®€å•è‡ªå®šä¹‰ç³»ç»Ÿçš„tabBar - (void) initTabBarView { NSArray *titles = @[@\"å·¥å¤§å¨æµ·\", @\"æ ¡å›­åº”ç”¨\", @\"æ ¡å›­ç”Ÿæ´»\", @\"æ›´å¤šåŠŸèƒ½\"]; //tabBarItemé€‰ä¸­å›¾ç‰‡ç®€å•é¢œè‰²å˜åŒ–æ—¶ï¼Œè‡ªå®šä¹‰é€‰ä¸­åçš„é¢œè‰² [self.tabBar setTintColor:[UIColor redColor]]; int i = 0; for (UITabBarItem *item in self.tabBar.items) { //è‡ªå®šä¹‰tabBarItemçš„å›¾ç‰‡ item.image = [[UIImage imageNamed: [NSString stringWithFormat:@\"home_tab_icon_%d\", i + 1]] imageWithRenderingMode:UIImageRenderingModeAutomatic]; //å®šä¹‰é€‰ä¸­å›¾ç‰‡,ä¸Šé¢imageWithRederingModeè®¾ç½®ä¸ºAutomaticï¼Œåªæ˜¯ç®€å•é¢œè‰²å˜æ¢ï¼Œä¸éœ€è¦è®¾ç½®,ä¸å†èµ˜è¿° //item.selectedImage = .... //è®¾ç½®tabBarItemçš„æ ‡é¢˜ item.title = titles[i]; i ++; } }  è¿™æ˜¯è¿è¡Œåçš„æ ·å¼ï¼š\npushæ–°é¡µé¢tabBarè‡ªåŠ¨éšè—ï¼Œpopå›æ˜¾ç¤ºtabBar ä¸Šé¢è¯´å¦‚æœç”¨å®Œå…¨è‡ªå®šä¹‰çš„tabbarï¼Œæˆ‘åªèƒ½è®¾ç½®åˆ°ç­‰popå›çš„é¡µé¢å…¨éƒ¨å‡ºç°ä¹‹åå†è®©tabBaræ˜¾ç¤ºå‡ºæ¥ï¼Œè¿™æ ·ååˆ†ä¸å‹å¥½ï¼Œæˆ‘ä»¬å¦‚æœå®ç°æ‰‹æœºå¾®ä¿¡ç±»ä¼¼è¿™æ ·çš„æ•ˆæœæˆ‘ä»¬åº”è¯¥å¦‚ä½•è®¾ç½®å‘¢ï¼Ÿæ³¨æ„çº¢æ¡†éƒ¨åˆ†\næˆ‘ä»¬åº”è¯¥åœ¨è¦pushå‡ºæ–°é¡µé¢çš„é‚£ä¸ªé¡µé¢è®¾ç½®viewDidAppearå’ŒviewWillDisappearæ–¹æ³•ï¼š\n- (void) viewDidAppear:(BOOL)animated { [super viewWillAppear:animated]; [self setHidesBottomBarWhenPushed:YES]; } - (void) viewWillDisappear:(BOOL)animated { [self setHidesBottomBarWhenPushed:NO]; [super viewDidDisappear:animated]; }  è¾¹ç¼˜æ‹–åŠ¨è¿”å›çš„æ—¶å€™ï¼Œå³å¯å®ç°å¦‚ä¸‹æ•ˆæœï¼š\nå®Œæˆ~ ğŸ˜ğŸ˜ğŸ˜\n","description":"","tags":["iOS"],"title":"UITabBarControlleråµŒå¥—UINavigationControlleråï¼Œå…³äºtabBarçš„é—®é¢˜ä»¥åŠè§£å†³æ–¹æ³•","uri":"/posts/how-to-use-sethidebottombarwhenpushed/"},{"categories":null,"content":"UIImageViewä¸‰ç§contentModeåŒºåˆ«ï¼šUIViewContentModeScaleToFillã€UIViewContentModeScaleAspectFitã€UIViewContentModeScaleAspectFill\nåŸå›¾ç‰‡ï¼š UIViewContentModeScaleToFillï¼š UIViewContentModeScaleAspectFit UIViewContentModeScaleAspectFill ","description":"","tags":["iOS"],"title":"UIImageView ä¸­å›¾ç‰‡çš„å‡ ç§å¸¸ç”¨é€‚åº”æ–¹å¼","uri":"/posts/some-uiimageview-fit-way/"},{"categories":null,"content":"ä»Šå¤©åœ¨å­¦ä¹ iOSå¼€å‘çš„æ—¶å€™ï¼Œå¶ç„¶å‘ç°tableViewæœ‰ä¸¤ç§é‡ç”¨cellçš„æ–¹æ³•ã€‚å…ˆæ•´ç†ä¸€ä¸‹æ–¹ä¾¿æ—¥åæŸ¥é˜…ã€‚\nç¬¬ä¸€ç§ï¼š[tableView dequeueReusableCellWithIdentifier:identifier] ï¼ˆSDK 6.0ä¹‹å‰ï¼‰\nç¬¬äºŒç§ï¼š[tableView dequeueReusableCellWithIdentifier:identifier forIndexPath:indexPath]] ï¼ˆSDK 6.0ä¹‹åï¼‰\nåŒºåˆ«ï¼š ç¬¬ä¸€ç§ï¼šå¿…é¡»åˆ¤æ–­cellæ˜¯å¦å®šä¹‰ï¼Œæœªå®šä¹‰åˆ™æ‰‹åŠ¨åˆ›å»ºï¼Œä»£ç å¦‚ä¸‹ï¼š\nconst NSString *identifier = @\"cell\"; UITableView *cell = [tableView dequeueReusableCellWithIndetifier:identifier]; if(!cell) { cell = [[UITableView alloc] initWithStyle:UITableViewCellStyleDefault]; } /* è®¾ç½®cell cell.textLable.text = @\"ç¬¬...è¡Œ\"; */ return cell;  ç¬¬äºŒç§æ˜¯SDK 6.0å¼€å§‹æ–°æ·»åŠ çš„æ–¹æ³•ã€‚ç”¨äºä½ å·²ç»ç”¨Nibå®šä¹‰äº†ä¸€ä¸ªCellï¼Œç„¶åå°±å¯ä»¥çœä¸‹ä¸Šé¢é‚£äº›ä»£ç ï¼Œåªç”¨ä¸€è¡Œå°±å¯ä»¥è§£å†³ï¼š\n UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@\"cell\" forIndexPath:indexPath]; /* è®¾ç½®cell cell.textLable.text = @\"ç¬¬...è¡Œ\"; */  æ‰€ä»¥å¦‚æœæœ‰è¿™ä¸ªé”™è¯¯ï¼š\nreason: 'unable to dequeue a cell with identifier friendCell - must register a nib or a class for the identifier or connect a prototype cell in a storyboard'  åº”è¯¥æƒ³ä¸€ä¸‹è‡ªå·±æ˜¯ä¸æ˜¯ä¸ºcellåˆ›å»ºçš„Nibã€‚\n","description":"","tags":["iOS"],"title":"tableView ä¸¤ç§é‡ç”¨cellçš„æ–¹æ³•åŒºåˆ«","uri":"/posts/two-methods-to-reuse-cell/"},{"categories":null,"content":"Markdown ä»‹ç»  Markdownæ˜¯ä¸€ç§å¯ä»¥ä½¿ç”¨æ™®é€šæ–‡æœ¬ç¼–è¾‘å™¨ç¼–å†™çš„æ ‡è®°è¯­è¨€ï¼Œé€šè¿‡ç®€å•çš„æ ‡è®°è¯­æ³•ï¼Œå®ƒå¯ä»¥ä½¿æ™®é€šæ–‡æœ¬å†…å®¹å…·æœ‰ä¸€å®šçš„æ ¼å¼ã€‚Markdownçš„ä½¿ç”¨ååˆ†ç®€å•ï¼Œå¸¸ç”¨çš„æ ‡è®°å…¶å®å°±åå‡ ä¸ªï¼Œæ‰€ä»¥ç›¸å¯¹äºHTMLè¿™ç§å¤æ‚çš„æ ‡è®°è¯­è¨€æ¥è¯´ï¼ŒMarkdownæ˜¯ååˆ†è½»é‡çš„æ ‡è®°è¯­è¨€ã€‚\n Markdownçš„åŸºæœ¬ä½¿ç”¨   åŠ ç²—å’Œæ–œä½“ *æ–œä½“* _æ–œä½“_\nåªè¦ç”¨ä¸€ä¸ª_æˆ–è€…ä¸€ä¸ª#åŒ…è£¹æ–‡å­—ï¼Œå³å¯å®ç°æ–‡å­—æ–œä½“ã€‚\n**åŠ ç²—æ–‡å­—** __åŠ ç²—æ–‡å­—__\nåªè¦ç”¨ä¸¤ä¸ª_æˆ–è€…ä¸¤ä¸ª#åŒ…è£¹æ–‡å­—ï¼Œå³å¯å®ç°æ–‡å­—ç²—ä½“ã€‚\n  é“¾æ¥ä¸å›¾ç‰‡ æ’å…¥é“¾æ¥å’Œå›¾ç‰‡çš„æ ¼å¼å¾ˆç›¸ä¼¼ï¼Œåªæœ‰ä¸€ä¸ª!çš„åŒºåˆ«\né“¾æ¥æ ¼å¼ä¸ºï¼š[é“¾æ¥æ–‡å­—](é“¾æ¥åœ°å€)\nå›¾ç‰‡æ ¼å¼ä¸ºï¼š![å›¾ç‰‡åå­—](å›¾ç‰‡åœ°å€)\nåœ¨Markdownä¸­æ’å…¥å›¾ç‰‡åœ°å€è¦ç”¨åˆ°å›¾åºŠï¼Œæˆ‘ç”¨åˆ°çš„æ˜¯å›´è„–å›¾åºŠä¿®å¤è®¡åˆ’å’Œäº‘å›¾å›¾åºŠï¼Œä¸Šä¼ å›¾ç‰‡å°±å¯ä»¥ç”ŸæˆURL\n  æ ‡é¢˜ æ ‡é¢˜æ˜¯æ–‡ç« ä¸­æœ€å¸¸ç”¨çš„æ–‡æœ¬æ ¼å¼ï¼Œåœ¨Markdownä¸­åªè¦åœ¨ä¸€è¡Œæ–‡å­—å‰æ·»åŠ #ï¼Œå³å¯æ ‡è®°ä¸ºæ ‡é¢˜æ ¼å¼ã€‚\nï¼ƒ ä¸€çº§æ ‡é¢˜\n## äºŒçº§æ ‡é¢˜\n### ä¸‰çº§æ ‡é¢˜\nä»¥æ­¤ç±»æ¨ï¼ŒMarkdownä¸€å…±æœ‰å…­çº§æ ‡é¢˜ï¼Œå…­çº§æ ‡é¢˜åªéœ€è¦åŠ ä¸Šå…­ä¸ª######å³å¯ã€‚\n  åˆ—è¡¨ åˆ—è¡¨æœ‰æœ‰åºåˆ—è¡¨å’Œæ— åºåˆ—è¡¨\næœ‰åºåˆ—è¡¨æ ¼å¼ï¼š\n 1. çº¢è‰² 2. è“è‰² 3. é»‘è‰²  æ— åºåˆ—è¡¨æ ¼å¼ï¼š\n * çº¢è‰² * è“è‰² * é»‘è‰²    å¼•ç”¨ å¼•ç”¨åªéœ€è¦åœ¨æ–‡å­—å‰é¢åŠ ä¸Š \u003e å°±å¯ä»¥äº†ã€‚ä½ å¯ä»¥è”åˆå…¶å®ƒçš„æ ‡è®°ç¬¦ä¸€èµ·ä½¿ç”¨ã€‚\n \u003e * å¼•ç”¨ä¸­åˆ—è¡¨ \u003e * åˆ—è¡¨ \u003e ### å¼•ç”¨ä¸­ä¸‰çº§æ ‡é¢˜ \u003e\u003e äºŒçº§å¼•ç”¨    è¡Œå†…ä»£ç å’Œä»£ç å— è¡Œå†…ä»£ç æ ¼å¼ï¼š ï½€è¿™é‡Œå†™ä»£ç ï½€\nä»£ç å—æ ¼å¼ï¼š åªè¦æ¯”ä¸Šä¸€è¡Œè¿›è¡Œå³ç¼©è¿›å³å¯ã€‚æŒ‰é”®ç›˜tabé”®å¯ä»¥å®ç°ç¼©è¿›\n  è¡¨æ ¼ è¡¨æ ¼åº”è¯¥æ˜¯Markdownä¸­æœ€éš¾çš„æ ‡è®°äº†\næœ€ç®€å•çš„è¡¨æ ¼ï¼š\n | First Header | Second Header | Third Header | | ------------ | ------------- | ------------ | | Content Cell | Content Cell | Content Cell | | Content Cell | Content Cell | Content Cell |  ä½ ä¹Ÿå¯ä»¥è®¾ç½®æ–‡å­—çš„å¯¹é½æ–¹å¼\n First Header | Second Header | Third Header :----------- | :-----------: | -----------: Left | Center | Right Left | Center | Right    æ°´å¹³åˆ†éš”çº¿ ä½¿ç”¨ --- æˆ–è€… ***å³å¯ã€‚\n  åˆ é™¤çº¿ åˆ é™¤çº¿æ ¼å¼ï¼š\n ~~åˆ é™¤çº¿~~    æ¢è¡Œ åªè¦åœ¨æ–‡å­—æ¯è¡Œæ–‡å­—åé¢åŠ ä¸Šä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„ç©ºæ ¼å³å¯å®ç°æ¢è¡Œ\n  æ³¨æ„  æ ‡è®°ç¬¦å·åé¢ä¸€å®šåŠ ä¸Šç©ºæ ¼ æ ‡è®°è¯­è¨€å¿…é¡»ä½¿ç”¨è‹±æ–‡ç¬¦å· å¦‚æœä½¿ç”¨æ­£ç¡®è€Œä¸èµ·ä½œç”¨ï¼Œæ¢ä¸€è¡Œå†è¯•ä¸€æ¬¡  Markdownç¼–è¾‘å·¥å…· æœ¬äººä½¿ç”¨çš„å·¥å…·æ˜¯Mac OSä¸‹çš„Mou,æ”¯æŒå®æ—¶é¢„è§ˆï¼Œæ–‡ç« ä¸­çš„æˆªå›¾å³ä¸ºMouçš„æˆªå›¾ã€‚ä½ ä¹Ÿå¯ä»¥åœ¨Githubä¸Šæœç´¢å…¶å®ƒä¸»é¢˜æ ·å¼è¿›è¡Œå®‰è£…ã€‚\nMacä¸‹Markdownç¼–è¾‘å™¨ï¼šMou Â¥0ã€Byword Â¥40ã€iA Writer Â¥128ã€Ulysses Â¥283 etc.\nWindowsä¸‹Markdownç¼–è¾‘å™¨ï¼šMarkdownPadã€MarkPad etc.\nå®˜æ–¹æ–‡æ¡£ è‹±æ–‡Markdownæ–‡æ¡£\nä¸­æ–‡Markdownæ–‡æ¡£\n","description":"","tags":["Markdown","Hexo"],"title":"MarkDownåŸºæœ¬ä½¿ç”¨æ–¹æ³•","uri":"/posts/markdown-base-use/"},{"categories":null,"content":"ç½—åˆ—äº†UIscrollViewçš„ä¸€äº›åŸºæœ¬è®¾ç½®å’Œå¸¸ç”¨æ–¹æ³•\n  (void)viewDidLoad { [super viewDidLoad]; // [self initScrollView]; // [self initPageCtrl]; // [self addTimer]; self.scrollView = [[UIScrollView alloc]initWithFrame:CGRectMake(10, 20, 320, 460)]; self.scrollView.backgroundColor = [UIColor blueColor]; //æ˜¯å¦æ”¯æŒæ»‘åŠ¨åˆ°æœ€é¡¶ç«¯ self.scrollView.scrollsToTop = NO; //è®¾ç½®UIScrollViewçš„ä»£ç† self.scrollView.delegate = self; //è®¾ç½®å†…å®¹å¤§å° self.scrollView.contentSize = CGSizeMake(320 * 10, 460); //æ˜¯å¦åå¼¹ self.scrollView.bounces = NO; //æ˜¯å¦æ»šåŠ¨ self.scrollView.scrollEnabled = YES; //æ˜¯å¦åˆ†é¡µ self.scrollView.pagingEnabled = NO; //è®¾ç½®indecatoré£æ ¼ self.scrollView.indicatorStyle = UIScrollViewIndicatorStyleWhite; //è®¾ç½®å†…å®¹è¾¹ç¼˜å’ŒIndicatorè¾¹ç¼˜ self.scrollView.contentInset = UIEdgeInsetsMake(0, 50, 50, 0); self.scrollView.scrollIndicatorInsets = UIEdgeInsetsMake(0, 50, 0, 0); //æ˜¯å¦åŒæ—¶è¿åŠ¨ self.scrollView.directionalLockEnabled = NO;\n [self.view addSubview:self.scrollView];  }\n//æ˜¯å¦æ”¯æŒæ»‘åŠ¨åˆ°é¡¶éƒ¨\n (BOOL) scrollViewShouldScrollToTop:(UIScrollView *)scrollView { return YES; }  //æ»‘åŠ¨åˆ°é¡¶éƒ¨æ—¶è°ƒç”¨è¯¥æ–¹æ³•\n (void) scrollViewDidScrollToTop:(UIScrollView *)scrollView { NSLog(@â€œæ»‘åŠ¨åˆ°é¡¶éƒ¨äº†â€); }  //å·²ç»æ»‘åŠ¨(æ­£åœ¨æ»‘åŠ¨ä¹Ÿä¼šè°ƒç”¨è¯¥æ–¹æ³•)\n (void) scrollViewDidScroll:(UIScrollView *)scrollView { NSLog(@â€œå·²ç»å¼€å§‹æ»‘åŠ¨â€); }  //å¼€å§‹æ‹–åŠ¨\n (void) scrollViewWillBeginDragging:(UIScrollView *)scrollView { NSLog(@â€œå¼€å§‹æ‹–åŠ¨â€); }  //ç»“æŸæ‹–åŠ¨\n (void) scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate { NSLog(@â€œç»“æŸæ‹–åŠ¨â€); }  //å¼€å§‹å‡é€Ÿ\n (void) scrollViewWillBeginDecelerating:(UIScrollView *)scrollView { NSLog(@â€œå¼€å§‹å‡é€Ÿâ€); }  //å‡é€Ÿåœæ­¢\n (void) scrollViewDidEndDecelerating:(UIScrollView *)scrollView { NSLog(@â€œå‡é€Ÿåœæ­¢â€); }  //ç»“æŸæ»šåŠ¨åŠ¨ç”»\n  (void) scrollViewDidEndScrollingAnimation:(UIScrollView *)scrollView { NSLog(@â€œç»“æŸæ»šåŠ¨åŠ¨ç”»â€); }\n  (void)didReceiveMemoryWarning { [super didReceiveMemoryWarning]; // Dispose of any resources that can be recreated. }\n   ","description":"","tags":["iOS"],"title":"UIScrollViewçš„åŸºæœ¬å±æ€§è®¾ç½®å’Œå¸¸ç”¨ä»£ç†æ–¹æ³•","uri":"/posts/how-to-use-uiscrollviewdelegate/"},{"categories":null,"content":"-(BOOL)respondsToSelector: selector //ç”¨æ¥åˆ¤æ–­æ˜¯å¦æœ‰ä»¥æŸä¸ªåå­—å‘½åçš„æ–¹æ³•ï¼ˆè¢«å°è£…åœ¨ä¸€ä¸ªselectorçš„å¯¹è±¡é‡Œä¼ é€’ï¼‰\n @protocol appViewDelegate \u003cNSObject\u003e @optional - (void) theButtonOnClicked:(UIButton *)button; @end   if([self.delegate respondsToSelector:@selector(theButtonOnClicked:)]) { self.delegate theButtonOnClicked:sender; }   #pragma mark - appViewDelegate - (void) theButtonOnClicked:(UIButton *)button { button.enabled = NO; []button setTitle:@\"å·²ä¸‹è½½\" ForState:UIControlStateDisabled]; }  ","description":"","tags":["IOS"],"title":"å‡½æ•°respondsToSelectorçš„ä½¿ç”¨","uri":"/posts/how-to-use-founction-respondstoselector/"},{"categories":null,"content":"è¿™ä¸€ç¯‡æ˜¯æœ¬ç³»åˆ—çš„æœ€åä¸€ç¯‡ï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬æ­å»ºçš„Hexoåšå®¢å·²ç»èƒ½æ»¡è¶³æˆ‘ä»¬æ—¥å¸¸çš„éœ€æ±‚ã€‚å¯æ˜¯æœ‰æ²¡æœ‰æƒ³è¿‡æˆ‘ä»¬å…¶å®åªèƒ½åœ¨è¿™ä¸€å°ç”µè„‘ä¸Šæ›´æ–°æˆ‘ä»¬çš„åšå®¢ï¼Ÿå¦‚æœæœ‰ä¸€å¤©æˆ‘æ¢äº†ä¸€å°ç”µè„‘ï¼Œæˆ–è€…å…¬å¸å’Œå®¶é‡Œä¸åŒçš„ç”µè„‘éƒ½æƒ³æ›´æ–°åšå®¢ï¼Œåº”è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ\nè¿™é‡Œåªç»™ç±»ä¼¼æˆ‘è¿™æ ·çš„gitæ–°äººåšå‚è€ƒï¼Œgitçš„å¾ˆå¤šç”¨æ³•æˆ‘ä¹Ÿä¸å¤ªç†Ÿç»ƒã€‚å¦‚æœæœ‰é”™è¯¯è¿˜è¯·å„ä½æŒ‡æ­£ã€‚\nNote: è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“æˆ‘ä»¬æ‰§è¡Œ$ hexo deployï¼Œéƒ¨ç½²åˆ°Github ä¸Šé¢çš„æ˜¯hexoç»™æˆ‘ä»¬ç”Ÿæˆçš„é™æ€é¡µé¢ï¼Œå¹¶ä¸æ˜¯æ•´ä¸ªhexoåšå®¢å·¥ç¨‹æ–‡ä»¶ï¼Œæ‰€ä»¥å¹¶ä¸èƒ½ç®€å•çš„åœ¨ä¸åŒPCçš„æ›´æ–°åšå®¢ã€‚\nå…¶å®æœ‰ä¸¤ç§åŠæ³•ï¼Œç¬¬ä¸€å°±æ˜¯**æŠŠæ•´ä¸ªç›®å½•å¤‡ä»½åˆ°äº‘ç›˜ï¼Œç„¶åå¼€å¯äº‘ç›˜åŒæ­¥è¯¥æ–‡ä»¶å¤¹ï¼Œè™½ç„¶æ“ä½œç®€å•ï¼Œä½†æ˜¯åŒæ­¥å¾ˆéº»çƒ¦ï¼Œéœ€è¦æ‰‹åŠ¨å°†æ–‡ä»¶å¤¹è¿›è¡Œè¦†ç›–ã€‚ç¬¬äºŒç§å°±æ˜¯ä½¿ç”¨Gitçš„ç¬¬ä¸‰æ–¹æœåŠ¡** ï¼Œåªè¦é…ç½®å®Œæˆï¼Œä¸ç®¡åˆ°å“ªé‡Œï¼Œç”¨å“ªå°ç”µè„‘éƒ½èƒ½ç®€å•å®ç°æ›´æ–°åšå®¢ï¼ˆå½“ç„¶éœ€è¦Node.jså’ŒGitè¿è¡Œç¯å¢ƒï¼Œåœ¨æˆ‘ä»¬æœ¬ç³»åˆ—çš„ç¬¬ä¸€ç¯‡æœ‰è®²è§£ï¼‰ã€‚\nåœ¨æœ¬æ–‡ä¸­è¯¦ç»†è®²è§£å¦‚ä½•ä½¿ç”¨ç¬¬ä¸‰æ–¹gitæœåŠ¡è¿›è¡Œåšå®¢çš„å¤‡ä»½ã€‚å¯ä»¥Githubæ”¾åœ¨å…±æœ‰ä»“åº“ï¼Œå¦‚æœä½ æ‹…å¿ƒæ³„å¯†ï¼Œå¯ä»¥ç”¨Github çš„ç§æœ‰ä»“åº“ï¼ˆæ”¶è´¹ï¼‰ï¼Œå›½å†…é™¤äº†Github è¿˜æœ‰è®¸å¤šçŸ¥åçš„gitæœåŠ¡å•†ï¼Œå¦‚ï¼šgitcafeï¼Œbitbucketï¼Œoschinaï¼Œcodingç­‰ï¼Œæ®æˆ‘äº†è§£ï¼Œoschinaçš„ç§æœ‰ä»“åº“æ˜¯å…è´¹çš„ï¼Œè€Œä¸”å¯ä»¥å’ŒGithub è¿›è¡ŒåŒæ­¥ã€‚å› ä¸ºæˆ‘ä»¬çš„åšå®¢æ”¾åœ¨äº†Githubï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸å¦¨å°±æŠŠæˆ‘ä»¬åšå®¢ç¨‹åºä¹ŸåŒæ­¥åˆ°Githubçš„ä»“åº“ä¸­ã€‚\nä¸‹é¢æˆ‘ä»¬å°±æ¥è®²è§£å¦‚ä½•å®ç°ä¸åŒç”µè„‘åŒæ—¶æ›´æ–°åšå®¢ã€‚\nå°†æˆ‘ä»¬çš„åšå®¢ç›®å½•å¤‡ä»½åˆ°Githubï¼Œå®ç°å¤šPCç»´æŠ¤ åœ¨Githubç½‘ç«™åˆ›å»ºä¸€ä¸ªæ–°çš„repository æˆ‘ä»¬åœ¨è¿™é‡Œç»™æ–°åˆ›å»ºçš„repositoryå‘½åä¸ºblogï¼›\nä¸ä¼šåˆ›å»ºæ–¹æ³•çš„æœ‹å‹å¯ä»¥å‚è€ƒåœ¨Githubä¸Šé¢æ­å»ºHexoåšå®¢ï¼ˆä¸€ï¼‰ä¸­çš„åˆ›å»ºæ–¹æ³•ã€‚\nåœ¨Aç”µè„‘ä¸­ä»æœ¬åœ°ä¸Šä¼ Hexoåˆ°Githubä»“åº“ Note: Aç”µè„‘æŒ‡çš„æ˜¯å»ºç«‹Hexoåšå®¢çš„ç”µè„‘ã€‚\nåˆå§‹åŒ–ä»“åº“ åœ¨Hexoåšå®¢çš„æ ¹ç›®å½•è¿è¡ŒGit Bashå¹¶è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š\n\u003e git init \u003e git remote add origin \u003cserver address\u003e è¿™é‡Œ\u003cserver\u003eæŒ‡çš„æ˜¯åœ¨çº¿ä»“åº“çš„åœ°å€ï¼Œæ¯”å¦‚åœ¨è¿™é‡Œæˆ‘çš„å°±åº”è¯¥æ˜¯https://github.com/Gitzhaoyang/blog.gitï¼Œå¦‚æœä½ ç”¨å…¶å®ƒgitä»“åº“æœåŠ¡ï¼Œå¡«å†™å¯¹åº”ä»“åº“åœ°å€å³å¯ã€‚ originæ˜¯æœ¬åœ°åˆ†æ”¯,remote addä¼šå°†æœ¬åœ°ä»“åº“æ˜ å°„åˆ°Githubä»“åº“\næŠŠæœ¬åœ°æ–‡ä»¶åŒæ­¥åˆ°Githubä¸Šé¢ åˆ†åˆ«è¾“å…¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š\n\u003e git add . #æ·»åŠ æ‰€æœ‰ç›®å½•ï¼Œæ³¨æ„addåé¢æœ‰ä¸ªç‚¹`.` \u003e git commit -m \"add to Github\" #æ·»åŠ æäº¤è¯´æ˜ï¼Œæ¯æ¬¡æäº¤éƒ½éœ€è¦ \u003e git push -u origin master #æŠŠæ›´æ–°æ¨é€åˆ°äº‘ç«¯ è¿™æ—¶å¯ä»¥ç™»å½•Githubè´¦æˆ·æŸ¥çœ‹åˆšåˆ›å»ºçš„blogä»“åº“ä¸­æ˜¯å¦ä¸Šä¼ æˆåŠŸ\nwindowså¹³å°å¯èƒ½pushè¿‡ç¨‹ä¸­ä¼šæç¤ºè¾“å…¥Githubçš„ç”¨æˆ·åå’ŒGithubçš„å¯†ç ï¼Œè¾“å…¥æ­£ç¡®ä¾¿æ˜¯ã€‚\næ³¨æ„ ä¸ºäº†åœ¨å¦ä¸€å°ç”µè„‘ä¸Šé…ç½®æ›´åŠ æ–¹ä¾¿ï¼Œä¸¥é‡å»ºè®®æŠŠHexoåšå®¢ç›®å½•ä¸‹_config.ymlæ–‡ä»¶å¤åˆ¶ç²˜è´´ä¸€ä»½ï¼Œå¹¶é‡å‘½åä¸ºhexo_config.ymlï¼›æŠŠthemesç›®å½•ä¸‹ä½ ç”¨åˆ°ä¸»é¢˜ç›®å½•ä¸‹çš„_config.yml æ–‡ä»¶ä¹Ÿå¤åˆ¶ä¸€ä»½ï¼Œå¹¶ç²˜è´´åˆ°åšå®¢æ ¹ç›®å½•ï¼Œæ³¨æ„ï¼Œæ˜¯â€™åšå®¢æ ¹ç›®å½•â€™ï¼Œå¹¶å‘½åä¸ºtheme_config.ymlã€‚åŸå› æ˜¯æˆ‘ä»¬ä¸Šä¼ çš„æ—¶å€™ï¼Œæˆ‘ä»¬è‡ªå·±å®‰è£…çš„themes å¦‚ï¼š[NexT](http://theme-next.iissnan.com)ï¼Œå®ƒçš„'next'ç›®å½•å¹¶ä¸èƒ½ä¸Šä¼ ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æŠŠè¿™ä¸¤ä¸ªé…ç½®æ–‡ä»¶éƒ½ä¿å­˜ä¸‹æ¥åœ¨è¿›è¡ŒåŒæ­¥å·¥ä½œã€‚\nåœ¨Bç”µè„‘ä¸­ä»Githubä»“åº“å–å›Hexoåˆ°æœ¬åœ° Note: Bç”µè„‘æŒ‡çš„æ˜¯å¦ä¸€å°ç”µè„‘ï¼Œå¦‚æœæ²¡æœ‰å¦ä¸€å°ç”µè„‘ä¹Ÿå¯ä»¥æ‰¾åœ°æ–¹æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹å°è¯•ã€‚\nå®‰è£…Gitå’ŒNode.js å€¼å¾—æ³¨æ„çš„æ˜¯æ–°ç”µè„‘ä¹Ÿéœ€è¦å®‰è£…Gitå’ŒNode.jsç¯å¢ƒï¼Œå‚è€ƒæœ¬ç³»åˆ—çš„ç¬¬ä¸€ç¯‡ä¸­å®‰è£…æ–¹æ³•ã€‚\næŠŠæ–‡ä»¶å–å›æœ¬åœ° å®‰è£…ç¯å¢ƒå®Œæˆåï¼Œåœ¨æ–°æ–‡ä»¶å¤¹ä¸‹è¿è¡ŒGit Bashå¹¶åˆ†åˆ«æ‰§è¡Œä»¥ä¸‹å‡ æ¡å‘½ä»¤ï¼š\n\u003e git init $ git remote add origin \u003cserver\u003e \u003e git fetch --all $ git reset --hard origin/master è¿™é‡Œ\u003cserver\u003eä»ç„¶æ˜¯ä½ çš„Giuhubåœ°å€ã€‚fetchæ˜¯å°†ä»“åº“ä¸­çš„å†…å®¹å–å‡ºæ¥ã€‚resetåˆ™æ˜¯ä¸åšä»»ä½•åˆå¹¶ï¼ˆmergeï¼‰å¤„ç†ï¼Œç›´æ¥æŠŠå–å‡ºçš„å†…å®¹ä¿å­˜ã€‚\nè¿è¡Œå®Œresetåä½ ä¼šå‘ç°æ–‡ä»¶å¤¹ä¸­å°±ä¼šå‡ºç°åˆšåˆšä¸Šä¼ çš„å†…å®¹ã€‚ä½†æ˜¯é…ç½®å¹¶æ²¡æœ‰å®Œæˆï¼Œè¯·ç»§ç»­å¾€ä¸‹çœ‹ã€‚\né…ç½®æ–°çš„Hexo Note: å¦‚æœæ˜¯æ–°PCï¼Œä¸è¦å¿˜è®°æˆ‘ä»¬æœ¬æœºå¹¶æ²¡æœ‰å®‰è£…Hexoåšå®¢\né¦–å…ˆï¼Œåœ¨åˆšæ‰çš„ç›®å½•ä¸‹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ä»¥åœ¨æ–°æœºå™¨ä¸­å®‰è£…Hexo\n $ npm install hexo --save åˆå§‹åŒ–Hexoå¹¶å®‰è£…ç›¸åº”ä¾èµ–åŒ…\n\u003e hexo init \u003e npm intall è®°å¾—åœ¨ç¬¬ä¸€ç¯‡ä¸­è®²è¿‡ï¼Œæ–°å®‰è£…çš„Hexoæ˜¯æ²¡æœ‰hexo-deployer-gitä¾èµ–åŒ…çš„ï¼Œéœ€è¦æ‰‹åŠ¨å®‰è£…\n\u003e npm install hexo-deployer-git --save å¦‚æœä½ åœ¨Aæœºå™¨ä¸Šè®¾ç½®äº†è®¢é˜…ï¼ˆfeedï¼‰ï¼Œé‚£ä¹ˆä½ éœ€è¦é‡æ–°çƒ§åˆ¶feedï¼Œéœ€è¦é‡æ–°å®‰è£…ä¾èµ–åŒ…ï¼Œæ²¡æœ‰è®¾ç½®feedçš„å¯ä»¥ç•¥è¿‡\n\u003e npm install hexo-generation-feed --save å®‰è£…ä¸»é¢˜ï¼Œæˆ‘åœ¨ä¸Šæ–‡ä¸­æåˆ°æ–°å®‰è£…çš„ä¸»é¢˜å¹¶ä¸èƒ½è¢«ä¸Šä¼ ï¼Œæ‰€ä»¥ä¹Ÿéœ€è¦é‡æ–°æ‰‹åŠ¨å®‰è£…(ä»¥NexTä¸»é¢˜ä¸ºä¾‹)\n\u003e git clone https://github.com/iissnan/hexo-theme-next themes/next è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ï¼šthemes/nextæ˜¯ä¸»é¢˜ä¿å­˜ç›®å½•ã€‚\næˆ‘ä»¬ä¹‹å‰å¤‡ä»½çš„ä¸¤ä¸ªé…ç½®æ–‡ä»¶hexo_config.ymlå’Œtheme_config.ymlæœ‰ç”¨äº†,hexo_config.ymlé‡å‘½åä¸º_config.yml è¦†ç›–æ ¹ç›®å½•ä¸‹çš„åŒåæ–‡ä»¶ï¼Œè€Œtheme_config.ymlä¹Ÿé‡å‘½åä¸º_config.ymlè¦†ç›–ä¸»é¢˜ç›®å½•ä¸‹çš„config.ymlæ–‡ä»¶ã€‚æ³¨æ„æ–‡ä»¶åå‰é¢çš„ä¸‹åˆ’çº¿â€™_â€™ã€‚\nè¾“å…¥å‘½ä»¤ $ hexo generate å’Œå‘½ä»¤ $ hexo server ï¼Œ ç„¶ååœ¨æµè§ˆå™¨è¾“å…¥ localhost:4000 ä¸­è¿›è¡Œé¢„è§ˆã€‚ å¦‚æœæ²¡æœ‰é—®é¢˜é‚£ä¹ˆæˆ‘ä»¬åœ¨Bç”µè„‘ä¸Šå°±é…ç½®æˆåŠŸäº†ã€‚\nåœ¨Bç”µè„‘ä¸Šæ›´æ–°åšå®¢ ç°åœ¨åœ¨Bç”µè„‘ä¸Šä¹Ÿå¯ä»¥åƒåœ¨Aç”µè„‘ä¸Šä¸€æ ·æ›´æ–°åšå®¢äº†ï¼ŒåŒæ ·æ˜¯$ hexo new post \"my_new_post\" ç¼–è¾‘å®Œæ–‡ç« ï¼Œç„¶åæ‰§è¡Œ$ hexo generateå’Œ$ hexo deployå°±å¯ä»¥æˆåŠŸå‘è¡¨äº†ã€‚ è¿™é‡Œ$ hexo deployå‘½ä»¤æ˜¯å°†æˆ‘ä»¬çš„åšå®¢æ–‡ç« å‘è¡¨åˆ°æˆ‘ä»¬çš„Github ä¸Šçš„Hexoåšå®¢ï¼Œå¹¶ä¸æ˜¯å‰æ–‡æ–°å»ºçš„blogä»“åº“ï¼Œæ–°å»ºçš„blogä»“åº“ç”¨æ¥ä¿å­˜æˆ‘ä»¬çš„Hexoç¨‹åºã€‚\næŠŠBç”µè„‘ä¸Šçš„Hexoä»æœ¬åœ°åŒæ­¥åˆ°Githubä»“åº“ å½“å‘è¡¨å®Œæ–‡ç« ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æŠŠHexoç¨‹åºåŒæ­¥åˆ°æˆ‘ä»¬Githubçš„blogä»“åº“ã€‚æ‰§è¡Œä¸‹é¢æŒ‡ä»¤ï¼š\n$ git add .\nè¿™æ˜¯å¯ä»¥è¾“å…¥å‘½ä»¤$ git statusæŸ¥çœ‹çŠ¶æ€ï¼Œå›æ˜¾ç¤ºåˆšæ‰ç¼–è¾‘è¿‡çš„æ–‡ä»¶çš„ä¿¡æ¯ã€‚\nä¹‹ååˆ†åˆ«è¾“å…¥ä¸‹é¢æŒ‡ä»¤å®Œæˆä¸Šä¼ ï¼š\n$ git commit -m â€œcommit from PC_Bâ€ $ git push -u origin master\næˆåŠŸåï¼Œæˆ‘ä»¬å†æ¬¡æŠŠç¨‹åºåŒæ­¥æ›´æ–°åˆ°äº†æˆ‘ä»¬çš„Githubä»“åº“blogã€‚ å¦‚æœå†æƒ³ç”¨Aç”µè„‘æ›´æ–°æˆ‘ä»¬çš„åšå®¢ï¼Œåªéœ€è¦åœ¨æ‰§è¡Œæ·»åŠ æ–‡ç« ä¹‹å‰å…ˆæŠŠç¨‹åºä»blogä»“åº“æ‹‰å–ä¸‹æ¥ä¾¿å¯ã€‚è¾“å…¥å‘½ä»¤ï¼š\n\u003e git pull https://github.com/Gitzhaoyang/blog.git å³å¯å®Œæˆã€‚\næ³¨æ„äº‹é¡¹ æˆ‘ä»¬æ¯æ¬¡æ›´æ–°åšå®¢æ—¶ï¼Œä¸ºäº†ä¿æŒæˆ‘ä»¬æ¯æ¬¡ç”¨åˆ°çš„ç¨‹åºéƒ½æ˜¯æœ€æ–°çš„ã€‚\næ¯æ¬¡æ›´æ–°åšå®¢ä¹‹å‰éƒ½éœ€è¦æ‰§è¡Œ$ git pull https://github.com/xxxx/xxx.gitä¿æŒæœ¬åœ°æœ€æ–°ï¼›\næ¯æ¬¡æ›´æ–°åšå®¢ä¹‹åéƒ½éœ€è¦æ‰§è¡Œ $ git add . , $ git commit -m \"message\" , $ git push -u origin master ä»¥ä¿æŒ Github ä»“åº“ç¨‹åºæœ€æ–°ã€‚\nå¥½äº†ï¼Œç°åœ¨æˆ‘ä»¬å°±èƒ½å®ç°åœ¨ä¸åŒç”µè„‘éƒ½èƒ½å¯¹æˆ‘ä»¬çš„Hexoåšå®¢è¿›è¡Œç»´æŠ¤äº†ã€‚ğŸ˜ğŸ˜˜\n","description":"","tags":["Hexo","Github"],"title":"åœ¨Githubä¸Šé¢æ­å»ºHexoåšå®¢ï¼ˆå››ï¼‰:ä½¿ç”¨ä¸åŒç”µè„‘ç»´æŠ¤","uri":"/posts/create-hexo-on-github-4/"},{"categories":null,"content":"æ›´æ¢ä¸»é¢˜å¾ˆç®€å•ï¼Œé¦–å…ˆæ„Ÿè°¢@iissnanï¼Œå› ä¸ºåšä¸»ç”¨çš„æ˜¯@iissnançš„NexTä¸»é¢˜ï¼Œæ‰€ä»¥æœ¬æ–‡å°±ä»¥NexTä¸»é¢˜ä¸ºä¾‹è®²è§£å¦‚ä½•æ›´æ¢åšå®¢ä¸»é¢˜ã€‚åœ¨æ–‡æœ«æˆ‘ä¼šç»™å‡ºæ›´å¤šä¼˜ç§€ä¸»é¢˜çš„Githubåœ°å€ã€‚\nä¸ºè‡ªå·±çš„Hexoåšå®¢æ›´æ¢ä¸»é¢˜ æˆ‘è¿™é‡Œè®²åˆ°çš„ä¹Ÿæ˜¯å‚è€ƒäº†NexTä¸»é¢˜ä½œè€…çš„ä½¿ç”¨æ–‡æ¡£ï¼Œæ›´è¯¦ç»†çš„è®¾ç½®è¯»è€…ä»¬å¯ä»¥ç›´æ¥å»å‚è€ƒè¯¥ä½¿ç”¨æ–‡æ¡£ã€‚\nä¸‹è½½NexTä¸»é¢˜åŒ… ä»ç„¶åœ¨åšå®¢æ ¹ç›®å½•ä¸‹è¿è¡ŒGit bashå‘½ä»¤è¡Œå·¥å…·ï¼Œè¾“å…¥ä¸‹é¢ä¸€æ¡æŒ‡ä»¤ç”¨ä»¥å…‹éš†æœ€æ–°ç‰ˆæœ¬ï¼š\n\u003e git clone https://github.com/iissnan/hexo-theme-next theme/next å¯ç”¨ä¸»é¢˜ ä¸‹è½½å®Œæˆåï¼Œæ‰“å¼€åšå®¢é…ç½®æ–‡ä»¶_config.themeï¼Œä¿®æ”¹é‡Œé¢çš„themeå­—æ®µï¼Œå°†å…¶å€¼è®¾ç½®ä¸ºnext\néªŒè¯ä¸»é¢˜æ˜¯å¦å¯ç”¨æˆåŠŸ åœ¨Git Bashä¸­è¾“å…¥$ npm serverå¯ç”¨æœ¬åœ°æœåŠ¡ï¼Œç„¶ååœ¨æµè§ˆå™¨ä¸­è¾“å…¥localhost:4000è¿›è¡Œé¢„è§ˆå³å¯\næ›´å¤šè¯¦ç»†çš„è®¾ç½®ï¼Œä¸å†èµ˜è¿°ï¼Œå¯ä»¥å‚è€ƒNexTçš„ä½¿ç”¨æ–‡æ¡£\nå…¶ä»–ä¼˜ç§€çš„ä¸»é¢˜æ¨èï¼š  iissnan/hexo-theme-next TryGhost/Casper daleanthony/uno orderedlist/modernist litten/hexo-theme-yilia A-limon/pacman AlxMedia/hueman kathyqian/crisp-ghost-theme  æ›´å¤šä¼˜ç§€çš„ä¸»é¢˜å¯ä»¥å‚è€ƒçŸ¥ä¹å›ç­”ï¼šæœ‰å“ªäº›å¥½çœ‹çš„hexoä¸»é¢˜?ï¼å®¶é¡ºå¼ çš„å›ç­”\n","description":"","tags":["Hexo","Github"],"title":"åœ¨Githubä¸Šé¢æ­å»ºHexoåšå®¢ï¼ˆä¸‰ï¼‰ï¼šæ›´æ¢Hexoä¸»é¢˜","uri":"/posts/create-hexo-on-github-3/"},{"categories":null,"content":"å¦‚ä½•é…ç½®Hexo ä¸Šä¸€èŠ‚ä¸­æˆ‘ä»¬å·²ç»åœ¨æœ¬åœ°å’ŒGithubä¸Šæ­å»ºèµ·äº†è‡ªå·±çš„åšå®¢ï¼Œä½†æ˜¯åšå®¢çš„é…ç½®éƒ½æ˜¯é»˜è®¤å€¼ï¼Œå¦‚æœæˆ‘ä»¬æƒ³ä¸ªæ€§åŒ–è‡ªå·±çš„åšå®¢ï¼Œæˆ‘ä»¬åº”è¯¥åšä»€ä¹ˆå‘¢ã€‚è¿™ä¸€èŠ‚ä¸­æˆ‘ä»¬ä¸€èµ·æ¥é…ç½®è‡ªå·±çš„åšå®¢çš„åŸºæœ¬ä¿¡æ¯å’Œä»‹ç»å¦‚ä½•å†™åšå®¢å’Œå‘è¡¨åšå®¢ã€‚ä¸‹ä¸€èŠ‚æˆ‘ä»¬å°†ä¸€èµ·ä¸ºè‡ªå·±çš„åšå®¢å®‰è£…æ–°çš„ä¸»é¢˜ã€‚\nåšå®¢çš„ä¸»è¦é…ç½®ç”¨åˆ°æ ¹ç›®å½•ä¸‹çš„_config.ymlæ–‡ä»¶ï¼Œæˆ‘åœ¨ä¸‹é¢ç»™å‡ºæ–‡ä»¶å’Œè§£é‡Šï¼Œä½ åªéœ€è¦æ ¹æ®è‡ªå·±éœ€æ±‚ä½œå‡ºç®€å•æ›´æ”¹å³å¯ï¼š\n# Hexo Configuration ## Docs: http://hexo.io/docs/configuration.html ## Source: https://github.com/hexojs/hexo/ # Site title: Mungo's Note##ç«™ç‚¹çš„åå­— subtitle:##ç«™ç‚¹çš„å‰¯æ ‡é¢˜ description: æ—¥å¸¸æŠ€æœ¯åˆ†äº« ##ç«™ç‚¹ä»‹ç»ï¼Œå¯¹ç«™ç‚¹è¿›è¡Œæè¿° author: Mungo##ç«™ç‚¹æ–‡ç« çš„ä½œè€… email: gmzhaoyang@gmail.com##ä½ çš„é‚®ç®±åœ°å€ language:##è¯­è¨€ï¼Œé»˜è®¤ä¸­æ–‡ï¼Œä¸å¡«å†™å³å¯ timezone:##æ—¶åŒºï¼Œé»˜è®¤å³å¯ # URL ## If your site is put in a subdirectory, ## set url as 'http://yoursite.com/child' and root as '/child/' url: http://mungo.space##ç«™ç‚¹çš„åŸŸåï¼Œå¦‚æœå¥‡æ€ªæˆ‘ä¸ºä»€ä¹ˆå¯ä»¥ç”¨è‡ªå·±çš„åŸŸåï¼Œå¯ä»¥çœ‹åç»­æ›´æ–° root: / permalink: :year/:month/:day/:title/ permalink_defaults: ## å¯¹èµ„æºæ–‡ä»¶å¤¹çš„é…ç½®ï¼Œå¦‚èµ„æºæ–‡ä»¶å¤¹åç§°ï¼Œæ ‡ç­¾äº‘åç§°ï¼Œåˆ†ç±»é¡µé¢åç§° # Directory source_dir: source##èµ„æºæ–‡ä»¶å¤¹,å½“æ‰§è¡Œ`$ hexo deloy`å‘½ä»¤ï¼Œä¸Šä¼ çš„å³æ˜¯è¯¥æ–‡ä»¶å¤¹é‡Œé¢çš„å†…å®¹ public_dir: public##å…¬å…±æ–‡ä»¶å¤¹ï¼Œå½“æ‰§è¡Œ`$ hexo generate`å‘½ä»¤ï¼Œç”Ÿæˆçš„æ–‡ä»¶éƒ½åœ¨é‡Œé¢ tag_dir: tags##æ ‡ç­¾äº‘æ–‡ä»¶å¤¹ï¼Œéœ€è¦è‡ªå·±ç”Ÿæˆï¼Œè¯¦æƒ…è§ä¸‹ä¸€èŠ‚å¦‚ä½•é…ç½®ä¸»é¢˜ archive_dir: archives##å½’æ¡£æ–‡ä»¶å¤¹ï¼Œéœ€è¦è‡ªå·±ç”Ÿæˆ category_dir: categories##åˆ†ç±»æ–‡ä»¶å¤¹ï¼Œéœ€è¦è‡ªå·±ç”Ÿæˆ code_dir: downloads/code##ä»£ç å­˜æ”¾åŒº i18n_dir: :lang skip_render: ##æ­¤å¤„æ—¶é…ç½®åšå®¢æ–‡ç« å†…å®¹æ ¼å¼çš„ï¼Œå¯ä»¥ä¿æŒé»˜è®¤ï¼Œä¸åšä¿®æ”¹ # Writing new_post_name: :title.md # File name of new posts default_layout: post titlecase: false # Transform title into titlecase external_link: true # Open external links in new tab filename_case: 0 render_drafts: false post_asset_folder: false relative_link: false future: true highlight: enable: true line_number: true auto_detect: true tab_replace: #åˆ†ç±»å’Œæ ‡ç­¾äº‘çš„é…ç½®ï¼Œå¯ä»¥ä¸åšä¿®æ”¹ï¼Œé»˜è®¤å³å¯ # Category \u0026 Tag default_category: uncategorized category_map: tag_map: #æ—¥æœŸå’Œæ—¶é—´æ ¼å¼çš„é…ç½®ï¼Œå¯ä»¥ä¸åšä¿®æ”¹ï¼Œé»˜è®¤å³å¯ # Date / Time format ## Hexo uses Moment.js to parse and display date ## You can customize the date format as defined in ## http://momentjs.com/docs/#/displaying/format/ date_format: YYYY-MM-DD time_format: HH:mm:ss #ç”¨æ¥é…ç½®æ¯é¡µæ˜¾ç¤ºçš„æ–‡ç« æ•°ç›®ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±éœ€æ±‚è‡ªè¡Œä¿®æ”¹ # Pagination ## Set per_page to 0 to disable pagination per_page: 10 pagination_dir: page #æ’ä»¶å’Œä¸»é¢˜é…ç½®ï¼Œåœ¨è¿™é‡Œå¯ä»¥ä¿®æ”¹è‡ªå·±çš„ä¸»é¢˜ # Extensions ## Plugins: http://hexo.io/plugins/ ## Themes: http://hexo.io/themes/ theme: next #ä¸Šä¼ é…ç½®ï¼Œä¸Šä¸€èŠ‚ä¸­æˆ‘ä»¬å·²ç»é…ç½®å®Œæˆäº†ï¼Œåœ¨è¿™é‡Œä¸éœ€è¦å†æ¬¡ä¿®æ”¹ # Deployment ## Docs: http://hexo.io/docs/deployment.html deploy: type: git repository: https://github.com/Gitzhaoyang/gitzhaoyang.github.io.git branch: master å½“é…ç½®å®Œæˆå¹¶ä¿å­˜åï¼Œå°±å¯ä»¥æ‰§è¡Œ$ hexo generateç”Ÿæˆé™æ€æ–‡ä»¶ï¼Œç„¶åæ‰§è¡Œ$ hexo serveråå°±å¯ä»¥æ‰“å¼€æµè§ˆå™¨è¾“å…¥localhost:4000è¿›è¡Œæœ¬åœ°é¢„è§ˆäº†\ntips å¦‚æœ_config.ymlæ–‡ä»¶æ‰“å¼€æœ‰ä¹±ç åº”è¯¥æ˜¯ç”¨åˆ°çš„ç¼–è¾‘å™¨çš„åŸå› ï¼Œæˆ‘ç”¨çš„æ˜¯Sublime2ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¸ä¼šå‡ºç°ä¹±ç ã€‚å¦‚æœä¹±ç ï¼Œé‚£ä¹ˆéœ€è¦æŠŠæ–‡ä»¶æ ¼å¼è½¬æ¢ä¸ºUTF-8ï¼Œè½¬åŒ–æ–¹æ³•æˆ‘åœ¨è¿™é‡Œå°±ä¸å†èµ˜è¿°äº†ã€‚\nå¦‚ä½•æ·»åŠ å’Œå‘è¡¨æ–‡ç«  æ–°å»ºæ–‡ç«  åœ¨Git Bashä¸­è¾“å…¥\n$ hexo new post â€œmy_first_postâ€\nç¼–è¾‘æ–‡ç«  ç¬¬ä¸€æ­¥çš„å‘½ä»¤ä¼šåœ¨\\Hexo\\source\\_postsæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ªåç¼€.mdæ–‡ä»¶ï¼Œä½ å¯ä»¥åœ¨é‡Œé¢æ·»åŠ ä»»ä½•å­—ç¬¦ä¸²ã€‚\nè¿™å…¶å®æ˜¯ä¸€ä¸ªmarkdownç±»å‹çš„æ–‡ä»¶ï¼Œä½¿ç”¨markdownè¯­è¨€ç¼–å†™ï¼Œæˆ‘è¿™ç¯‡åšæ–‡å°±æ˜¯ç”¨markdownç¼–å†™çš„ï¼Œå¦‚æœä¸äº†è§£çš„ï¼Œå¯ä»¥çœ‹æˆ‘çš„åç»­æ›´æ–°ï¼Œæˆ‘ä¼šæŠŠmarkdownçš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•è¿›è¡Œæ•´ç†ã€‚\nç”Ÿæˆå’Œä¸Šä¼    åœ¨GitBashä¸­è¾“å…¥$ hexo generateå¯¹æ–‡ä»¶è¿›è¡Œç”Ÿæˆï¼›\n  ç”Ÿæˆå®Œæˆåï¼Œå¯ä»¥è¾“å…¥$ hexo serverï¼Œç„¶ååœ¨æµè§ˆå™¨è¾“å…¥localhost:4000è¿›è¡Œé¢„è§ˆï¼›\n  é¢„è§ˆæ²¡æœ‰é—®é¢˜åï¼Œæ¥ç€è¾“å…¥$ hexo deployï¼Œwindowså¹³å°ä¸‹ä¼šæç¤ºè¾“å…¥Githubçš„ç”¨æˆ·åï¼Œç„¶åæç¤ºè¾“å…¥Githubçš„ç™»å½•å¯†ç ã€‚å¦‚æœè¾“å…¥æ­£ç¡®ï¼Œç­‰å¾…å‡ ç§’ä¾¿èƒ½ä¸Šä¼ æˆåŠŸï¼›\n  ç°åœ¨å¯ä»¥åœ¨æµè§ˆå™¨ä¸­è¾“å…¥xxxx.github.ioè¿›è¡Œè®¿é—®äº†ã€‚\n  æ³¨æ„ å¯èƒ½ä¸ä¼šç«‹å³ç”Ÿæ•ˆï¼Œåªè¦ç­‰å¾…å‡ åˆ†é’Ÿæˆ–è€…æ¸…ç©ºä¸€ä¸‹æµè§ˆå™¨ç¼“å­˜åŸºæœ¬å°±èƒ½è§£å†³ã€‚å¦‚æœä»ç„¶çœ‹ä¸åˆ°ï¼Œè¯´æ˜å‰é¢æ­¥éª¤æ“ä½œæœ‰é”™è¯¯ï¼Œé‡æ–°ç”Ÿæˆå’Œä¸Šä¼ å°±å¯ä»¥äº†ã€‚\nå¦‚æœå®åœ¨ä¸è¡Œï¼Œå¯ä»¥åœ¨Git Bashä¸­è¾“å…¥$ hexo cleanæˆ–è€…æ‰‹åŠ¨åˆ é™¤.deploy_gitæ–‡ä»¶å¤¹å’Œdb.jsonæ–‡ä»¶å†é‡æ–°ç”Ÿæˆå’Œä¸Šä¼ ã€‚\nåˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»æ­å»ºèµ·è‡ªå·±çš„åšå®¢ï¼Œå¯ä»¥è¿›è¡ŒåŸºæœ¬çš„é…ç½®ï¼Œä¹Ÿå¯ä»¥å‘è¡¨æ–‡ç« ï¼Œåé¢ä¼šæœ‰æ›´é«˜é˜¶çš„è®¾ç½®ï¼Œå¦‚ï¼šå¦‚ä½•é…ç½®ä¸»é¢˜ï¼Œå¦‚ä½•åœ¨ä¸åŒç”µè„‘ä¸Šéƒ½å¯ä»¥æ›´æ–°è‡ªå·±çš„åšå®¢ etc.æ„Ÿå…´è¶£çš„äººå¯ä»¥å…³æ³¨ã€‚ğŸ˜˜\n","description":"","tags":["Hexo","Github"],"title":"åœ¨Githubä¸Šé¢æ­å»ºHexoåšå®¢ï¼ˆäºŒï¼‰ï¼šé…ç½®å’Œå‘è¡¨æ–‡ç« ","uri":"/posts/create-hexo-on-github-2/"},{"categories":null,"content":"ä»€ä¹ˆæ˜¯SSH SSHä¸ºSecure Shellçš„ç¼©å†™ï¼Œæ˜¯å»ºç«‹åœ¨åº”ç”¨å±‚å’Œä¼ è¾“å±‚åŸºç¡€ä¸Šçš„åè®®ã€‚SSHæ˜¯ç›®å‰è¾ƒå¯é ï¼Œä¸“ä¸ºè¿œç¨‹ç™»å½•ä¼šè¯å’Œå…¶ä»–ç½‘ç»œæœåŠ¡æä¾›å®‰å…¨æ€§çš„åè®®ã€‚åˆ©ç”¨SSHåè®®å¯ä»¥æœ‰æ•ˆé˜²æ­¢è¿œç¨‹ç®¡ç†ä¸­é¢ä¿¡æ¯æ³„æ¼é—®é¢˜ã€‚æˆ‘ç†è§£çš„å°±æ˜¯ç»™æ•°æ®è¿›è¡ŒåŠ å¯†ï¼Œç„¶åé˜²æ­¢ä¸­é—´äººè¿›è¡Œç›—å–ï¼Œèƒ½ä½¿ä½ çš„æ•°æ®å®‰å…¨å¯é çš„ä¼ è¾“åˆ°ç›®çš„æ–¹ã€‚åœ¨è¿™é‡Œå°±æ˜¯ä¸ºäº†ä¿è¯ä½ ç”µè„‘å’ŒGithubä»“åº“ä¹‹é—´é€šä¿¡çš„å®‰å…¨ã€‚\nå¦‚ä½•é…ç½®Githubçš„SSH é¢˜ä¸»è¿™é‡Œç”¨çš„ä¾ç„¶æ˜¯windowså¹³å°ã€‚\nStep 1: æ£€æŸ¥SSH keys é¦–å…ˆï¼Œæˆ‘ä»¬è¦æŸ¥çœ‹åœ¨ä½ ç”µè„‘ä¸Šå·²ç»å­˜åœ¨çš„SSH keysã€‚è¿è¡ŒGit Bash ç„¶åè¾“å…¥ï¼š\n$ ls -al ~/.ssh  å¦‚æœä½ å·²ç»æœ‰SSHå…¬é’¥äº†ã€‚é‚£ä¹ˆä½ å°†ä¼šçœ‹åˆ°ä¸‹é¢æ ¼å¼çš„æ–‡ä»¶åå­—ï¼š\nid_dsa.pub id_esdsa.pub id_ed25519.pub id_rsa.pub  å¦‚æœä½ å·²ç»å­˜åœ¨å…¬é’¥äº†ï¼Œé‚£ä¹ˆå¯ä»¥è·³è¿‡Step 2ç›´æ¥å»Step 3äº†ã€‚å¦‚æœæ²¡æœ‰ä¹Ÿä¸è¦æ‹…å¿ƒï¼Œæˆ‘ä»¬å°†åœ¨Step 2 ä¼šåˆ›å»ºå…¬é’¥ã€‚\nStep 2: ç”ŸæˆSSH key   åœ¨Git Bashä¸­è¾“å…¥ä¸‹é¢å‘½ä»¤ï¼Œå¼•å·å†…ä¸€å®šæ˜¯ä½ çš„Githubæ³¨å†Œé‚®ç®±åœ°å€  $ ssh-keygen -t rsa -b 4096 -C \"your_github_email@example.com\" #è¿™å¥ä½œç”¨æ˜¯ç”Ÿæˆä¸€ä¸ªæ–°çš„SSH key    ç­‰å¾…å‡ ç§’ï¼Œå½“æç¤ºè®©ä½ è¾“å…¥ä¿å­˜åœ°å€æ—¶ï¼Œå®˜æ–¹ç‰¹åˆ«æ¨èæ”¾åœ¨é»˜è®¤ä½ç½®å°±å¯ä»¥äº†ã€‚æ‰€ä»¥è¿™é‡Œç›´æ¥è¾“å…¥å›è½¦ï¼Œæç¤ºå¦‚ä¸‹ï¼š  Enter file in which to save the key (/Users/you/.ssh/id_rsa):[ç›´æ¥è¾“å…¥å›è½¦]    å°†ä¼šæç¤ºä½ è¾“å…¥ä¸€ä¸ªå¯†ç ä¸²**(è¿™é‡Œè¾“å…¥å¯†ç æ—¶ä¸ä¼šæ˜¾ç¤ºåœ¨å±å¹•ä¸Šçš„ï¼Œåªè¦è¾“å…¥æ­£ç¡®æŒ‰å›è½¦å°±å¥½)**:  Enter passphrase ï¼ˆempty for no passphraseï¼‰: [è¾“å…¥ä½ æƒ³è®¾ç½®çš„å¯†ç ] Enter same passphrase againï¼š[åœ¨è¾“å…¥ä¸€éå¯†ç ] ï¼ƒè™½ç„¶è¯´è¿™é‡Œå¯ä»¥è®¾ç½®ä¸ºç©ºï¼Œä½†æ˜¯æ¨èç”¨ä¸€ä¸ªæ›´åŠ å®‰å…¨çš„å¯†ç     è¾“å®Œå¯†ç ä¹‹åï¼Œä½ å°†ä¼šå¾—åˆ°ä½ çš„SSHçš„æŒ‡çº¹(fingerprint)æˆ–è€…idã€‚ä»–çœ‹èµ·æ¥å¦‚ä¸‹å›¾ï¼š   Step 3: æŠŠä½ çš„SSH keyæ·»åŠ åˆ°ssh-agent   è¾“å…¥å¦‚ä¸‹å‘½ä»¤  $ ssh-agent -s  ä¼šå“åº”ï¼š\n echo Agent pid [ç«¯å£å·]    åŠ ä¸‹æ¥è¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼ŒæŠŠä½ çš„SSH keyæ·»åŠ åˆ°ssh-agent  $ ssh-add ~/.ssh/id_rsa  å¦‚æœä»–æç¤ºå¦‚ä¸‹ï¼Œè¯´æ˜ä¸èƒ½æ‰“å¼€æ‚¨èº«ä»½éªŒè¯çš„ä»£ç†\n Could not open a connection to your authentication agent.  åªéœ€è¦è¾“å…¥å¦‚ä¸‹å‘½ä»¤å³å¯è§£å†³ï¼š\n ssh-agnet bash  æ›´å¤šå…³äºssh-agentçš„ç»†èŠ‚ï¼Œå¯ä»¥ç”¨man ssh-agent æ¥æŸ¥çœ‹\n  Step 4: æŠŠä½ çš„SSH keyæ·»åŠ åˆ°ä½ çš„Githubè´¦æˆ· é¦–å…ˆä½ åº”è¯¥æŠŠä½ çš„ SSH key å¤åˆ¶åˆ°ä½ çš„å‰ªè´´æ¿ï¼Œè¾“å…¥å‘½ä»¤å³å¯å®ŒæˆæŠŠ SSH key å¤åˆ¶åˆ°ä½ çš„å‰ªè´´æ¿ï¼š\n$ clip \u003c ~/.ssh/id_ras.pub  æ·»åŠ åˆ°ä½ çš„Githubè´¦æˆ·ï¼š\n  æµè§ˆå™¨ç™»é™†ä½ çš„Githubè´¦æˆ·ï¼Œç‚¹å‡»å³ä¸Šè§’ä½ çš„å¤´åƒï¼Œç„¶åç‚¹å‡»Settings   è¿›å…¥Settingsï¼Œç‚¹å‡»ä¾§æ é€‰é¡¹SSH key   å•å‡»å³è¾¹ Add SSH key æŒ‰é’®   åœ¨ä¸‹é¢è¾“å…¥æ ‡é¢˜ï¼ˆTitleï¼Œè¿™ä¸ªå¯ä»¥è‡ªå®šä¹‰ï¼‰å’ŒSHH Keyï¼ˆç›´æ¥ Ctrlï¼‹V ç²˜è´´å°±å¯ä»¥ï¼‰   ç‚¹å‡»ä¸‹é¢çš„Add keyæŒ‰é’®ä¾¿å¯ä»¥æ·»åŠ æˆåŠŸäº†   Step 5: æµ‹è¯•æ˜¯å¦è¿æ¥æˆåŠŸ   åœ¨Git Bashä¸­è¾“å…¥ï¼š  $ ssh -T git@github.com # sshå°è¯•è¿æ¥åˆ°GitHub    ä½ å¯èƒ½çœ‹åˆ°ä¸‹é¢çš„è­¦å‘Šï¼š  The authenticity of host 'github.com(207.97.227.239)' can't be established. RSA key fingerprint is SHA256:nJKJFKDnDLFJDndndnfkdfldjfldldfjld. Are you sure you want to continue connecting (yes/no)?  ç¡®å®šæç¤ºä¿¡æ¯é‡Œçš„æŒ‡çº¹ï¼ˆfingerprintï¼‰æ˜¯å¦åŒ¹é…ï¼Œå¦‚æœåŒ¹é…å°±é”®å…¥ï½€yesï½€ï¼Œå°†å¾—åˆ°ï¼š\n Hi [ä½ çš„ç”¨æˆ·å]! You've successfully authenticated, but GitHub does not provide shell access.    å¦‚æœæç¤ºä¿¡æ¯ä¸­ä½ çš„ç”¨æˆ·åæ˜¯ä½ çš„ï¼Œé‚£ä¹ˆä½ å°±æˆåŠŸå»ºç«‹äº†SSH keyï¼ğŸ˜ğŸ˜   TIPSï¼šå¦‚æœé‡åˆ°å…¶ä»–é—®é¢˜ï¼Œå¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼Œä¹Ÿå¯ä»¥ç»™æˆ‘ç•™è¨€ ","description":"","tags":["Github","SSH"],"title":"å¦‚ä½•é…ç½®Githubçš„SSH key","uri":"/posts/how-to-config-ssh-on-github/"},{"categories":null,"content":"ä»€ä¹ˆæ˜¯Hexo Hexoæ˜¯ä¸€ä¸ªåŸºäºNode.jsçš„é™æ€åšå®¢ç¨‹åºï¼Œå¯ä»¥æ–¹ä¾¿çš„ç”Ÿæˆé™æ€ç½‘é¡µæ‰˜ç®¡åœ¨Githubå’ŒHerokuä¸Šã€‚å¹¶ä¸”æœ‰å¾ˆå¤šäººä¸ºå…¶åˆ¶ä½œäº†å¾ˆå¤šä¼˜ç§€çš„ä¸»é¢˜ï¼ˆthemeï¼‰ï¼Œä½ å¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½è¿›è¡Œè®¾ç½®ã€‚ä¸»é¢˜çš„è®¾ç½®å°†åœ¨åé¢çš„ç« èŠ‚ä¸­ä»‹ç»ã€‚\nè¿™ä¸ªæ˜¯Hexoå®˜æ–¹ç½‘ç«™ä»‹ç»ï¼š\n Hexo is a fast, simple and powerful blog framework. You write posts in Markdown (or other languages) and Hexo generates static files with a beautiful theme in seconds.\n ç¿»è¯‘è¿‡æ¥å°±æ˜¯ï¼š\n Hexo æ˜¯ä¸€ä¸ªå¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æ¶ã€‚Hexo ä½¿ç”¨ Markdownï¼ˆæˆ–å…¶ä»–æ¸²æŸ“å¼•æ“ï¼‰è§£ææ–‡ç« ï¼Œ åœ¨å‡ ç§’å†…ï¼Œå³å¯åˆ©ç”¨é“ä¸½çš„ä¸»é¢˜ç”Ÿæˆé™æ€ç½‘é¡µã€‚\n æ€ä¹ˆåœ¨Githubä¸Šæ­å»ºä¸€ä¸ªhexoåšå®¢ æˆ‘ç”¨äº†ä¸€å¤©æ—¶é—´ç ”ç©¶å’Œæ­å»ºäº†ä¸€ä¸ªGithubåšå®¢(GitHub Pages site)ï¼Œè¿‡ç¨‹ä¸­é‡åˆ°ä¸€äº›å°é—®é¢˜ï¼Œç°åœ¨å†™ä¸€ç¯‡æ•™ç¨‹ï¼Œæ–¹ä¾¿å’Œæˆ‘ä¸€æ ·çˆ±æŠ˜è…¾ä½†æ˜¯æ˜¯æ–°æ‰‹çš„äººã€‚\næ³¨æ„ å› ä¸ºé¢˜ä¸»åœ¨æ­å»ºæ—¶åœ¨Windowså¹³å°ï¼Œæ‰€ä»¥è®²è§£ä¸ºWindowsç‰ˆæœ¬ï¼Œä½†æ˜¯å„ä¸ªå¹³å°å¤§åŒå°å¼‚ï¼Œæ‰€ä»¥å®è·µèµ·æ¥å¹¶æ²¡æœ‰å¾ˆå¤§çš„å·®åˆ«ã€‚\nä»¥ä¸‹ä¸ºæ•™ç¨‹æ­£æ–‡ï¼š\nå®‰è£…Git å‰å¾€Gitå®˜ç½‘ä¸‹è½½Windowsç‰ˆæœ¬å‹ç¼©åŒ…ï¼Œä¸‹è½½å®Œæˆåè§£å‹å®‰è£…ã€‚\nå®‰è£…Node.js å‰å¾€Node.jså®˜æ–¹ä¸‹è½½ç½‘ç«™ï¼Œä¸‹è½½Node.jså®˜æ–¹å®‰è£…åŒ…ï¼Œä¸‹è½½å®ŒæˆååŒæ ·è§£å‹å®‰è£…ã€‚\nå®‰è£…Hexo åˆ°ç›®å‰ä¸ºæ­¢ï¼Œå®‰è£…Hexoæ‰€éœ€è¦çš„ç¯å¢ƒå·²å°†å®‰è£…å®Œæˆï¼Œä¸‹ä¸€æ­¥åªéœ€è¦å®‰è£…Hexoä¾¿å¯ä»¥äº†ã€‚ ç‚¹å‡»é¼ æ ‡å³é”®ï¼Œçœ‹æ˜¯å¦æœ‰Git bash Hereé€‰é¡¹ã€‚å¦‚æœæ²¡æœ‰å¯ä»¥å‰å¾€Gitå®‰è£…æ ¹ç›®å½•ï¼Œå¯åŠ¨git-base.exeä¹Ÿå¯ä»¥ã€‚ åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ï¼š\n$ npm install -g hexo-cli\nHexo ä¾¿å®‰è£…å®Œæˆäº†\nåˆ›å»ºHexoæ–‡ä»¶å¤¹ æ‰¾åˆ°æƒ³è¦æ”¾ç½®åšå®¢çš„æ–‡ä»¶å¤¹ï¼Œæ¯”å¦‚ï¼ˆF:\\Hexoï¼‰ï¼Œåœ¨è¯¥ç›®å½•ä¸‹é¼ æ ‡å³å‡»æ‰“å¼€Gitbashå·¥å…·ï¼Œï¼ˆå³é”®èœå•ä¸­æ²¡æœ‰è¯¥é€‰é¡¹çš„å¯ä»¥ç”¨cmdå‘½ä»¤cdç­‰è¿›å…¥è¯¥æ–‡ä»¶å¤¹ï¼‰ã€‚æ‰§è¡Œä¸‹é¢çš„è¯­å¥ï¼Œä¼šåœ¨F:\\Hexoæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºnode_modules æ–‡ä»¶å¤¹ï¼š\n\u003e hexo init è¿™é‡Œ init åé¢å¯ä»¥è·Ÿæ–‡ä»¶ç›®å½•ï¼Œæ¯”å¦‚æˆ‘æƒ³åœ¨F:\\Hexoä¸‹åˆ›å»ºåšå®¢æ–‡ä»¶å¤¹ï¼Œé‚£ä¹ˆå¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤ï¼š\n$ hexo init F:\\Hexo\nå®‰è£…ä¾èµ–åŒ… åœ¨Hexoç›®å½•ä¸‹ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œä½ ä¼šå‘ç°F:\\Hexo\\node_modulesç›®å½•ä¸‹å¤šäº†å¥½å¤šæ–‡ä»¶å¤¹\n\u003e npm install æœ¬åœ°è°ƒè¯• ç›®å‰ä¸ºæ­¢ï¼Œå·²ç»æ­å»ºå¥½è‡ªå·±çš„Hexoåšå®¢äº†ï¼Œä½†æ˜¯åªèƒ½åœ¨æœ¬æœºä¸ŠæŸ¥çœ‹ã€‚ æ‰§è¡Œä»¥ä¸‹ä¸¤ä¸ªå‘½ä»¤ï¼ˆåœ¨F:\\Hexoç›®å½•ä¸‹ï¼‰ï¼Œç„¶ååœ¨æµè§ˆå™¨ä¸­è¾“å…¥ localhost:4000 å°±å¯ä»¥çœ‹åˆ°è‡ªå·±çš„åšå®¢äº†\n\u003e hexo generate \u003e hexo serrver ä½†æ˜¯åªèƒ½åœ¨æœ¬åœ°æŸ¥çœ‹ï¼Œå¦‚æœæƒ³è®©åˆ«äººä¹Ÿèƒ½è®¿é—®ï¼Œé‚£ä¹ˆå°±éœ€è¦éƒ¨ç½²åˆ°Github ä¸Šé¢ï¼Œä¸‹é¢ï¼Œæˆ‘ä»¬å°±éƒ¨ç½²ä¸Šå»ã€‚\næ³¨å†ŒGithubè´¦æˆ· å‰å¾€Githubç½‘ç«™ï¼Œæ³¨å†Œä¸€ä¸ªæ–°ç”¨æˆ·ã€‚ç”¨é‚®ç®±æ³¨å†Œçš„ä¸€å®šå‰å¾€é‚®ç®±å»éªŒè¯é‚®ä»¶ã€‚è¦ä¸ç„¶ä¹‹åå¯èƒ½ä¼šæœ‰å°é—®é¢˜ã€‚\nåˆ›å»ºä¸€ä¸ªæ–°çš„repository åœ¨è‡ªå·±çš„Githubä¸»é¡µå³ä¸‹è§’,åˆ›å»ºä¸€ä¸ªæ–°çš„repositoryã€‚ æ¯”å¦‚æˆ‘çš„Githubç”¨æˆ·åä¸ºGitzhaoyangï¼Œé‚£ä¹ˆæˆ‘åˆ›å»ºçš„repositoryçš„åå­—åº”è¯¥æ˜¯ gitzhaoyang.github.io ã€‚\nè¿™é‡Œä¸¥é‡æ³¨æ„ ä¸€å®šè¦ä»¥ä½ çš„Githubç”¨æˆ·å.github.ioåˆ›å»ºã€‚å‡å¦‚æˆ‘æ²¡æœ‰ç”¨gitzhaoyang.github.ioè€Œæ˜¯ç”¨äº†mungo.github.io ï¼Œé‚£ä¹ˆå½“æˆ‘æµè§ˆå™¨è®¿é—®åšå®¢çš„æ—¶å€™ä¼šå‡ºç°404é”™è¯¯ã€‚è¿™é‡Œå¹¶ä¸æ˜¯æ²¡æœ‰éƒ¨ç½²æˆåŠŸï¼Œè€Œæ˜¯æŠŠå®ƒéƒ¨ç½²åœ¨äº†è¿™é‡Œ:http://gitzhaoyang.github.io/mungo.github.ioã€‚æ‰€ä»¥ï¼Œå¦‚æœæƒ³ç›´æ¥gitzhaoyang.github.ioè®¿é—®ï¼Œé‚£ä¹ˆå°±éœ€è¦å’Œç”¨æˆ·åä¿æŒä¸€è‡´ã€‚é¢˜ä¸»åœ¨è¿™é‡Œåƒäº†ä¸å°çš„è‹¦å¤´ï¼Œæœ€åç»™Githubå®¢æœå‘é‚®ä»¶æ‰çŸ¥é“åŸå› ã€‚\nåˆ›å»ºå¥½å¦‚ä¸‹å›¾ï¼š\nå°†æœ¬åœ°çš„æ–‡ä»¶éƒ¨ç½²ï¼ˆä¸Šä¼ ï¼‰åˆ°Githubè´¦æˆ·ä¸­ ç¼–è¾‘æœ¬åœ°Hexoç›®å½•ä¸‹æ–‡ä»¶_comfig.ymlï¼Œåœ¨æœ€åæ·»åŠ å¦‚ä¸‹ä»£ç ï¼ˆåœ¨ä½ ä¿®æ”¹æ—¶ï¼ŒæŠŠ gitzhaoyang è¦æ›¿æ¢æˆä½ è‡ªå·±çš„ç”¨æˆ·åï¼‰\ndeploy: type: git repository: http://github.com/Gitzhaoyang/gitzhaoyang.github.io.git branch: master .ymlæ–‡ä»¶å¯¹æ ¼å¼è§„èŒƒè¦æ±‚å¾ˆä¸¥æ ¼ï¼Œtype: repository: branch: å‰é¢æœ‰ä¸¤ä¸ªç©ºæ ¼ï¼Œå†’å·åé¢éƒ½æœ‰ä¸€ä¸ªç©ºæ ¼ã€‚\næ‰§è¡Œä»¥ä¸‹æŒ‡ä»¤å³å¯å®Œæˆéƒ¨ç½²ï¼ˆå¦‚æœæç¤ºé”™è¯¯ï¼Œå¯ä»¥çœ‹ä¸‹é¢æ³¨æ„ï¼‰ï¼š\n\u003e hexo generate \u003e hexo deploy æ³¨æ„äº‹é¡¹   æœ‰äº›ç”¨æˆ·æ²¡æœ‰è®¾ç½®Githubçš„SSHï¼Œä¼šå¯¼è‡´ä¸Šé¢ä¸¤å¥å¤±è´¥ã€‚SSHçš„ä»‹ç»å’Œè®¾ç½®æ–¹æ³•å¯ä»¥æŸ¥çœ‹ å®˜æ–¹æ•™ç¨‹,é…ç½®èµ·æ¥å¾ˆç®€å•ã€‚ å¦‚æœè‹±æ–‡çœ‹ä¸æ˜ç™½æˆ–è€…è¿‡ç¨‹ä¸­å‡ºç°å°é—®é¢˜ï¼Œ å¯ä»¥æŸ¥çœ‹æˆ‘å†™çš„ SSHè®¾ç½®æ•™ç¨‹ ï¼Œæ˜¯å¯¹å®˜æ–¹æ•™ç¨‹çš„è§£é‡Šå’Œæ‰©å±•ï¼Œ é’ˆå¯¹é…ç½®è¿‡ç¨‹ä¸­çš„å°é—®é¢˜éƒ½æœ‰è§£å†³åŠæ³•ã€‚\n  æ¯æ¬¡ä¿®æ”¹æœ¬åœ°æ–‡ä»¶ï¼Œéƒ½éœ€è¦å‘½ä»¤$ hexo generateæ‰èƒ½ä¿å­˜ã€‚è€Œä¸”æ¯æ¬¡ä½¿ç”¨å‘½ä»¤éƒ½å¿…é¡»åœ¨ Hexo æ ¹ç›®å½•ä¸‹ä½¿ç”¨ã€‚\n  å¦‚æœä½ åœ¨æ‰§è¡Œ$ hexo deloy,å¦‚æœæç¤º ERROR Deployer not found: gitï¼Œé‚£è¯´æ˜ä½ æ²¡æœ‰å®‰è£…hexo-deployer-gitä¾èµ–åŒ…ï¼Œè¿›å…¥F:\\Hexo\\node_modules å‘ç°çœŸçš„æ²¡æœ‰hexo-deployer-gitï¼Œä¸ç”¨æ‹…å¿ƒï¼Œåªéœ€è¦è¾“å…¥ä¸‹é¢å‘½ä»¤åˆ›å»ºhexo-deployer-gitä¾èµ–åŒ…ï¼Œç„¶åå†æ‰§è¡Œhexo deployå°±èƒ½ä¸Šä¼ æˆåŠŸäº†\n\u003e npm install hexo-deployer-git --save   å¦‚æœä½ æ˜¯windowsç”¨æˆ·ï¼Œé‚£ä¹ˆå½“ä½ æ‰§è¡Œ$ hexo deployå‘½ä»¤çš„æ—¶å€™ï¼Œ å¯èƒ½ä¼šå…ˆåå‡ºç°æç¤ºæ¡†è®©ä½ è¾“å…¥ä½ çš„Githubç”¨æˆ·åå’ŒGithubå¯†ç ï¼Œåªè¦è¾“å…¥æ­£ç¡®ï¼Œä¸Šä¼ å°±æ²¡æœ‰é—®é¢˜ã€‚\n  å¥½äº†ï¼Œç°åœ¨æˆ‘ä»¬çš„åšå®¢å·²ç»åœ¨Githubä¸Šé¢éƒ¨ç½²æˆåŠŸäº†ï¼Œå¯ä»¥åœ¨æµè§ˆå™¨è®¿é—®gitzhaoyang.github.ioè¯•è¯•äº†ã€‚\næç¤º ç°åœ¨Hexoæ”¯æŒæ›´åŠ ç®€å•çš„å‘½ä»¤æ ¼å¼äº†ï¼Œæ¯”å¦‚ï¼š\nhexo s == hexo server hexo g == hexo generate hexo d == hexo deploy hexo n == hexo new åç»­æˆ‘ä¼šæŠŠå¦‚ä½•é…ç½®åšå®¢ä¿¡æ¯ï¼Œå‘è¡¨æ–‡ç« ï¼Œè®¾ç½®åšå®¢ä¸»é¢˜ï¼Œä¸åŒç”µè„‘é—´è¿›è¡ŒåŒæ—¶æ›´æ–°è‡ªå·±çš„Blogçš„æ–¹æ³•ç­‰æ›´æ–°ä¸Šæ¥,æ„Ÿå…´è¶£çš„äººå¯ä»¥å…³æ³¨\n","description":"","tags":["Hexo","Github"],"title":"åœ¨Githubä¸Šé¢æ­å»ºHexoåšå®¢ï¼ˆä¸€ï¼‰ï¼šéƒ¨ç½²åˆ°Github","uri":"/posts/create-hexo-on-github-1/"}]